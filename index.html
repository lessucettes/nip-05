<!doctype html>
<html lang="en">
  <head>
    <meta name="author" content="npub1etqwgv34spk6p98s0pa9kp8zntgyevdrcl49eas7mswr8pe5pq4sfj8ues">

    <meta name="block:notes" content="5-list">
    <meta name="block:notes" content="10-grid">
    <meta name="comments" content="yes">
    <meta name="topics" content="coffee,matestr,tea,filmstr,gamestr,tunestr,wetshaving,hanafuda">

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
  </head>
  <body>
    <div id="app"></div>
    <script>
      window.wnjParams = {
        position: 'bottom',
        accent: 'neutral',
        startHidden: true,
        compactMode: true,
      };
    </script>
    <script>
"use strict";(()=>{var k_=Object.create;var gl=Object.defineProperty;var S_=Object.getOwnPropertyDescriptor;var A_=Object.getOwnPropertyNames;var $_=Object.getPrototypeOf,T_=Object.prototype.hasOwnProperty;var B_=(e,t)=>()=>(e&&(t=e(e=0)),t);var jp=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),L_=(e,t)=>{for(var n in t)gl(e,n,{get:t[n],enumerable:!0})},C_=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of A_(t))!T_.call(e,o)&&o!==n&&gl(e,o,{get:()=>t[o],enumerable:!(r=S_(t,o))||r.enumerable});return e};var ml=(e,t,n)=>(n=e!=null?k_($_(e)):{},C_(t||!e||!e.__esModule?gl(n,"default",{value:e,enumerable:!0}):n,e));var Bl=jp((UA,tg)=>{"use strict";var Q_=function(){function e(n,r){if(typeof n!="function")throw new TypeError("DataLoader must be constructed with a function which accepts "+("Array<key> and returns Promise<Array<value>>, but got: "+n+"."));this._batchLoadFn=n,this._maxBatchSize=Y_(r),this._batchScheduleFn=J_(r),this._cacheKeyFn=X_(r),this._cacheMap=e2(r),this._batch=null,this.name=t2(r)}var t=e.prototype;return t.load=function(r){if(r==null)throw new TypeError("The loader.load() function must be called with a value, "+("but got: "+String(r)+"."));var o=G_(this),i=this._cacheMap,a;if(i){a=this._cacheKeyFn(r);var u=i.get(a);if(u){var d=o.cacheHits||(o.cacheHits=[]);return new Promise(function(m){d.push(function(){m(u)})})}}o.keys.push(r);var h=new Promise(function(m,w){o.callbacks.push({resolve:m,reject:w})});return i&&i.set(a,h),h},t.loadMany=function(r){if(!eg(r))throw new TypeError("The loader.loadMany() function must be called with Array<key> "+("but got: "+r+"."));for(var o=[],i=0;i<r.length;i++)o.push(this.load(r[i]).catch(function(a){return a}));return Promise.all(o)},t.clear=function(r){var o=this._cacheMap;if(o){var i=this._cacheKeyFn(r);o.delete(i)}return this},t.clearAll=function(){var r=this._cacheMap;return r&&r.clear(),this},t.prime=function(r,o){var i=this._cacheMap;if(i){var a=this._cacheKeyFn(r);if(i.get(a)===void 0){var u;o instanceof Error?(u=Promise.reject(o),u.catch(function(){})):u=Promise.resolve(o),i.set(a,u)}}return this},e}(),K_=typeof process=="object"&&typeof process.nextTick=="function"?function(e){Al||(Al=Promise.resolve()),Al.then(function(){process.nextTick(e)})}:typeof setImmediate=="function"?function(e){setImmediate(e)}:function(e){setTimeout(e)},Al;function G_(e){var t=e._batch;if(t!==null&&!t.hasDispatched&&t.keys.length<e._maxBatchSize)return t;var n={hasDispatched:!1,keys:[],callbacks:[]};return e._batch=n,e._batchScheduleFn(function(){Z_(e,n)}),n}function Z_(e,t){if(t.hasDispatched=!0,t.keys.length===0){Tl(t);return}var n;try{n=e._batchLoadFn(t.keys)}catch(r){return $l(e,t,new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function "+("errored synchronously: "+String(r)+".")))}if(!n||typeof n.then!="function")return $l(e,t,new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did "+("not return a Promise: "+String(n)+".")));n.then(function(r){if(!eg(r))throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did "+("not return a Promise of an Array: "+String(r)+"."));if(r.length!==t.keys.length)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys."+(`

Keys:
`+String(t.keys))+(`

Values:
`+String(r)));Tl(t);for(var o=0;o<t.callbacks.length;o++){var i=r[o];i instanceof Error?t.callbacks[o].reject(i):t.callbacks[o].resolve(i)}}).catch(function(r){$l(e,t,r)})}function $l(e,t,n){Tl(t);for(var r=0;r<t.keys.length;r++)e.clear(t.keys[r]),t.callbacks[r].reject(n)}function Tl(e){if(e.cacheHits)for(var t=0;t<e.cacheHits.length;t++)e.cacheHits[t]()}function Y_(e){var t=!e||e.batch!==!1;if(!t)return 1;var n=e&&e.maxBatchSize;if(n===void 0)return 1/0;if(typeof n!="number"||n<1)throw new TypeError("maxBatchSize must be a positive number: "+n);return n}function J_(e){var t=e&&e.batchScheduleFn;if(t===void 0)return K_;if(typeof t!="function")throw new TypeError("batchScheduleFn must be a function: "+t);return t}function X_(e){var t=e&&e.cacheKeyFn;if(t===void 0)return function(n){return n};if(typeof t!="function")throw new TypeError("cacheKeyFn must be a function: "+t);return t}function e2(e){var t=!e||e.cache!==!1;if(!t)return null;var n=e&&e.cacheMap;if(n===void 0)return new Map;if(n!==null){var r=["get","set","delete","clear"],o=r.filter(function(i){return n&&typeof n[i]!="function"});if(o.length!==0)throw new TypeError("Custom cacheMap missing methods: "+o.join(", "))}return n}function t2(e){return e&&e.name?e.name:null}function eg(e){return typeof e=="object"&&e!==null&&typeof e.length=="number"&&(e.length===0||e.length>0&&Object.prototype.hasOwnProperty.call(e,e.length-1))}tg.exports=Q_});var sm=jp((im,cc)=>{(function(){function e(f){"use strict";var p={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `\xAB\xAB\xAB` and `\xBB\xBB\xBB` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(f===!1)return JSON.parse(JSON.stringify(p));var b={};for(var v in p)p.hasOwnProperty(v)&&(b[v]=p[v].defaultValue);return b}function t(){"use strict";var f=e(!0),p={};for(var b in f)f.hasOwnProperty(b)&&(p[b]=!0);return p}var n={},r={},o={},i=e(!0),a="vanilla",u={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:e(!0),allOn:t()};n.helper={},n.extensions={},n.setOption=function(f,p){"use strict";return i[f]=p,this},n.getOption=function(f){"use strict";return i[f]},n.getOptions=function(){"use strict";return i},n.resetOptions=function(){"use strict";i=e(!0)},n.setFlavor=function(f){"use strict";if(!u.hasOwnProperty(f))throw Error(f+" flavor was not found");n.resetOptions();var p=u[f];a=f;for(var b in p)p.hasOwnProperty(b)&&(i[b]=p[b])},n.getFlavor=function(){"use strict";return a},n.getFlavorOptions=function(f){"use strict";if(u.hasOwnProperty(f))return u[f]},n.getDefaultOptions=function(f){"use strict";return e(f)},n.subParser=function(f,p){"use strict";if(n.helper.isString(f))if(typeof p<"u")r[f]=p;else{if(r.hasOwnProperty(f))return r[f];throw Error("SubParser named "+f+" not registered!")}},n.extension=function(f,p){"use strict";if(!n.helper.isString(f))throw Error("Extension 'name' must be a string");if(f=n.helper.stdExtName(f),n.helper.isUndefined(p)){if(!o.hasOwnProperty(f))throw Error("Extension named "+f+" is not registered!");return o[f]}else{typeof p=="function"&&(p=p()),n.helper.isArray(p)||(p=[p]);var b=d(p,f);if(b.valid)o[f]=p;else throw Error(b.error)}},n.getAllExtensions=function(){"use strict";return o},n.removeExtension=function(f){"use strict";delete o[f]},n.resetExtensions=function(){"use strict";o={}};function d(f,p){"use strict";var b=p?"Error in "+p+" extension->":"Error in unnamed extension",v={valid:!0,error:""};n.helper.isArray(f)||(f=[f]);for(var k=0;k<f.length;++k){var A=b+" sub-extension "+k+": ",T=f[k];if(typeof T!="object")return v.valid=!1,v.error=A+"must be an object, but "+typeof T+" given",v;if(!n.helper.isString(T.type))return v.valid=!1,v.error=A+'property "type" must be a string, but '+typeof T.type+" given",v;var U=T.type=T.type.toLowerCase();if(U==="language"&&(U=T.type="lang"),U==="html"&&(U=T.type="output"),U!=="lang"&&U!=="output"&&U!=="listener")return v.valid=!1,v.error=A+"type "+U+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',v;if(U==="listener"){if(n.helper.isUndefined(T.listeners))return v.valid=!1,v.error=A+'. Extensions of type "listener" must have a property called "listeners"',v}else if(n.helper.isUndefined(T.filter)&&n.helper.isUndefined(T.regex))return v.valid=!1,v.error=A+U+' extensions must define either a "regex" property or a "filter" method',v;if(T.listeners){if(typeof T.listeners!="object")return v.valid=!1,v.error=A+'"listeners" property must be an object but '+typeof T.listeners+" given",v;for(var C in T.listeners)if(T.listeners.hasOwnProperty(C)&&typeof T.listeners[C]!="function")return v.valid=!1,v.error=A+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+C+" must be a function but "+typeof T.listeners[C]+" given",v}if(T.filter){if(typeof T.filter!="function")return v.valid=!1,v.error=A+'"filter" must be a function, but '+typeof T.filter+" given",v}else if(T.regex){if(n.helper.isString(T.regex)&&(T.regex=new RegExp(T.regex,"g")),!(T.regex instanceof RegExp))return v.valid=!1,v.error=A+'"regex" property must either be a string or a RegExp object, but '+typeof T.regex+" given",v;if(n.helper.isUndefined(T.replace))return v.valid=!1,v.error=A+'"regex" extensions must implement a replace string or function',v}}return v}n.validateExtension=function(f){"use strict";var p=d(f,null);return p.valid?!0:(console.warn(p.error),!1)},n.hasOwnProperty("helper")||(n.helper={}),n.helper.isString=function(f){"use strict";return typeof f=="string"||f instanceof String},n.helper.isFunction=function(f){"use strict";var p={};return f&&p.toString.call(f)==="[object Function]"},n.helper.isArray=function(f){"use strict";return Array.isArray(f)},n.helper.isUndefined=function(f){"use strict";return typeof f>"u"},n.helper.forEach=function(f,p){"use strict";if(n.helper.isUndefined(f))throw new Error("obj param is required");if(n.helper.isUndefined(p))throw new Error("callback param is required");if(!n.helper.isFunction(p))throw new Error("callback param must be a function/closure");if(typeof f.forEach=="function")f.forEach(p);else if(n.helper.isArray(f))for(var b=0;b<f.length;b++)p(f[b],b,f);else if(typeof f=="object")for(var v in f)f.hasOwnProperty(v)&&p(f[v],v,f);else throw new Error("obj does not seem to be an array or an iterable object")},n.helper.stdExtName=function(f){"use strict";return f.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function h(f,p){"use strict";var b=p.charCodeAt(0);return"\xA8E"+b+"E"}n.helper.escapeCharactersCallback=h,n.helper.escapeCharacters=function(f,p,b){"use strict";var v="(["+p.replace(/([\[\]\\])/g,"\\$1")+"])";b&&(v="\\\\"+v);var k=new RegExp(v,"g");return f=f.replace(k,h),f},n.helper.unescapeHTMLEntities=function(f){"use strict";return f.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var m=function(f,p,b,v){"use strict";var k=v||"",A=k.indexOf("g")>-1,T=new RegExp(p+"|"+b,"g"+k.replace(/g/g,"")),U=new RegExp(p,k.replace(/g/g,"")),C=[],$,F,q,E,M;do for($=0;q=T.exec(f);)if(U.test(q[0]))$++||(F=T.lastIndex,E=F-q[0].length);else if($&&!--$){M=q.index+q[0].length;var V={left:{start:E,end:F},match:{start:F,end:q.index},right:{start:q.index,end:M},wholeMatch:{start:E,end:M}};if(C.push(V),!A)return C}while($&&(T.lastIndex=F));return C};n.helper.matchRecursiveRegExp=function(f,p,b,v){"use strict";for(var k=m(f,p,b,v),A=[],T=0;T<k.length;++T)A.push([f.slice(k[T].wholeMatch.start,k[T].wholeMatch.end),f.slice(k[T].match.start,k[T].match.end),f.slice(k[T].left.start,k[T].left.end),f.slice(k[T].right.start,k[T].right.end)]);return A},n.helper.replaceRecursiveRegExp=function(f,p,b,v,k){"use strict";if(!n.helper.isFunction(p)){var A=p;p=function(){return A}}var T=m(f,b,v,k),U=f,C=T.length;if(C>0){var $=[];T[0].wholeMatch.start!==0&&$.push(f.slice(0,T[0].wholeMatch.start));for(var F=0;F<C;++F)$.push(p(f.slice(T[F].wholeMatch.start,T[F].wholeMatch.end),f.slice(T[F].match.start,T[F].match.end),f.slice(T[F].left.start,T[F].left.end),f.slice(T[F].right.start,T[F].right.end))),F<C-1&&$.push(f.slice(T[F].wholeMatch.end,T[F+1].wholeMatch.start));T[C-1].wholeMatch.end<f.length&&$.push(f.slice(T[C-1].wholeMatch.end)),U=$.join("")}return U},n.helper.regexIndexOf=function(f,p,b){"use strict";if(!n.helper.isString(f))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(p instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var v=f.substring(b||0).search(p);return v>=0?v+(b||0):v},n.helper.splitAtIndex=function(f,p){"use strict";if(!n.helper.isString(f))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[f.substring(0,p),f.substring(p)]},n.helper.encodeEmailAddress=function(f){"use strict";var p=[function(b){return"&#"+b.charCodeAt(0)+";"},function(b){return"&#x"+b.charCodeAt(0).toString(16)+";"},function(b){return b}];return f=f.replace(/./g,function(b){if(b==="@")b=p[Math.floor(Math.random()*2)](b);else{var v=Math.random();b=v>.9?p[2](b):v>.45?p[1](b):p[0](b)}return b}),f},n.helper.padEnd=function(p,b,v){"use strict";return b=b>>0,v=String(v||" "),p.length>b?String(p):(b=b-p.length,b>v.length&&(v+=v.repeat(b/v.length)),String(p)+v.slice(0,b))},typeof console>"u"&&(console={warn:function(f){"use strict";alert(f)},log:function(f){"use strict";alert(f)},error:function(f){"use strict";throw f}}),n.helper.regexes={asteriskDashAndColon:/([*_:~])/g},n.helper.emojis={"+1":"\u{1F44D}","-1":"\u{1F44E}",100:"\u{1F4AF}",1234:"\u{1F522}","1st_place_medal":"\u{1F947}","2nd_place_medal":"\u{1F948}","3rd_place_medal":"\u{1F949}","8ball":"\u{1F3B1}",a:"\u{1F170}\uFE0F",ab:"\u{1F18E}",abc:"\u{1F524}",abcd:"\u{1F521}",accept:"\u{1F251}",aerial_tramway:"\u{1F6A1}",airplane:"\u2708\uFE0F",alarm_clock:"\u23F0",alembic:"\u2697\uFE0F",alien:"\u{1F47D}",ambulance:"\u{1F691}",amphora:"\u{1F3FA}",anchor:"\u2693\uFE0F",angel:"\u{1F47C}",anger:"\u{1F4A2}",angry:"\u{1F620}",anguished:"\u{1F627}",ant:"\u{1F41C}",apple:"\u{1F34E}",aquarius:"\u2652\uFE0F",aries:"\u2648\uFE0F",arrow_backward:"\u25C0\uFE0F",arrow_double_down:"\u23EC",arrow_double_up:"\u23EB",arrow_down:"\u2B07\uFE0F",arrow_down_small:"\u{1F53D}",arrow_forward:"\u25B6\uFE0F",arrow_heading_down:"\u2935\uFE0F",arrow_heading_up:"\u2934\uFE0F",arrow_left:"\u2B05\uFE0F",arrow_lower_left:"\u2199\uFE0F",arrow_lower_right:"\u2198\uFE0F",arrow_right:"\u27A1\uFE0F",arrow_right_hook:"\u21AA\uFE0F",arrow_up:"\u2B06\uFE0F",arrow_up_down:"\u2195\uFE0F",arrow_up_small:"\u{1F53C}",arrow_upper_left:"\u2196\uFE0F",arrow_upper_right:"\u2197\uFE0F",arrows_clockwise:"\u{1F503}",arrows_counterclockwise:"\u{1F504}",art:"\u{1F3A8}",articulated_lorry:"\u{1F69B}",artificial_satellite:"\u{1F6F0}",astonished:"\u{1F632}",athletic_shoe:"\u{1F45F}",atm:"\u{1F3E7}",atom_symbol:"\u269B\uFE0F",avocado:"\u{1F951}",b:"\u{1F171}\uFE0F",baby:"\u{1F476}",baby_bottle:"\u{1F37C}",baby_chick:"\u{1F424}",baby_symbol:"\u{1F6BC}",back:"\u{1F519}",bacon:"\u{1F953}",badminton:"\u{1F3F8}",baggage_claim:"\u{1F6C4}",baguette_bread:"\u{1F956}",balance_scale:"\u2696\uFE0F",balloon:"\u{1F388}",ballot_box:"\u{1F5F3}",ballot_box_with_check:"\u2611\uFE0F",bamboo:"\u{1F38D}",banana:"\u{1F34C}",bangbang:"\u203C\uFE0F",bank:"\u{1F3E6}",bar_chart:"\u{1F4CA}",barber:"\u{1F488}",baseball:"\u26BE\uFE0F",basketball:"\u{1F3C0}",basketball_man:"\u26F9\uFE0F",basketball_woman:"\u26F9\uFE0F&zwj;\u2640\uFE0F",bat:"\u{1F987}",bath:"\u{1F6C0}",bathtub:"\u{1F6C1}",battery:"\u{1F50B}",beach_umbrella:"\u{1F3D6}",bear:"\u{1F43B}",bed:"\u{1F6CF}",bee:"\u{1F41D}",beer:"\u{1F37A}",beers:"\u{1F37B}",beetle:"\u{1F41E}",beginner:"\u{1F530}",bell:"\u{1F514}",bellhop_bell:"\u{1F6CE}",bento:"\u{1F371}",biking_man:"\u{1F6B4}",bike:"\u{1F6B2}",biking_woman:"\u{1F6B4}&zwj;\u2640\uFE0F",bikini:"\u{1F459}",biohazard:"\u2623\uFE0F",bird:"\u{1F426}",birthday:"\u{1F382}",black_circle:"\u26AB\uFE0F",black_flag:"\u{1F3F4}",black_heart:"\u{1F5A4}",black_joker:"\u{1F0CF}",black_large_square:"\u2B1B\uFE0F",black_medium_small_square:"\u25FE\uFE0F",black_medium_square:"\u25FC\uFE0F",black_nib:"\u2712\uFE0F",black_small_square:"\u25AA\uFE0F",black_square_button:"\u{1F532}",blonde_man:"\u{1F471}",blonde_woman:"\u{1F471}&zwj;\u2640\uFE0F",blossom:"\u{1F33C}",blowfish:"\u{1F421}",blue_book:"\u{1F4D8}",blue_car:"\u{1F699}",blue_heart:"\u{1F499}",blush:"\u{1F60A}",boar:"\u{1F417}",boat:"\u26F5\uFE0F",bomb:"\u{1F4A3}",book:"\u{1F4D6}",bookmark:"\u{1F516}",bookmark_tabs:"\u{1F4D1}",books:"\u{1F4DA}",boom:"\u{1F4A5}",boot:"\u{1F462}",bouquet:"\u{1F490}",bowing_man:"\u{1F647}",bow_and_arrow:"\u{1F3F9}",bowing_woman:"\u{1F647}&zwj;\u2640\uFE0F",bowling:"\u{1F3B3}",boxing_glove:"\u{1F94A}",boy:"\u{1F466}",bread:"\u{1F35E}",bride_with_veil:"\u{1F470}",bridge_at_night:"\u{1F309}",briefcase:"\u{1F4BC}",broken_heart:"\u{1F494}",bug:"\u{1F41B}",building_construction:"\u{1F3D7}",bulb:"\u{1F4A1}",bullettrain_front:"\u{1F685}",bullettrain_side:"\u{1F684}",burrito:"\u{1F32F}",bus:"\u{1F68C}",business_suit_levitating:"\u{1F574}",busstop:"\u{1F68F}",bust_in_silhouette:"\u{1F464}",busts_in_silhouette:"\u{1F465}",butterfly:"\u{1F98B}",cactus:"\u{1F335}",cake:"\u{1F370}",calendar:"\u{1F4C6}",call_me_hand:"\u{1F919}",calling:"\u{1F4F2}",camel:"\u{1F42B}",camera:"\u{1F4F7}",camera_flash:"\u{1F4F8}",camping:"\u{1F3D5}",cancer:"\u264B\uFE0F",candle:"\u{1F56F}",candy:"\u{1F36C}",canoe:"\u{1F6F6}",capital_abcd:"\u{1F520}",capricorn:"\u2651\uFE0F",car:"\u{1F697}",card_file_box:"\u{1F5C3}",card_index:"\u{1F4C7}",card_index_dividers:"\u{1F5C2}",carousel_horse:"\u{1F3A0}",carrot:"\u{1F955}",cat:"\u{1F431}",cat2:"\u{1F408}",cd:"\u{1F4BF}",chains:"\u26D3",champagne:"\u{1F37E}",chart:"\u{1F4B9}",chart_with_downwards_trend:"\u{1F4C9}",chart_with_upwards_trend:"\u{1F4C8}",checkered_flag:"\u{1F3C1}",cheese:"\u{1F9C0}",cherries:"\u{1F352}",cherry_blossom:"\u{1F338}",chestnut:"\u{1F330}",chicken:"\u{1F414}",children_crossing:"\u{1F6B8}",chipmunk:"\u{1F43F}",chocolate_bar:"\u{1F36B}",christmas_tree:"\u{1F384}",church:"\u26EA\uFE0F",cinema:"\u{1F3A6}",circus_tent:"\u{1F3AA}",city_sunrise:"\u{1F307}",city_sunset:"\u{1F306}",cityscape:"\u{1F3D9}",cl:"\u{1F191}",clamp:"\u{1F5DC}",clap:"\u{1F44F}",clapper:"\u{1F3AC}",classical_building:"\u{1F3DB}",clinking_glasses:"\u{1F942}",clipboard:"\u{1F4CB}",clock1:"\u{1F550}",clock10:"\u{1F559}",clock1030:"\u{1F565}",clock11:"\u{1F55A}",clock1130:"\u{1F566}",clock12:"\u{1F55B}",clock1230:"\u{1F567}",clock130:"\u{1F55C}",clock2:"\u{1F551}",clock230:"\u{1F55D}",clock3:"\u{1F552}",clock330:"\u{1F55E}",clock4:"\u{1F553}",clock430:"\u{1F55F}",clock5:"\u{1F554}",clock530:"\u{1F560}",clock6:"\u{1F555}",clock630:"\u{1F561}",clock7:"\u{1F556}",clock730:"\u{1F562}",clock8:"\u{1F557}",clock830:"\u{1F563}",clock9:"\u{1F558}",clock930:"\u{1F564}",closed_book:"\u{1F4D5}",closed_lock_with_key:"\u{1F510}",closed_umbrella:"\u{1F302}",cloud:"\u2601\uFE0F",cloud_with_lightning:"\u{1F329}",cloud_with_lightning_and_rain:"\u26C8",cloud_with_rain:"\u{1F327}",cloud_with_snow:"\u{1F328}",clown_face:"\u{1F921}",clubs:"\u2663\uFE0F",cocktail:"\u{1F378}",coffee:"\u2615\uFE0F",coffin:"\u26B0\uFE0F",cold_sweat:"\u{1F630}",comet:"\u2604\uFE0F",computer:"\u{1F4BB}",computer_mouse:"\u{1F5B1}",confetti_ball:"\u{1F38A}",confounded:"\u{1F616}",confused:"\u{1F615}",congratulations:"\u3297\uFE0F",construction:"\u{1F6A7}",construction_worker_man:"\u{1F477}",construction_worker_woman:"\u{1F477}&zwj;\u2640\uFE0F",control_knobs:"\u{1F39B}",convenience_store:"\u{1F3EA}",cookie:"\u{1F36A}",cool:"\u{1F192}",policeman:"\u{1F46E}",copyright:"\xA9\uFE0F",corn:"\u{1F33D}",couch_and_lamp:"\u{1F6CB}",couple:"\u{1F46B}",couple_with_heart_woman_man:"\u{1F491}",couple_with_heart_man_man:"\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F468}",couple_with_heart_woman_woman:"\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F469}",couplekiss_man_man:"\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F468}",couplekiss_man_woman:"\u{1F48F}",couplekiss_woman_woman:"\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F469}",cow:"\u{1F42E}",cow2:"\u{1F404}",cowboy_hat_face:"\u{1F920}",crab:"\u{1F980}",crayon:"\u{1F58D}",credit_card:"\u{1F4B3}",crescent_moon:"\u{1F319}",cricket:"\u{1F3CF}",crocodile:"\u{1F40A}",croissant:"\u{1F950}",crossed_fingers:"\u{1F91E}",crossed_flags:"\u{1F38C}",crossed_swords:"\u2694\uFE0F",crown:"\u{1F451}",cry:"\u{1F622}",crying_cat_face:"\u{1F63F}",crystal_ball:"\u{1F52E}",cucumber:"\u{1F952}",cupid:"\u{1F498}",curly_loop:"\u27B0",currency_exchange:"\u{1F4B1}",curry:"\u{1F35B}",custard:"\u{1F36E}",customs:"\u{1F6C3}",cyclone:"\u{1F300}",dagger:"\u{1F5E1}",dancer:"\u{1F483}",dancing_women:"\u{1F46F}",dancing_men:"\u{1F46F}&zwj;\u2642\uFE0F",dango:"\u{1F361}",dark_sunglasses:"\u{1F576}",dart:"\u{1F3AF}",dash:"\u{1F4A8}",date:"\u{1F4C5}",deciduous_tree:"\u{1F333}",deer:"\u{1F98C}",department_store:"\u{1F3EC}",derelict_house:"\u{1F3DA}",desert:"\u{1F3DC}",desert_island:"\u{1F3DD}",desktop_computer:"\u{1F5A5}",male_detective:"\u{1F575}\uFE0F",diamond_shape_with_a_dot_inside:"\u{1F4A0}",diamonds:"\u2666\uFE0F",disappointed:"\u{1F61E}",disappointed_relieved:"\u{1F625}",dizzy:"\u{1F4AB}",dizzy_face:"\u{1F635}",do_not_litter:"\u{1F6AF}",dog:"\u{1F436}",dog2:"\u{1F415}",dollar:"\u{1F4B5}",dolls:"\u{1F38E}",dolphin:"\u{1F42C}",door:"\u{1F6AA}",doughnut:"\u{1F369}",dove:"\u{1F54A}",dragon:"\u{1F409}",dragon_face:"\u{1F432}",dress:"\u{1F457}",dromedary_camel:"\u{1F42A}",drooling_face:"\u{1F924}",droplet:"\u{1F4A7}",drum:"\u{1F941}",duck:"\u{1F986}",dvd:"\u{1F4C0}","e-mail":"\u{1F4E7}",eagle:"\u{1F985}",ear:"\u{1F442}",ear_of_rice:"\u{1F33E}",earth_africa:"\u{1F30D}",earth_americas:"\u{1F30E}",earth_asia:"\u{1F30F}",egg:"\u{1F95A}",eggplant:"\u{1F346}",eight_pointed_black_star:"\u2734\uFE0F",eight_spoked_asterisk:"\u2733\uFE0F",electric_plug:"\u{1F50C}",elephant:"\u{1F418}",email:"\u2709\uFE0F",end:"\u{1F51A}",envelope_with_arrow:"\u{1F4E9}",euro:"\u{1F4B6}",european_castle:"\u{1F3F0}",european_post_office:"\u{1F3E4}",evergreen_tree:"\u{1F332}",exclamation:"\u2757\uFE0F",expressionless:"\u{1F611}",eye:"\u{1F441}",eye_speech_bubble:"\u{1F441}&zwj;\u{1F5E8}",eyeglasses:"\u{1F453}",eyes:"\u{1F440}",face_with_head_bandage:"\u{1F915}",face_with_thermometer:"\u{1F912}",fist_oncoming:"\u{1F44A}",factory:"\u{1F3ED}",fallen_leaf:"\u{1F342}",family_man_woman_boy:"\u{1F46A}",family_man_boy:"\u{1F468}&zwj;\u{1F466}",family_man_boy_boy:"\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_girl:"\u{1F468}&zwj;\u{1F467}",family_man_girl_boy:"\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_girl_girl:"\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",family_man_man_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}",family_man_man_boy_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_man_girl:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}",family_man_man_girl_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_man_girl_girl:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",family_man_woman_boy_boy:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_woman_girl:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}",family_man_woman_girl_boy:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_woman_girl_girl:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",family_woman_boy:"\u{1F469}&zwj;\u{1F466}",family_woman_boy_boy:"\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_woman_girl:"\u{1F469}&zwj;\u{1F467}",family_woman_girl_boy:"\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_woman_girl_girl:"\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",family_woman_woman_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}",family_woman_woman_boy_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_woman_woman_girl:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}",family_woman_woman_girl_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_woman_woman_girl_girl:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",fast_forward:"\u23E9",fax:"\u{1F4E0}",fearful:"\u{1F628}",feet:"\u{1F43E}",female_detective:"\u{1F575}\uFE0F&zwj;\u2640\uFE0F",ferris_wheel:"\u{1F3A1}",ferry:"\u26F4",field_hockey:"\u{1F3D1}",file_cabinet:"\u{1F5C4}",file_folder:"\u{1F4C1}",film_projector:"\u{1F4FD}",film_strip:"\u{1F39E}",fire:"\u{1F525}",fire_engine:"\u{1F692}",fireworks:"\u{1F386}",first_quarter_moon:"\u{1F313}",first_quarter_moon_with_face:"\u{1F31B}",fish:"\u{1F41F}",fish_cake:"\u{1F365}",fishing_pole_and_fish:"\u{1F3A3}",fist_raised:"\u270A",fist_left:"\u{1F91B}",fist_right:"\u{1F91C}",flags:"\u{1F38F}",flashlight:"\u{1F526}",fleur_de_lis:"\u269C\uFE0F",flight_arrival:"\u{1F6EC}",flight_departure:"\u{1F6EB}",floppy_disk:"\u{1F4BE}",flower_playing_cards:"\u{1F3B4}",flushed:"\u{1F633}",fog:"\u{1F32B}",foggy:"\u{1F301}",football:"\u{1F3C8}",footprints:"\u{1F463}",fork_and_knife:"\u{1F374}",fountain:"\u26F2\uFE0F",fountain_pen:"\u{1F58B}",four_leaf_clover:"\u{1F340}",fox_face:"\u{1F98A}",framed_picture:"\u{1F5BC}",free:"\u{1F193}",fried_egg:"\u{1F373}",fried_shrimp:"\u{1F364}",fries:"\u{1F35F}",frog:"\u{1F438}",frowning:"\u{1F626}",frowning_face:"\u2639\uFE0F",frowning_man:"\u{1F64D}&zwj;\u2642\uFE0F",frowning_woman:"\u{1F64D}",middle_finger:"\u{1F595}",fuelpump:"\u26FD\uFE0F",full_moon:"\u{1F315}",full_moon_with_face:"\u{1F31D}",funeral_urn:"\u26B1\uFE0F",game_die:"\u{1F3B2}",gear:"\u2699\uFE0F",gem:"\u{1F48E}",gemini:"\u264A\uFE0F",ghost:"\u{1F47B}",gift:"\u{1F381}",gift_heart:"\u{1F49D}",girl:"\u{1F467}",globe_with_meridians:"\u{1F310}",goal_net:"\u{1F945}",goat:"\u{1F410}",golf:"\u26F3\uFE0F",golfing_man:"\u{1F3CC}\uFE0F",golfing_woman:"\u{1F3CC}\uFE0F&zwj;\u2640\uFE0F",gorilla:"\u{1F98D}",grapes:"\u{1F347}",green_apple:"\u{1F34F}",green_book:"\u{1F4D7}",green_heart:"\u{1F49A}",green_salad:"\u{1F957}",grey_exclamation:"\u2755",grey_question:"\u2754",grimacing:"\u{1F62C}",grin:"\u{1F601}",grinning:"\u{1F600}",guardsman:"\u{1F482}",guardswoman:"\u{1F482}&zwj;\u2640\uFE0F",guitar:"\u{1F3B8}",gun:"\u{1F52B}",haircut_woman:"\u{1F487}",haircut_man:"\u{1F487}&zwj;\u2642\uFE0F",hamburger:"\u{1F354}",hammer:"\u{1F528}",hammer_and_pick:"\u2692",hammer_and_wrench:"\u{1F6E0}",hamster:"\u{1F439}",hand:"\u270B",handbag:"\u{1F45C}",handshake:"\u{1F91D}",hankey:"\u{1F4A9}",hatched_chick:"\u{1F425}",hatching_chick:"\u{1F423}",headphones:"\u{1F3A7}",hear_no_evil:"\u{1F649}",heart:"\u2764\uFE0F",heart_decoration:"\u{1F49F}",heart_eyes:"\u{1F60D}",heart_eyes_cat:"\u{1F63B}",heartbeat:"\u{1F493}",heartpulse:"\u{1F497}",hearts:"\u2665\uFE0F",heavy_check_mark:"\u2714\uFE0F",heavy_division_sign:"\u2797",heavy_dollar_sign:"\u{1F4B2}",heavy_heart_exclamation:"\u2763\uFE0F",heavy_minus_sign:"\u2796",heavy_multiplication_x:"\u2716\uFE0F",heavy_plus_sign:"\u2795",helicopter:"\u{1F681}",herb:"\u{1F33F}",hibiscus:"\u{1F33A}",high_brightness:"\u{1F506}",high_heel:"\u{1F460}",hocho:"\u{1F52A}",hole:"\u{1F573}",honey_pot:"\u{1F36F}",horse:"\u{1F434}",horse_racing:"\u{1F3C7}",hospital:"\u{1F3E5}",hot_pepper:"\u{1F336}",hotdog:"\u{1F32D}",hotel:"\u{1F3E8}",hotsprings:"\u2668\uFE0F",hourglass:"\u231B\uFE0F",hourglass_flowing_sand:"\u23F3",house:"\u{1F3E0}",house_with_garden:"\u{1F3E1}",houses:"\u{1F3D8}",hugs:"\u{1F917}",hushed:"\u{1F62F}",ice_cream:"\u{1F368}",ice_hockey:"\u{1F3D2}",ice_skate:"\u26F8",icecream:"\u{1F366}",id:"\u{1F194}",ideograph_advantage:"\u{1F250}",imp:"\u{1F47F}",inbox_tray:"\u{1F4E5}",incoming_envelope:"\u{1F4E8}",tipping_hand_woman:"\u{1F481}",information_source:"\u2139\uFE0F",innocent:"\u{1F607}",interrobang:"\u2049\uFE0F",iphone:"\u{1F4F1}",izakaya_lantern:"\u{1F3EE}",jack_o_lantern:"\u{1F383}",japan:"\u{1F5FE}",japanese_castle:"\u{1F3EF}",japanese_goblin:"\u{1F47A}",japanese_ogre:"\u{1F479}",jeans:"\u{1F456}",joy:"\u{1F602}",joy_cat:"\u{1F639}",joystick:"\u{1F579}",kaaba:"\u{1F54B}",key:"\u{1F511}",keyboard:"\u2328\uFE0F",keycap_ten:"\u{1F51F}",kick_scooter:"\u{1F6F4}",kimono:"\u{1F458}",kiss:"\u{1F48B}",kissing:"\u{1F617}",kissing_cat:"\u{1F63D}",kissing_closed_eyes:"\u{1F61A}",kissing_heart:"\u{1F618}",kissing_smiling_eyes:"\u{1F619}",kiwi_fruit:"\u{1F95D}",koala:"\u{1F428}",koko:"\u{1F201}",label:"\u{1F3F7}",large_blue_circle:"\u{1F535}",large_blue_diamond:"\u{1F537}",large_orange_diamond:"\u{1F536}",last_quarter_moon:"\u{1F317}",last_quarter_moon_with_face:"\u{1F31C}",latin_cross:"\u271D\uFE0F",laughing:"\u{1F606}",leaves:"\u{1F343}",ledger:"\u{1F4D2}",left_luggage:"\u{1F6C5}",left_right_arrow:"\u2194\uFE0F",leftwards_arrow_with_hook:"\u21A9\uFE0F",lemon:"\u{1F34B}",leo:"\u264C\uFE0F",leopard:"\u{1F406}",level_slider:"\u{1F39A}",libra:"\u264E\uFE0F",light_rail:"\u{1F688}",link:"\u{1F517}",lion:"\u{1F981}",lips:"\u{1F444}",lipstick:"\u{1F484}",lizard:"\u{1F98E}",lock:"\u{1F512}",lock_with_ink_pen:"\u{1F50F}",lollipop:"\u{1F36D}",loop:"\u27BF",loud_sound:"\u{1F50A}",loudspeaker:"\u{1F4E2}",love_hotel:"\u{1F3E9}",love_letter:"\u{1F48C}",low_brightness:"\u{1F505}",lying_face:"\u{1F925}",m:"\u24C2\uFE0F",mag:"\u{1F50D}",mag_right:"\u{1F50E}",mahjong:"\u{1F004}\uFE0F",mailbox:"\u{1F4EB}",mailbox_closed:"\u{1F4EA}",mailbox_with_mail:"\u{1F4EC}",mailbox_with_no_mail:"\u{1F4ED}",man:"\u{1F468}",man_artist:"\u{1F468}&zwj;\u{1F3A8}",man_astronaut:"\u{1F468}&zwj;\u{1F680}",man_cartwheeling:"\u{1F938}&zwj;\u2642\uFE0F",man_cook:"\u{1F468}&zwj;\u{1F373}",man_dancing:"\u{1F57A}",man_facepalming:"\u{1F926}&zwj;\u2642\uFE0F",man_factory_worker:"\u{1F468}&zwj;\u{1F3ED}",man_farmer:"\u{1F468}&zwj;\u{1F33E}",man_firefighter:"\u{1F468}&zwj;\u{1F692}",man_health_worker:"\u{1F468}&zwj;\u2695\uFE0F",man_in_tuxedo:"\u{1F935}",man_judge:"\u{1F468}&zwj;\u2696\uFE0F",man_juggling:"\u{1F939}&zwj;\u2642\uFE0F",man_mechanic:"\u{1F468}&zwj;\u{1F527}",man_office_worker:"\u{1F468}&zwj;\u{1F4BC}",man_pilot:"\u{1F468}&zwj;\u2708\uFE0F",man_playing_handball:"\u{1F93E}&zwj;\u2642\uFE0F",man_playing_water_polo:"\u{1F93D}&zwj;\u2642\uFE0F",man_scientist:"\u{1F468}&zwj;\u{1F52C}",man_shrugging:"\u{1F937}&zwj;\u2642\uFE0F",man_singer:"\u{1F468}&zwj;\u{1F3A4}",man_student:"\u{1F468}&zwj;\u{1F393}",man_teacher:"\u{1F468}&zwj;\u{1F3EB}",man_technologist:"\u{1F468}&zwj;\u{1F4BB}",man_with_gua_pi_mao:"\u{1F472}",man_with_turban:"\u{1F473}",tangerine:"\u{1F34A}",mans_shoe:"\u{1F45E}",mantelpiece_clock:"\u{1F570}",maple_leaf:"\u{1F341}",martial_arts_uniform:"\u{1F94B}",mask:"\u{1F637}",massage_woman:"\u{1F486}",massage_man:"\u{1F486}&zwj;\u2642\uFE0F",meat_on_bone:"\u{1F356}",medal_military:"\u{1F396}",medal_sports:"\u{1F3C5}",mega:"\u{1F4E3}",melon:"\u{1F348}",memo:"\u{1F4DD}",men_wrestling:"\u{1F93C}&zwj;\u2642\uFE0F",menorah:"\u{1F54E}",mens:"\u{1F6B9}",metal:"\u{1F918}",metro:"\u{1F687}",microphone:"\u{1F3A4}",microscope:"\u{1F52C}",milk_glass:"\u{1F95B}",milky_way:"\u{1F30C}",minibus:"\u{1F690}",minidisc:"\u{1F4BD}",mobile_phone_off:"\u{1F4F4}",money_mouth_face:"\u{1F911}",money_with_wings:"\u{1F4B8}",moneybag:"\u{1F4B0}",monkey:"\u{1F412}",monkey_face:"\u{1F435}",monorail:"\u{1F69D}",moon:"\u{1F314}",mortar_board:"\u{1F393}",mosque:"\u{1F54C}",motor_boat:"\u{1F6E5}",motor_scooter:"\u{1F6F5}",motorcycle:"\u{1F3CD}",motorway:"\u{1F6E3}",mount_fuji:"\u{1F5FB}",mountain:"\u26F0",mountain_biking_man:"\u{1F6B5}",mountain_biking_woman:"\u{1F6B5}&zwj;\u2640\uFE0F",mountain_cableway:"\u{1F6A0}",mountain_railway:"\u{1F69E}",mountain_snow:"\u{1F3D4}",mouse:"\u{1F42D}",mouse2:"\u{1F401}",movie_camera:"\u{1F3A5}",moyai:"\u{1F5FF}",mrs_claus:"\u{1F936}",muscle:"\u{1F4AA}",mushroom:"\u{1F344}",musical_keyboard:"\u{1F3B9}",musical_note:"\u{1F3B5}",musical_score:"\u{1F3BC}",mute:"\u{1F507}",nail_care:"\u{1F485}",name_badge:"\u{1F4DB}",national_park:"\u{1F3DE}",nauseated_face:"\u{1F922}",necktie:"\u{1F454}",negative_squared_cross_mark:"\u274E",nerd_face:"\u{1F913}",neutral_face:"\u{1F610}",new:"\u{1F195}",new_moon:"\u{1F311}",new_moon_with_face:"\u{1F31A}",newspaper:"\u{1F4F0}",newspaper_roll:"\u{1F5DE}",next_track_button:"\u23ED",ng:"\u{1F196}",no_good_man:"\u{1F645}&zwj;\u2642\uFE0F",no_good_woman:"\u{1F645}",night_with_stars:"\u{1F303}",no_bell:"\u{1F515}",no_bicycles:"\u{1F6B3}",no_entry:"\u26D4\uFE0F",no_entry_sign:"\u{1F6AB}",no_mobile_phones:"\u{1F4F5}",no_mouth:"\u{1F636}",no_pedestrians:"\u{1F6B7}",no_smoking:"\u{1F6AD}","non-potable_water":"\u{1F6B1}",nose:"\u{1F443}",notebook:"\u{1F4D3}",notebook_with_decorative_cover:"\u{1F4D4}",notes:"\u{1F3B6}",nut_and_bolt:"\u{1F529}",o:"\u2B55\uFE0F",o2:"\u{1F17E}\uFE0F",ocean:"\u{1F30A}",octopus:"\u{1F419}",oden:"\u{1F362}",office:"\u{1F3E2}",oil_drum:"\u{1F6E2}",ok:"\u{1F197}",ok_hand:"\u{1F44C}",ok_man:"\u{1F646}&zwj;\u2642\uFE0F",ok_woman:"\u{1F646}",old_key:"\u{1F5DD}",older_man:"\u{1F474}",older_woman:"\u{1F475}",om:"\u{1F549}",on:"\u{1F51B}",oncoming_automobile:"\u{1F698}",oncoming_bus:"\u{1F68D}",oncoming_police_car:"\u{1F694}",oncoming_taxi:"\u{1F696}",open_file_folder:"\u{1F4C2}",open_hands:"\u{1F450}",open_mouth:"\u{1F62E}",open_umbrella:"\u2602\uFE0F",ophiuchus:"\u26CE",orange_book:"\u{1F4D9}",orthodox_cross:"\u2626\uFE0F",outbox_tray:"\u{1F4E4}",owl:"\u{1F989}",ox:"\u{1F402}",package:"\u{1F4E6}",page_facing_up:"\u{1F4C4}",page_with_curl:"\u{1F4C3}",pager:"\u{1F4DF}",paintbrush:"\u{1F58C}",palm_tree:"\u{1F334}",pancakes:"\u{1F95E}",panda_face:"\u{1F43C}",paperclip:"\u{1F4CE}",paperclips:"\u{1F587}",parasol_on_ground:"\u26F1",parking:"\u{1F17F}\uFE0F",part_alternation_mark:"\u303D\uFE0F",partly_sunny:"\u26C5\uFE0F",passenger_ship:"\u{1F6F3}",passport_control:"\u{1F6C2}",pause_button:"\u23F8",peace_symbol:"\u262E\uFE0F",peach:"\u{1F351}",peanuts:"\u{1F95C}",pear:"\u{1F350}",pen:"\u{1F58A}",pencil2:"\u270F\uFE0F",penguin:"\u{1F427}",pensive:"\u{1F614}",performing_arts:"\u{1F3AD}",persevere:"\u{1F623}",person_fencing:"\u{1F93A}",pouting_woman:"\u{1F64E}",phone:"\u260E\uFE0F",pick:"\u26CF",pig:"\u{1F437}",pig2:"\u{1F416}",pig_nose:"\u{1F43D}",pill:"\u{1F48A}",pineapple:"\u{1F34D}",ping_pong:"\u{1F3D3}",pisces:"\u2653\uFE0F",pizza:"\u{1F355}",place_of_worship:"\u{1F6D0}",plate_with_cutlery:"\u{1F37D}",play_or_pause_button:"\u23EF",point_down:"\u{1F447}",point_left:"\u{1F448}",point_right:"\u{1F449}",point_up:"\u261D\uFE0F",point_up_2:"\u{1F446}",police_car:"\u{1F693}",policewoman:"\u{1F46E}&zwj;\u2640\uFE0F",poodle:"\u{1F429}",popcorn:"\u{1F37F}",post_office:"\u{1F3E3}",postal_horn:"\u{1F4EF}",postbox:"\u{1F4EE}",potable_water:"\u{1F6B0}",potato:"\u{1F954}",pouch:"\u{1F45D}",poultry_leg:"\u{1F357}",pound:"\u{1F4B7}",rage:"\u{1F621}",pouting_cat:"\u{1F63E}",pouting_man:"\u{1F64E}&zwj;\u2642\uFE0F",pray:"\u{1F64F}",prayer_beads:"\u{1F4FF}",pregnant_woman:"\u{1F930}",previous_track_button:"\u23EE",prince:"\u{1F934}",princess:"\u{1F478}",printer:"\u{1F5A8}",purple_heart:"\u{1F49C}",purse:"\u{1F45B}",pushpin:"\u{1F4CC}",put_litter_in_its_place:"\u{1F6AE}",question:"\u2753",rabbit:"\u{1F430}",rabbit2:"\u{1F407}",racehorse:"\u{1F40E}",racing_car:"\u{1F3CE}",radio:"\u{1F4FB}",radio_button:"\u{1F518}",radioactive:"\u2622\uFE0F",railway_car:"\u{1F683}",railway_track:"\u{1F6E4}",rainbow:"\u{1F308}",rainbow_flag:"\u{1F3F3}\uFE0F&zwj;\u{1F308}",raised_back_of_hand:"\u{1F91A}",raised_hand_with_fingers_splayed:"\u{1F590}",raised_hands:"\u{1F64C}",raising_hand_woman:"\u{1F64B}",raising_hand_man:"\u{1F64B}&zwj;\u2642\uFE0F",ram:"\u{1F40F}",ramen:"\u{1F35C}",rat:"\u{1F400}",record_button:"\u23FA",recycle:"\u267B\uFE0F",red_circle:"\u{1F534}",registered:"\xAE\uFE0F",relaxed:"\u263A\uFE0F",relieved:"\u{1F60C}",reminder_ribbon:"\u{1F397}",repeat:"\u{1F501}",repeat_one:"\u{1F502}",rescue_worker_helmet:"\u26D1",restroom:"\u{1F6BB}",revolving_hearts:"\u{1F49E}",rewind:"\u23EA",rhinoceros:"\u{1F98F}",ribbon:"\u{1F380}",rice:"\u{1F35A}",rice_ball:"\u{1F359}",rice_cracker:"\u{1F358}",rice_scene:"\u{1F391}",right_anger_bubble:"\u{1F5EF}",ring:"\u{1F48D}",robot:"\u{1F916}",rocket:"\u{1F680}",rofl:"\u{1F923}",roll_eyes:"\u{1F644}",roller_coaster:"\u{1F3A2}",rooster:"\u{1F413}",rose:"\u{1F339}",rosette:"\u{1F3F5}",rotating_light:"\u{1F6A8}",round_pushpin:"\u{1F4CD}",rowing_man:"\u{1F6A3}",rowing_woman:"\u{1F6A3}&zwj;\u2640\uFE0F",rugby_football:"\u{1F3C9}",running_man:"\u{1F3C3}",running_shirt_with_sash:"\u{1F3BD}",running_woman:"\u{1F3C3}&zwj;\u2640\uFE0F",sa:"\u{1F202}\uFE0F",sagittarius:"\u2650\uFE0F",sake:"\u{1F376}",sandal:"\u{1F461}",santa:"\u{1F385}",satellite:"\u{1F4E1}",saxophone:"\u{1F3B7}",school:"\u{1F3EB}",school_satchel:"\u{1F392}",scissors:"\u2702\uFE0F",scorpion:"\u{1F982}",scorpius:"\u264F\uFE0F",scream:"\u{1F631}",scream_cat:"\u{1F640}",scroll:"\u{1F4DC}",seat:"\u{1F4BA}",secret:"\u3299\uFE0F",see_no_evil:"\u{1F648}",seedling:"\u{1F331}",selfie:"\u{1F933}",shallow_pan_of_food:"\u{1F958}",shamrock:"\u2618\uFE0F",shark:"\u{1F988}",shaved_ice:"\u{1F367}",sheep:"\u{1F411}",shell:"\u{1F41A}",shield:"\u{1F6E1}",shinto_shrine:"\u26E9",ship:"\u{1F6A2}",shirt:"\u{1F455}",shopping:"\u{1F6CD}",shopping_cart:"\u{1F6D2}",shower:"\u{1F6BF}",shrimp:"\u{1F990}",signal_strength:"\u{1F4F6}",six_pointed_star:"\u{1F52F}",ski:"\u{1F3BF}",skier:"\u26F7",skull:"\u{1F480}",skull_and_crossbones:"\u2620\uFE0F",sleeping:"\u{1F634}",sleeping_bed:"\u{1F6CC}",sleepy:"\u{1F62A}",slightly_frowning_face:"\u{1F641}",slightly_smiling_face:"\u{1F642}",slot_machine:"\u{1F3B0}",small_airplane:"\u{1F6E9}",small_blue_diamond:"\u{1F539}",small_orange_diamond:"\u{1F538}",small_red_triangle:"\u{1F53A}",small_red_triangle_down:"\u{1F53B}",smile:"\u{1F604}",smile_cat:"\u{1F638}",smiley:"\u{1F603}",smiley_cat:"\u{1F63A}",smiling_imp:"\u{1F608}",smirk:"\u{1F60F}",smirk_cat:"\u{1F63C}",smoking:"\u{1F6AC}",snail:"\u{1F40C}",snake:"\u{1F40D}",sneezing_face:"\u{1F927}",snowboarder:"\u{1F3C2}",snowflake:"\u2744\uFE0F",snowman:"\u26C4\uFE0F",snowman_with_snow:"\u2603\uFE0F",sob:"\u{1F62D}",soccer:"\u26BD\uFE0F",soon:"\u{1F51C}",sos:"\u{1F198}",sound:"\u{1F509}",space_invader:"\u{1F47E}",spades:"\u2660\uFE0F",spaghetti:"\u{1F35D}",sparkle:"\u2747\uFE0F",sparkler:"\u{1F387}",sparkles:"\u2728",sparkling_heart:"\u{1F496}",speak_no_evil:"\u{1F64A}",speaker:"\u{1F508}",speaking_head:"\u{1F5E3}",speech_balloon:"\u{1F4AC}",speedboat:"\u{1F6A4}",spider:"\u{1F577}",spider_web:"\u{1F578}",spiral_calendar:"\u{1F5D3}",spiral_notepad:"\u{1F5D2}",spoon:"\u{1F944}",squid:"\u{1F991}",stadium:"\u{1F3DF}",star:"\u2B50\uFE0F",star2:"\u{1F31F}",star_and_crescent:"\u262A\uFE0F",star_of_david:"\u2721\uFE0F",stars:"\u{1F320}",station:"\u{1F689}",statue_of_liberty:"\u{1F5FD}",steam_locomotive:"\u{1F682}",stew:"\u{1F372}",stop_button:"\u23F9",stop_sign:"\u{1F6D1}",stopwatch:"\u23F1",straight_ruler:"\u{1F4CF}",strawberry:"\u{1F353}",stuck_out_tongue:"\u{1F61B}",stuck_out_tongue_closed_eyes:"\u{1F61D}",stuck_out_tongue_winking_eye:"\u{1F61C}",studio_microphone:"\u{1F399}",stuffed_flatbread:"\u{1F959}",sun_behind_large_cloud:"\u{1F325}",sun_behind_rain_cloud:"\u{1F326}",sun_behind_small_cloud:"\u{1F324}",sun_with_face:"\u{1F31E}",sunflower:"\u{1F33B}",sunglasses:"\u{1F60E}",sunny:"\u2600\uFE0F",sunrise:"\u{1F305}",sunrise_over_mountains:"\u{1F304}",surfing_man:"\u{1F3C4}",surfing_woman:"\u{1F3C4}&zwj;\u2640\uFE0F",sushi:"\u{1F363}",suspension_railway:"\u{1F69F}",sweat:"\u{1F613}",sweat_drops:"\u{1F4A6}",sweat_smile:"\u{1F605}",sweet_potato:"\u{1F360}",swimming_man:"\u{1F3CA}",swimming_woman:"\u{1F3CA}&zwj;\u2640\uFE0F",symbols:"\u{1F523}",synagogue:"\u{1F54D}",syringe:"\u{1F489}",taco:"\u{1F32E}",tada:"\u{1F389}",tanabata_tree:"\u{1F38B}",taurus:"\u2649\uFE0F",taxi:"\u{1F695}",tea:"\u{1F375}",telephone_receiver:"\u{1F4DE}",telescope:"\u{1F52D}",tennis:"\u{1F3BE}",tent:"\u26FA\uFE0F",thermometer:"\u{1F321}",thinking:"\u{1F914}",thought_balloon:"\u{1F4AD}",ticket:"\u{1F3AB}",tickets:"\u{1F39F}",tiger:"\u{1F42F}",tiger2:"\u{1F405}",timer_clock:"\u23F2",tipping_hand_man:"\u{1F481}&zwj;\u2642\uFE0F",tired_face:"\u{1F62B}",tm:"\u2122\uFE0F",toilet:"\u{1F6BD}",tokyo_tower:"\u{1F5FC}",tomato:"\u{1F345}",tongue:"\u{1F445}",top:"\u{1F51D}",tophat:"\u{1F3A9}",tornado:"\u{1F32A}",trackball:"\u{1F5B2}",tractor:"\u{1F69C}",traffic_light:"\u{1F6A5}",train:"\u{1F68B}",train2:"\u{1F686}",tram:"\u{1F68A}",triangular_flag_on_post:"\u{1F6A9}",triangular_ruler:"\u{1F4D0}",trident:"\u{1F531}",triumph:"\u{1F624}",trolleybus:"\u{1F68E}",trophy:"\u{1F3C6}",tropical_drink:"\u{1F379}",tropical_fish:"\u{1F420}",truck:"\u{1F69A}",trumpet:"\u{1F3BA}",tulip:"\u{1F337}",tumbler_glass:"\u{1F943}",turkey:"\u{1F983}",turtle:"\u{1F422}",tv:"\u{1F4FA}",twisted_rightwards_arrows:"\u{1F500}",two_hearts:"\u{1F495}",two_men_holding_hands:"\u{1F46C}",two_women_holding_hands:"\u{1F46D}",u5272:"\u{1F239}",u5408:"\u{1F234}",u55b6:"\u{1F23A}",u6307:"\u{1F22F}\uFE0F",u6708:"\u{1F237}\uFE0F",u6709:"\u{1F236}",u6e80:"\u{1F235}",u7121:"\u{1F21A}\uFE0F",u7533:"\u{1F238}",u7981:"\u{1F232}",u7a7a:"\u{1F233}",umbrella:"\u2614\uFE0F",unamused:"\u{1F612}",underage:"\u{1F51E}",unicorn:"\u{1F984}",unlock:"\u{1F513}",up:"\u{1F199}",upside_down_face:"\u{1F643}",v:"\u270C\uFE0F",vertical_traffic_light:"\u{1F6A6}",vhs:"\u{1F4FC}",vibration_mode:"\u{1F4F3}",video_camera:"\u{1F4F9}",video_game:"\u{1F3AE}",violin:"\u{1F3BB}",virgo:"\u264D\uFE0F",volcano:"\u{1F30B}",volleyball:"\u{1F3D0}",vs:"\u{1F19A}",vulcan_salute:"\u{1F596}",walking_man:"\u{1F6B6}",walking_woman:"\u{1F6B6}&zwj;\u2640\uFE0F",waning_crescent_moon:"\u{1F318}",waning_gibbous_moon:"\u{1F316}",warning:"\u26A0\uFE0F",wastebasket:"\u{1F5D1}",watch:"\u231A\uFE0F",water_buffalo:"\u{1F403}",watermelon:"\u{1F349}",wave:"\u{1F44B}",wavy_dash:"\u3030\uFE0F",waxing_crescent_moon:"\u{1F312}",wc:"\u{1F6BE}",weary:"\u{1F629}",wedding:"\u{1F492}",weight_lifting_man:"\u{1F3CB}\uFE0F",weight_lifting_woman:"\u{1F3CB}\uFE0F&zwj;\u2640\uFE0F",whale:"\u{1F433}",whale2:"\u{1F40B}",wheel_of_dharma:"\u2638\uFE0F",wheelchair:"\u267F\uFE0F",white_check_mark:"\u2705",white_circle:"\u26AA\uFE0F",white_flag:"\u{1F3F3}\uFE0F",white_flower:"\u{1F4AE}",white_large_square:"\u2B1C\uFE0F",white_medium_small_square:"\u25FD\uFE0F",white_medium_square:"\u25FB\uFE0F",white_small_square:"\u25AB\uFE0F",white_square_button:"\u{1F533}",wilted_flower:"\u{1F940}",wind_chime:"\u{1F390}",wind_face:"\u{1F32C}",wine_glass:"\u{1F377}",wink:"\u{1F609}",wolf:"\u{1F43A}",woman:"\u{1F469}",woman_artist:"\u{1F469}&zwj;\u{1F3A8}",woman_astronaut:"\u{1F469}&zwj;\u{1F680}",woman_cartwheeling:"\u{1F938}&zwj;\u2640\uFE0F",woman_cook:"\u{1F469}&zwj;\u{1F373}",woman_facepalming:"\u{1F926}&zwj;\u2640\uFE0F",woman_factory_worker:"\u{1F469}&zwj;\u{1F3ED}",woman_farmer:"\u{1F469}&zwj;\u{1F33E}",woman_firefighter:"\u{1F469}&zwj;\u{1F692}",woman_health_worker:"\u{1F469}&zwj;\u2695\uFE0F",woman_judge:"\u{1F469}&zwj;\u2696\uFE0F",woman_juggling:"\u{1F939}&zwj;\u2640\uFE0F",woman_mechanic:"\u{1F469}&zwj;\u{1F527}",woman_office_worker:"\u{1F469}&zwj;\u{1F4BC}",woman_pilot:"\u{1F469}&zwj;\u2708\uFE0F",woman_playing_handball:"\u{1F93E}&zwj;\u2640\uFE0F",woman_playing_water_polo:"\u{1F93D}&zwj;\u2640\uFE0F",woman_scientist:"\u{1F469}&zwj;\u{1F52C}",woman_shrugging:"\u{1F937}&zwj;\u2640\uFE0F",woman_singer:"\u{1F469}&zwj;\u{1F3A4}",woman_student:"\u{1F469}&zwj;\u{1F393}",woman_teacher:"\u{1F469}&zwj;\u{1F3EB}",woman_technologist:"\u{1F469}&zwj;\u{1F4BB}",woman_with_turban:"\u{1F473}&zwj;\u2640\uFE0F",womans_clothes:"\u{1F45A}",womans_hat:"\u{1F452}",women_wrestling:"\u{1F93C}&zwj;\u2640\uFE0F",womens:"\u{1F6BA}",world_map:"\u{1F5FA}",worried:"\u{1F61F}",wrench:"\u{1F527}",writing_hand:"\u270D\uFE0F",x:"\u274C",yellow_heart:"\u{1F49B}",yen:"\u{1F4B4}",yin_yang:"\u262F\uFE0F",yum:"\u{1F60B}",zap:"\u26A1\uFE0F",zipper_mouth_face:"\u{1F910}",zzz:"\u{1F4A4}",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},n.Converter=function(f){"use strict";var p={},b=[],v=[],k={},A=a,T={parsed:{},raw:"",format:""};U();function U(){f=f||{};for(var E in i)i.hasOwnProperty(E)&&(p[E]=i[E]);if(typeof f=="object")for(var M in f)f.hasOwnProperty(M)&&(p[M]=f[M]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof f+" was passed instead.");p.extensions&&n.helper.forEach(p.extensions,C)}function C(E,M){if(M=M||null,n.helper.isString(E))if(E=n.helper.stdExtName(E),M=E,n.extensions[E]){console.warn("DEPRECATION WARNING: "+E+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),$(n.extensions[E],E);return}else if(!n.helper.isUndefined(o[E]))E=o[E];else throw Error('Extension "'+E+'" could not be loaded. It was either not found or is not a valid extension.');typeof E=="function"&&(E=E()),n.helper.isArray(E)||(E=[E]);var V=d(E,M);if(!V.valid)throw Error(V.error);for(var K=0;K<E.length;++K){switch(E[K].type){case"lang":b.push(E[K]);break;case"output":v.push(E[K]);break}if(E[K].hasOwnProperty("listeners"))for(var Z in E[K].listeners)E[K].listeners.hasOwnProperty(Z)&&F(Z,E[K].listeners[Z])}}function $(E,M){typeof E=="function"&&(E=E(new n.Converter)),n.helper.isArray(E)||(E=[E]);var V=d(E,M);if(!V.valid)throw Error(V.error);for(var K=0;K<E.length;++K)switch(E[K].type){case"lang":b.push(E[K]);break;case"output":v.push(E[K]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function F(E,M){if(!n.helper.isString(E))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof E+" given");if(typeof M!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof M+" given");k.hasOwnProperty(E)||(k[E]=[]),k[E].push(M)}function q(E){var M=E.match(/^\s*/)[0].length,V=new RegExp("^\\s{0,"+M+"}","gm");return E.replace(V,"")}this._dispatch=function(M,V,K,Z){if(k.hasOwnProperty(M))for(var W=0;W<k[M].length;++W){var J=k[M][W](M,V,this,K,Z);J&&typeof J<"u"&&(V=J)}return V},this.listen=function(E,M){return F(E,M),this},this.makeHtml=function(E){if(!E)return E;var M={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:b,outputModifiers:v,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return E=E.replace(//g,"\xA8T"),E=E.replace(/\$/g,"\xA8D"),E=E.replace(/\r\n/g,`
`),E=E.replace(/\r/g,`
`),E=E.replace(/\u00A0/g,"&nbsp;"),p.smartIndentationFix&&(E=q(E)),E=`

`+E+`

`,E=n.subParser("detab")(E,p,M),E=E.replace(/^[ \t]+$/mg,""),n.helper.forEach(b,function(V){E=n.subParser("runExtension")(V,E,p,M)}),E=n.subParser("metadata")(E,p,M),E=n.subParser("hashPreCodeTags")(E,p,M),E=n.subParser("githubCodeBlocks")(E,p,M),E=n.subParser("hashHTMLBlocks")(E,p,M),E=n.subParser("hashCodeTags")(E,p,M),E=n.subParser("stripLinkDefinitions")(E,p,M),E=n.subParser("blockGamut")(E,p,M),E=n.subParser("unhashHTMLSpans")(E,p,M),E=n.subParser("unescapeSpecialChars")(E,p,M),E=E.replace(/D/g,"$$"),E=E.replace(/T/g,"\xA8"),E=n.subParser("completeHTMLDocument")(E,p,M),n.helper.forEach(v,function(V){E=n.subParser("runExtension")(V,E,p,M)}),T=M.metadata,E},this.makeMarkdown=this.makeMd=function(E,M){if(E=E.replace(/\r\n/g,`
`),E=E.replace(/\r/g,`
`),E=E.replace(/>[ \t]+</,">\xA8NBSP;<"),!M)if(window&&window.document)M=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var V=M.createElement("div");V.innerHTML=E;var K={preList:_e(V)};ue(V);for(var Z=V.childNodes,W="",J=0;J<Z.length;J++)W+=n.subParser("makeMarkdown.node")(Z[J],K);function ue(ve){for(var Pe=0;Pe<ve.childNodes.length;++Pe){var oe=ve.childNodes[Pe];oe.nodeType===3?!/\S/.test(oe.nodeValue)&&!/^[ ]+$/.test(oe.nodeValue)?(ve.removeChild(oe),--Pe):(oe.nodeValue=oe.nodeValue.split(`
`).join(" "),oe.nodeValue=oe.nodeValue.replace(/(\s)+/g,"$1")):oe.nodeType===1&&ue(oe)}}function _e(ve){for(var Pe=ve.querySelectorAll("pre"),oe=[],Se=0;Se<Pe.length;++Se)if(Pe[Se].childElementCount===1&&Pe[Se].firstChild.tagName.toLowerCase()==="code"){var Ve=Pe[Se].firstChild.innerHTML.trim(),Re=Pe[Se].firstChild.getAttribute("data-language")||"";if(Re==="")for(var je=Pe[Se].firstChild.className.split(" "),xt=0;xt<je.length;++xt){var Qe=je[xt].match(/^language-(.+)$/);if(Qe!==null){Re=Qe[1];break}}Ve=n.helper.unescapeHTMLEntities(Ve),oe.push(Ve),Pe[Se].outerHTML='<precode language="'+Re+'" precodenum="'+Se.toString()+'"></precode>'}else oe.push(Pe[Se].innerHTML),Pe[Se].innerHTML="",Pe[Se].setAttribute("prenum",Se.toString());return oe}return W},this.setOption=function(E,M){p[E]=M},this.getOption=function(E){return p[E]},this.getOptions=function(){return p},this.addExtension=function(E,M){M=M||null,C(E,M)},this.useExtension=function(E){C(E)},this.setFlavor=function(E){if(!u.hasOwnProperty(E))throw Error(E+" flavor was not found");var M=u[E];A=E;for(var V in M)M.hasOwnProperty(V)&&(p[V]=M[V])},this.getFlavor=function(){return A},this.removeExtension=function(E){n.helper.isArray(E)||(E=[E]);for(var M=0;M<E.length;++M){for(var V=E[M],K=0;K<b.length;++K)b[K]===V&&b.splice(K,1);for(var Z=0;Z<v.length;++Z)v[Z]===V&&v.splice(Z,1)}},this.getAllExtensions=function(){return{language:b,output:v}},this.getMetadata=function(E){return E?T.raw:T.parsed},this.getMetadataFormat=function(){return T.format},this._setMetadataPair=function(E,M){T.parsed[E]=M},this._setMetadataFormat=function(E){T.format=E},this._setMetadataRaw=function(E){T.raw=E}},n.subParser("anchors",function(f,p,b){"use strict";f=b.converter._dispatch("anchors.before",f,p,b);var v=function(k,A,T,U,C,$,F){if(n.helper.isUndefined(F)&&(F=""),T=T.toLowerCase(),k.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)U="";else if(!U)if(T||(T=A.toLowerCase().replace(/ ?\n/g," ")),U="#"+T,!n.helper.isUndefined(b.gUrls[T]))U=b.gUrls[T],n.helper.isUndefined(b.gTitles[T])||(F=b.gTitles[T]);else return k;U=U.replace(n.helper.regexes.asteriskDashAndColon,n.helper.escapeCharactersCallback);var q='<a href="'+U+'"';return F!==""&&F!==null&&(F=F.replace(/"/g,"&quot;"),F=F.replace(n.helper.regexes.asteriskDashAndColon,n.helper.escapeCharactersCallback),q+=' title="'+F+'"'),p.openLinksInNewWindow&&!/^#/.test(U)&&(q+=' rel="noopener noreferrer" target="\xA8E95Eblank"'),q+=">"+A+"</a>",q};return f=f.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,v),f=f.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,v),f=f.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,v),f=f.replace(/\[([^\[\]]+)]()()()()()/g,v),p.ghMentions&&(f=f.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(k,A,T,U,C){if(T==="\\")return A+U;if(!n.helper.isString(p.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var $=p.ghMentionsLink.replace(/\{u}/g,C),F="";return p.openLinksInNewWindow&&(F=' rel="noopener noreferrer" target="\xA8E95Eblank"'),A+'<a href="'+$+'"'+F+">"+U+"</a>"})),f=b.converter._dispatch("anchors.after",f,p,b),f});var w=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,x=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,P=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,I=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,S=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,N=function(f){"use strict";return function(p,b,v,k,A,T,U){v=v.replace(n.helper.regexes.asteriskDashAndColon,n.helper.escapeCharactersCallback);var C=v,$="",F="",q=b||"",E=U||"";return/^www\./i.test(v)&&(v=v.replace(/^www\./i,"http://www.")),f.excludeTrailingPunctuationFromURLs&&T&&($=T),f.openLinksInNewWindow&&(F=' rel="noopener noreferrer" target="\xA8E95Eblank"'),q+'<a href="'+v+'"'+F+">"+C+"</a>"+$+E}},z=function(f,p){"use strict";return function(b,v,k){var A="mailto:";return v=v||"",k=n.subParser("unescapeSpecialChars")(k,f,p),f.encodeEmails?(A=n.helper.encodeEmailAddress(A+k),k=n.helper.encodeEmailAddress(k)):A=A+k,v+'<a href="'+A+'">'+k+"</a>"}};n.subParser("autoLinks",function(f,p,b){"use strict";return f=b.converter._dispatch("autoLinks.before",f,p,b),f=f.replace(P,N(p)),f=f.replace(S,z(p,b)),f=b.converter._dispatch("autoLinks.after",f,p,b),f}),n.subParser("simplifiedAutoLinks",function(f,p,b){"use strict";return p.simplifiedAutoLink&&(f=b.converter._dispatch("simplifiedAutoLinks.before",f,p,b),p.excludeTrailingPunctuationFromURLs?f=f.replace(x,N(p)):f=f.replace(w,N(p)),f=f.replace(I,z(p,b)),f=b.converter._dispatch("simplifiedAutoLinks.after",f,p,b)),f}),n.subParser("blockGamut",function(f,p,b){"use strict";return f=b.converter._dispatch("blockGamut.before",f,p,b),f=n.subParser("blockQuotes")(f,p,b),f=n.subParser("headers")(f,p,b),f=n.subParser("horizontalRule")(f,p,b),f=n.subParser("lists")(f,p,b),f=n.subParser("codeBlocks")(f,p,b),f=n.subParser("tables")(f,p,b),f=n.subParser("hashHTMLBlocks")(f,p,b),f=n.subParser("paragraphs")(f,p,b),f=b.converter._dispatch("blockGamut.after",f,p,b),f}),n.subParser("blockQuotes",function(f,p,b){"use strict";f=b.converter._dispatch("blockQuotes.before",f,p,b),f=f+`

`;var v=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return p.splitAdjacentBlockquotes&&(v=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),f=f.replace(v,function(k){return k=k.replace(/^[ \t]*>[ \t]?/gm,""),k=k.replace(/0/g,""),k=k.replace(/^[ \t]+$/gm,""),k=n.subParser("githubCodeBlocks")(k,p,b),k=n.subParser("blockGamut")(k,p,b),k=k.replace(/(^|\n)/g,"$1  "),k=k.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(A,T){var U=T;return U=U.replace(/^  /mg,"\xA80"),U=U.replace(/0/g,""),U}),n.subParser("hashBlock")(`<blockquote>
`+k+`
</blockquote>`,p,b)}),f=b.converter._dispatch("blockQuotes.after",f,p,b),f}),n.subParser("codeBlocks",function(f,p,b){"use strict";f=b.converter._dispatch("codeBlocks.before",f,p,b),f+="\xA80";var v=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=0))/g;return f=f.replace(v,function(k,A,T){var U=A,C=T,$=`
`;return U=n.subParser("outdent")(U,p,b),U=n.subParser("encodeCode")(U,p,b),U=n.subParser("detab")(U,p,b),U=U.replace(/^\n+/g,""),U=U.replace(/\n+$/g,""),p.omitExtraWLInCodeBlocks&&($=""),U="<pre><code>"+U+$+"</code></pre>",n.subParser("hashBlock")(U,p,b)+C}),f=f.replace(/0/,""),f=b.converter._dispatch("codeBlocks.after",f,p,b),f}),n.subParser("codeSpans",function(f,p,b){"use strict";return f=b.converter._dispatch("codeSpans.before",f,p,b),typeof f>"u"&&(f=""),f=f.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(v,k,A,T){var U=T;return U=U.replace(/^([ \t]*)/g,""),U=U.replace(/[ \t]*$/g,""),U=n.subParser("encodeCode")(U,p,b),U=k+"<code>"+U+"</code>",U=n.subParser("hashHTMLSpans")(U,p,b),U}),f=b.converter._dispatch("codeSpans.after",f,p,b),f}),n.subParser("completeHTMLDocument",function(f,p,b){"use strict";if(!p.completeHTMLDocument)return f;f=b.converter._dispatch("completeHTMLDocument.before",f,p,b);var v="html",k=`<!DOCTYPE HTML>
`,A="",T=`<meta charset="utf-8">
`,U="",C="";typeof b.metadata.parsed.doctype<"u"&&(k="<!DOCTYPE "+b.metadata.parsed.doctype+`>
`,v=b.metadata.parsed.doctype.toString().toLowerCase(),(v==="html"||v==="html5")&&(T='<meta charset="utf-8">'));for(var $ in b.metadata.parsed)if(b.metadata.parsed.hasOwnProperty($))switch($.toLowerCase()){case"doctype":break;case"title":A="<title>"+b.metadata.parsed.title+`</title>
`;break;case"charset":v==="html"||v==="html5"?T='<meta charset="'+b.metadata.parsed.charset+`">
`:T='<meta name="charset" content="'+b.metadata.parsed.charset+`">
`;break;case"language":case"lang":U=' lang="'+b.metadata.parsed[$]+'"',C+='<meta name="'+$+'" content="'+b.metadata.parsed[$]+`">
`;break;default:C+='<meta name="'+$+'" content="'+b.metadata.parsed[$]+`">
`}return f=k+"<html"+U+`>
<head>
`+A+T+C+`</head>
<body>
`+f.trim()+`
</body>
</html>`,f=b.converter._dispatch("completeHTMLDocument.after",f,p,b),f}),n.subParser("detab",function(f,p,b){"use strict";return f=b.converter._dispatch("detab.before",f,p,b),f=f.replace(/\t(?=\t)/g,"    "),f=f.replace(/\t/g,"\xA8A\xA8B"),f=f.replace(/B(.+?)A/g,function(v,k){for(var A=k,T=4-A.length%4,U=0;U<T;U++)A+=" ";return A}),f=f.replace(/A/g,"    "),f=f.replace(/B/g,""),f=b.converter._dispatch("detab.after",f,p,b),f}),n.subParser("ellipsis",function(f,p,b){"use strict";return p.ellipsis&&(f=b.converter._dispatch("ellipsis.before",f,p,b),f=f.replace(/\.\.\./g,"\u2026"),f=b.converter._dispatch("ellipsis.after",f,p,b)),f}),n.subParser("emoji",function(f,p,b){"use strict";if(!p.emoji)return f;f=b.converter._dispatch("emoji.before",f,p,b);var v=/:([\S]+?):/g;return f=f.replace(v,function(k,A){return n.helper.emojis.hasOwnProperty(A)?n.helper.emojis[A]:k}),f=b.converter._dispatch("emoji.after",f,p,b),f}),n.subParser("encodeAmpsAndAngles",function(f,p,b){"use strict";return f=b.converter._dispatch("encodeAmpsAndAngles.before",f,p,b),f=f.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),f=f.replace(/<(?![a-z\/?$!])/gi,"&lt;"),f=f.replace(/</g,"&lt;"),f=f.replace(/>/g,"&gt;"),f=b.converter._dispatch("encodeAmpsAndAngles.after",f,p,b),f}),n.subParser("encodeBackslashEscapes",function(f,p,b){"use strict";return f=b.converter._dispatch("encodeBackslashEscapes.before",f,p,b),f=f.replace(/\\(\\)/g,n.helper.escapeCharactersCallback),f=f.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,n.helper.escapeCharactersCallback),f=b.converter._dispatch("encodeBackslashEscapes.after",f,p,b),f}),n.subParser("encodeCode",function(f,p,b){"use strict";return f=b.converter._dispatch("encodeCode.before",f,p,b),f=f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,n.helper.escapeCharactersCallback),f=b.converter._dispatch("encodeCode.after",f,p,b),f}),n.subParser("escapeSpecialCharsWithinTagAttributes",function(f,p,b){"use strict";f=b.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",f,p,b);var v=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,k=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return f=f.replace(v,function(A){return A.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,n.helper.escapeCharactersCallback)}),f=f.replace(k,function(A){return A.replace(/([\\`*_~=|])/g,n.helper.escapeCharactersCallback)}),f=b.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",f,p,b),f}),n.subParser("githubCodeBlocks",function(f,p,b){"use strict";return p.ghCodeBlocks?(f=b.converter._dispatch("githubCodeBlocks.before",f,p,b),f+="\xA80",f=f.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(v,k,A,T){var U=p.omitExtraWLInCodeBlocks?"":`
`;return T=n.subParser("encodeCode")(T,p,b),T=n.subParser("detab")(T,p,b),T=T.replace(/^\n+/g,""),T=T.replace(/\n+$/g,""),T="<pre><code"+(A?' class="'+A+" language-"+A+'"':"")+">"+T+U+"</code></pre>",T=n.subParser("hashBlock")(T,p,b),`

\xA8G`+(b.ghCodeBlocks.push({text:v,codeblock:T})-1)+`G

`}),f=f.replace(/0/,""),b.converter._dispatch("githubCodeBlocks.after",f,p,b)):f}),n.subParser("hashBlock",function(f,p,b){"use strict";return f=b.converter._dispatch("hashBlock.before",f,p,b),f=f.replace(/(^\n+|\n+$)/g,""),f=`

\xA8K`+(b.gHtmlBlocks.push(f)-1)+`K

`,f=b.converter._dispatch("hashBlock.after",f,p,b),f}),n.subParser("hashCodeTags",function(f,p,b){"use strict";f=b.converter._dispatch("hashCodeTags.before",f,p,b);var v=function(k,A,T,U){var C=T+n.subParser("encodeCode")(A,p,b)+U;return"\xA8C"+(b.gHtmlSpans.push(C)-1)+"C"};return f=n.helper.replaceRecursiveRegExp(f,v,"<code\\b[^>]*>","</code>","gim"),f=b.converter._dispatch("hashCodeTags.after",f,p,b),f}),n.subParser("hashElement",function(f,p,b){"use strict";return function(v,k){var A=k;return A=A.replace(/\n\n/g,`
`),A=A.replace(/^\n/,""),A=A.replace(/\n+$/g,""),A=`

\xA8K`+(b.gHtmlBlocks.push(A)-1)+`K

`,A}}),n.subParser("hashHTMLBlocks",function(f,p,b){"use strict";f=b.converter._dispatch("hashHTMLBlocks.before",f,p,b);var v=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],k=function(E,M,V,K){var Z=E;return V.search(/\bmarkdown\b/)!==-1&&(Z=V+b.converter.makeHtml(M)+K),`

\xA8K`+(b.gHtmlBlocks.push(Z)-1)+`K

`};p.backslashEscapesHTMLTags&&(f=f.replace(/\\<(\/?[^>]+?)>/g,function(E,M){return"&lt;"+M+"&gt;"}));for(var A=0;A<v.length;++A)for(var T,U=new RegExp("^ {0,3}(<"+v[A]+"\\b[^>]*>)","im"),C="<"+v[A]+"\\b[^>]*>",$="</"+v[A]+">";(T=n.helper.regexIndexOf(f,U))!==-1;){var F=n.helper.splitAtIndex(f,T),q=n.helper.replaceRecursiveRegExp(F[1],k,C,$,"im");if(q===F[1])break;f=F[0].concat(q)}return f=f.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,n.subParser("hashElement")(f,p,b)),f=n.helper.replaceRecursiveRegExp(f,function(E){return`

\xA8K`+(b.gHtmlBlocks.push(E)-1)+`K

`},"^ {0,3}<!--","-->","gm"),f=f.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,n.subParser("hashElement")(f,p,b)),f=b.converter._dispatch("hashHTMLBlocks.after",f,p,b),f}),n.subParser("hashHTMLSpans",function(f,p,b){"use strict";f=b.converter._dispatch("hashHTMLSpans.before",f,p,b);function v(k){return"\xA8C"+(b.gHtmlSpans.push(k)-1)+"C"}return f=f.replace(/<[^>]+?\/>/gi,function(k){return v(k)}),f=f.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(k){return v(k)}),f=f.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(k){return v(k)}),f=f.replace(/<[^>]+?>/gi,function(k){return v(k)}),f=b.converter._dispatch("hashHTMLSpans.after",f,p,b),f}),n.subParser("unhashHTMLSpans",function(f,p,b){"use strict";f=b.converter._dispatch("unhashHTMLSpans.before",f,p,b);for(var v=0;v<b.gHtmlSpans.length;++v){for(var k=b.gHtmlSpans[v],A=0;/C(\d+)C/.test(k);){var T=RegExp.$1;if(k=k.replace("\xA8C"+T+"C",b.gHtmlSpans[T]),A===10){console.error("maximum nesting of 10 spans reached!!!");break}++A}f=f.replace("\xA8C"+v+"C",k)}return f=b.converter._dispatch("unhashHTMLSpans.after",f,p,b),f}),n.subParser("hashPreCodeTags",function(f,p,b){"use strict";f=b.converter._dispatch("hashPreCodeTags.before",f,p,b);var v=function(k,A,T,U){var C=T+n.subParser("encodeCode")(A,p,b)+U;return`

\xA8G`+(b.ghCodeBlocks.push({text:k,codeblock:C})-1)+`G

`};return f=n.helper.replaceRecursiveRegExp(f,v,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),f=b.converter._dispatch("hashPreCodeTags.after",f,p,b),f}),n.subParser("headers",function(f,p,b){"use strict";f=b.converter._dispatch("headers.before",f,p,b);var v=isNaN(parseInt(p.headerLevelStart))?1:parseInt(p.headerLevelStart),k=p.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,A=p.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;f=f.replace(k,function(C,$){var F=n.subParser("spanGamut")($,p,b),q=p.noHeaderId?"":' id="'+U($)+'"',E=v,M="<h"+E+q+">"+F+"</h"+E+">";return n.subParser("hashBlock")(M,p,b)}),f=f.replace(A,function(C,$){var F=n.subParser("spanGamut")($,p,b),q=p.noHeaderId?"":' id="'+U($)+'"',E=v+1,M="<h"+E+q+">"+F+"</h"+E+">";return n.subParser("hashBlock")(M,p,b)});var T=p.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;f=f.replace(T,function(C,$,F){var q=F;p.customizedHeaderId&&(q=F.replace(/\s?\{([^{]+?)}\s*$/,""));var E=n.subParser("spanGamut")(q,p,b),M=p.noHeaderId?"":' id="'+U(F)+'"',V=v-1+$.length,K="<h"+V+M+">"+E+"</h"+V+">";return n.subParser("hashBlock")(K,p,b)});function U(C){var $,F;if(p.customizedHeaderId){var q=C.match(/\{([^{]+?)}\s*$/);q&&q[1]&&(C=q[1])}return $=C,n.helper.isString(p.prefixHeaderId)?F=p.prefixHeaderId:p.prefixHeaderId===!0?F="section-":F="",p.rawPrefixHeaderId||($=F+$),p.ghCompatibleHeaderId?$=$.replace(/ /g,"-").replace(/&amp;/g,"").replace(/T/g,"").replace(/D/g,"").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():p.rawHeaderId?$=$.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/T/g,"\xA8").replace(/D/g,"$").replace(/["']/g,"-").toLowerCase():$=$.replace(/[^\w]/g,"").toLowerCase(),p.rawPrefixHeaderId&&($=F+$),b.hashLinkCounts[$]?$=$+"-"+b.hashLinkCounts[$]++:b.hashLinkCounts[$]=1,$}return f=b.converter._dispatch("headers.after",f,p,b),f}),n.subParser("horizontalRule",function(f,p,b){"use strict";f=b.converter._dispatch("horizontalRule.before",f,p,b);var v=n.subParser("hashBlock")("<hr />",p,b);return f=f.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,v),f=f.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,v),f=f.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,v),f=b.converter._dispatch("horizontalRule.after",f,p,b),f}),n.subParser("images",function(f,p,b){"use strict";f=b.converter._dispatch("images.before",f,p,b);var v=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,k=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,A=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,T=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,U=/!\[([^\[\]]+)]()()()()()/g;function C(F,q,E,M,V,K,Z,W){return M=M.replace(/\s/g,""),$(F,q,E,M,V,K,Z,W)}function $(F,q,E,M,V,K,Z,W){var J=b.gUrls,ue=b.gTitles,_e=b.gDimensions;if(E=E.toLowerCase(),W||(W=""),F.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)M="";else if(M===""||M===null)if((E===""||E===null)&&(E=q.toLowerCase().replace(/ ?\n/g," ")),M="#"+E,!n.helper.isUndefined(J[E]))M=J[E],n.helper.isUndefined(ue[E])||(W=ue[E]),n.helper.isUndefined(_e[E])||(V=_e[E].width,K=_e[E].height);else return F;q=q.replace(/"/g,"&quot;").replace(n.helper.regexes.asteriskDashAndColon,n.helper.escapeCharactersCallback),M=M.replace(n.helper.regexes.asteriskDashAndColon,n.helper.escapeCharactersCallback);var ve='<img src="'+M+'" alt="'+q+'"';return W&&n.helper.isString(W)&&(W=W.replace(/"/g,"&quot;").replace(n.helper.regexes.asteriskDashAndColon,n.helper.escapeCharactersCallback),ve+=' title="'+W+'"'),V&&K&&(V=V==="*"?"auto":V,K=K==="*"?"auto":K,ve+=' width="'+V+'"',ve+=' height="'+K+'"'),ve+=" />",ve}return f=f.replace(T,$),f=f.replace(A,C),f=f.replace(k,$),f=f.replace(v,$),f=f.replace(U,$),f=b.converter._dispatch("images.after",f,p,b),f}),n.subParser("italicsAndBold",function(f,p,b){"use strict";f=b.converter._dispatch("italicsAndBold.before",f,p,b);function v(k,A,T){return A+k+T}return p.literalMidWordUnderscores?(f=f.replace(/\b___(\S[\s\S]*?)___\b/g,function(k,A){return v(A,"<strong><em>","</em></strong>")}),f=f.replace(/\b__(\S[\s\S]*?)__\b/g,function(k,A){return v(A,"<strong>","</strong>")}),f=f.replace(/\b_(\S[\s\S]*?)_\b/g,function(k,A){return v(A,"<em>","</em>")})):(f=f.replace(/___(\S[\s\S]*?)___/g,function(k,A){return/\S$/.test(A)?v(A,"<strong><em>","</em></strong>"):k}),f=f.replace(/__(\S[\s\S]*?)__/g,function(k,A){return/\S$/.test(A)?v(A,"<strong>","</strong>"):k}),f=f.replace(/_([^\s_][\s\S]*?)_/g,function(k,A){return/\S$/.test(A)?v(A,"<em>","</em>"):k})),p.literalMidWordAsterisks?(f=f.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(k,A,T){return v(T,A+"<strong><em>","</em></strong>")}),f=f.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(k,A,T){return v(T,A+"<strong>","</strong>")}),f=f.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(k,A,T){return v(T,A+"<em>","</em>")})):(f=f.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(k,A){return/\S$/.test(A)?v(A,"<strong><em>","</em></strong>"):k}),f=f.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(k,A){return/\S$/.test(A)?v(A,"<strong>","</strong>"):k}),f=f.replace(/\*([^\s*][\s\S]*?)\*/g,function(k,A){return/\S$/.test(A)?v(A,"<em>","</em>"):k})),f=b.converter._dispatch("italicsAndBold.after",f,p,b),f}),n.subParser("lists",function(f,p,b){"use strict";function v(T,U){b.gListLevel++,T=T.replace(/\n{2,}$/,`
`),T+="\xA80";var C=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,$=/\n[ \t]*\n(?!0)/.test(T);return p.disableForced4SpacesIndentedSublists&&(C=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0|\2([*+-]|\d+[.])[ \t]+))/gm),T=T.replace(C,function(F,q,E,M,V,K,Z){Z=Z&&Z.trim()!=="";var W=n.subParser("outdent")(V,p,b),J="";return K&&p.tasklists&&(J=' class="task-list-item" style="list-style-type: none;"',W=W.replace(/^[ \t]*\[(x|X| )?]/m,function(){var ue='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return Z&&(ue+=" checked"),ue+=">",ue})),W=W.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(ue){return"\xA8A"+ue}),q||W.search(/\n{2,}/)>-1?(W=n.subParser("githubCodeBlocks")(W,p,b),W=n.subParser("blockGamut")(W,p,b)):(W=n.subParser("lists")(W,p,b),W=W.replace(/\n$/,""),W=n.subParser("hashHTMLBlocks")(W,p,b),W=W.replace(/\n\n+/g,`

`),$?W=n.subParser("paragraphs")(W,p,b):W=n.subParser("spanGamut")(W,p,b)),W=W.replace("\xA8A",""),W="<li"+J+">"+W+`</li>
`,W}),T=T.replace(/0/g,""),b.gListLevel--,U&&(T=T.replace(/\s+$/,"")),T}function k(T,U){if(U==="ol"){var C=T.match(/^ *(\d+)\./);if(C&&C[1]!=="1")return' start="'+C[1]+'"'}return""}function A(T,U,C){var $=p.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,F=p.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,q=U==="ul"?$:F,E="";if(T.search(q)!==-1)(function V(K){var Z=K.search(q),W=k(T,U);Z!==-1?(E+=`

<`+U+W+`>
`+v(K.slice(0,Z),!!C)+"</"+U+`>
`,U=U==="ul"?"ol":"ul",q=U==="ul"?$:F,V(K.slice(Z))):E+=`

<`+U+W+`>
`+v(K,!!C)+"</"+U+`>
`})(T);else{var M=k(T,U);E=`

<`+U+M+`>
`+v(T,!!C)+"</"+U+`>
`}return E}return f=b.converter._dispatch("lists.before",f,p,b),f+="\xA80",b.gListLevel?f=f.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(T,U,C){var $=C.search(/[*+-]/g)>-1?"ul":"ol";return A(U,$,!0)}):f=f.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(T,U,C,$){var F=$.search(/[*+-]/g)>-1?"ul":"ol";return A(C,F,!1)}),f=f.replace(/0/,""),f=b.converter._dispatch("lists.after",f,p,b),f}),n.subParser("metadata",function(f,p,b){"use strict";if(!p.metadata)return f;f=b.converter._dispatch("metadata.before",f,p,b);function v(k){b.metadata.raw=k,k=k.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),k=k.replace(/\n {4}/g," "),k.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(A,T,U){return b.metadata.parsed[T]=U,""})}return f=f.replace(/^\s*+(\S*?)\n([\s\S]+?)\n+\n/,function(k,A,T){return v(T),"\xA8M"}),f=f.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(k,A,T){return A&&(b.metadata.format=A),v(T),"\xA8M"}),f=f.replace(/M/g,""),f=b.converter._dispatch("metadata.after",f,p,b),f}),n.subParser("outdent",function(f,p,b){"use strict";return f=b.converter._dispatch("outdent.before",f,p,b),f=f.replace(/^(\t|[ ]{1,4})/gm,"\xA80"),f=f.replace(/0/g,""),f=b.converter._dispatch("outdent.after",f,p,b),f}),n.subParser("paragraphs",function(f,p,b){"use strict";f=b.converter._dispatch("paragraphs.before",f,p,b),f=f.replace(/^\n+/g,""),f=f.replace(/\n+$/g,"");for(var v=f.split(/\n{2,}/g),k=[],A=v.length,T=0;T<A;T++){var U=v[T];U.search(/(K|G)(\d+)\1/g)>=0?k.push(U):U.search(/\S/)>=0&&(U=n.subParser("spanGamut")(U,p,b),U=U.replace(/^([ \t]*)/g,"<p>"),U+="</p>",k.push(U))}for(A=k.length,T=0;T<A;T++){for(var C="",$=k[T],F=!1;/(K|G)(\d+)\1/.test($);){var q=RegExp.$1,E=RegExp.$2;q==="K"?C=b.gHtmlBlocks[E]:F?C=n.subParser("encodeCode")(b.ghCodeBlocks[E].text,p,b):C=b.ghCodeBlocks[E].codeblock,C=C.replace(/\$/g,"$$$$"),$=$.replace(/(\n\n)?(K|G)\d+\2(\n\n)?/,C),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test($)&&(F=!0)}k[T]=$}return f=k.join(`
`),f=f.replace(/^\n+/g,""),f=f.replace(/\n+$/g,""),b.converter._dispatch("paragraphs.after",f,p,b)}),n.subParser("runExtension",function(f,p,b,v){"use strict";if(f.filter)p=f.filter(p,v.converter,b);else if(f.regex){var k=f.regex;k instanceof RegExp||(k=new RegExp(k,"g")),p=p.replace(k,f.replace)}return p}),n.subParser("spanGamut",function(f,p,b){"use strict";return f=b.converter._dispatch("spanGamut.before",f,p,b),f=n.subParser("codeSpans")(f,p,b),f=n.subParser("escapeSpecialCharsWithinTagAttributes")(f,p,b),f=n.subParser("encodeBackslashEscapes")(f,p,b),f=n.subParser("images")(f,p,b),f=n.subParser("anchors")(f,p,b),f=n.subParser("autoLinks")(f,p,b),f=n.subParser("simplifiedAutoLinks")(f,p,b),f=n.subParser("emoji")(f,p,b),f=n.subParser("underline")(f,p,b),f=n.subParser("italicsAndBold")(f,p,b),f=n.subParser("strikethrough")(f,p,b),f=n.subParser("ellipsis")(f,p,b),f=n.subParser("hashHTMLSpans")(f,p,b),f=n.subParser("encodeAmpsAndAngles")(f,p,b),p.simpleLineBreaks?/\n\nK/.test(f)||(f=f.replace(/\n+/g,`<br />
`)):f=f.replace(/  +\n/g,`<br />
`),f=b.converter._dispatch("spanGamut.after",f,p,b),f}),n.subParser("strikethrough",function(f,p,b){"use strict";function v(k){return p.simplifiedAutoLink&&(k=n.subParser("simplifiedAutoLinks")(k,p,b)),"<del>"+k+"</del>"}return p.strikethrough&&(f=b.converter._dispatch("strikethrough.before",f,p,b),f=f.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(k,A){return v(A)}),f=b.converter._dispatch("strikethrough.after",f,p,b)),f}),n.subParser("stripLinkDefinitions",function(f,p,b){"use strict";var v=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=0))/gm,k=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=0)|(?=\n\[))/gm;f+="\xA80";var A=function(T,U,C,$,F,q,E){return U=U.toLowerCase(),f.toLowerCase().split(U).length-1<2?T:(C.match(/^data:.+?\/.+?;base64,/)?b.gUrls[U]=C.replace(/\s/g,""):b.gUrls[U]=n.subParser("encodeAmpsAndAngles")(C,p,b),q?q+E:(E&&(b.gTitles[U]=E.replace(/"|'/g,"&quot;")),p.parseImgDimensions&&$&&F&&(b.gDimensions[U]={width:$,height:F}),""))};return f=f.replace(k,A),f=f.replace(v,A),f=f.replace(/0/,""),f}),n.subParser("tables",function(f,p,b){"use strict";if(!p.tables)return f;var v=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm,k=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|0)/gm;function A(F){return/^:[ \t]*--*$/.test(F)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(F)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(F)?' style="text-align:center;"':""}function T(F,q){var E="";return F=F.trim(),(p.tablesHeaderId||p.tableHeaderId)&&(E=' id="'+F.replace(/ /g,"_").toLowerCase()+'"'),F=n.subParser("spanGamut")(F,p,b),"<th"+E+q+">"+F+`</th>
`}function U(F,q){var E=n.subParser("spanGamut")(F,p,b);return"<td"+q+">"+E+`</td>
`}function C(F,q){for(var E=`<table>
<thead>
<tr>
`,M=F.length,V=0;V<M;++V)E+=F[V];for(E+=`</tr>
</thead>
<tbody>
`,V=0;V<q.length;++V){E+=`<tr>
`;for(var K=0;K<M;++K)E+=q[V][K];E+=`</tr>
`}return E+=`</tbody>
</table>
`,E}function $(F){var q,E=F.split(`
`);for(q=0;q<E.length;++q)/^ {0,3}\|/.test(E[q])&&(E[q]=E[q].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(E[q])&&(E[q]=E[q].replace(/\|[ \t]*$/,"")),E[q]=n.subParser("codeSpans")(E[q],p,b);var M=E[0].split("|").map(function(ve){return ve.trim()}),V=E[1].split("|").map(function(ve){return ve.trim()}),K=[],Z=[],W=[],J=[];for(E.shift(),E.shift(),q=0;q<E.length;++q)E[q].trim()!==""&&K.push(E[q].split("|").map(function(ve){return ve.trim()}));if(M.length<V.length)return F;for(q=0;q<V.length;++q)W.push(A(V[q]));for(q=0;q<M.length;++q)n.helper.isUndefined(W[q])&&(W[q]=""),Z.push(T(M[q],W[q]));for(q=0;q<K.length;++q){for(var ue=[],_e=0;_e<Z.length;++_e)n.helper.isUndefined(K[q][_e]),ue.push(U(K[q][_e],W[_e]));J.push(ue)}return C(Z,J)}return f=b.converter._dispatch("tables.before",f,p,b),f=f.replace(/\\(\|)/g,n.helper.escapeCharactersCallback),f=f.replace(v,$),f=f.replace(k,$),f=b.converter._dispatch("tables.after",f,p,b),f}),n.subParser("underline",function(f,p,b){"use strict";return p.underline&&(f=b.converter._dispatch("underline.before",f,p,b),p.literalMidWordUnderscores?(f=f.replace(/\b___(\S[\s\S]*?)___\b/g,function(v,k){return"<u>"+k+"</u>"}),f=f.replace(/\b__(\S[\s\S]*?)__\b/g,function(v,k){return"<u>"+k+"</u>"})):(f=f.replace(/___(\S[\s\S]*?)___/g,function(v,k){return/\S$/.test(k)?"<u>"+k+"</u>":v}),f=f.replace(/__(\S[\s\S]*?)__/g,function(v,k){return/\S$/.test(k)?"<u>"+k+"</u>":v})),f=f.replace(/(_)/g,n.helper.escapeCharactersCallback),f=b.converter._dispatch("underline.after",f,p,b)),f}),n.subParser("unescapeSpecialChars",function(f,p,b){"use strict";return f=b.converter._dispatch("unescapeSpecialChars.before",f,p,b),f=f.replace(/E(\d+)E/g,function(v,k){var A=parseInt(k);return String.fromCharCode(A)}),f=b.converter._dispatch("unescapeSpecialChars.after",f,p,b),f}),n.subParser("makeMarkdown.blockquote",function(f,p){"use strict";var b="";if(f.hasChildNodes())for(var v=f.childNodes,k=v.length,A=0;A<k;++A){var T=n.subParser("makeMarkdown.node")(v[A],p);T!==""&&(b+=T)}return b=b.trim(),b="> "+b.split(`
`).join(`
> `),b}),n.subParser("makeMarkdown.codeBlock",function(f,p){"use strict";var b=f.getAttribute("language"),v=f.getAttribute("precodenum");return"```"+b+`
`+p.preList[v]+"\n```"}),n.subParser("makeMarkdown.codeSpan",function(f){"use strict";return"`"+f.innerHTML+"`"}),n.subParser("makeMarkdown.emphasis",function(f,p){"use strict";var b="";if(f.hasChildNodes()){b+="*";for(var v=f.childNodes,k=v.length,A=0;A<k;++A)b+=n.subParser("makeMarkdown.node")(v[A],p);b+="*"}return b}),n.subParser("makeMarkdown.header",function(f,p,b){"use strict";var v=new Array(b+1).join("#"),k="";if(f.hasChildNodes()){k=v+" ";for(var A=f.childNodes,T=A.length,U=0;U<T;++U)k+=n.subParser("makeMarkdown.node")(A[U],p)}return k}),n.subParser("makeMarkdown.hr",function(){"use strict";return"---"}),n.subParser("makeMarkdown.image",function(f){"use strict";var p="";return f.hasAttribute("src")&&(p+="!["+f.getAttribute("alt")+"](",p+="<"+f.getAttribute("src")+">",f.hasAttribute("width")&&f.hasAttribute("height")&&(p+=" ="+f.getAttribute("width")+"x"+f.getAttribute("height")),f.hasAttribute("title")&&(p+=' "'+f.getAttribute("title")+'"'),p+=")"),p}),n.subParser("makeMarkdown.links",function(f,p){"use strict";var b="";if(f.hasChildNodes()&&f.hasAttribute("href")){var v=f.childNodes,k=v.length;b="[";for(var A=0;A<k;++A)b+=n.subParser("makeMarkdown.node")(v[A],p);b+="](",b+="<"+f.getAttribute("href")+">",f.hasAttribute("title")&&(b+=' "'+f.getAttribute("title")+'"'),b+=")"}return b}),n.subParser("makeMarkdown.list",function(f,p,b){"use strict";var v="";if(!f.hasChildNodes())return"";for(var k=f.childNodes,A=k.length,T=f.getAttribute("start")||1,U=0;U<A;++U)if(!(typeof k[U].tagName>"u"||k[U].tagName.toLowerCase()!=="li")){var C="";b==="ol"?C=T.toString()+". ":C="- ",v+=C+n.subParser("makeMarkdown.listItem")(k[U],p),++T}return v+=`
<!-- -->
`,v.trim()}),n.subParser("makeMarkdown.listItem",function(f,p){"use strict";for(var b="",v=f.childNodes,k=v.length,A=0;A<k;++A)b+=n.subParser("makeMarkdown.node")(v[A],p);return/\n$/.test(b)?b=b.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):b+=`
`,b}),n.subParser("makeMarkdown.node",function(f,p,b){"use strict";b=b||!1;var v="";if(f.nodeType===3)return n.subParser("makeMarkdown.txt")(f,p);if(f.nodeType===8)return"<!--"+f.data+`-->

`;if(f.nodeType!==1)return"";var k=f.tagName.toLowerCase();switch(k){case"h1":b||(v=n.subParser("makeMarkdown.header")(f,p,1)+`

`);break;case"h2":b||(v=n.subParser("makeMarkdown.header")(f,p,2)+`

`);break;case"h3":b||(v=n.subParser("makeMarkdown.header")(f,p,3)+`

`);break;case"h4":b||(v=n.subParser("makeMarkdown.header")(f,p,4)+`

`);break;case"h5":b||(v=n.subParser("makeMarkdown.header")(f,p,5)+`

`);break;case"h6":b||(v=n.subParser("makeMarkdown.header")(f,p,6)+`

`);break;case"p":b||(v=n.subParser("makeMarkdown.paragraph")(f,p)+`

`);break;case"blockquote":b||(v=n.subParser("makeMarkdown.blockquote")(f,p)+`

`);break;case"hr":b||(v=n.subParser("makeMarkdown.hr")(f,p)+`

`);break;case"ol":b||(v=n.subParser("makeMarkdown.list")(f,p,"ol")+`

`);break;case"ul":b||(v=n.subParser("makeMarkdown.list")(f,p,"ul")+`

`);break;case"precode":b||(v=n.subParser("makeMarkdown.codeBlock")(f,p)+`

`);break;case"pre":b||(v=n.subParser("makeMarkdown.pre")(f,p)+`

`);break;case"table":b||(v=n.subParser("makeMarkdown.table")(f,p)+`

`);break;case"code":v=n.subParser("makeMarkdown.codeSpan")(f,p);break;case"em":case"i":v=n.subParser("makeMarkdown.emphasis")(f,p);break;case"strong":case"b":v=n.subParser("makeMarkdown.strong")(f,p);break;case"del":v=n.subParser("makeMarkdown.strikethrough")(f,p);break;case"a":v=n.subParser("makeMarkdown.links")(f,p);break;case"img":v=n.subParser("makeMarkdown.image")(f,p);break;default:v=f.outerHTML+`

`}return v}),n.subParser("makeMarkdown.paragraph",function(f,p){"use strict";var b="";if(f.hasChildNodes())for(var v=f.childNodes,k=v.length,A=0;A<k;++A)b+=n.subParser("makeMarkdown.node")(v[A],p);return b=b.trim(),b}),n.subParser("makeMarkdown.pre",function(f,p){"use strict";var b=f.getAttribute("prenum");return"<pre>"+p.preList[b]+"</pre>"}),n.subParser("makeMarkdown.strikethrough",function(f,p){"use strict";var b="";if(f.hasChildNodes()){b+="~~";for(var v=f.childNodes,k=v.length,A=0;A<k;++A)b+=n.subParser("makeMarkdown.node")(v[A],p);b+="~~"}return b}),n.subParser("makeMarkdown.strong",function(f,p){"use strict";var b="";if(f.hasChildNodes()){b+="**";for(var v=f.childNodes,k=v.length,A=0;A<k;++A)b+=n.subParser("makeMarkdown.node")(v[A],p);b+="**"}return b}),n.subParser("makeMarkdown.table",function(f,p){"use strict";var b="",v=[[],[]],k=f.querySelectorAll("thead>tr>th"),A=f.querySelectorAll("tbody>tr"),T,U;for(T=0;T<k.length;++T){var C=n.subParser("makeMarkdown.tableCell")(k[T],p),$="---";if(k[T].hasAttribute("style")){var F=k[T].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(F){case"text-align:left;":$=":---";break;case"text-align:right;":$="---:";break;case"text-align:center;":$=":---:";break}}v[0][T]=C.trim(),v[1][T]=$}for(T=0;T<A.length;++T){var q=v.push([])-1,E=A[T].getElementsByTagName("td");for(U=0;U<k.length;++U){var M=" ";typeof E[U]<"u"&&(M=n.subParser("makeMarkdown.tableCell")(E[U],p)),v[q].push(M)}}var V=3;for(T=0;T<v.length;++T)for(U=0;U<v[T].length;++U){var K=v[T][U].length;K>V&&(V=K)}for(T=0;T<v.length;++T){for(U=0;U<v[T].length;++U)T===1?v[T][U].slice(-1)===":"?v[T][U]=n.helper.padEnd(v[T][U].slice(-1),V-1,"-")+":":v[T][U]=n.helper.padEnd(v[T][U],V,"-"):v[T][U]=n.helper.padEnd(v[T][U],V);b+="| "+v[T].join(" | ")+` |
`}return b.trim()}),n.subParser("makeMarkdown.tableCell",function(f,p){"use strict";var b="";if(!f.hasChildNodes())return"";for(var v=f.childNodes,k=v.length,A=0;A<k;++A)b+=n.subParser("makeMarkdown.node")(v[A],p,!0);return b.trim()}),n.subParser("makeMarkdown.txt",function(f){"use strict";var p=f.nodeValue;return p=p.replace(/ +/g," "),p=p.replace(/NBSP;/g," "),p=n.helper.unescapeHTMLEntities(p),p=p.replace(/([*_~|`])/g,"\\$1"),p=p.replace(/^(\s*)>/g,"\\$1>"),p=p.replace(/^#/gm,"\\#"),p=p.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),p=p.replace(/^( {0,3}\d+)\./gm,"$1\\."),p=p.replace(/^( {0,3})([+-])/gm,"$1\\$2"),p=p.replace(/]([\s]*)\(/g,"\\]$1\\("),p=p.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),p});var B=this;typeof define=="function"&&define.amd?define(function(){"use strict";return n}):typeof cc<"u"&&cc.exports?cc.exports=n:B.showdown=n}).call(im)});var M5={};var U5,z5,ce,Iw=B_(()=>{U5=Object.defineProperty,z5=(e,t,n)=>t in e?U5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ce=(e,t,n)=>(z5(e,typeof t!="symbol"?t+"":t,n),n);(function(){"use strict";var e,t,n,r,o;let i='*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.fixed{position:fixed}.absolute{position:absolute}.bottom-1{bottom:.25rem}.right-2{right:.5rem}.right-3{right:.75rem}.top-0{top:0}.m-auto{margin:auto}.mx-2{margin-left:.5rem;margin-right:.5rem}.my-2{margin-top:.5rem;margin-bottom:.5rem}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.ml-2{margin-left:.5rem}.mr-2{margin-right:.5rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.box-border{box-sizing:border-box}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.h-10{height:2.5rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.w-10{width:2.5rem}.w-40{width:10rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-full{width:100%}.max-w-56{max-width:14rem}@keyframes moveIn{0%{transform:translateY(-10px)}to{transform:translateY(0)}}.animate-fadein{animation:fadeIn 1s ease-in-out,moveIn 1s ease-in-out}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.animate-show{animation:fadeIn .2s ease-in-out}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-grabbing{cursor:grabbing}.cursor-pointer{cursor:pointer}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.gap-2{gap:.5rem}.overflow-hidden{overflow:hidden}.overflow-ellipsis{text-overflow:ellipsis}.whitespace-nowrap{white-space:nowrap}.break-all{word-break:break-all}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-md{border-radius:.375rem}.border-0{border-width:0px}.border-2{border-width:2px}.border-solid{border-style:solid}.border-transparent{border-color:transparent}.bg-cyan-700{--tw-bg-opacity: 1;background-color:rgb(14 116 144 / var(--tw-bg-opacity))}.bg-cyan-800{--tw-bg-opacity: 1;background-color:rgb(21 94 117 / var(--tw-bg-opacity))}.bg-cyan-900{--tw-bg-opacity: 1;background-color:rgb(22 78 99 / var(--tw-bg-opacity))}.bg-cyan-950{--tw-bg-opacity: 1;background-color:rgb(8 51 68 / var(--tw-bg-opacity))}.bg-green-700{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity))}.bg-green-800{--tw-bg-opacity: 1;background-color:rgb(22 101 52 / var(--tw-bg-opacity))}.bg-green-900{--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity))}.bg-green-950{--tw-bg-opacity: 1;background-color:rgb(5 46 22 / var(--tw-bg-opacity))}.bg-neutral-700{--tw-bg-opacity: 1;background-color:rgb(64 64 64 / var(--tw-bg-opacity))}.bg-neutral-800{--tw-bg-opacity: 1;background-color:rgb(38 38 38 / var(--tw-bg-opacity))}.bg-neutral-900{--tw-bg-opacity: 1;background-color:rgb(23 23 23 / var(--tw-bg-opacity))}.bg-neutral-950{--tw-bg-opacity: 1;background-color:rgb(10 10 10 / var(--tw-bg-opacity))}.bg-orange-700{--tw-bg-opacity: 1;background-color:rgb(194 65 12 / var(--tw-bg-opacity))}.bg-orange-800{--tw-bg-opacity: 1;background-color:rgb(154 52 18 / var(--tw-bg-opacity))}.bg-orange-900{--tw-bg-opacity: 1;background-color:rgb(124 45 18 / var(--tw-bg-opacity))}.bg-orange-950{--tw-bg-opacity: 1;background-color:rgb(67 20 7 / var(--tw-bg-opacity))}.bg-purple-700{--tw-bg-opacity: 1;background-color:rgb(126 34 206 / var(--tw-bg-opacity))}.bg-purple-800{--tw-bg-opacity: 1;background-color:rgb(107 33 168 / var(--tw-bg-opacity))}.bg-purple-900{--tw-bg-opacity: 1;background-color:rgb(88 28 135 / var(--tw-bg-opacity))}.bg-purple-950{--tw-bg-opacity: 1;background-color:rgb(59 7 100 / var(--tw-bg-opacity))}.bg-red-700{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity))}.bg-red-800{--tw-bg-opacity: 1;background-color:rgb(153 27 27 / var(--tw-bg-opacity))}.bg-red-900{--tw-bg-opacity: 1;background-color:rgb(127 29 29 / var(--tw-bg-opacity))}.bg-red-950{--tw-bg-opacity: 1;background-color:rgb(69 10 10 / var(--tw-bg-opacity))}.bg-stone-700{--tw-bg-opacity: 1;background-color:rgb(68 64 60 / var(--tw-bg-opacity))}.bg-stone-800{--tw-bg-opacity: 1;background-color:rgb(41 37 36 / var(--tw-bg-opacity))}.bg-stone-900{--tw-bg-opacity: 1;background-color:rgb(28 25 23 / var(--tw-bg-opacity))}.bg-stone-950{--tw-bg-opacity: 1;background-color:rgb(12 10 9 / var(--tw-bg-opacity))}.bg-transparent{background-color:transparent}.bg-yellow-100{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity))}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.from-cyan-900{--tw-gradient-from: #164e63 var(--tw-gradient-from-position);--tw-gradient-to: rgb(22 78 99 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-green-900{--tw-gradient-from: #14532d var(--tw-gradient-from-position);--tw-gradient-to: rgb(20 83 45 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-neutral-900{--tw-gradient-from: #171717 var(--tw-gradient-from-position);--tw-gradient-to: rgb(23 23 23 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-900{--tw-gradient-from: #7c2d12 var(--tw-gradient-from-position);--tw-gradient-to: rgb(124 45 18 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-900{--tw-gradient-from: #581c87 var(--tw-gradient-from-position);--tw-gradient-to: rgb(88 28 135 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-red-900{--tw-gradient-from: #7f1d1d var(--tw-gradient-from-position);--tw-gradient-to: rgb(127 29 29 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-stone-900{--tw-gradient-from: #1c1917 var(--tw-gradient-from-position);--tw-gradient-to: rgb(28 25 23 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.to-cyan-700{--tw-gradient-to: #0e7490 var(--tw-gradient-to-position)}.to-green-700{--tw-gradient-to: #15803d var(--tw-gradient-to-position)}.to-neutral-700{--tw-gradient-to: #404040 var(--tw-gradient-to-position)}.to-orange-700{--tw-gradient-to: #c2410c var(--tw-gradient-to-position)}.to-purple-700{--tw-gradient-to: #7e22ce var(--tw-gradient-to-position)}.to-red-700{--tw-gradient-to: #b91c1c var(--tw-gradient-to-position)}.to-stone-700{--tw-gradient-to: #44403c var(--tw-gradient-to-position)}.p-2{padding:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.text-center{text-align:center}.font-sans{font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.leading-3{line-height:.75rem}.leading-4{line-height:1rem}.leading-5{line-height:1.25rem}.text-cyan-600{--tw-text-opacity: 1;color:rgb(8 145 178 / var(--tw-text-opacity))}.text-green-600{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity))}.text-neutral-600{--tw-text-opacity: 1;color:rgb(82 82 82 / var(--tw-text-opacity))}.text-neutral-800{--tw-text-opacity: 1;color:rgb(38 38 38 / var(--tw-text-opacity))}.text-orange-600{--tw-text-opacity: 1;color:rgb(234 88 12 / var(--tw-text-opacity))}.text-purple-600{--tw-text-opacity: 1;color:rgb(147 51 234 / var(--tw-text-opacity))}.text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity))}.text-stone-600{--tw-text-opacity: 1;color:rgb(87 83 78 / var(--tw-text-opacity))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.underline{text-decoration-line:underline}.no-underline{text-decoration-line:none}.decoration-2{text-decoration-thickness:2px}.underline-offset-4{text-underline-offset:4px}.opacity-25{opacity:.25}.opacity-75{opacity:.75}.shadow-\\[0_0px_10px_0px_rgba\\(0\\,0\\,0\\,0\\.3\\)\\]{--tw-shadow: 0 0px 10px 0px rgba(0,0,0,.3);--tw-shadow-colored: 0 0px 10px 0px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_0px_30px_0px_rgba\\(0\\,0\\,0\\,0\\.6\\)\\]{--tw-shadow: 0 0px 30px 0px rgba(0,0,0,.6);--tw-shadow-colored: 0 0px 30px 0px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline-dashed{outline-style:dashed}.outline-1{outline-width:1px}.outline-offset-4{outline-offset:4px}.outline-cyan-500{outline-color:#06b6d4}.outline-green-500{outline-color:#22c55e}.outline-neutral-500{outline-color:#737373}.outline-orange-500{outline-color:#f97316}.outline-purple-500{outline-color:#a855f7}.outline-red-500{outline-color:#ef4444}.outline-stone-500{outline-color:#78716c}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.hover\\:bg-cyan-700:hover{--tw-bg-opacity: 1;background-color:rgb(14 116 144 / var(--tw-bg-opacity))}.hover\\:bg-cyan-800:hover{--tw-bg-opacity: 1;background-color:rgb(21 94 117 / var(--tw-bg-opacity))}.hover\\:bg-cyan-900:hover{--tw-bg-opacity: 1;background-color:rgb(22 78 99 / var(--tw-bg-opacity))}.hover\\:bg-cyan-950:hover{--tw-bg-opacity: 1;background-color:rgb(8 51 68 / var(--tw-bg-opacity))}.hover\\:bg-green-700:hover{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity))}.hover\\:bg-green-800:hover{--tw-bg-opacity: 1;background-color:rgb(22 101 52 / var(--tw-bg-opacity))}.hover\\:bg-green-900:hover{--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity))}.hover\\:bg-green-950:hover{--tw-bg-opacity: 1;background-color:rgb(5 46 22 / var(--tw-bg-opacity))}.hover\\:bg-neutral-700:hover{--tw-bg-opacity: 1;background-color:rgb(64 64 64 / var(--tw-bg-opacity))}.hover\\:bg-neutral-800:hover{--tw-bg-opacity: 1;background-color:rgb(38 38 38 / var(--tw-bg-opacity))}.hover\\:bg-neutral-900:hover{--tw-bg-opacity: 1;background-color:rgb(23 23 23 / var(--tw-bg-opacity))}.hover\\:bg-neutral-950:hover{--tw-bg-opacity: 1;background-color:rgb(10 10 10 / var(--tw-bg-opacity))}.hover\\:bg-orange-700:hover{--tw-bg-opacity: 1;background-color:rgb(194 65 12 / var(--tw-bg-opacity))}.hover\\:bg-orange-800:hover{--tw-bg-opacity: 1;background-color:rgb(154 52 18 / var(--tw-bg-opacity))}.hover\\:bg-orange-900:hover{--tw-bg-opacity: 1;background-color:rgb(124 45 18 / var(--tw-bg-opacity))}.hover\\:bg-orange-950:hover{--tw-bg-opacity: 1;background-color:rgb(67 20 7 / var(--tw-bg-opacity))}.hover\\:bg-purple-700:hover{--tw-bg-opacity: 1;background-color:rgb(126 34 206 / var(--tw-bg-opacity))}.hover\\:bg-purple-800:hover{--tw-bg-opacity: 1;background-color:rgb(107 33 168 / var(--tw-bg-opacity))}.hover\\:bg-purple-900:hover{--tw-bg-opacity: 1;background-color:rgb(88 28 135 / var(--tw-bg-opacity))}.hover\\:bg-purple-950:hover{--tw-bg-opacity: 1;background-color:rgb(59 7 100 / var(--tw-bg-opacity))}.hover\\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity))}.hover\\:bg-red-800:hover{--tw-bg-opacity: 1;background-color:rgb(153 27 27 / var(--tw-bg-opacity))}.hover\\:bg-red-900:hover{--tw-bg-opacity: 1;background-color:rgb(127 29 29 / var(--tw-bg-opacity))}.hover\\:bg-red-950:hover{--tw-bg-opacity: 1;background-color:rgb(69 10 10 / var(--tw-bg-opacity))}.hover\\:bg-stone-700:hover{--tw-bg-opacity: 1;background-color:rgb(68 64 60 / var(--tw-bg-opacity))}.hover\\:bg-stone-800:hover{--tw-bg-opacity: 1;background-color:rgb(41 37 36 / var(--tw-bg-opacity))}.hover\\:bg-stone-900:hover{--tw-bg-opacity: 1;background-color:rgb(28 25 23 / var(--tw-bg-opacity))}.hover\\:bg-stone-950:hover{--tw-bg-opacity: 1;background-color:rgb(12 10 9 / var(--tw-bg-opacity))}.disabled\\:cursor-default:disabled{cursor:default}.disabled\\:bg-neutral-400:disabled{--tw-bg-opacity: 1;background-color:rgb(163 163 163 / var(--tw-bg-opacity))}.disabled\\:text-neutral-200:disabled{--tw-text-opacity: 1;color:rgb(229 229 229 / var(--tw-text-opacity))}.group:hover .group-hover\\:underline{text-decoration-line:underline}@media (min-width: 640px){.sm\\:w-96{width:24rem}}';function a(){}function u(s){return s()}function d(){return Object.create(null)}function h(s){s.forEach(u)}function m(s){return typeof s=="function"}function w(s,c){return s!=s?c==c:s!==c||s&&typeof s=="object"||typeof s=="function"}let x;function P(s,c){return s===c?!0:(x||(x=document.createElement("a")),x.href=c,s===x.href)}function I(s){return Object.keys(s).length===0}function S(s,...c){if(s==null){for(let g of c)g(void 0);return a}let l=s.subscribe(...c);return l.unsubscribe?()=>l.unsubscribe():l}function N(s,c,l){s.$$.on_destroy.push(S(c,l))}let z=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function B(s,c){s.appendChild(c)}function f(s,c,l){s.insertBefore(c,l||null)}function p(s){s.parentNode&&s.parentNode.removeChild(s)}function b(s,c){for(let l=0;l<s.length;l+=1)s[l]&&s[l].d(c)}function v(s){return document.createElement(s)}function k(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function A(s){return document.createTextNode(s)}function T(){return A(" ")}function U(){return A("")}function C(s,c,l,g){return s.addEventListener(c,l,g),()=>s.removeEventListener(c,l,g)}function $(s,c,l){l==null?s.removeAttribute(c):s.getAttribute(c)!==l&&s.setAttribute(c,l)}function F(s){return Array.from(s.childNodes)}function q(s,c){c=""+c,s.data!==c&&(s.data=c)}function E(s,c){s.value=c??""}function M(s,c,l){for(let g=0;g<s.options.length;g+=1){let y=s.options[g];if(y.__value===c){y.selected=!0;return}}(!l||c!==void 0)&&(s.selectedIndex=-1)}function V(s){let c=s.querySelector(":checked");return c&&c.__value}function K(s,c,l){s.classList.toggle(c,!!l)}let Z;function W(s){Z=s}function J(){if(!Z)throw new Error("Function called outside component initialization");return Z}function ue(s){J().$$.on_mount.push(s)}let _e=[],ve=[],Pe=[],oe=[],Se=Promise.resolve(),Ve=!1;function Re(){Ve||(Ve=!0,Se.then(de))}function je(s){Pe.push(s)}let xt=new Set,Qe=0;function de(){if(Qe!==0)return;let s=Z;do{try{for(;Qe<_e.length;){let c=_e[Qe];Qe++,W(c),De(c.$$)}}catch(c){throw _e.length=0,Qe=0,c}for(W(null),_e.length=0,Qe=0;ve.length;)ve.pop()();for(let c=0;c<Pe.length;c+=1){let l=Pe[c];xt.has(l)||(xt.add(l),l())}Pe.length=0}while(_e.length);for(;oe.length;)oe.pop()();Ve=!1,xt.clear(),W(s)}function De(s){if(s.fragment!==null){s.update(),h(s.before_update);let c=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,c),s.after_update.forEach(je)}}function Ce(s){let c=[],l=[];Pe.forEach(g=>s.indexOf(g)===-1?c.push(g):l.push(g)),l.forEach(g=>g()),Pe=c}let Ie=new Set,qe;function Lt(){qe={r:0,c:[],p:qe}}function Wt(){qe.r||h(qe.c),qe=qe.p}function Mt(s,c){s&&s.i&&(Ie.delete(s),s.i(c))}function un(s,c,l,g){if(s&&s.o){if(Ie.has(s))return;Ie.add(s),qe.c.push(()=>{Ie.delete(s),g&&(l&&s.d(1),g())}),s.o(c)}else g&&g()}function lh(s){return s?.length!==void 0?s:Array.from(s)}function dh(s){s&&s.c()}function Eu(s,c,l){let{fragment:g,after_update:y}=s.$$;g&&g.m(c,l),je(()=>{let _=s.$$.on_mount.map(u).filter(m);s.$$.on_destroy?s.$$.on_destroy.push(..._):h(_),s.$$.on_mount=[]}),y.forEach(je)}function xu(s,c){let l=s.$$;l.fragment!==null&&(Ce(l.after_update),h(l.on_destroy),l.fragment&&l.fragment.d(c),l.on_destroy=l.fragment=null,l.ctx=[])}function Dw(s,c){s.$$.dirty[0]===-1&&(_e.push(s),Re(),s.$$.dirty.fill(0)),s.$$.dirty[c/31|0]|=1<<c%31}function fh(s,c,l,g,y,_,L=null,R=[-1]){let O=Z;W(s);let D=s.$$={fragment:null,ctx:[],props:_,update:a,not_equal:y,bound:d(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(O?O.$$.context:[])),callbacks:d(),dirty:R,skip_bound:!1,root:c.target||O.$$.root};L&&L(D.root);let H=!1;if(D.ctx=l?l(s,c.props||{},(j,Y,...G)=>{let ee=G.length?G[0]:Y;return D.ctx&&y(D.ctx[j],D.ctx[j]=ee)&&(!D.skip_bound&&D.bound[j]&&D.bound[j](ee),H&&Dw(s,j)),Y}):[],D.update(),H=!0,h(D.before_update),D.fragment=g?g(D.ctx):!1,c.target){if(c.hydrate){let j=F(c.target);D.fragment&&D.fragment.l(j),j.forEach(p)}else D.fragment&&D.fragment.c();c.intro&&Mt(s.$$.fragment),Eu(s,c.target,c.anchor),de()}W(O)}class hh{constructor(){ce(this,"$$"),ce(this,"$$set")}$destroy(){xu(this,1),this.$destroy=a}$on(c,l){if(!m(l))return a;let g=this.$$.callbacks[c]||(this.$$.callbacks[c]=[]);return g.push(l),()=>{let y=g.indexOf(l);y!==-1&&g.splice(y,1)}}$set(c){this.$$set&&!I(c)&&(this.$$.skip_bound=!0,this.$$set(c),this.$$.skip_bound=!1)}}let Fw="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Fw);function jw(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ku={exports:{}};function ph(s,c=100,l={}){if(typeof s!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof s}\`.`);if(c<0)throw new RangeError("`wait` must not be negative.");let{immediate:g}=typeof l=="boolean"?{immediate:l}:l,y,_,L,R,O;function D(){let j=Date.now()-R;if(j<c&&j>=0)L=setTimeout(D,c-j);else if(L=void 0,!g){let Y=y,G=_;y=void 0,_=void 0,O=s.apply(Y,G)}}let H=function(...j){if(y&&this!==y)throw new Error("Debounced method called with different contexts.");y=this,_=j,R=Date.now();let Y=g&&!L;if(L||(L=setTimeout(D,c)),Y){let G=y,ee=_;y=void 0,_=void 0,O=s.apply(G,ee)}return O};return H.clear=()=>{L&&(clearTimeout(L),L=void 0)},H.flush=()=>{if(!L)return;let j=y,Y=_;y=void 0,_=void 0,O=s.apply(j,Y),clearTimeout(L),L=void 0},H}ku.exports.debounce=ph,ku.exports=ph;var Hw=ku.exports;let gh=jw(Hw),Su=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;let mh=s=>s instanceof Uint8Array,Au=s=>new DataView(s.buffer,s.byteOffset,s.byteLength),zn=(s,c)=>s<<32-c|s>>>c;if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");let Vw=Array.from({length:256},(s,c)=>c.toString(16).padStart(2,"0"));function Qt(s){if(!mh(s))throw new Error("Uint8Array expected");let c="";for(let l=0;l<s.length;l++)c+=Vw[s[l]];return c}function $u(s){if(typeof s!="string")throw new Error("hex string expected, got "+typeof s);let c=s.length;if(c%2)throw new Error("padded hex string expected, got unpadded hex of length "+c);let l=new Uint8Array(c/2);for(let g=0;g<l.length;g++){let y=g*2,_=s.slice(y,y+2),L=Number.parseInt(_,16);if(Number.isNaN(L)||L<0)throw new Error("Invalid byte sequence");l[g]=L}return l}function qw(s){if(typeof s!="string")throw new Error(`utf8ToBytes expected string, got ${typeof s}`);return new Uint8Array(new TextEncoder().encode(s))}function bh(s){if(typeof s=="string"&&(s=qw(s)),!mh(s))throw new Error(`expected Uint8Array, got ${typeof s}`);return s}let Ww=class{clone(){return this._cloneInto()}};function wh(s){let c=g=>s().update(bh(g)).digest(),l=s();return c.outputLen=l.outputLen,c.blockLen=l.blockLen,c.create=()=>s(),c}function Qw(s=32){if(Su&&typeof Su.getRandomValues=="function")return Su.getRandomValues(new Uint8Array(s));throw new Error("crypto.getRandomValues must be defined")}function yh(s){if(!Number.isSafeInteger(s)||s<0)throw new Error(`Wrong positive integer: ${s}`)}function vh(s,...c){if(!(s instanceof Uint8Array))throw new Error("Expected Uint8Array");if(c.length>0&&!c.includes(s.length))throw new Error(`Expected Uint8Array of length ${c}, not of length=${s.length}`)}function Kw(s){if(typeof s!="function"||typeof s.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");yh(s.outputLen),yh(s.blockLen)}function ia(s,c=!0){if(s.destroyed)throw new Error("Hash instance has been destroyed");if(c&&s.finished)throw new Error("Hash#digest() has already been called")}function Gw(s,c){vh(s);let l=c.outputLen;if(s.length<l)throw new Error(`digestInto() expects output buffer of length at least ${l}`)}let Tu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;let _h=s=>s instanceof Uint8Array,Bu=s=>new DataView(s.buffer,s.byteOffset,s.byteLength),Mn=(s,c)=>s<<32-c|s>>>c;if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");function Zw(s){if(typeof s!="string")throw new Error(`utf8ToBytes expected string, got ${typeof s}`);return new Uint8Array(new TextEncoder().encode(s))}function Lu(s){if(typeof s=="string"&&(s=Zw(s)),!_h(s))throw new Error(`expected Uint8Array, got ${typeof s}`);return s}function Yw(...s){let c=new Uint8Array(s.reduce((g,y)=>g+y.length,0)),l=0;return s.forEach(g=>{if(!_h(g))throw new Error("Uint8Array expected");c.set(g,l),l+=g.length}),c}class Eh{clone(){return this._cloneInto()}}function Jw(s){let c=g=>s().update(Lu(g)).digest(),l=s();return c.outputLen=l.outputLen,c.blockLen=l.blockLen,c.create=()=>s(),c}function xh(s=32){if(Tu&&typeof Tu.getRandomValues=="function")return Tu.getRandomValues(new Uint8Array(s));throw new Error("crypto.getRandomValues must be defined")}function Xw(s,c,l,g){if(typeof s.setBigUint64=="function")return s.setBigUint64(c,l,g);let y=BigInt(32),_=BigInt(4294967295),L=Number(l>>y&_),R=Number(l&_),O=g?4:0,D=g?0:4;s.setUint32(c+O,L,g),s.setUint32(c+D,R,g)}let ey=class extends Eh{constructor(s,c,l,g){super(),this.blockLen=s,this.outputLen=c,this.padOffset=l,this.isLE=g,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(s),this.view=Bu(this.buffer)}update(s){ia(this);let{view:c,buffer:l,blockLen:g}=this;s=Lu(s);let y=s.length;for(let _=0;_<y;){let L=Math.min(g-this.pos,y-_);if(L===g){let R=Bu(s);for(;g<=y-_;_+=g)this.process(R,_);continue}l.set(s.subarray(_,_+L),this.pos),this.pos+=L,_+=L,this.pos===g&&(this.process(c,0),this.pos=0)}return this.length+=s.length,this.roundClean(),this}digestInto(s){ia(this),Gw(s,this),this.finished=!0;let{buffer:c,view:l,blockLen:g,isLE:y}=this,{pos:_}=this;c[_++]=128,this.buffer.subarray(_).fill(0),this.padOffset>g-_&&(this.process(l,0),_=0);for(let H=_;H<g;H++)c[H]=0;Xw(l,g-8,BigInt(this.length*8),y),this.process(l,0);let L=Bu(s),R=this.outputLen;if(R%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let O=R/4,D=this.get();if(O>D.length)throw new Error("_sha2: outputLen bigger than state");for(let H=0;H<O;H++)L.setUint32(4*H,D[H],y)}digest(){let{buffer:s,outputLen:c}=this;this.digestInto(s);let l=s.slice(0,c);return this.destroy(),l}_cloneInto(s){s||(s=new this.constructor),s.set(...this.get());let{blockLen:c,buffer:l,length:g,finished:y,destroyed:_,pos:L}=this;return s.length=g,s.pos=L,s.finished=y,s.destroyed=_,g%c&&s.buffer.set(l),s}},ty=(s,c,l)=>s&c^~s&l,ny=(s,c,l)=>s&c^s&l^c&l,ry=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ir=new Uint32Array(64),oy=class extends ey{constructor(){super(64,32,8,!1),this.A=Pr[0]|0,this.B=Pr[1]|0,this.C=Pr[2]|0,this.D=Pr[3]|0,this.E=Pr[4]|0,this.F=Pr[5]|0,this.G=Pr[6]|0,this.H=Pr[7]|0}get(){let{A:s,B:c,C:l,D:g,E:y,F:_,G:L,H:R}=this;return[s,c,l,g,y,_,L,R]}set(s,c,l,g,y,_,L,R){this.A=s|0,this.B=c|0,this.C=l|0,this.D=g|0,this.E=y|0,this.F=_|0,this.G=L|0,this.H=R|0}process(s,c){for(let H=0;H<16;H++,c+=4)Ir[H]=s.getUint32(c,!1);for(let H=16;H<64;H++){let j=Ir[H-15],Y=Ir[H-2],G=Mn(j,7)^Mn(j,18)^j>>>3,ee=Mn(Y,17)^Mn(Y,19)^Y>>>10;Ir[H]=ee+Ir[H-7]+G+Ir[H-16]|0}let{A:l,B:g,C:y,D:_,E:L,F:R,G:O,H:D}=this;for(let H=0;H<64;H++){let j=Mn(L,6)^Mn(L,11)^Mn(L,25),Y=D+j+ty(L,R,O)+ry[H]+Ir[H]|0,G=(Mn(l,2)^Mn(l,13)^Mn(l,22))+ny(l,g,y)|0;D=O,O=R,R=L,L=_+Y|0,_=y,y=g,g=l,l=Y+G|0}l=l+this.A|0,g=g+this.B|0,y=y+this.C|0,_=_+this.D|0,L=L+this.E|0,R=R+this.F|0,O=O+this.G|0,D=D+this.H|0,this.set(l,g,y,_,L,R,O,D)}roundClean(){Ir.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Cu=Jw(()=>new oy);let kh=BigInt(0),sa=BigInt(1),iy=BigInt(2),aa=s=>s instanceof Uint8Array,sy=Array.from({length:256},(s,c)=>c.toString(16).padStart(2,"0"));function ti(s){if(!aa(s))throw new Error("Uint8Array expected");let c="";for(let l=0;l<s.length;l++)c+=sy[s[l]];return c}function Sh(s){let c=s.toString(16);return c.length&1?`0${c}`:c}function Pu(s){if(typeof s!="string")throw new Error("hex string expected, got "+typeof s);return BigInt(s===""?"0":`0x${s}`)}function ni(s){if(typeof s!="string")throw new Error("hex string expected, got "+typeof s);let c=s.length;if(c%2)throw new Error("padded hex string expected, got unpadded hex of length "+c);let l=new Uint8Array(c/2);for(let g=0;g<l.length;g++){let y=g*2,_=s.slice(y,y+2),L=Number.parseInt(_,16);if(Number.isNaN(L)||L<0)throw new Error("Invalid byte sequence");l[g]=L}return l}function Yt(s){return Pu(ti(s))}function Iu(s){if(!aa(s))throw new Error("Uint8Array expected");return Pu(ti(Uint8Array.from(s).reverse()))}function Nr(s,c){return ni(s.toString(16).padStart(c*2,"0"))}function Nu(s,c){return Nr(s,c).reverse()}function ay(s){return ni(Sh(s))}function Dt(s,c,l){let g;if(typeof c=="string")try{g=ni(c)}catch(_){throw new Error(`${s} must be valid hex string, got "${c}". Cause: ${_}`)}else if(aa(c))g=Uint8Array.from(c);else throw new Error(`${s} must be hex string or Uint8Array`);let y=g.length;if(typeof l=="number"&&y!==l)throw new Error(`${s} expected ${l} bytes, got ${y}`);return g}function wo(...s){let c=new Uint8Array(s.reduce((g,y)=>g+y.length,0)),l=0;return s.forEach(g=>{if(!aa(g))throw new Error("Uint8Array expected");c.set(g,l),l+=g.length}),c}function cy(s,c){if(s.length!==c.length)return!1;for(let l=0;l<s.length;l++)if(s[l]!==c[l])return!1;return!0}function uy(s){if(typeof s!="string")throw new Error(`utf8ToBytes expected string, got ${typeof s}`);return new Uint8Array(new TextEncoder().encode(s))}function ly(s){let c;for(c=0;s>kh;s>>=sa,c+=1);return c}function dy(s,c){return s>>BigInt(c)&sa}let fy=(s,c,l)=>s|(l?sa:kh)<<BigInt(c),Ou=s=>(iy<<BigInt(s-1))-sa,Ru=s=>new Uint8Array(s),Ah=s=>Uint8Array.from(s);function $h(s,c,l){if(typeof s!="number"||s<2)throw new Error("hashLen must be a number");if(typeof c!="number"||c<2)throw new Error("qByteLen must be a number");if(typeof l!="function")throw new Error("hmacFn must be a function");let g=Ru(s),y=Ru(s),_=0,L=()=>{g.fill(1),y.fill(0),_=0},R=(...H)=>l(y,g,...H),O=(H=Ru())=>{y=R(Ah([0]),H),g=R(),H.length!==0&&(y=R(Ah([1]),H),g=R())},D=()=>{if(_++>=1e3)throw new Error("drbg: tried 1000 values");let H=0,j=[];for(;H<c;){g=R();let Y=g.slice();j.push(Y),H+=g.length}return wo(...j)};return(H,j)=>{L(),O(H);let Y;for(;!(Y=j(D()));)O();return L(),Y}}let hy={bigint:s=>typeof s=="bigint",function:s=>typeof s=="function",boolean:s=>typeof s=="boolean",string:s=>typeof s=="string",stringOrUint8Array:s=>typeof s=="string"||s instanceof Uint8Array,isSafeInteger:s=>Number.isSafeInteger(s),array:s=>Array.isArray(s),field:(s,c)=>c.Fp.isValid(s),hash:s=>typeof s=="function"&&Number.isSafeInteger(s.outputLen)};function Gi(s,c,l={}){let g=(y,_,L)=>{let R=hy[_];if(typeof R!="function")throw new Error(`Invalid validator "${_}", expected function`);let O=s[y];if(!(L&&O===void 0)&&!R(O,s))throw new Error(`Invalid param ${String(y)}=${O} (${typeof O}), expected ${_}`)};for(let[y,_]of Object.entries(c))g(y,_,!1);for(let[y,_]of Object.entries(l))g(y,_,!0);return s}let py=Object.freeze(Object.defineProperty({__proto__:null,bitGet:dy,bitLen:ly,bitMask:Ou,bitSet:fy,bytesToHex:ti,bytesToNumberBE:Yt,bytesToNumberLE:Iu,concatBytes:wo,createHmacDrbg:$h,ensureBytes:Dt,equalBytes:cy,hexToBytes:ni,hexToNumber:Pu,numberToBytesBE:Nr,numberToBytesLE:Nu,numberToHexUnpadded:Sh,numberToVarBytesBE:ay,utf8ToBytes:uy,validateObject:Gi},Symbol.toStringTag,{value:"Module"}));let Tt=BigInt(0),dt=BigInt(1),yo=BigInt(2),gy=BigInt(3),Uu=BigInt(4),Th=BigInt(5),Bh=BigInt(8);BigInt(9),BigInt(16);function Ct(s,c){let l=s%c;return l>=Tt?l:c+l}function my(s,c,l){if(l<=Tt||c<Tt)throw new Error("Expected power/modulo > 0");if(l===dt)return Tt;let g=dt;for(;c>Tt;)c&dt&&(g=g*s%l),s=s*s%l,c>>=dt;return g}function ln(s,c,l){let g=s;for(;c-- >Tt;)g*=g,g%=l;return g}function zu(s,c){if(s===Tt||c<=Tt)throw new Error(`invert: expected positive integers, got n=${s} mod=${c}`);let l=Ct(s,c),g=c,y=Tt,_=dt;for(;l!==Tt;){let L=g/l,R=g%l,O=y-_*L;g=l,l=R,y=_,_=O}if(g!==dt)throw new Error("invert: does not exist");return Ct(y,c)}function by(s){let c=(s-dt)/yo,l,g,y;for(l=s-dt,g=0;l%yo===Tt;l/=yo,g++);for(y=yo;y<s&&my(y,c,s)!==s-dt;y++);if(g===1){let L=(s+dt)/Uu;return function(R,O){let D=R.pow(O,L);if(!R.eql(R.sqr(D),O))throw new Error("Cannot find square root");return D}}let _=(l+dt)/yo;return function(L,R){if(L.pow(R,c)===L.neg(L.ONE))throw new Error("Cannot find square root");let O=g,D=L.pow(L.mul(L.ONE,y),l),H=L.pow(R,_),j=L.pow(R,l);for(;!L.eql(j,L.ONE);){if(L.eql(j,L.ZERO))return L.ZERO;let Y=1;for(let ee=L.sqr(j);Y<O&&!L.eql(ee,L.ONE);Y++)ee=L.sqr(ee);let G=L.pow(D,dt<<BigInt(O-Y-1));D=L.sqr(G),H=L.mul(H,G),j=L.mul(j,D),O=Y}return H}}function wy(s){if(s%Uu===gy){let c=(s+dt)/Uu;return function(l,g){let y=l.pow(g,c);if(!l.eql(l.sqr(y),g))throw new Error("Cannot find square root");return y}}if(s%Bh===Th){let c=(s-Th)/Bh;return function(l,g){let y=l.mul(g,yo),_=l.pow(y,c),L=l.mul(g,_),R=l.mul(l.mul(L,yo),_),O=l.mul(L,l.sub(R,l.ONE));if(!l.eql(l.sqr(O),g))throw new Error("Cannot find square root");return O}}return by(s)}let yy=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function vy(s){let c={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},l=yy.reduce((g,y)=>(g[y]="function",g),c);return Gi(s,l)}function _y(s,c,l){if(l<Tt)throw new Error("Expected power > 0");if(l===Tt)return s.ONE;if(l===dt)return c;let g=s.ONE,y=c;for(;l>Tt;)l&dt&&(g=s.mul(g,y)),y=s.sqr(y),l>>=dt;return g}function Ey(s,c){let l=new Array(c.length),g=c.reduce((_,L,R)=>s.is0(L)?_:(l[R]=_,s.mul(_,L)),s.ONE),y=s.inv(g);return c.reduceRight((_,L,R)=>s.is0(L)?_:(l[R]=s.mul(_,l[R]),s.mul(_,L)),y),l}function Lh(s,c){let l=c!==void 0?c:s.toString(2).length,g=Math.ceil(l/8);return{nBitLength:l,nByteLength:g}}function xy(s,c,l=!1,g={}){if(s<=Tt)throw new Error(`Expected Field ORDER > 0, got ${s}`);let{nBitLength:y,nByteLength:_}=Lh(s,c);if(_>2048)throw new Error("Field lengths over 2048 bytes are not supported");let L=wy(s),R=Object.freeze({ORDER:s,BITS:y,BYTES:_,MASK:Ou(y),ZERO:Tt,ONE:dt,create:O=>Ct(O,s),isValid:O=>{if(typeof O!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof O}`);return Tt<=O&&O<s},is0:O=>O===Tt,isOdd:O=>(O&dt)===dt,neg:O=>Ct(-O,s),eql:(O,D)=>O===D,sqr:O=>Ct(O*O,s),add:(O,D)=>Ct(O+D,s),sub:(O,D)=>Ct(O-D,s),mul:(O,D)=>Ct(O*D,s),pow:(O,D)=>_y(R,O,D),div:(O,D)=>Ct(O*zu(D,s),s),sqrN:O=>O*O,addN:(O,D)=>O+D,subN:(O,D)=>O-D,mulN:(O,D)=>O*D,inv:O=>zu(O,s),sqrt:g.sqrt||(O=>L(R,O)),invertBatch:O=>Ey(R,O),cmov:(O,D,H)=>H?D:O,toBytes:O=>l?Nu(O,_):Nr(O,_),fromBytes:O=>{if(O.length!==_)throw new Error(`Fp.fromBytes: expected ${_}, got ${O.length}`);return l?Iu(O):Yt(O)}});return Object.freeze(R)}function Ch(s){if(typeof s!="bigint")throw new Error("field order must be bigint");let c=s.toString(2).length;return Math.ceil(c/8)}function Ph(s){let c=Ch(s);return c+Math.ceil(c/2)}function ky(s,c,l=!1){let g=s.length,y=Ch(c),_=Ph(c);if(g<16||g<_||g>1024)throw new Error(`expected ${_}-1024 bytes of input, got ${g}`);let L=l?Yt(s):Iu(s),R=Ct(L,c-dt)+dt;return l?Nu(R,y):Nr(R,y)}let Sy=BigInt(0),Mu=BigInt(1);function Ay(s,c){let l=(y,_)=>{let L=_.negate();return y?L:_},g=y=>{let _=Math.ceil(c/y)+1,L=2**(y-1);return{windows:_,windowSize:L}};return{constTimeNegate:l,unsafeLadder(y,_){let L=s.ZERO,R=y;for(;_>Sy;)_&Mu&&(L=L.add(R)),R=R.double(),_>>=Mu;return L},precomputeWindow(y,_){let{windows:L,windowSize:R}=g(_),O=[],D=y,H=D;for(let j=0;j<L;j++){H=D,O.push(H);for(let Y=1;Y<R;Y++)H=H.add(D),O.push(H);D=H.double()}return O},wNAF(y,_,L){let{windows:R,windowSize:O}=g(y),D=s.ZERO,H=s.BASE,j=BigInt(2**y-1),Y=2**y,G=BigInt(y);for(let ee=0;ee<R;ee++){let Q=ee*O,te=Number(L&j);L>>=G,te>O&&(te-=Y,L+=Mu);let re=Q,X=Q+Math.abs(te)-1,fe=ee%2!==0,Ae=te<0;te===0?H=H.add(l(fe,_[re])):D=D.add(l(Ae,_[X]))}return{p:D,f:H}},wNAFCached(y,_,L,R){let O=y._WINDOW_SIZE||1,D=_.get(y);return D||(D=this.precomputeWindow(y,O),O!==1&&_.set(y,R(D))),this.wNAF(O,D,L)}}}function Ih(s){return vy(s.Fp),Gi(s,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Lh(s.n,s.nBitLength),...s,p:s.Fp.ORDER})}function $y(s){let c=Ih(s);Gi(c,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:l,Fp:g,a:y}=c;if(l){if(!g.eql(y,g.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof l!="object"||typeof l.beta!="bigint"||typeof l.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...c})}let{bytesToNumberBE:Ty,hexToBytes:By}=py,vo={Err:class extends Error{constructor(s=""){super(s)}},_parseInt(s){let{Err:c}=vo;if(s.length<2||s[0]!==2)throw new c("Invalid signature integer tag");let l=s[1],g=s.subarray(2,l+2);if(!l||g.length!==l)throw new c("Invalid signature integer: wrong length");if(g[0]&128)throw new c("Invalid signature integer: negative");if(g[0]===0&&!(g[1]&128))throw new c("Invalid signature integer: unnecessary leading zero");return{d:Ty(g),l:s.subarray(l+2)}},toSig(s){let{Err:c}=vo,l=typeof s=="string"?By(s):s;if(!(l instanceof Uint8Array))throw new Error("ui8a expected");let g=l.length;if(g<2||l[0]!=48)throw new c("Invalid signature tag");if(l[1]!==g-2)throw new c("Invalid signature: incorrect length");let{d:y,l:_}=vo._parseInt(l.subarray(2)),{d:L,l:R}=vo._parseInt(_);if(R.length)throw new c("Invalid signature: left bytes after parsing");return{r:y,s:L}},hexFromSig(s){let c=D=>Number.parseInt(D[0],16)&8?"00"+D:D,l=D=>{let H=D.toString(16);return H.length&1?`0${H}`:H},g=c(l(s.s)),y=c(l(s.r)),_=g.length/2,L=y.length/2,R=l(_),O=l(L);return`30${l(L+_+4)}02${O}${y}02${R}${g}`}},tr=BigInt(0),dn=BigInt(1);BigInt(2);let Nh=BigInt(3);BigInt(4);function Ly(s){let c=$y(s),{Fp:l}=c,g=c.toBytes||((ee,Q,te)=>{let re=Q.toAffine();return wo(Uint8Array.from([4]),l.toBytes(re.x),l.toBytes(re.y))}),y=c.fromBytes||(ee=>{let Q=ee.subarray(1),te=l.fromBytes(Q.subarray(0,l.BYTES)),re=l.fromBytes(Q.subarray(l.BYTES,2*l.BYTES));return{x:te,y:re}});function _(ee){let{a:Q,b:te}=c,re=l.sqr(ee),X=l.mul(re,ee);return l.add(l.add(X,l.mul(ee,Q)),te)}if(!l.eql(l.sqr(c.Gy),_(c.Gx)))throw new Error("bad generator point: equation left != right");function L(ee){return typeof ee=="bigint"&&tr<ee&&ee<c.n}function R(ee){if(!L(ee))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function O(ee){let{allowedPrivateKeyLengths:Q,nByteLength:te,wrapPrivateKey:re,n:X}=c;if(Q&&typeof ee!="bigint"){if(ee instanceof Uint8Array&&(ee=ti(ee)),typeof ee!="string"||!Q.includes(ee.length))throw new Error("Invalid key");ee=ee.padStart(te*2,"0")}let fe;try{fe=typeof ee=="bigint"?ee:Yt(Dt("private key",ee,te))}catch{throw new Error(`private key must be ${te} bytes, hex or bigint, not ${typeof ee}`)}return re&&(fe=Ct(fe,X)),R(fe),fe}let D=new Map;function H(ee){if(!(ee instanceof j))throw new Error("ProjectivePoint expected")}class j{constructor(Q,te,re){if(this.px=Q,this.py=te,this.pz=re,Q==null||!l.isValid(Q))throw new Error("x required");if(te==null||!l.isValid(te))throw new Error("y required");if(re==null||!l.isValid(re))throw new Error("z required")}static fromAffine(Q){let{x:te,y:re}=Q||{};if(!Q||!l.isValid(te)||!l.isValid(re))throw new Error("invalid affine point");if(Q instanceof j)throw new Error("projective point not allowed");let X=fe=>l.eql(fe,l.ZERO);return X(te)&&X(re)?j.ZERO:new j(te,re,l.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(Q){let te=l.invertBatch(Q.map(re=>re.pz));return Q.map((re,X)=>re.toAffine(te[X])).map(j.fromAffine)}static fromHex(Q){let te=j.fromAffine(y(Dt("pointHex",Q)));return te.assertValidity(),te}static fromPrivateKey(Q){return j.BASE.multiply(O(Q))}_setWindowSize(Q){this._WINDOW_SIZE=Q,D.delete(this)}assertValidity(){if(this.is0()){if(c.allowInfinityPoint&&!l.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:Q,y:te}=this.toAffine();if(!l.isValid(Q)||!l.isValid(te))throw new Error("bad point: x or y not FE");let re=l.sqr(te),X=_(Q);if(!l.eql(re,X))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:Q}=this.toAffine();if(l.isOdd)return!l.isOdd(Q);throw new Error("Field doesn't support isOdd")}equals(Q){H(Q);let{px:te,py:re,pz:X}=this,{px:fe,py:Ae,pz:Te}=Q,he=l.eql(l.mul(te,Te),l.mul(fe,X)),le=l.eql(l.mul(re,Te),l.mul(Ae,X));return he&&le}negate(){return new j(this.px,l.neg(this.py),this.pz)}double(){let{a:Q,b:te}=c,re=l.mul(te,Nh),{px:X,py:fe,pz:Ae}=this,Te=l.ZERO,he=l.ZERO,le=l.ZERO,se=l.mul(X,X),be=l.mul(fe,fe),Be=l.mul(Ae,Ae),Oe=l.mul(X,fe);return Oe=l.add(Oe,Oe),le=l.mul(X,Ae),le=l.add(le,le),Te=l.mul(Q,le),he=l.mul(re,Be),he=l.add(Te,he),Te=l.sub(be,he),he=l.add(be,he),he=l.mul(Te,he),Te=l.mul(Oe,Te),le=l.mul(re,le),Be=l.mul(Q,Be),Oe=l.sub(se,Be),Oe=l.mul(Q,Oe),Oe=l.add(Oe,le),le=l.add(se,se),se=l.add(le,se),se=l.add(se,Be),se=l.mul(se,Oe),he=l.add(he,se),Be=l.mul(fe,Ae),Be=l.add(Be,Be),se=l.mul(Be,Oe),Te=l.sub(Te,se),le=l.mul(Be,be),le=l.add(le,le),le=l.add(le,le),new j(Te,he,le)}add(Q){H(Q);let{px:te,py:re,pz:X}=this,{px:fe,py:Ae,pz:Te}=Q,he=l.ZERO,le=l.ZERO,se=l.ZERO,be=c.a,Be=l.mul(c.b,Nh),Oe=l.mul(te,fe),wt=l.mul(re,Ae),yt=l.mul(X,Te),vt=l.add(te,re),ge=l.add(fe,Ae);vt=l.mul(vt,ge),ge=l.add(Oe,wt),vt=l.sub(vt,ge),ge=l.add(te,X);let ke=l.add(fe,Te);return ge=l.mul(ge,ke),ke=l.add(Oe,yt),ge=l.sub(ge,ke),ke=l.add(re,X),he=l.add(Ae,Te),ke=l.mul(ke,he),he=l.add(wt,yt),ke=l.sub(ke,he),se=l.mul(be,ge),he=l.mul(Be,yt),se=l.add(he,se),he=l.sub(wt,se),se=l.add(wt,se),le=l.mul(he,se),wt=l.add(Oe,Oe),wt=l.add(wt,Oe),yt=l.mul(be,yt),ge=l.mul(Be,ge),wt=l.add(wt,yt),yt=l.sub(Oe,yt),yt=l.mul(be,yt),ge=l.add(ge,yt),Oe=l.mul(wt,ge),le=l.add(le,Oe),Oe=l.mul(ke,ge),he=l.mul(vt,he),he=l.sub(he,Oe),Oe=l.mul(vt,wt),se=l.mul(ke,se),se=l.add(se,Oe),new j(he,le,se)}subtract(Q){return this.add(Q.negate())}is0(){return this.equals(j.ZERO)}wNAF(Q){return G.wNAFCached(this,D,Q,te=>{let re=l.invertBatch(te.map(X=>X.pz));return te.map((X,fe)=>X.toAffine(re[fe])).map(j.fromAffine)})}multiplyUnsafe(Q){let te=j.ZERO;if(Q===tr)return te;if(R(Q),Q===dn)return this;let{endo:re}=c;if(!re)return G.unsafeLadder(this,Q);let{k1neg:X,k1:fe,k2neg:Ae,k2:Te}=re.splitScalar(Q),he=te,le=te,se=this;for(;fe>tr||Te>tr;)fe&dn&&(he=he.add(se)),Te&dn&&(le=le.add(se)),se=se.double(),fe>>=dn,Te>>=dn;return X&&(he=he.negate()),Ae&&(le=le.negate()),le=new j(l.mul(le.px,re.beta),le.py,le.pz),he.add(le)}multiply(Q){R(Q);let te=Q,re,X,{endo:fe}=c;if(fe){let{k1neg:Ae,k1:Te,k2neg:he,k2:le}=fe.splitScalar(te),{p:se,f:be}=this.wNAF(Te),{p:Be,f:Oe}=this.wNAF(le);se=G.constTimeNegate(Ae,se),Be=G.constTimeNegate(he,Be),Be=new j(l.mul(Be.px,fe.beta),Be.py,Be.pz),re=se.add(Be),X=be.add(Oe)}else{let{p:Ae,f:Te}=this.wNAF(te);re=Ae,X=Te}return j.normalizeZ([re,X])[0]}multiplyAndAddUnsafe(Q,te,re){let X=j.BASE,fe=(Te,he)=>he===tr||he===dn||!Te.equals(X)?Te.multiplyUnsafe(he):Te.multiply(he),Ae=fe(this,te).add(fe(Q,re));return Ae.is0()?void 0:Ae}toAffine(Q){let{px:te,py:re,pz:X}=this,fe=this.is0();Q==null&&(Q=fe?l.ONE:l.inv(X));let Ae=l.mul(te,Q),Te=l.mul(re,Q),he=l.mul(X,Q);if(fe)return{x:l.ZERO,y:l.ZERO};if(!l.eql(he,l.ONE))throw new Error("invZ was invalid");return{x:Ae,y:Te}}isTorsionFree(){let{h:Q,isTorsionFree:te}=c;if(Q===dn)return!0;if(te)return te(j,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:Q,clearCofactor:te}=c;return Q===dn?this:te?te(j,this):this.multiplyUnsafe(c.h)}toRawBytes(Q=!0){return this.assertValidity(),g(j,this,Q)}toHex(Q=!0){return ti(this.toRawBytes(Q))}}j.BASE=new j(c.Gx,c.Gy,l.ONE),j.ZERO=new j(l.ZERO,l.ONE,l.ZERO);let Y=c.nBitLength,G=Ay(j,c.endo?Math.ceil(Y/2):Y);return{CURVE:c,ProjectivePoint:j,normPrivateKeyToScalar:O,weierstrassEquation:_,isWithinCurveOrder:L}}function Cy(s){let c=Ih(s);return Gi(c,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...c})}function Py(s){let c=Cy(s),{Fp:l,n:g}=c,y=l.BYTES+1,_=2*l.BYTES+1;function L(ge){return tr<ge&&ge<l.ORDER}function R(ge){return Ct(ge,g)}function O(ge){return zu(ge,g)}let{ProjectivePoint:D,normPrivateKeyToScalar:H,weierstrassEquation:j,isWithinCurveOrder:Y}=Ly({...c,toBytes(ge,ke,Ue){let Ge=ke.toAffine(),Ye=l.toBytes(Ge.x),Ke=wo;return Ue?Ke(Uint8Array.from([ke.hasEvenY()?2:3]),Ye):Ke(Uint8Array.from([4]),Ye,l.toBytes(Ge.y))},fromBytes(ge){let ke=ge.length,Ue=ge[0],Ge=ge.subarray(1);if(ke===y&&(Ue===2||Ue===3)){let Ye=Yt(Ge);if(!L(Ye))throw new Error("Point is not on curve");let Ke=j(Ye),Ft=l.sqrt(Ke),Pt=(Ft&dn)===dn;return(Ue&1)===1!==Pt&&(Ft=l.neg(Ft)),{x:Ye,y:Ft}}else if(ke===_&&Ue===4){let Ye=l.fromBytes(Ge.subarray(0,l.BYTES)),Ke=l.fromBytes(Ge.subarray(l.BYTES,2*l.BYTES));return{x:Ye,y:Ke}}else throw new Error(`Point of length ${ke} was invalid. Expected ${y} compressed bytes or ${_} uncompressed bytes`)}}),G=ge=>ti(Nr(ge,c.nByteLength));function ee(ge){let ke=g>>dn;return ge>ke}function Q(ge){return ee(ge)?R(-ge):ge}let te=(ge,ke,Ue)=>Yt(ge.slice(ke,Ue));class re{constructor(ke,Ue,Ge){this.r=ke,this.s=Ue,this.recovery=Ge,this.assertValidity()}static fromCompact(ke){let Ue=c.nByteLength;return ke=Dt("compactSignature",ke,Ue*2),new re(te(ke,0,Ue),te(ke,Ue,2*Ue))}static fromDER(ke){let{r:Ue,s:Ge}=vo.toSig(Dt("DER",ke));return new re(Ue,Ge)}assertValidity(){if(!Y(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!Y(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(ke){return new re(this.r,this.s,ke)}recoverPublicKey(ke){let{r:Ue,s:Ge,recovery:Ye}=this,Ke=le(Dt("msgHash",ke));if(Ye==null||![0,1,2,3].includes(Ye))throw new Error("recovery id invalid");let Ft=Ye===2||Ye===3?Ue+c.n:Ue;if(Ft>=l.ORDER)throw new Error("recovery id 2 or 3 invalid");let Pt=Ye&1?"03":"02",Jt=D.fromHex(Pt+G(Ft)),_t=O(Ft),hn=R(-Ke*_t),Sn=R(Ge*_t),jn=D.BASE.multiplyAndAddUnsafe(Jt,hn,Sn);if(!jn)throw new Error("point at infinify");return jn.assertValidity(),jn}hasHighS(){return ee(this.s)}normalizeS(){return this.hasHighS()?new re(this.r,R(-this.s),this.recovery):this}toDERRawBytes(){return ni(this.toDERHex())}toDERHex(){return vo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ni(this.toCompactHex())}toCompactHex(){return G(this.r)+G(this.s)}}let X={isValidPrivateKey(ge){try{return H(ge),!0}catch{return!1}},normPrivateKeyToScalar:H,randomPrivateKey:()=>{let ge=Ph(c.n);return ky(c.randomBytes(ge),c.n)},precompute(ge=8,ke=D.BASE){return ke._setWindowSize(ge),ke.multiply(BigInt(3)),ke}};function fe(ge,ke=!0){return D.fromPrivateKey(ge).toRawBytes(ke)}function Ae(ge){let ke=ge instanceof Uint8Array,Ue=typeof ge=="string",Ge=(ke||Ue)&&ge.length;return ke?Ge===y||Ge===_:Ue?Ge===2*y||Ge===2*_:ge instanceof D}function Te(ge,ke,Ue=!0){if(Ae(ge))throw new Error("first arg must be private key");if(!Ae(ke))throw new Error("second arg must be public key");return D.fromHex(ke).multiply(H(ge)).toRawBytes(Ue)}let he=c.bits2int||function(ge){let ke=Yt(ge),Ue=ge.length*8-c.nBitLength;return Ue>0?ke>>BigInt(Ue):ke},le=c.bits2int_modN||function(ge){return R(he(ge))},se=Ou(c.nBitLength);function be(ge){if(typeof ge!="bigint")throw new Error("bigint expected");if(!(tr<=ge&&ge<se))throw new Error(`bigint expected < 2^${c.nBitLength}`);return Nr(ge,c.nByteLength)}function Be(ge,ke,Ue=Oe){if(["recovered","canonical"].some(sn=>sn in Ue))throw new Error("sign() legacy options not supported");let{hash:Ge,randomBytes:Ye}=c,{lowS:Ke,prehash:Ft,extraEntropy:Pt}=Ue;Ke==null&&(Ke=!0),ge=Dt("msgHash",ge),Ft&&(ge=Dt("prehashed msgHash",Ge(ge)));let Jt=le(ge),_t=H(ke),hn=[be(_t),be(Jt)];if(Pt!=null){let sn=Pt===!0?Ye(l.BYTES):Pt;hn.push(Dt("extraEntropy",sn))}let Sn=wo(...hn),jn=Jt;function Fr(sn){let jr=he(sn);if(!Y(jr))return;let ko=O(jr),an=D.BASE.multiply(jr).toAffine(),sr=R(an.x);if(sr===tr)return;let So=R(ko*R(jn+sr*_t));if(So===tr)return;let Ao=(an.x===sr?0:2)|Number(an.y&dn),Hr=So;return Ke&&ee(So)&&(Hr=Q(So),Ao^=1),new re(sr,Hr,Ao)}return{seed:Sn,k2sig:Fr}}let Oe={lowS:c.lowS,prehash:!1},wt={lowS:c.lowS,prehash:!1};function yt(ge,ke,Ue=Oe){let{seed:Ge,k2sig:Ye}=Be(ge,ke,Ue),Ke=c;return $h(Ke.hash.outputLen,Ke.nByteLength,Ke.hmac)(Ge,Ye)}D.BASE._setWindowSize(8);function vt(ge,ke,Ue,Ge=wt){var Ye;let Ke=ge;if(ke=Dt("msgHash",ke),Ue=Dt("publicKey",Ue),"strict"in Ge)throw new Error("options.strict was renamed to lowS");let{lowS:Ft,prehash:Pt}=Ge,Jt,_t;try{if(typeof Ke=="string"||Ke instanceof Uint8Array)try{Jt=re.fromDER(Ke)}catch(an){if(!(an instanceof vo.Err))throw an;Jt=re.fromCompact(Ke)}else if(typeof Ke=="object"&&typeof Ke.r=="bigint"&&typeof Ke.s=="bigint"){let{r:an,s:sr}=Ke;Jt=new re(an,sr)}else throw new Error("PARSE");_t=D.fromHex(Ue)}catch(an){if(an.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Ft&&Jt.hasHighS())return!1;Pt&&(ke=c.hash(ke));let{r:hn,s:Sn}=Jt,jn=le(ke),Fr=O(Sn),sn=R(jn*Fr),jr=R(hn*Fr),ko=(Ye=D.BASE.multiplyAndAddUnsafe(_t,sn,jr))==null?void 0:Ye.toAffine();return ko?R(ko.x)===hn:!1}return{CURVE:c,getPublicKey:fe,getSharedSecret:Te,sign:yt,verify:vt,ProjectivePoint:D,Signature:re,utils:X}}class Oh extends Eh{constructor(c,l){super(),this.finished=!1,this.destroyed=!1,Kw(c);let g=Lu(l);if(this.iHash=c.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let y=this.blockLen,_=new Uint8Array(y);_.set(g.length>y?c.create().update(g).digest():g);for(let L=0;L<_.length;L++)_[L]^=54;this.iHash.update(_),this.oHash=c.create();for(let L=0;L<_.length;L++)_[L]^=106;this.oHash.update(_),_.fill(0)}update(c){return ia(this),this.iHash.update(c),this}digestInto(c){ia(this),vh(c,this.outputLen),this.finished=!0,this.iHash.digestInto(c),this.oHash.update(c),this.oHash.digestInto(c),this.destroy()}digest(){let c=new Uint8Array(this.oHash.outputLen);return this.digestInto(c),c}_cloneInto(c){c||(c=Object.create(Object.getPrototypeOf(this),{}));let{oHash:l,iHash:g,finished:y,destroyed:_,blockLen:L,outputLen:R}=this;return c=c,c.finished=y,c.destroyed=_,c.blockLen=L,c.outputLen=R,c.oHash=l._cloneInto(c.oHash),c.iHash=g._cloneInto(c.iHash),c}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let Rh=(s,c,l)=>new Oh(s,c).update(l).digest();Rh.create=(s,c)=>new Oh(s,c);function Iy(s){return{hash:s,hmac:(c,...l)=>Rh(s,c,Yw(...l)),randomBytes:xh}}function Ny(s,c){let l=g=>Py({...s,...Iy(g)});return Object.freeze({...l(c),create:l})}let ca=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ua=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Uh=BigInt(1),la=BigInt(2),zh=(s,c)=>(s+c/la)/c;function Mh(s){let c=ca,l=BigInt(3),g=BigInt(6),y=BigInt(11),_=BigInt(22),L=BigInt(23),R=BigInt(44),O=BigInt(88),D=s*s*s%c,H=D*D*s%c,j=ln(H,l,c)*H%c,Y=ln(j,l,c)*H%c,G=ln(Y,la,c)*D%c,ee=ln(G,y,c)*G%c,Q=ln(ee,_,c)*ee%c,te=ln(Q,R,c)*Q%c,re=ln(te,O,c)*te%c,X=ln(re,R,c)*Q%c,fe=ln(X,l,c)*H%c,Ae=ln(fe,L,c)*ee%c,Te=ln(Ae,g,c)*D%c,he=ln(Te,la,c);if(!Du.eql(Du.sqr(he),s))throw new Error("Cannot find square root");return he}let Du=xy(ca,void 0,void 0,{sqrt:Mh}),Zi=Ny({a:BigInt(0),b:BigInt(7),Fp:Du,n:ua,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:s=>{let c=ua,l=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),g=-Uh*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),y=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),_=l,L=BigInt("0x100000000000000000000000000000000"),R=zh(_*s,c),O=zh(-g*s,c),D=Ct(s-R*l-O*y,c),H=Ct(-R*g-O*_,c),j=D>L,Y=H>L;if(j&&(D=c-D),Y&&(H=c-H),D>L||H>L)throw new Error("splitScalar: Endomorphism failed, k="+s);return{k1neg:j,k1:D,k2neg:Y,k2:H}}}},Cu),da=BigInt(0),Dh=s=>typeof s=="bigint"&&da<s&&s<ca,Oy=s=>typeof s=="bigint"&&da<s&&s<ua,Fh={};function fa(s,...c){let l=Fh[s];if(l===void 0){let g=Cu(Uint8Array.from(s,y=>y.charCodeAt(0)));l=wo(g,g),Fh[s]=l}return Cu(wo(l,...c))}let Fu=s=>s.toRawBytes(!0).slice(1),ju=s=>Nr(s,32),Hu=s=>Ct(s,ca),Yi=s=>Ct(s,ua),Vu=Zi.ProjectivePoint,Ry=(s,c,l)=>Vu.BASE.multiplyAndAddUnsafe(s,c,l);function qu(s){let c=Zi.utils.normPrivateKeyToScalar(s),l=Vu.fromPrivateKey(c);return{scalar:l.hasEvenY()?c:Yi(-c),bytes:Fu(l)}}function jh(s){if(!Dh(s))throw new Error("bad x: need 0 < x < p");let c=Hu(s*s),l=Hu(c*s+BigInt(7)),g=Mh(l);g%la!==da&&(g=Hu(-g));let y=new Vu(s,g,Uh);return y.assertValidity(),y}function Hh(...s){return Yi(Yt(fa("BIP0340/challenge",...s)))}function Uy(s){return qu(s).bytes}function zy(s,c,l=xh(32)){let g=Dt("message",s),{bytes:y,scalar:_}=qu(c),L=Dt("auxRand",l,32),R=ju(_^Yt(fa("BIP0340/aux",L))),O=fa("BIP0340/nonce",R,y,g),D=Yi(Yt(O));if(D===da)throw new Error("sign failed: k is zero");let{bytes:H,scalar:j}=qu(D),Y=Hh(H,y,g),G=new Uint8Array(64);if(G.set(H,0),G.set(ju(Yi(j+Y*_)),32),!Vh(G,g,y))throw new Error("sign: Invalid signature produced");return G}function Vh(s,c,l){let g=Dt("signature",s,64),y=Dt("message",c),_=Dt("publicKey",l,32);try{let L=jh(Yt(_)),R=Yt(g.subarray(0,32));if(!Dh(R))return!1;let O=Yt(g.subarray(32,64));if(!Oy(O))return!1;let D=Hh(ju(R),Fu(L),y),H=Ry(L,O,Yi(-D));return!(!H||!H.hasEvenY()||H.toAffine().x!==R)}catch{return!1}}let Kt={getPublicKey:Uy,sign:zy,verify:Vh,utils:{randomPrivateKey:Zi.utils.randomPrivateKey,lift_x:jh,pointToBytes:Fu,numberToBytesBE:Nr,bytesToNumberBE:Yt,taggedHash:fa,mod:Ct}};function Wu(s){if(!Number.isSafeInteger(s)||s<0)throw new Error(`Wrong positive integer: ${s}`)}function My(s){if(typeof s!="boolean")throw new Error(`Expected boolean, not ${s}`)}function qh(s,...c){if(!(s instanceof Uint8Array))throw new Error("Expected Uint8Array");if(c.length>0&&!c.includes(s.length))throw new Error(`Expected Uint8Array of length ${c}, not of length=${s.length}`)}function Dy(s){if(typeof s!="function"||typeof s.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Wu(s.outputLen),Wu(s.blockLen)}function Fy(s,c=!0){if(s.destroyed)throw new Error("Hash instance has been destroyed");if(c&&s.finished)throw new Error("Hash#digest() has already been called")}function jy(s,c){qh(s);let l=c.outputLen;if(s.length<l)throw new Error(`digestInto() expects output buffer of length at least ${l}`)}let Qu={number:Wu,bool:My,bytes:qh,hash:Dy,exists:Fy,output:jy};function Hy(s,c,l,g){if(typeof s.setBigUint64=="function")return s.setBigUint64(c,l,g);let y=BigInt(32),_=BigInt(4294967295),L=Number(l>>y&_),R=Number(l&_),O=g?4:0,D=g?0:4;s.setUint32(c+O,L,g),s.setUint32(c+D,R,g)}class Vy extends Ww{constructor(c,l,g,y){super(),this.blockLen=c,this.outputLen=l,this.padOffset=g,this.isLE=y,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(c),this.view=Au(this.buffer)}update(c){Qu.exists(this);let{view:l,buffer:g,blockLen:y}=this;c=bh(c);let _=c.length;for(let L=0;L<_;){let R=Math.min(y-this.pos,_-L);if(R===y){let O=Au(c);for(;y<=_-L;L+=y)this.process(O,L);continue}g.set(c.subarray(L,L+R),this.pos),this.pos+=R,L+=R,this.pos===y&&(this.process(l,0),this.pos=0)}return this.length+=c.length,this.roundClean(),this}digestInto(c){Qu.exists(this),Qu.output(c,this),this.finished=!0;let{buffer:l,view:g,blockLen:y,isLE:_}=this,{pos:L}=this;l[L++]=128,this.buffer.subarray(L).fill(0),this.padOffset>y-L&&(this.process(g,0),L=0);for(let j=L;j<y;j++)l[j]=0;Hy(g,y-8,BigInt(this.length*8),_),this.process(g,0);let R=Au(c),O=this.outputLen;if(O%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let D=O/4,H=this.get();if(D>H.length)throw new Error("_sha2: outputLen bigger than state");for(let j=0;j<D;j++)R.setUint32(4*j,H[j],_)}digest(){let{buffer:c,outputLen:l}=this;this.digestInto(c);let g=c.slice(0,l);return this.destroy(),g}_cloneInto(c){c||(c=new this.constructor),c.set(...this.get());let{blockLen:l,buffer:g,length:y,finished:_,destroyed:L,pos:R}=this;return c.length=y,c.pos=R,c.finished=_,c.destroyed=L,y%l&&c.buffer.set(g),c}}let qy=(s,c,l)=>s&c^~s&l,Wy=(s,c,l)=>s&c^s&l^c&l,Qy=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Or=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Rr=new Uint32Array(64);class Wh extends Vy{constructor(){super(64,32,8,!1),this.A=Or[0]|0,this.B=Or[1]|0,this.C=Or[2]|0,this.D=Or[3]|0,this.E=Or[4]|0,this.F=Or[5]|0,this.G=Or[6]|0,this.H=Or[7]|0}get(){let{A:c,B:l,C:g,D:y,E:_,F:L,G:R,H:O}=this;return[c,l,g,y,_,L,R,O]}set(c,l,g,y,_,L,R,O){this.A=c|0,this.B=l|0,this.C=g|0,this.D=y|0,this.E=_|0,this.F=L|0,this.G=R|0,this.H=O|0}process(c,l){for(let j=0;j<16;j++,l+=4)Rr[j]=c.getUint32(l,!1);for(let j=16;j<64;j++){let Y=Rr[j-15],G=Rr[j-2],ee=zn(Y,7)^zn(Y,18)^Y>>>3,Q=zn(G,17)^zn(G,19)^G>>>10;Rr[j]=Q+Rr[j-7]+ee+Rr[j-16]|0}let{A:g,B:y,C:_,D:L,E:R,F:O,G:D,H}=this;for(let j=0;j<64;j++){let Y=zn(R,6)^zn(R,11)^zn(R,25),G=H+Y+qy(R,O,D)+Qy[j]+Rr[j]|0,ee=(zn(g,2)^zn(g,13)^zn(g,22))+Wy(g,y,_)|0;H=D,D=O,O=R,R=L+G|0,L=_,_=y,y=g,g=G+ee|0}g=g+this.A|0,y=y+this.B|0,_=_+this.C|0,L=L+this.D|0,R=R+this.E|0,O=O+this.F|0,D=D+this.G|0,H=H+this.H|0,this.set(g,y,_,L,R,O,D,H)}roundClean(){Rr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Ky extends Wh{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}let Ku=wh(()=>new Wh);wh(()=>new Ky);var ri=Symbol("verified"),Gy=s=>s instanceof Object;function Zy(s){if(!Gy(s)||typeof s.kind!="number"||typeof s.content!="string"||typeof s.created_at!="number"||typeof s.pubkey!="string"||!s.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(s.tags))return!1;for(let c=0;c<s.tags.length;c++){let l=s.tags[c];if(!Array.isArray(l))return!1;for(let g=0;g<l.length;g++)if(typeof l[g]=="object")return!1}return!0}new TextDecoder("utf-8");var Yy=new TextEncoder,Jy=class{generateSecretKey(){return Kt.utils.randomPrivateKey()}getPublicKey(s){return Qt(Kt.getPublicKey(s))}finalizeEvent(s,c){let l=s;return l.pubkey=Qt(Kt.getPublicKey(c)),l.id=Gu(l),l.sig=Qt(Kt.sign(Gu(l),c)),l[ri]=!0,l}verifyEvent(s){if(typeof s[ri]=="boolean")return s[ri];let c=Gu(s);if(c!==s.id)return s[ri]=!1,!1;try{let l=Kt.verify(s.sig,c,s.pubkey);return s[ri]=l,l}catch{return s[ri]=!1,!1}}};function Xy(s){if(!Zy(s))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,s.pubkey,s.created_at,s.kind,s.tags,s.content])}function Gu(s){let c=Ku(Yy.encode(Xy(s)));return Qt(c)}var ha=new Jy,e1=ha.generateSecretKey,Qh=ha.getPublicKey;ha.finalizeEvent,ha.verifyEvent;var _o=Symbol("verified"),t1=s=>s instanceof Object;function n1(s){if(!t1(s)||typeof s.kind!="number"||typeof s.content!="string"||typeof s.created_at!="number"||typeof s.pubkey!="string"||!s.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(s.tags))return!1;for(let c=0;c<s.tags.length;c++){let l=s.tags[c];if(!Array.isArray(l))return!1;for(let g=0;g<l.length;g++)if(typeof l[g]=="object")return!1}return!0}new TextDecoder("utf-8");var r1=new TextEncoder;function Ji(s){s.indexOf("://")===-1&&(s="wss://"+s);let c=new URL(s);return c.pathname=c.pathname.replace(/\/+/g,"/"),c.pathname.endsWith("/")&&(c.pathname=c.pathname.slice(0,-1)),(c.port==="80"&&c.protocol==="ws:"||c.port==="443"&&c.protocol==="wss:")&&(c.port=""),c.searchParams.sort(),c.hash="",c.toString()}var o1=class{constructor(s){ce(this,"value"),ce(this,"next",null),ce(this,"prev",null),this.value=s}},i1=class{constructor(){ce(this,"first"),ce(this,"last"),this.first=null,this.last=null}enqueue(s){let c=new o1(s);return this.last?this.last===this.first?(this.last=c,this.last.prev=this.first,this.first.next=c):(c.prev=this.last,this.last.next=c,this.last=c):(this.first=c,this.last=c),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){let c=this.first;return this.first=null,this.last=null,c.value}let s=this.first;return this.first=s.next,s.value}},s1=class{generateSecretKey(){return Kt.utils.randomPrivateKey()}getPublicKey(s){return Qt(Kt.getPublicKey(s))}finalizeEvent(s,c){let l=s;return l.pubkey=Qt(Kt.getPublicKey(c)),l.id=Zu(l),l.sig=Qt(Kt.sign(Zu(l),c)),l[_o]=!0,l}verifyEvent(s){if(typeof s[_o]=="boolean")return s[_o];let c=Zu(s);if(c!==s.id)return s[_o]=!1,!1;try{let l=Kt.verify(s.sig,c,s.pubkey);return s[_o]=l,l}catch{return s[_o]=!1,!1}}};function a1(s){if(!n1(s))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,s.pubkey,s.created_at,s.kind,s.tags,s.content])}function Zu(s){let c=Ku(r1.encode(a1(s)));return Qt(c)}var pa=new s1;pa.generateSecretKey,pa.getPublicKey,pa.finalizeEvent;var c1=pa.verifyEvent,u1=22242;function l1(s,c){if(s.ids&&s.ids.indexOf(c.id)===-1&&!s.ids.some(l=>c.id.startsWith(l))||s.kinds&&s.kinds.indexOf(c.kind)===-1||s.authors&&s.authors.indexOf(c.pubkey)===-1&&!s.authors.some(l=>c.pubkey.startsWith(l)))return!1;for(let l in s)if(l[0]==="#"){let g=l.slice(1),y=s[`#${g}`];if(y&&!c.tags.find(([_,L])=>_===l.slice(1)&&y.indexOf(L)!==-1))return!1}return!(s.since&&c.created_at<s.since||s.until&&c.created_at>s.until)}function d1(s,c){for(let l=0;l<s.length;l++)if(l1(s[l],c))return!0;return!1}function f1(s,c){let l=c.length+3,g=s.indexOf(`"${c}":`)+l,y=s.slice(g).indexOf('"')+g+1;return s.slice(y,y+64)}function h1(s){let c=s.slice(0,22).indexOf('"EVENT"');if(c===-1)return null;let l=s.slice(c+7+1).indexOf('"');if(l===-1)return null;let g=c+7+1+l,y=s.slice(g+1,80).indexOf('"');if(y===-1)return null;let _=g+1+y;return s.slice(g+1,_)}function p1(s,c){return{kind:u1,created_at:Math.floor(Date.now()/1e3),tags:[["relay",s],["challenge",c]],content:""}}async function g1(){return new Promise(s=>{let c=new MessageChannel,l=()=>{c.port1.removeEventListener("message",l),s()};c.port1.addEventListener("message",l),c.port2.postMessage(0),c.port1.start()})}var m1=s=>(s[_o]=!0,!0),Kh;try{Kh=WebSocket}catch{}var Gh=class{constructor(s,c){ce(this,"url"),ce(this,"_connected",!1),ce(this,"onclose",null),ce(this,"onnotice",l=>console.debug(`NOTICE from ${this.url}: ${l}`)),ce(this,"_onauth",null),ce(this,"baseEoseTimeout",4400),ce(this,"connectionTimeout",4400),ce(this,"openSubs",new Map),ce(this,"connectionTimeoutHandle"),ce(this,"connectionPromise"),ce(this,"openCountRequests",new Map),ce(this,"openEventPublishes",new Map),ce(this,"ws"),ce(this,"incomingMessageQueue",new i1),ce(this,"queueRunning",!1),ce(this,"challenge"),ce(this,"serial",0),ce(this,"verifyEvent"),this.url=Ji(s),this.verifyEvent=c.verifyEvent}static async connect(s,c){let l=new Gh(s,c);return await l.connect(),l}closeAllSubscriptions(s){for(let[c,l]of this.openSubs)l.close(s);this.openSubs.clear();for(let[c,l]of this.openEventPublishes)l.reject(new Error(s));this.openEventPublishes.clear();for(let[c,l]of this.openCountRequests)l.reject(new Error(s));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((s,c)=>{this.connectionTimeoutHandle=setTimeout(()=>{var l;c("connection timed out"),this.connectionPromise=void 0,(l=this.onclose)==null||l.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new Kh(this.url)}catch(l){c(l);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,s()},this.ws.onerror=l=>{var g;c(l.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(g=this.onclose)==null||g.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var l;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(l=this.onclose)==null||l.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await g1();this.queueRunning=!1}handleNext(){var s,c,l;let g=this.incomingMessageQueue.dequeue();if(!g)return!1;let y=h1(g);if(y){let _=this.openSubs.get(y);if(!_)return;let L=f1(g,"id"),R=(s=_.alreadyHaveEvent)==null?void 0:s.call(_,L);if((c=_.receivedEvent)==null||c.call(_,this,L),R)return}try{let _=JSON.parse(g);switch(_[0]){case"EVENT":{let L=this.openSubs.get(_[1]),R=_[2];this.verifyEvent(R)&&d1(L.filters,R)&&L.onevent(R);return}case"COUNT":{let L=_[1],R=_[2],O=this.openCountRequests.get(L);O&&(O.resolve(R.count),this.openCountRequests.delete(L));return}case"EOSE":{let L=this.openSubs.get(_[1]);if(!L)return;L.receivedEose();return}case"OK":{let L=_[1],R=_[2],O=_[3],D=this.openEventPublishes.get(L);R?D.resolve(O):D.reject(new Error(O)),this.openEventPublishes.delete(L);return}case"CLOSED":{let L=_[1],R=this.openSubs.get(L);if(!R)return;R.closed=!0,R.close(_[2]);return}case"NOTICE":this.onnotice(_[1]);return;case"AUTH":{this.challenge=_[1],(l=this._onauth)==null||l.call(this,_[1]);return}}}catch{return}}async send(s){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var c;(c=this.ws)==null||c.send(s)})}async auth(s){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");let c=await s(p1(this.url,this.challenge)),l=new Promise((g,y)=>{this.openEventPublishes.set(c.id,{resolve:g,reject:y})});return this.send('["AUTH",'+JSON.stringify(c)+"]"),l}async publish(s){let c=new Promise((l,g)=>{this.openEventPublishes.set(s.id,{resolve:l,reject:g})});return this.send('["EVENT",'+JSON.stringify(s)+"]"),c}async count(s,c){this.serial++;let l=c?.id||"count:"+this.serial,g=new Promise((y,_)=>{this.openCountRequests.set(l,{resolve:y,reject:_})});return this.send('["COUNT","'+l+'",'+JSON.stringify(s)+"]"),g}subscribe(s,c){let l=this.prepareSubscription(s,c);return l.fire(),l}prepareSubscription(s,c){this.serial++;let l=c.id||"sub:"+this.serial,g=new b1(this,l,s,c);return this.openSubs.set(l,g),g}close(){var s;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(s=this.ws)==null||s.close()}_onmessage(s){this.incomingMessageQueue.enqueue(s.data),this.queueRunning||this.runQueue()}},b1=class{constructor(s,c,l,g){ce(this,"relay"),ce(this,"id"),ce(this,"closed",!1),ce(this,"eosed",!1),ce(this,"filters"),ce(this,"alreadyHaveEvent"),ce(this,"receivedEvent"),ce(this,"onevent"),ce(this,"oneose"),ce(this,"onclose"),ce(this,"eoseTimeout"),ce(this,"eoseTimeoutHandle"),this.relay=s,this.filters=l,this.id=c,this.alreadyHaveEvent=g.alreadyHaveEvent,this.receivedEvent=g.receivedEvent,this.eoseTimeout=g.eoseTimeout||s.baseEoseTimeout,this.oneose=g.oneose,this.onclose=g.onclose,this.onevent=g.onevent||(y=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,y)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var s;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(s=this.oneose)==null||s.call(this))}close(s="closed by caller"){var c;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(c=this.onclose)==null||c.call(this,s)}},w1=class{constructor(s){ce(this,"relays",new Map),ce(this,"seenOn",new Map),ce(this,"trackRelays",!1),ce(this,"verifyEvent"),ce(this,"trustedRelayURLs",new Set),this.verifyEvent=s.verifyEvent}async ensureRelay(s,c){s=Ji(s);let l=this.relays.get(s);return l||(l=new Gh(s,{verifyEvent:this.trustedRelayURLs.has(s)?m1:this.verifyEvent}),c!=null&&c.connectionTimeout&&(l.connectionTimeout=c.connectionTimeout),this.relays.set(s,l)),await l.connect(),l}close(s){s.map(Ji).forEach(c=>{var l;(l=this.relays.get(c))==null||l.close()})}subscribeMany(s,c,l){return this.subscribeManyMap(Object.fromEntries(s.map(g=>[g,c])),l)}subscribeManyMap(s,c){this.trackRelays&&(c.receivedEvent=(j,Y)=>{let G=this.seenOn.get(Y);G||(G=new Set,this.seenOn.set(Y,G)),G.add(j)});let l=new Set,g=[],y=Object.keys(s).length,_=[],L=j=>{var Y;_[j]=!0,_.filter(G=>G).length===y&&((Y=c.oneose)==null||Y.call(c),L=()=>{})},R=[],O=(j,Y)=>{var G;L(j),R[j]=Y,R.filter(ee=>ee).length===y&&((G=c.onclose)==null||G.call(c,R),O=()=>{})},D=j=>{var Y;if((Y=c.alreadyHaveEvent)!=null&&Y.call(c,j))return!0;let G=l.has(j);return l.add(j),G},H=Promise.all(Object.entries(s).map(async(j,Y,G)=>{if(G.indexOf(j)!==Y){O(Y,"duplicate url");return}let[ee,Q]=j;ee=Ji(ee);let te;try{te=await this.ensureRelay(ee,{connectionTimeout:c.maxWait?Math.max(c.maxWait*.8,c.maxWait-1e3):void 0})}catch(X){O(Y,X?.message||String(X));return}let re=te.subscribe(Q,{...c,oneose:()=>L(Y),onclose:X=>O(Y,X),alreadyHaveEvent:D,eoseTimeout:c.maxWait});g.push(re)}));return{async close(){await H,g.forEach(j=>{j.close()})}}}subscribeManyEose(s,c,l){let g=this.subscribeMany(s,c,{...l,oneose(){g.close()}});return g}async querySync(s,c,l){return new Promise(async g=>{let y=[];this.subscribeManyEose(s,[c],{...l,onevent(_){y.push(_)},onclose(_){g(y)}})})}async get(s,c,l){c.limit=1;let g=await this.querySync(s,c,l);return g.sort((y,_)=>_.created_at-y.created_at),g[0]||null}publish(s,c){return s.map(Ji).map(async(l,g,y)=>y.indexOf(l)!==g?Promise.reject("duplicate url"):(await this.ensureRelay(l)).publish(c))}},y1=class extends w1{constructor(){super({verifyEvent:c1})}};function Zh(s){return s instanceof Uint8Array||s!=null&&typeof s=="object"&&s.constructor.name==="Uint8Array"}function Eo(s,...c){if(!Zh(s))throw new Error("Uint8Array expected");if(c.length>0&&!c.includes(s.length))throw new Error(`Uint8Array expected of length ${c}, not of length=${s.length}`)}function ga(s,c=!0){if(s.destroyed)throw new Error("Hash instance has been destroyed");if(c&&s.finished)throw new Error("Hash#digest() has already been called")}function Yh(s,c){Eo(s);let l=c.outputLen;if(s.length<l)throw new Error(`digestInto() expects output buffer of length at least ${l}`)}let on=s=>new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)),v1=s=>new DataView(s.buffer,s.byteOffset,s.byteLength);if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");function _1(s){if(typeof s!="string")throw new Error(`string expected, got ${typeof s}`);return new Uint8Array(new TextEncoder().encode(s))}function Xi(s){if(typeof s=="string")s=_1(s);else if(Zh(s))s=s.slice();else throw new Error(`Uint8Array expected, got ${typeof s}`);return s}let E1=(s,c)=>(Object.assign(c,s),c),nr=16,Yu=new Uint8Array(16),Dn=on(Yu),x1=225,k1=(s,c,l,g)=>{let y=g&1;return{s3:l<<31|g>>>1,s2:c<<31|l>>>1,s1:s<<31|c>>>1,s0:s>>>1^x1<<24&-(y&1)}},fn=s=>(s>>>0&255)<<24|(s>>>8&255)<<16|(s>>>16&255)<<8|s>>>24&255|0;function S1(s){s.reverse();let c=s[15]&1,l=0;for(let g=0;g<s.length;g++){let y=s[g];s[g]=y>>>1|l,l=(y&1)<<7}return s[0]^=-c&225,s}let A1=s=>s>64*1024?8:s>1024?4:2;class Jh{constructor(c,l){this.blockLen=nr,this.outputLen=nr,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,c=Xi(c),Eo(c,16);let g=v1(c),y=g.getUint32(0,!1),_=g.getUint32(4,!1),L=g.getUint32(8,!1),R=g.getUint32(12,!1),O=[];for(let G=0;G<128;G++)O.push({s0:fn(y),s1:fn(_),s2:fn(L),s3:fn(R)}),{s0:y,s1:_,s2:L,s3:R}=k1(y,_,L,R);let D=A1(l||1024);if(![1,2,4,8].includes(D))throw new Error(`ghash: wrong window size=${D}, should be 2, 4 or 8`);this.W=D;let H=128/D,j=this.windowSize=2**D,Y=[];for(let G=0;G<H;G++)for(let ee=0;ee<j;ee++){let Q=0,te=0,re=0,X=0;for(let fe=0;fe<D;fe++){if(!(ee>>>D-fe-1&1))continue;let{s0:Ae,s1:Te,s2:he,s3:le}=O[D*G+fe];Q^=Ae,te^=Te,re^=he,X^=le}Y.push({s0:Q,s1:te,s2:re,s3:X})}this.t=Y}_updateBlock(c,l,g,y){c^=this.s0,l^=this.s1,g^=this.s2,y^=this.s3;let{W:_,t:L,windowSize:R}=this,O=0,D=0,H=0,j=0,Y=(1<<_)-1,G=0;for(let ee of[c,l,g,y])for(let Q=0;Q<4;Q++){let te=ee>>>8*Q&255;for(let re=8/_-1;re>=0;re--){let X=te>>>_*re&Y,{s0:fe,s1:Ae,s2:Te,s3:he}=L[G*R+X];O^=fe,D^=Ae,H^=Te,j^=he,G+=1}}this.s0=O,this.s1=D,this.s2=H,this.s3=j}update(c){c=Xi(c),ga(this);let l=on(c),g=Math.floor(c.length/nr),y=c.length%nr;for(let _=0;_<g;_++)this._updateBlock(l[_*4+0],l[_*4+1],l[_*4+2],l[_*4+3]);return y&&(Yu.set(c.subarray(g*nr)),this._updateBlock(Dn[0],Dn[1],Dn[2],Dn[3]),Dn.fill(0)),this}destroy(){let{t:c}=this;for(let l of c)l.s0=0,l.s1=0,l.s2=0,l.s3=0}digestInto(c){ga(this),Yh(c,this),this.finished=!0;let{s0:l,s1:g,s2:y,s3:_}=this,L=on(c);return L[0]=l,L[1]=g,L[2]=y,L[3]=_,c}digest(){let c=new Uint8Array(nr);return this.digestInto(c),this.destroy(),c}}class $1 extends Jh{constructor(c,l){c=Xi(c);let g=S1(c.slice());super(g,l),g.fill(0)}update(c){c=Xi(c),ga(this);let l=on(c),g=c.length%nr,y=Math.floor(c.length/nr);for(let _=0;_<y;_++)this._updateBlock(fn(l[_*4+3]),fn(l[_*4+2]),fn(l[_*4+1]),fn(l[_*4+0]));return g&&(Yu.set(c.subarray(y*nr)),this._updateBlock(fn(Dn[3]),fn(Dn[2]),fn(Dn[1]),fn(Dn[0])),Dn.fill(0)),this}digestInto(c){ga(this),Yh(c,this),this.finished=!0;let{s0:l,s1:g,s2:y,s3:_}=this,L=on(c);return L[0]=l,L[1]=g,L[2]=y,L[3]=_,c.reverse()}}function Xh(s){let c=(g,y)=>s(y,g.length).update(Xi(g)).digest(),l=s(new Uint8Array(16),0);return c.outputLen=l.outputLen,c.blockLen=l.blockLen,c.create=(g,y)=>s(g,y),c}Xh((s,c)=>new Jh(s,c)),Xh((s,c)=>new $1(s,c));let Ur=16,T1=283;function Ju(s){return s<<1^T1&-(s>>7)}function oi(s,c){let l=0;for(;c>0;c>>=1)l^=s&-(c&1),s=Ju(s);return l}let Xu=(()=>{let s=new Uint8Array(256);for(let l=0,g=1;l<256;l++,g^=Ju(g))s[l]=g;let c=new Uint8Array(256);c[0]=99;for(let l=0;l<255;l++){let g=s[255-l];g|=g<<8,c[s[l]]=(g^g>>4^g>>5^g>>6^g>>7^99)&255}return c})(),B1=Xu.map((s,c)=>Xu.indexOf(c)),L1=s=>s<<24|s>>>8,el=s=>s<<8|s>>>24;function ep(s,c){if(s.length!==256)throw new Error("Wrong sbox length");let l=new Uint32Array(256).map((D,H)=>c(s[H])),g=l.map(el),y=g.map(el),_=y.map(el),L=new Uint32Array(256*256),R=new Uint32Array(256*256),O=new Uint16Array(256*256);for(let D=0;D<256;D++)for(let H=0;H<256;H++){let j=D*256+H;L[j]=l[D]^g[H],R[j]=y[D]^_[H],O[j]=s[D]<<8|s[H]}return{sbox:s,sbox2:O,T0:l,T1:g,T2:y,T3:_,T01:L,T23:R}}let tl=ep(Xu,s=>oi(s,3)<<24|s<<16|s<<8|oi(s,2)),tp=ep(B1,s=>oi(s,11)<<24|oi(s,13)<<16|oi(s,9)<<8|oi(s,14)),C1=(()=>{let s=new Uint8Array(16);for(let c=0,l=1;c<16;c++,l=Ju(l))s[c]=l;return s})();function np(s){Eo(s);let c=s.length;if(![16,24,32].includes(c))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${c}`);let{sbox2:l}=tl,g=on(s),y=g.length,_=R=>Fn(l,R,R,R,R),L=new Uint32Array(c+28);L.set(g);for(let R=y;R<L.length;R++){let O=L[R-1];R%y===0?O=_(L1(O))^C1[R/y-1]:y>6&&R%y===4&&(O=_(O)),L[R]=L[R-y]^O}return L}function P1(s){let c=np(s),l=c.slice(),g=c.length,{sbox2:y}=tl,{T0:_,T1:L,T2:R,T3:O}=tp;for(let D=0;D<g;D+=4)for(let H=0;H<4;H++)l[D+H]=c[g-D-4+H];c.fill(0);for(let D=4;D<g-4;D++){let H=l[D],j=Fn(y,H,H,H,H);l[D]=_[j&255]^L[j>>>8&255]^R[j>>>16&255]^O[j>>>24]}return l}function zr(s,c,l,g,y,_){return s[l<<8&65280|g>>>8&255]^c[y>>>8&65280|_>>>24&255]}function Fn(s,c,l,g,y){return s[c&255|l&65280]|s[g>>>16&255|y>>>16&65280]<<16}function rp(s,c,l,g,y){let{sbox2:_,T01:L,T23:R}=tl,O=0;c^=s[O++],l^=s[O++],g^=s[O++],y^=s[O++];let D=s.length/4-2;for(let ee=0;ee<D;ee++){let Q=s[O++]^zr(L,R,c,l,g,y),te=s[O++]^zr(L,R,l,g,y,c),re=s[O++]^zr(L,R,g,y,c,l),X=s[O++]^zr(L,R,y,c,l,g);c=Q,l=te,g=re,y=X}let H=s[O++]^Fn(_,c,l,g,y),j=s[O++]^Fn(_,l,g,y,c),Y=s[O++]^Fn(_,g,y,c,l),G=s[O++]^Fn(_,y,c,l,g);return{s0:H,s1:j,s2:Y,s3:G}}function I1(s,c,l,g,y){let{sbox2:_,T01:L,T23:R}=tp,O=0;c^=s[O++],l^=s[O++],g^=s[O++],y^=s[O++];let D=s.length/4-2;for(let ee=0;ee<D;ee++){let Q=s[O++]^zr(L,R,c,y,g,l),te=s[O++]^zr(L,R,l,c,y,g),re=s[O++]^zr(L,R,g,l,c,y),X=s[O++]^zr(L,R,y,g,l,c);c=Q,l=te,g=re,y=X}let H=s[O++]^Fn(_,c,y,g,l),j=s[O++]^Fn(_,l,c,y,g),Y=s[O++]^Fn(_,g,l,c,y),G=s[O++]^Fn(_,y,g,l,c);return{s0:H,s1:j,s2:Y,s3:G}}function op(s,c){if(!c)return new Uint8Array(s);if(Eo(c),c.length<s)throw new Error(`aes: wrong destination length, expected at least ${s}, got: ${c.length}`);return c}function N1(s){if(Eo(s),s.length%Ur!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${Ur}`)}function O1(s,c,l){let g=s.length,y=g%Ur;if(!c&&y!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");let _=on(s);if(c){let O=Ur-y;O||(O=Ur),g=g+O}let L=op(g,l),R=on(L);return{b:_,o:R,out:L}}function R1(s,c){if(!c)return s;let l=s.length;if(!l)throw new Error("aes/pcks5: empty ciphertext not allowed");let g=s[l-1];if(g<=0||g>16)throw new Error(`aes/pcks5: wrong padding byte: ${g}`);let y=s.subarray(0,-g);for(let _=0;_<g;_++)if(s[l-_-1]!==g)throw new Error("aes/pcks5: wrong padding");return y}function U1(s){let c=new Uint8Array(16),l=on(c);c.set(s);let g=Ur-s.length;for(let y=Ur-g;y<Ur;y++)c[y]=g;return l}let ip=E1({blockSize:16,nonceLength:16},function(s,c,l={}){Eo(s),Eo(c,16);let g=!l.disablePadding;return{encrypt:(y,_)=>{let L=np(s),{b:R,o:O,out:D}=O1(y,g,_),H=on(c),j=H[0],Y=H[1],G=H[2],ee=H[3],Q=0;for(;Q+4<=R.length;)j^=R[Q+0],Y^=R[Q+1],G^=R[Q+2],ee^=R[Q+3],{s0:j,s1:Y,s2:G,s3:ee}=rp(L,j,Y,G,ee),O[Q++]=j,O[Q++]=Y,O[Q++]=G,O[Q++]=ee;if(g){let te=U1(y.subarray(Q*4));j^=te[0],Y^=te[1],G^=te[2],ee^=te[3],{s0:j,s1:Y,s2:G,s3:ee}=rp(L,j,Y,G,ee),O[Q++]=j,O[Q++]=Y,O[Q++]=G,O[Q++]=ee}return L.fill(0),D},decrypt:(y,_)=>{N1(y);let L=P1(s),R=on(c),O=op(y.length,_),D=on(y),H=on(O),j=R[0],Y=R[1],G=R[2],ee=R[3];for(let Q=0;Q+4<=D.length;){let te=j,re=Y,X=G,fe=ee;j=D[Q+0],Y=D[Q+1],G=D[Q+2],ee=D[Q+3];let{s0:Ae,s1:Te,s2:he,s3:le}=I1(L,j,Y,G,ee);H[Q++]=Ae^te,H[Q++]=Te^re,H[Q++]=he^X,H[Q++]=le^fe}return L.fill(0),R1(O,g)}}});function ii(s){if(!Number.isSafeInteger(s))throw new Error(`Wrong integer: ${s}`)}function rr(...s){let c=(y,_)=>L=>y(_(L)),l=Array.from(s).reverse().reduce((y,_)=>y?c(y,_.encode):_.encode,void 0),g=s.reduce((y,_)=>y?c(y,_.decode):_.decode,void 0);return{encode:l,decode:g}}function or(s){return{encode:c=>{if(!Array.isArray(c)||c.length&&typeof c[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return c.map(l=>{if(ii(l),l<0||l>=s.length)throw new Error(`Digit index outside alphabet: ${l} (alphabet: ${s.length})`);return s[l]})},decode:c=>{if(!Array.isArray(c)||c.length&&typeof c[0]!="string")throw new Error("alphabet.decode input should be array of strings");return c.map(l=>{if(typeof l!="string")throw new Error(`alphabet.decode: not string element=${l}`);let g=s.indexOf(l);if(g===-1)throw new Error(`Unknown letter: "${l}". Allowed: ${s}`);return g})}}}function ir(s=""){if(typeof s!="string")throw new Error("join separator should be string");return{encode:c=>{if(!Array.isArray(c)||c.length&&typeof c[0]!="string")throw new Error("join.encode input should be array of strings");for(let l of c)if(typeof l!="string")throw new Error(`join.encode: non-string input=${l}`);return c.join(s)},decode:c=>{if(typeof c!="string")throw new Error("join.decode input should be string");return c.split(s)}}}function ma(s,c="="){if(ii(s),typeof c!="string")throw new Error("padding chr should be string");return{encode(l){if(!Array.isArray(l)||l.length&&typeof l[0]!="string")throw new Error("padding.encode input should be array of strings");for(let g of l)if(typeof g!="string")throw new Error(`padding.encode: non-string input=${g}`);for(;l.length*s%8;)l.push(c);return l},decode(l){if(!Array.isArray(l)||l.length&&typeof l[0]!="string")throw new Error("padding.encode input should be array of strings");for(let y of l)if(typeof y!="string")throw new Error(`padding.decode: non-string input=${y}`);let g=l.length;if(g*s%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;g>0&&l[g-1]===c;g--)if(!((g-1)*s%8))throw new Error("Invalid padding: string has too much padding");return l.slice(0,g)}}}function sp(s){if(typeof s!="function")throw new Error("normalize fn should be function");return{encode:c=>c,decode:c=>s(c)}}function ap(s,c,l){if(c<2)throw new Error(`convertRadix: wrong from=${c}, base cannot be less than 2`);if(l<2)throw new Error(`convertRadix: wrong to=${l}, base cannot be less than 2`);if(!Array.isArray(s))throw new Error("convertRadix: data should be array");if(!s.length)return[];let g=0,y=[],_=Array.from(s);for(_.forEach(L=>{if(ii(L),L<0||L>=c)throw new Error(`Wrong integer: ${L}`)});;){let L=0,R=!0;for(let O=g;O<_.length;O++){let D=_[O],H=c*L+D;if(!Number.isSafeInteger(H)||c*L/c!==L||H-D!==c*L)throw new Error("convertRadix: carry overflow");if(L=H%l,_[O]=Math.floor(H/l),!Number.isSafeInteger(_[O])||_[O]*l+L!==H)throw new Error("convertRadix: carry overflow");if(R)_[O]?R=!1:g=O;else continue}if(y.push(L),R)break}for(let L=0;L<s.length-1&&s[L]===0;L++)y.push(0);return y.reverse()}let cp=(s,c)=>c?cp(c,s%c):s,ba=(s,c)=>s+(c-cp(s,c));function nl(s,c,l,g){if(!Array.isArray(s))throw new Error("convertRadix2: data should be array");if(c<=0||c>32)throw new Error(`convertRadix2: wrong from=${c}`);if(l<=0||l>32)throw new Error(`convertRadix2: wrong to=${l}`);if(ba(c,l)>32)throw new Error(`convertRadix2: carry overflow from=${c} to=${l} carryBits=${ba(c,l)}`);let y=0,_=0,L=2**l-1,R=[];for(let O of s){if(ii(O),O>=2**c)throw new Error(`convertRadix2: invalid data word=${O} from=${c}`);if(y=y<<c|O,_+c>32)throw new Error(`convertRadix2: carry overflow pos=${_} from=${c}`);for(_+=c;_>=l;_-=l)R.push((y>>_-l&L)>>>0);y&=2**_-1}if(y=y<<l-_&L,!g&&_>=c)throw new Error("Excess padding");if(!g&&y)throw new Error(`Non-zero padding: ${y}`);return g&&_>0&&R.push(y>>>0),R}function z1(s){return ii(s),{encode:c=>{if(!(c instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return ap(Array.from(c),2**8,s)},decode:c=>{if(!Array.isArray(c)||c.length&&typeof c[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(ap(c,s,2**8))}}}function Mr(s,c=!1){if(ii(s),s<=0||s>32)throw new Error("radix2: bits should be in (0..32]");if(ba(8,s)>32||ba(s,8)>32)throw new Error("radix2: carry overflow");return{encode:l=>{if(!(l instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return nl(Array.from(l),8,s,!c)},decode:l=>{if(!Array.isArray(l)||l.length&&typeof l[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(nl(l,s,8,c))}}}function up(s){if(typeof s!="function")throw new Error("unsafeWrapper fn should be function");return function(...c){try{return s.apply(null,c)}catch{}}}let M1=rr(Mr(4),or("0123456789ABCDEF"),ir("")),D1=rr(Mr(5),or("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),ma(5),ir(""));rr(Mr(5),or("0123456789ABCDEFGHIJKLMNOPQRSTUV"),ma(5),ir("")),rr(Mr(5),or("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),ir(""),sp(s=>s.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));let es=rr(Mr(6),or("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),ma(6),ir("")),F1=rr(Mr(6),or("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),ma(6),ir("")),rl=s=>rr(z1(58),or(s),ir("")),ol=rl("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");rl("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),rl("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");let lp=[0,2,3,5,6,7,9,10,11],j1={encode(s){let c="";for(let l=0;l<s.length;l+=8){let g=s.subarray(l,l+8);c+=ol.encode(g).padStart(lp[g.length],"1")}return c},decode(s){let c=[];for(let l=0;l<s.length;l+=11){let g=s.slice(l,l+11),y=lp.indexOf(g.length),_=ol.decode(g);for(let L=0;L<_.length-y;L++)if(_[L]!==0)throw new Error("base58xmr: wrong padding");c=c.concat(Array.from(_.slice(_.length-y)))}return Uint8Array.from(c)}},il=rr(or("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),ir("")),dp=[996825010,642813549,513874426,1027748829,705979059];function ts(s){let c=s>>25,l=(s&33554431)<<5;for(let g=0;g<dp.length;g++)(c>>g&1)===1&&(l^=dp[g]);return l}function fp(s,c,l=1){let g=s.length,y=1;for(let _=0;_<g;_++){let L=s.charCodeAt(_);if(L<33||L>126)throw new Error(`Invalid prefix (${s})`);y=ts(y)^L>>5}y=ts(y);for(let _=0;_<g;_++)y=ts(y)^s.charCodeAt(_)&31;for(let _ of c)y=ts(y)^_;for(let _=0;_<6;_++)y=ts(y);return y^=l,il.encode(nl([y%2**30],30,5,!1))}function hp(s){let c=s==="bech32"?1:734539939,l=Mr(5),g=l.decode,y=l.encode,_=up(g);function L(H,j,Y=90){if(typeof H!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof H}`);if(!Array.isArray(j)||j.length&&typeof j[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof j}`);let G=H.length+7+j.length;if(Y!==!1&&G>Y)throw new TypeError(`Length ${G} exceeds limit ${Y}`);return H=H.toLowerCase(),`${H}1${il.encode(j)}${fp(H,j,c)}`}function R(H,j=90){if(typeof H!="string")throw new Error(`bech32.decode input should be string, not ${typeof H}`);if(H.length<8||j!==!1&&H.length>j)throw new TypeError(`Wrong string length: ${H.length} (${H}). Expected (8..${j})`);let Y=H.toLowerCase();if(H!==Y&&H!==H.toUpperCase())throw new Error("String must be lowercase or uppercase");H=Y;let G=H.lastIndexOf("1");if(G===0||G===-1)throw new Error('Letter "1" must be present between prefix and data only');let ee=H.slice(0,G),Q=H.slice(G+1);if(Q.length<6)throw new Error("Data must be at least 6 characters long");let te=il.decode(Q).slice(0,-6),re=fp(ee,te,c);if(!Q.endsWith(re))throw new Error(`Invalid checksum in ${H}: expected "${re}"`);return{prefix:ee,words:te}}let O=up(R);function D(H){let{prefix:j,words:Y}=R(H,!1);return{prefix:j,words:Y,bytes:g(Y)}}return{encode:L,decode:R,decodeToBytes:D,decodeUnsafe:O,fromWords:g,fromWordsUnsafe:_,toWords:y}}let pp=hp("bech32");hp("bech32m");let H1={encode:s=>new TextDecoder().decode(s),decode:s=>new TextEncoder().encode(s)},V1=rr(Mr(4),or("0123456789abcdef"),ir(""),sp(s=>{if(typeof s!="string"||s.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof s} with length ${s.length}`);return s.toLowerCase()}));`${Object.keys({utf8:H1,hex:V1,base16:M1,base32:D1,base64:es,base64url:F1,base58:ol,base58xmr:j1}).join(", ")}`;var xo=Symbol("verified"),q1=s=>s instanceof Object;function W1(s){if(!q1(s)||typeof s.kind!="number"||typeof s.content!="string"||typeof s.created_at!="number"||typeof s.pubkey!="string"||!s.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(s.tags))return!1;for(let c=0;c<s.tags.length;c++){let l=s.tags[c];if(!Array.isArray(l))return!1;for(let g=0;g<l.length;g++)if(typeof l[g]=="object")return!1}return!0}var Q1=new TextDecoder("utf-8"),gp=new TextEncoder;function ns(s){s.indexOf("://")===-1&&(s="wss://"+s);let c=new URL(s);return c.pathname=c.pathname.replace(/\/+/g,"/"),c.pathname.endsWith("/")&&(c.pathname=c.pathname.slice(0,-1)),(c.port==="80"&&c.protocol==="ws:"||c.port==="443"&&c.protocol==="wss:")&&(c.port=""),c.searchParams.sort(),c.hash="",c.toString()}var K1=class{constructor(s){ce(this,"value"),ce(this,"next",null),ce(this,"prev",null),this.value=s}},G1=class{constructor(){ce(this,"first"),ce(this,"last"),this.first=null,this.last=null}enqueue(s){let c=new K1(s);return this.last?this.last===this.first?(this.last=c,this.last.prev=this.first,this.first.next=c):(c.prev=this.last,this.last.next=c,this.last=c):(this.first=c,this.last=c),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){let c=this.first;return this.first=null,this.last=null,c.value}let s=this.first;return this.first=s.next,s.value}},Z1=class{generateSecretKey(){return Kt.utils.randomPrivateKey()}getPublicKey(s){return Qt(Kt.getPublicKey(s))}finalizeEvent(s,c){let l=s;return l.pubkey=Qt(Kt.getPublicKey(c)),l.id=sl(l),l.sig=Qt(Kt.sign(sl(l),c)),l[xo]=!0,l}verifyEvent(s){if(typeof s[xo]=="boolean")return s[xo];let c=sl(s);if(c!==s.id)return s[xo]=!1,!1;try{let l=Kt.verify(s.sig,c,s.pubkey);return s[xo]=l,l}catch{return s[xo]=!1,!1}}};function Y1(s){if(!W1(s))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,s.pubkey,s.created_at,s.kind,s.tags,s.content])}function sl(s){let c=Ku(gp.encode(Y1(s)));return Qt(c)}var wa=new Z1,J1=wa.generateSecretKey,X1=wa.getPublicKey,ev=wa.finalizeEvent,mp=wa.verifyEvent;async function tv(s,c,l){let g=s instanceof Uint8Array?Qt(s):s,y=Zi.getSharedSecret(g,"02"+c),_=bp(y),L=Uint8Array.from(Qw(16)),R=gp.encode(l),O=ip(_,L).encrypt(R),D=es.encode(new Uint8Array(O)),H=es.encode(new Uint8Array(L.buffer));return`${D}?iv=${H}`}async function nv(s,c,l){let g=s instanceof Uint8Array?Qt(s):s,[y,_]=l.split("?iv="),L=Zi.getSharedSecret(g,"02"+c),R=bp(L),O=es.decode(_),D=es.decode(y),H=ip(R,O).decrypt(D);return Q1.decode(H)}function bp(s){return s.slice(1,33)}var rv=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,ov;try{ov=fetch}catch{}var iv=22242,al=24133,sv=31990;function av(s,c){if(s.ids&&s.ids.indexOf(c.id)===-1&&!s.ids.some(l=>c.id.startsWith(l))||s.kinds&&s.kinds.indexOf(c.kind)===-1||s.authors&&s.authors.indexOf(c.pubkey)===-1&&!s.authors.some(l=>c.pubkey.startsWith(l)))return!1;for(let l in s)if(l[0]==="#"){let g=l.slice(1),y=s[`#${g}`];if(y&&!c.tags.find(([_,L])=>_===l.slice(1)&&y.indexOf(L)!==-1))return!1}return!(s.since&&c.created_at<s.since||s.until&&c.created_at>s.until)}function cv(s,c){for(let l=0;l<s.length;l++)if(av(s[l],c))return!0;return!1}function uv(s,c){let l=c.length+3,g=s.indexOf(`"${c}":`)+l,y=s.slice(g).indexOf('"')+g+1;return s.slice(y,y+64)}function lv(s){let c=s.slice(0,22).indexOf('"EVENT"');if(c===-1)return null;let l=s.slice(c+7+1).indexOf('"');if(l===-1)return null;let g=c+7+1+l,y=s.slice(g+1,80).indexOf('"');if(y===-1)return null;let _=g+1+y;return s.slice(g+1,_)}function dv(s,c){return{kind:iv,created_at:Math.floor(Date.now()/1e3),tags:[["relay",s],["challenge",c]],content:""}}async function fv(){return new Promise(s=>{let c=new MessageChannel,l=()=>{c.port1.removeEventListener("message",l),s()};c.port1.addEventListener("message",l),c.port2.postMessage(0),c.port1.start()})}var hv=s=>(s[xo]=!0,!0),wp;try{wp=WebSocket}catch{}var yp=class{constructor(s,c){ce(this,"url"),ce(this,"_connected",!1),ce(this,"onclose",null),ce(this,"onnotice",l=>console.debug(`NOTICE from ${this.url}: ${l}`)),ce(this,"_onauth",null),ce(this,"baseEoseTimeout",4400),ce(this,"connectionTimeout",4400),ce(this,"openSubs",new Map),ce(this,"connectionTimeoutHandle"),ce(this,"connectionPromise"),ce(this,"openCountRequests",new Map),ce(this,"openEventPublishes",new Map),ce(this,"ws"),ce(this,"incomingMessageQueue",new G1),ce(this,"queueRunning",!1),ce(this,"challenge"),ce(this,"serial",0),ce(this,"verifyEvent"),this.url=ns(s),this.verifyEvent=c.verifyEvent}static async connect(s,c){let l=new yp(s,c);return await l.connect(),l}closeAllSubscriptions(s){for(let[c,l]of this.openSubs)l.close(s);this.openSubs.clear();for(let[c,l]of this.openEventPublishes)l.reject(new Error(s));this.openEventPublishes.clear();for(let[c,l]of this.openCountRequests)l.reject(new Error(s));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((s,c)=>{this.connectionTimeoutHandle=setTimeout(()=>{var l;c("connection timed out"),this.connectionPromise=void 0,(l=this.onclose)==null||l.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new wp(this.url)}catch(l){c(l);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,s()},this.ws.onerror=l=>{var g;c(l.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(g=this.onclose)==null||g.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var l;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(l=this.onclose)==null||l.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await fv();this.queueRunning=!1}handleNext(){var s,c,l;let g=this.incomingMessageQueue.dequeue();if(!g)return!1;let y=lv(g);if(y){let _=this.openSubs.get(y);if(!_)return;let L=uv(g,"id"),R=(s=_.alreadyHaveEvent)==null?void 0:s.call(_,L);if((c=_.receivedEvent)==null||c.call(_,this,L),R)return}try{let _=JSON.parse(g);switch(_[0]){case"EVENT":{let L=this.openSubs.get(_[1]),R=_[2];this.verifyEvent(R)&&cv(L.filters,R)&&L.onevent(R);return}case"COUNT":{let L=_[1],R=_[2],O=this.openCountRequests.get(L);O&&(O.resolve(R.count),this.openCountRequests.delete(L));return}case"EOSE":{let L=this.openSubs.get(_[1]);if(!L)return;L.receivedEose();return}case"OK":{let L=_[1],R=_[2],O=_[3],D=this.openEventPublishes.get(L);R?D.resolve(O):D.reject(new Error(O)),this.openEventPublishes.delete(L);return}case"CLOSED":{let L=_[1],R=this.openSubs.get(L);if(!R)return;R.closed=!0,R.close(_[2]);return}case"NOTICE":this.onnotice(_[1]);return;case"AUTH":{this.challenge=_[1],(l=this._onauth)==null||l.call(this,_[1]);return}}}catch{return}}async send(s){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var c;(c=this.ws)==null||c.send(s)})}async auth(s){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");let c=await s(dv(this.url,this.challenge)),l=new Promise((g,y)=>{this.openEventPublishes.set(c.id,{resolve:g,reject:y})});return this.send('["AUTH",'+JSON.stringify(c)+"]"),l}async publish(s){let c=new Promise((l,g)=>{this.openEventPublishes.set(s.id,{resolve:l,reject:g})});return this.send('["EVENT",'+JSON.stringify(s)+"]"),c}async count(s,c){this.serial++;let l=c?.id||"count:"+this.serial,g=new Promise((y,_)=>{this.openCountRequests.set(l,{resolve:y,reject:_})});return this.send('["COUNT","'+l+'",'+JSON.stringify(s)+"]"),g}subscribe(s,c){let l=this.prepareSubscription(s,c);return l.fire(),l}prepareSubscription(s,c){this.serial++;let l=c.id||"sub:"+this.serial,g=new pv(this,l,s,c);return this.openSubs.set(l,g),g}close(){var s;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(s=this.ws)==null||s.close()}_onmessage(s){this.incomingMessageQueue.enqueue(s.data),this.queueRunning||this.runQueue()}},pv=class{constructor(s,c,l,g){ce(this,"relay"),ce(this,"id"),ce(this,"closed",!1),ce(this,"eosed",!1),ce(this,"filters"),ce(this,"alreadyHaveEvent"),ce(this,"receivedEvent"),ce(this,"onevent"),ce(this,"oneose"),ce(this,"onclose"),ce(this,"eoseTimeout"),ce(this,"eoseTimeoutHandle"),this.relay=s,this.filters=l,this.id=c,this.alreadyHaveEvent=g.alreadyHaveEvent,this.receivedEvent=g.receivedEvent,this.eoseTimeout=g.eoseTimeout||s.baseEoseTimeout,this.oneose=g.oneose,this.onclose=g.onclose,this.onevent=g.onevent||(y=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,y)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var s;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(s=this.oneose)==null||s.call(this))}close(s="closed by caller"){var c;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(c=this.onclose)==null||c.call(this,s)}},gv=class{constructor(s){ce(this,"relays",new Map),ce(this,"seenOn",new Map),ce(this,"trackRelays",!1),ce(this,"verifyEvent"),ce(this,"trustedRelayURLs",new Set),this.verifyEvent=s.verifyEvent}async ensureRelay(s,c){s=ns(s);let l=this.relays.get(s);return l||(l=new yp(s,{verifyEvent:this.trustedRelayURLs.has(s)?hv:this.verifyEvent}),c!=null&&c.connectionTimeout&&(l.connectionTimeout=c.connectionTimeout),this.relays.set(s,l)),await l.connect(),l}close(s){s.map(ns).forEach(c=>{var l;(l=this.relays.get(c))==null||l.close()})}subscribeMany(s,c,l){return this.subscribeManyMap(Object.fromEntries(s.map(g=>[g,c])),l)}subscribeManyMap(s,c){this.trackRelays&&(c.receivedEvent=(j,Y)=>{let G=this.seenOn.get(Y);G||(G=new Set,this.seenOn.set(Y,G)),G.add(j)});let l=new Set,g=[],y=Object.keys(s).length,_=[],L=j=>{var Y;_[j]=!0,_.filter(G=>G).length===y&&((Y=c.oneose)==null||Y.call(c),L=()=>{})},R=[],O=(j,Y)=>{var G;L(j),R[j]=Y,R.filter(ee=>ee).length===y&&((G=c.onclose)==null||G.call(c,R),O=()=>{})},D=j=>{var Y;if((Y=c.alreadyHaveEvent)!=null&&Y.call(c,j))return!0;let G=l.has(j);return l.add(j),G},H=Promise.all(Object.entries(s).map(async(j,Y,G)=>{if(G.indexOf(j)!==Y){O(Y,"duplicate url");return}let[ee,Q]=j;ee=ns(ee);let te;try{te=await this.ensureRelay(ee,{connectionTimeout:c.maxWait?Math.max(c.maxWait*.8,c.maxWait-1e3):void 0})}catch(X){O(Y,X?.message||String(X));return}let re=te.subscribe(Q,{...c,oneose:()=>L(Y),onclose:X=>O(Y,X),alreadyHaveEvent:D,eoseTimeout:c.maxWait});g.push(re)}));return{async close(){await H,g.forEach(j=>{j.close()})}}}subscribeManyEose(s,c,l){let g=this.subscribeMany(s,c,{...l,oneose(){g.close()}});return g}async querySync(s,c,l){return new Promise(async g=>{let y=[];this.subscribeManyEose(s,[c],{...l,onevent(_){y.push(_)},onclose(_){g(y)}})})}async get(s,c,l){c.limit=1;let g=await this.querySync(s,c,l);return g.sort((y,_)=>_.created_at-y.created_at),g[0]||null}publish(s,c){return s.map(ns).map(async(l,g,y)=>y.indexOf(l)!==g?Promise.reject("duplicate url"):(await this.ensureRelay(l)).publish(c))}},mv=class extends gv{constructor(){super({verifyEvent:mp})}},vp;try{vp=fetch}catch{}var ya=/^bunker:\/\/([0-9a-f]{64})\??([?\/\w:.=&%]*)$/,bv=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;async function wv(s){let c=s.match(ya);if(c)try{let l=c[1],g=new URLSearchParams(c[2]);return{pubkey:l,relays:g.getAll("relay"),secret:g.get("secret")}}catch{}return _p(s)}async function _p(s){let c=s.match(rv);if(!c)return null;let[l,g="_",y]=c;try{let _=`https://${y}/.well-known/nostr.json?name=${g}`,L=await(await vp(_,{redirect:"error"})).json(),R=L.names[g],O=L.nip46[R]||[];return{pubkey:R,relays:O,secret:null}}catch{return null}}var Ep=class{constructor(s,c,l={}){if(ce(this,"pool"),ce(this,"subCloser"),ce(this,"isOpen"),ce(this,"serial"),ce(this,"idPrefix"),ce(this,"listeners"),ce(this,"waitingForAuth"),ce(this,"secretKey"),ce(this,"bp"),c.relays.length===0)throw new Error("no relays are specified for this bunker");this.pool=l.pool||new mv,this.secretKey=s,this.bp=c,this.isOpen=!1,this.idPrefix=Math.random().toString(36).substring(7),this.serial=0,this.listeners={},this.waitingForAuth={};let g=this.listeners,y=this.waitingForAuth;this.subCloser=this.pool.subscribeMany(this.bp.relays,[{kinds:[al],"#p":[X1(this.secretKey)]}],{async onevent(_){let{id:L,result:R,error:O}=JSON.parse(await nv(s,_.pubkey,_.content));if(R==="auth_url"&&y[L]){delete y[L],l.onauth?l.onauth(O):console.warn(`nostr-tools/nip46: remote signer ${c.pubkey} tried to send an "auth_url"='${O}' but there was no onauth() callback configured.`);return}let D=g[L];D&&(O?D.reject(O):R&&D.resolve(R),delete g[L])}}),this.isOpen=!0}async close(){this.isOpen=!1,this.subCloser.close()}async sendRequest(s,c){return new Promise(async(l,g)=>{try{if(!this.isOpen)throw new Error("this signer is not open anymore, create a new one");this.serial++;let y=`${this.idPrefix}-${this.serial}`,_=await tv(this.secretKey,this.bp.pubkey,JSON.stringify({id:y,method:s,params:c})),L=ev({kind:al,tags:[["p",this.bp.pubkey]],content:_,created_at:Math.floor(Date.now()/1e3)},this.secretKey);this.listeners[y]={resolve:l,reject:g},this.waitingForAuth[y]=!0,await Promise.any(this.pool.publish(this.bp.relays,L))}catch(y){g(y)}})}async ping(){let s=await this.sendRequest("ping",[]);if(s!=="pong")throw new Error(`result is not pong: ${s}`)}async connect(){await this.sendRequest("connect",[this.bp.pubkey,this.bp.secret||""])}async getPublicKey(){return this.bp.pubkey}async getRelays(){return JSON.parse(await this.sendRequest("get_relays",[]))}async signEvent(s){let c=await this.sendRequest("sign_event",[JSON.stringify(s)]),l=JSON.parse(c);if(l.pubkey===this.bp.pubkey&&mp(l))return l;throw new Error(`event returned from bunker is improperly signed: ${JSON.stringify(l)}`)}async nip04Encrypt(s,c){return await this.sendRequest("nip04_encrypt",[s,c])}async nip04Decrypt(s,c){return await this.sendRequest("nip04_decrypt",[s,c])}async nip44GetKey(s){let c=await this.sendRequest("nip44_get_key",[s]);return $u(c)}async nip44Encrypt(s,c){return await this.sendRequest("nip44_encrypt",[s,c])}async nip44Decrypt(s,c){return await this.sendRequest("nip44_encrypt",[s,c])}};async function yv(s,c,l,g,y){if(y&&!bv.test(y))throw new Error("Invalid email");let _=J1(),L=new Ep(_,s.bunkerPointer,c),R=await L.sendRequest("create_account",[l,g,y||""]);return L.bp.pubkey=R,await L.connect(),L}async function vv(s,c){let l=await s.querySync(c,{kinds:[sv],"#k":[al.toString()]});return l.sort((g,y)=>y.created_at-g.created_at),(await Promise.all(l.map(async(g,y)=>{try{let _=JSON.parse(g.content);try{if(l.findIndex(R=>JSON.parse(R.content).nip05===_.nip05)!==y)return}catch{}let L=await _p(_.nip05);if(L&&L.pubkey===g.pubkey&&L.relays.length)return{bunkerPointer:L,nip05:_.nip05,domain:_.nip05.split("@")[1],name:_.name||_.display_name,picture:_.picture,about:_.about,website:_.website,local:!1}}catch{return}}))).filter(g=>g!==void 0)}var xp=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,kp;try{kp=fetch}catch{}async function _v(s){var c;let l=s.match(xp);if(!l)return null;let[g,y="_",_]=l;try{let L=`https://${_}/.well-known/nostr.json?name=${y}`,R=await(await kp(L,{redirect:"error"})).json(),O=R.names[y];return O?{pubkey:O,relays:(c=R.relays)==null?void 0:c[O]}:null}catch{return null}}new TextDecoder("utf-8"),new TextEncoder;var Ev=5e3;function xv(s){return Sv("npub",$u(s))}function kv(s,c){let l=pp.toWords(c);return pp.encode(s,l,Ev)}function Sv(s,c){return kv(s,c)}let si=[];function Av(s,c=a){let l,g=new Set;function y(R){if(w(s,R)&&(s=R,l)){let O=!si.length;for(let D of g)D[1](),si.push(D,s);if(O){for(let D=0;D<si.length;D+=2)si[D][0](si[D+1]);si.length=0}}}function _(R){y(R(s))}function L(R,O=a){let D=[R,O];return g.add(D),g.size===1&&(l=c(y,_)||a),R(s),()=>{g.delete(D),g.size===0&&l&&(l(),l=null)}}return{set:y,update:_,subscribe:L}}let $v=s=>{let{subscribe:c,set:l}=Av(void 0,()=>{let g=window.matchMedia(s);l(g.matches);let y=()=>l(g.matches);return"addEventListener"in g?g.addEventListener("change",y):g.addListener(y),()=>{"removeEventListener"in g?g.removeEventListener("change",y):g.removeListener(y)}});return{subscribe:c}};function Tv(s){let c,l,g;return{c(){c=k("svg"),l=k("circle"),g=k("path"),$(l,"class","opacity-25"),$(l,"cx","12"),$(l,"cy","12"),$(l,"r","10"),$(l,"stroke","currentColor"),$(l,"stroke-width","4"),$(g,"class","opacity-75"),$(g,"fill","currentColor"),$(g,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),$(c,"class","ml-2 h-5 w-5 animate-spin text-white"),$(c,"xmlns","http://www.w3.org/2000/svg"),$(c,"fill","none"),$(c,"viewBox","0 0 24 24")},m(y,_){f(y,c,_),B(c,l),B(c,g)},p:a,i:a,o:a,d(y){y&&p(c)}}}class Sp extends hh{constructor(c){super(),fh(this,c,null,Tv,w,{})}}let{window:cl}=z;function Ap(s,c,l){let g=s.slice();return g[78]=c[l],g}function Bv(s){let c,l,g,y,_,L,R,O,D,H,j,Y,G=!s[20]&&!s[13]&&!s[14]&&!s[15]&&$p(s),ee=[zv,Uv,Rv,Ov,Nv,Iv,Pv],Q=[];function te(re,X){return re[13]?0:re[14]?1:re[15]?2:re[20]?3:re[17]?4:re[21]?6:5}return R=te(s),O=Q[R]=ee[R](s),{c(){c=v("div"),l=v("button"),g=A("\u292B"),_=T(),G&&G.c(),L=T(),O.c(),$(l,"class",y="absolute right-2 top-0 cursor-pointer bg-transparent text-3xl text-"+s[0]+"-600"),$(c,"class",D="animate-show rounded-md bg-gradient-to-b px-8 py-8 shadow-[0_0px_30px_0px_rgba(0,0,0,0.6)] transition-all sm:w-96 from-"+s[0]+"-900 to-"+s[0]+"-700 "+s[27])},m(re,X){f(re,c,X),B(c,l),B(l,g),B(c,_),G&&G.m(c,null),B(c,L),Q[R].m(c,null),H=!0,j||(Y=C(l,"click",function(){m(s[20]?s[32]:s[30])&&(s[20]?s[32]:s[30]).apply(this,arguments)}),j=!0)},p(re,X){s=re,(!H||X[0]&1&&y!==(y="absolute right-2 top-0 cursor-pointer bg-transparent text-3xl text-"+s[0]+"-600"))&&$(l,"class",y),!s[20]&&!s[13]&&!s[14]&&!s[15]?G?G.p(s,X):(G=$p(s),G.c(),G.m(c,L)):G&&(G.d(1),G=null);let fe=R;R=te(s),R===fe?Q[R].p(s,X):(Lt(),un(Q[fe],1,1,()=>{Q[fe]=null}),Wt(),O=Q[R],O?O.p(s,X):(O=Q[R]=ee[R](s),O.c()),Mt(O,1),O.m(c,null)),(!H||X[0]&134217729&&D!==(D="animate-show rounded-md bg-gradient-to-b px-8 py-8 shadow-[0_0px_30px_0px_rgba(0,0,0,0.6)] transition-all sm:w-96 from-"+s[0]+"-900 to-"+s[0]+"-700 "+s[27]))&&$(c,"class",D)},i(re){H||(Mt(O),H=!0)},o(re){un(O),H=!1},d(re){re&&p(c),G&&G.d(),Q[R].d(),j=!1,Y()}}}function Lv(s){let c,l,g,y,_,L=[qv,Vv,Hv,jv,Fv],R=[];function O(D,H){return D[12]?0:!D[21]&&!D[2]?1:!D[21]&&D[2]?2:D[2]?4:3}return l=O(s),g=R[l]=L[l](s),{c(){c=v("div"),g.c(),$(c,"class",y="rounded px-2 py-2 shadow-[0_0px_10px_0px_rgba(0,0,0,0.3)] transition-all duration-200 bg-"+s[0]+"-700 hover:bg-"+s[0]+"-800 "+s[27])},m(D,H){f(D,c,H),R[l].m(c,null),_=!0},p(D,H){let j=l;l=O(D),l===j?R[l].p(D,H):(Lt(),un(R[j],1,1,()=>{R[j]=null}),Wt(),g=R[l],g?g.p(D,H):(g=R[l]=L[l](D),g.c()),Mt(g,1),g.m(c,null)),(!_||H[0]&134217729&&y!==(y="rounded px-2 py-2 shadow-[0_0px_10px_0px_rgba(0,0,0,0.3)] transition-all duration-200 bg-"+D[0]+"-700 hover:bg-"+D[0]+"-800 "+D[27]))&&$(c,"class",y)},i(D){_||(Mt(g),_=!0)},o(D){un(g),_=!1},d(D){D&&p(c),R[l].d()}}}function Cv(s){return{c:a,m:a,p:a,i:a,o:a,d:a}}function $p(s){let c,l,g,y,_;return{c(){c=v("button"),l=A("?"),$(c,"class",g="absolute bottom-1 right-3 cursor-pointer bg-transparent text-xl text-"+s[0]+"-600")},m(L,R){f(L,c,R),B(c,l),y||(_=C(c,"click",s[31]),y=!0)},p(L,R){R[0]&1&&g!==(g="absolute bottom-1 right-3 cursor-pointer bg-transparent text-xl text-"+L[0]+"-600")&&$(c,"class",g)},d(L){L&&p(c),y=!1,_()}}}function Pv(s){let c,l,g,y,_,L,R=s[21].npub+"",O,D,H,j,Y,G,ee,Q,te,re,X,fe=Qh(s[11])+"",Ae,Te,he,le=(s[21].picture||s[21].name)&&Tp(s);return{c(){c=v("div"),l=v("div"),l.textContent="You are connected to Nostr as",g=T(),y=v("a"),le&&le.c(),_=T(),L=v("div"),O=A(R),H=T(),j=v("button"),Y=A("Disconnect"),ee=T(),Q=v("div"),te=A("This webpage is using the public key:"),re=v("br"),X=T(),Ae=A(fe),$(l,"class","mb-4 text-sm"),$(L,"class","block break-all"),$(y,"target","_blank"),$(y,"href",D="https://nosta.me/"+s[21].npub),$(y,"class","group text-white no-underline"),$(c,"class","text-center"),$(j,"class",G="my-2 mt-6 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white bg-"+s[0]+"-900 hover:bg-"+s[0]+"-950"),$(Q,"class","mt-6 block break-all text-center text-sm")},m(se,be){f(se,c,be),B(c,l),B(c,g),B(c,y),le&&le.m(y,null),B(y,_),B(y,L),B(L,O),f(se,H,be),f(se,j,be),B(j,Y),f(se,ee,be),f(se,Q,be),B(Q,te),B(Q,re),B(Q,X),B(Q,Ae),Te||(he=C(j,"click",s[34]),Te=!0)},p(se,be){se[21].picture||se[21].name?le?le.p(se,be):(le=Tp(se),le.c(),le.m(y,_)):le&&(le.d(1),le=null),be[0]&2097152&&R!==(R=se[21].npub+"")&&q(O,R),be[0]&2097152&&D!==(D="https://nosta.me/"+se[21].npub)&&$(y,"href",D),be[0]&1&&G!==(G="my-2 mt-6 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white bg-"+se[0]+"-900 hover:bg-"+se[0]+"-950")&&$(j,"class",G),be[0]&2048&&fe!==(fe=Qh(se[11])+"")&&q(Ae,fe)},i:a,o:a,d(se){se&&(p(c),p(H),p(j),p(ee),p(Q)),le&&le.d(),Te=!1,he()}}}function Iv(s){let c,l,g,y,_,L,R,O,D,H,j,Y,G,ee,Q,te,re,X=s[19]&&Cp(s),fe=[Dv,Mv],Ae=[];function Te(se,be){return se[12]?0:1}O=Te(s),D=Ae[O]=fe[O](s);let he=s[12]&&s[16]&&Pp(s),le=!s[12]&&Ip(s);return{c(){c=v("div"),c.textContent="How do you want to connect to Nostr?",l=T(),g=v("form"),y=v("input"),_=T(),X&&X.c(),L=T(),R=v("button"),D.c(),Y=T(),he&&he.c(),G=T(),le&&le.c(),ee=U(),$(c,"class","text-center text-lg"),$(y,"class","box-border w-full rounded px-2 py-1 text-lg text-neutral-800 outline-none"),$(y,"placeholder","user@provider or bunker://..."),y.autofocus=!0,y.disabled=s[12],$(y,"autocapitalize","none"),$(R,"class",H="mt-4 flex w-full cursor-pointer items-center justify-center rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+s[0]+"-900 hover:bg-"+s[0]+"-950"),R.disabled=j=!s[26]||s[12],$(g,"class","mb-1 mt-4 flex flex-col")},m(se,be){f(se,c,be),f(se,l,be),f(se,g,be),B(g,y),s[52](y),E(y,s[4]),B(g,_),X&&X.m(g,null),B(g,L),B(g,R),Ae[O].m(R,null),B(g,Y),he&&he.m(g,null),f(se,G,be),le&&le.m(se,be),f(se,ee,be),Q=!0,y.focus(),te||(re=[C(y,"input",s[53]),C(g,"submit",s[33])],te=!0)},p(se,be){(!Q||be[0]&4096)&&(y.disabled=se[12]),be[0]&16&&y.value!==se[4]&&E(y,se[4]),se[19]?X?X.p(se,be):(X=Cp(se),X.c(),X.m(g,L)):X&&(X.d(1),X=null);let Be=O;O=Te(se),O!==Be&&(Lt(),un(Ae[Be],1,1,()=>{Ae[Be]=null}),Wt(),D=Ae[O],D||(D=Ae[O]=fe[O](se),D.c()),Mt(D,1),D.m(R,null)),(!Q||be[0]&1&&H!==(H="mt-4 flex w-full cursor-pointer items-center justify-center rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+se[0]+"-900 hover:bg-"+se[0]+"-950"))&&$(R,"class",H),(!Q||be[0]&67112960&&j!==(j=!se[26]||se[12]))&&(R.disabled=j),se[12]&&se[16]?he?he.p(se,be):(he=Pp(se),he.c(),he.m(g,null)):he&&(he.d(1),he=null),se[12]?le&&(le.d(1),le=null):le?le.p(se,be):(le=Ip(se),le.c(),le.m(ee.parentNode,ee))},i(se){Q||(Mt(D),Q=!0)},o(se){un(D),Q=!1},d(se){se&&(p(c),p(l),p(g),p(G),p(ee)),s[52](null),X&&X.d(),Ae[O].d(),he&&he.d(),le&&le.d(se),te=!1,h(re)}}}function Nv(s){let c,l,g,y,_,L,R,O,D,H,j,Y,G,ee,Q,te,re,X,fe,Ae,Te,he,le=lh(s[22]),se=[];for(let be=0;be<le.length;be+=1)se[be]=Np(Ap(s,le,be));return{c(){c=v("div"),c.textContent="Create a Nostr account",l=T(),g=v("form"),y=v("div"),_=v("input"),L=T(),R=v("div"),R.textContent="@",O=T(),D=v("select");for(let be=0;be<se.length;be+=1)se[be].c();H=T(),j=v("button"),Y=A("Continue \xBB"),Q=T(),te=v("div"),re=A("Do you already have a Nostr address?"),X=v("br"),fe=T(),Ae=v("button"),Ae.textContent="Login now",$(c,"class","text-center text-lg"),$(_,"class","box-border w-40 rounded px-2 py-1 text-lg text-neutral-800 outline-none"),$(_,"placeholder","bob"),_.autofocus=!0,$(_,"autocapitalize","none"),$(R,"class","mx-2 text-2xl"),$(D,"class","box-border w-full rounded px-2 py-1 text-lg text-neutral-800 outline-none"),s[10]===void 0&&je(()=>s[51].call(D)),$(y,"class","flex flex-row"),$(j,"class",G="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+s[0]+"-900 hover:bg-"+s[0]+"-950"),j.disabled=ee=!s[10]||!s[9]||s[18],$(g,"class","mb-1 mt-4"),$(Ae,"class","cursor-pointer border-0 bg-transparent text-sm text-white underline"),$(te,"class","mt-6 text-center text-sm leading-3")},m(be,Be){f(be,c,Be),f(be,l,Be),f(be,g,Be),B(g,y),B(y,_),s[49](_),E(_,s[9]),B(y,L),B(y,R),B(y,O),B(y,D);for(let Oe=0;Oe<se.length;Oe+=1)se[Oe]&&se[Oe].m(D,null);M(D,s[10],!0),B(g,H),B(g,j),B(j,Y),f(be,Q,Be),f(be,te,Be),B(te,re),B(te,X),B(te,fe),B(te,Ae),_.focus(),Te||(he=[C(_,"input",s[50]),C(_,"input",s[38]),C(D,"change",s[51]),C(g,"submit",s[37]),C(Ae,"click",s[36])],Te=!0)},p(be,Be){if(Be[0]&512&&_.value!==be[9]&&E(_,be[9]),Be[0]&4194304){le=lh(be[22]);let Oe;for(Oe=0;Oe<le.length;Oe+=1){let wt=Ap(be,le,Oe);se[Oe]?se[Oe].p(wt,Be):(se[Oe]=Np(wt),se[Oe].c(),se[Oe].m(D,null))}for(;Oe<se.length;Oe+=1)se[Oe].d(1);se.length=le.length}Be[0]&4195328&&M(D,be[10]),Be[0]&1&&G!==(G="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+be[0]+"-900 hover:bg-"+be[0]+"-950")&&$(j,"class",G),Be[0]&4457984&&ee!==(ee=!be[10]||!be[9]||be[18])&&(j.disabled=ee)},i:a,o:a,d(be){be&&(p(c),p(l),p(g),p(Q),p(te)),s[49](null),b(se,be),Te=!1,h(he)}}}function Ov(s){let c,l,g;return{c(){c=v("div"),c.textContent="What is that?",l=T(),g=v("div"),g.innerHTML=`<p class="mb mt-4">This widget is created with <i>window.nostr.js</i>, a small script
            you can drop in any page that already uses NIP-07 and make it also
            work with NIP-46 automatically when the user doesn&#39;t have an
            extension installed.
            <br/>
            It adds a small floating button on the side of the window that users
            can use to create Nostr accuonts or connect to their NIP-46 bunkers.</p> <p class="mt-4">This tool is opensource, get the code from the <a target="_blank" class="underline" href="https://github.com/fiatjaf/window.nostr.js">project&#39;s page</a>.</p> <p class="mt-4">You don&#39;t know what Nostr is?
            <a target="_blank" class="underline" href="https://www.nostr.com">Learn more</a>.</p>`,$(c,"class","text-center text-lg"),$(g,"class","text-base leading-5")},m(y,_){f(y,c,_),f(y,l,_),f(y,g,_)},p:a,i:a,o:a,d(y){y&&(p(c),p(l),p(g))}}}function Rv(s){let c,l,g,y,_,L,R=new URL(s[15]).host+"",O,D,H,j,Y,G,ee,Q,te,re;return{c(){c=v("div"),l=v("div"),l.textContent="An action requires your confirmation",g=T(),y=v("div"),_=A("Now you a new window will bring you to "),L=v("strong"),O=A(R),D=A(" where you can approve the current action. If nothing happens check that if your browser is blocking popups, pleaase."),H=v("br"),j=A(`
            After that you will be returned to this page.`),Y=T(),G=v("button"),ee=A("Confirm action \xBB"),$(l,"class","text-center text-lg"),$(y,"class","mt-4 text-center text-sm leading-4"),$(G,"class",Q="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+s[0]+"-900 hover:bg-"+s[0]+"-950"),$(c,"class","m-auto w-full")},m(X,fe){f(X,c,fe),B(c,l),B(c,g),B(c,y),B(y,_),B(y,L),B(L,O),B(y,D),B(y,H),B(y,j),B(c,Y),B(c,G),B(G,ee),te||(re=C(G,"click",s[48]),te=!0)},p(X,fe){fe[0]&32768&&R!==(R=new URL(X[15]).host+"")&&q(O,R),fe[0]&1&&Q!==(Q="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+X[0]+"-900 hover:bg-"+X[0]+"-950")&&$(G,"class",Q)},i:a,o:a,d(X){X&&p(c),te=!1,re()}}}function Uv(s){let c,l,g,y,_,L,R=new URL(s[14]).host+"",O,D,H,j,Y,G,ee,Q,te,re;return{c(){c=v("div"),l=v("div"),l.textContent="Login into a Nostr account",g=T(),y=v("div"),_=A("Now you a new window will bring you to "),L=v("strong"),O=A(R),D=A(" where you can login and approve the permissions. If nothing happens check that if your browser is blocking popups, pleaase."),H=v("br"),j=A(`
            After that you will be returned to this page.`),Y=T(),G=v("button"),ee=A("Login now \xBB"),$(l,"class","text-center text-lg"),$(y,"class","mt-4 text-center text-sm leading-4"),$(G,"class",Q="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+s[0]+"-900 hover:bg-"+s[0]+"-950"),$(c,"class","m-auto w-full")},m(X,fe){f(X,c,fe),B(c,l),B(c,g),B(c,y),B(y,_),B(y,L),B(L,O),B(y,D),B(y,H),B(y,j),B(c,Y),B(c,G),B(G,ee),te||(re=C(G,"click",s[47]),te=!0)},p(X,fe){fe[0]&16384&&R!==(R=new URL(X[14]).host+"")&&q(O,R),fe[0]&1&&Q!==(Q="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+X[0]+"-900 hover:bg-"+X[0]+"-950")&&$(G,"class",Q)},i:a,o:a,d(X){X&&p(c),te=!1,re()}}}function zv(s){let c,l,g,y,_,L,R=new URL(s[13]).host+"",O,D,H,j,Y,G,ee,Q,te,re;return{c(){c=v("div"),l=v("div"),l.textContent="Create a Nostr account",g=T(),y=v("div"),_=A("Now you a new window will bring you to "),L=v("strong"),O=A(R),D=A(" where the account creation will take place. If nothing happens check that if your browser is blocking popups, pleaase."),H=v("br"),j=A(`
            After that you will be returned to this page.`),Y=T(),G=v("button"),ee=A("Start account creation \xBB"),$(l,"class","text-center text-lg"),$(y,"class","mt-4 text-center text-sm leading-4"),$(G,"class",Q="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+s[0]+"-900 hover:bg-"+s[0]+"-950"),$(c,"class","m-auto w-full")},m(X,fe){f(X,c,fe),B(c,l),B(c,g),B(c,y),B(y,_),B(y,L),B(L,O),B(y,D),B(y,H),B(y,j),B(c,Y),B(c,G),B(G,ee),te||(re=C(G,"click",s[46]),te=!0)},p(X,fe){fe[0]&8192&&R!==(R=new URL(X[13]).host+"")&&q(O,R),fe[0]&1&&Q!==(Q="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+X[0]+"-900 hover:bg-"+X[0]+"-950")&&$(G,"class",Q)},i:a,o:a,d(X){X&&p(c),te=!1,re()}}}function Tp(s){let c,l,g=s[21].picture&&Bp(s),y=s[21].name&&Lp(s);return{c(){c=v("div"),g&&g.c(),l=T(),y&&y.c(),$(c,"class","mb-2 flex items-center justify-center gap-2")},m(_,L){f(_,c,L),g&&g.m(c,null),B(c,l),y&&y.m(c,null)},p(_,L){_[21].picture?g?g.p(_,L):(g=Bp(_),g.c(),g.m(c,l)):g&&(g.d(1),g=null),_[21].name?y?y.p(_,L):(y=Lp(_),y.c(),y.m(c,null)):y&&(y.d(1),y=null)},d(_){_&&p(c),g&&g.d(),y&&y.d()}}}function Bp(s){let c,l,g;return{c(){c=v("img"),P(c.src,l=s[21].picture)||$(c,"src",l),$(c,"alt",""),$(c,"class",g="h-10 w-10 rounded-full border-2 border-solid border-transparent group-hover:border-"+s[0]+"-100")},m(y,_){f(y,c,_)},p(y,_){_[0]&2097152&&!P(c.src,l=y[21].picture)&&$(c,"src",l),_[0]&1&&g!==(g="h-10 w-10 rounded-full border-2 border-solid border-transparent group-hover:border-"+y[0]+"-100")&&$(c,"class",g)},d(y){y&&p(c)}}}function Lp(s){let c,l=s[21].name+"",g;return{c(){c=v("div"),g=A(l),$(c,"class","text-3xl decoration-2 underline-offset-4 group-hover:underline")},m(y,_){f(y,c,_),B(c,g)},p(y,_){_[0]&2097152&&l!==(l=y[21].name+"")&&q(g,l)},d(y){y&&p(c)}}}function Cp(s){let c,l;return{c(){c=v("div"),l=A(s[19]),$(c,"class","my-2 rounded bg-yellow-100 p-2 text-center text-sm leading-4 text-red-400")},m(g,y){f(g,c,y),B(c,l)},p(g,y){y[0]&524288&&q(l,g[19])},d(g){g&&p(c)}}}function Mv(s){let c;return{c(){c=A("Connect \xBB")},m(l,g){f(l,c,g)},i:a,o:a,d(l){l&&p(c)}}}function Dv(s){let c,l,g;return l=new Sp({}),{c(){c=A(`Connecting to bunker
              `),dh(l.$$.fragment)},m(y,_){f(y,c,_),Eu(l,y,_),g=!0},i(y){g||(Mt(l.$$.fragment,y),g=!0)},o(y){un(l.$$.fragment,y),g=!1},d(y){y&&p(c),xu(l,y)}}}function Pp(s){let c,l,g,y,_;return{c(){c=v("div"),l=A(`Waiting too much?
              `),g=v("button"),g.textContent="Cancel the connection",$(g,"class","cursor-pointer border-0 bg-transparent text-sm text-white underline"),$(c,"class","mt-6 text-center text-sm leading-3")},m(L,R){f(L,c,R),B(c,l),B(c,g),y||(_=C(g,"click",s[39]),y=!0)},p:a,d(L){L&&p(c),y=!1,_()}}}function Ip(s){let c,l,g,y,_,L,R;return{c(){c=v("div"),l=A("Do you need a Nostr account?"),g=v("br"),y=T(),_=v("button"),_.textContent="Sign up now",$(_,"class","cursor-pointer border-0 bg-transparent text-sm text-white underline"),$(c,"class","mt-6 text-center text-sm leading-3")},m(O,D){f(O,c,D),B(c,l),B(c,g),B(c,y),B(c,_),L||(R=C(_,"click",s[35]),L=!0)},p:a,d(O){O&&p(c),L=!1,R()}}}function Np(s){let c,l,g;return{c(){c=v("option"),$(c,"label",l=s[78].domain),c.__value=g=s[78],E(c,c.__value),$(c,"class","px-2 py-1 text-lg")},m(y,_){f(y,c,_)},p(y,_){_[0]&4194304&&l!==(l=y[78].domain)&&$(c,"label",l),_[0]&4194304&&g!==(g=y[78])&&(c.__value=g,E(c,c.__value))},d(y){y&&p(c)}}}function Fv(s){let c,l;return{c(){c=v("img"),P(c.src,l=s[21].picture)||$(c,"src",l),$(c,"alt",""),$(c,"class","h-6 w-6 rounded-full")},m(g,y){f(g,c,y)},p(g,y){y[0]&2097152&&!P(c.src,l=g[21].picture)&&$(c,"src",l)},i:a,o:a,d(g){g&&p(c)}}}function jv(s){let c,l,g,y=(s[21].name||s[21].npub.slice(0,7)+"\u2026"+s[21].npub.slice(-4))+"",_;function L(D,H){return D[21].picture?Qv:Wv}let R=L(s),O=R(s);return{c(){c=v("div"),O.c(),l=T(),g=v("div"),_=A(y),$(g,"class","max-w-56 overflow-hidden whitespace-nowrap overflow-ellipsis inline-block"),$(c,"class","flex px-2 items-center")},m(D,H){f(D,c,H),O.m(c,null),B(c,l),B(c,g),B(g,_)},p(D,H){R===(R=L(D))&&O?O.p(D,H):(O.d(1),O=R(D),O&&(O.c(),O.m(c,l))),H[0]&2097152&&y!==(y=(D[21].name||D[21].npub.slice(0,7)+"\u2026"+D[21].npub.slice(-4))+"")&&q(_,y)},i:a,o:a,d(D){D&&p(c),O.d()}}}function Hv(s){let c;return{c(){c=v("div"),c.textContent="N",$(c,"class","w-6 text-center")},m(l,g){f(l,c,g)},p:a,i:a,o:a,d(l){l&&p(c)}}}function Vv(s){let c;return{c(){c=v("div"),c.textContent="Connect with Nostr",$(c,"class","flex px-2 items-center")},m(l,g){f(l,c,g)},p:a,i:a,o:a,d(l){l&&p(c)}}}function qv(s){let c,l,g,y;return g=new Sp({}),{c(){c=v("div"),l=A(`Connecting to bunker
          `),dh(g.$$.fragment),$(c,"class","flex px-2 items-center")},m(_,L){f(_,c,L),B(c,l),Eu(g,c,null),y=!0},p:a,i(_){y||(Mt(g.$$.fragment,_),y=!0)},o(_){un(g.$$.fragment,_),y=!1},d(_){_&&p(c),xu(g)}}}function Wv(s){let c;return{c(){c=A("\u2609")},m(l,g){f(l,c,g)},p:a,d(l){l&&p(c)}}}function Qv(s){let c,l;return{c(){c=v("img"),P(c.src,l=s[21].picture)||$(c,"src",l),$(c,"alt",""),$(c,"class","mr-2 h-5 w-5 rounded-full")},m(g,y){f(g,c,y)},p(g,y){y[0]&2097152&&!P(c.src,l=g[21].picture)&&$(c,"src",l)},d(g){g&&p(c)}}}function Kv(s){let c,l,g,y,_,L,R,O=[Cv,Lv,Bv],D=[];function H(j,Y){return!j[25]&&!j[21]&&j[1]?0:j[25]?2:1}return l=H(s),g=D[l]=O[l](s),{c(){c=v("div"),g.c(),$(c,"class","draggable animate-fadein font-sans text-white"),$(c,"style",y="position: fixed; "+(s[25]&&s[5]?"width: 100vw;":"")+"; right: "+(s[25]&&s[5]?"0":s[3])+"px; user-select: none; "+(s[25]&&s[5]?"bottom: 0px":s[24]+":"+s[23]+"px")),K(c,"cursor-pointer",!s[21]&&!s[25])},m(j,Y){f(j,c,Y),D[l].m(c,null),s[54](c),_=!0,L||(R=[C(cl,"click",s[29]),C(cl,"mouseup",s[42]),C(cl,"mousemove",s[41]),C(c,"mousedown",s[40])],L=!0)},p(j,Y){let G=l;l=H(j),l===G?D[l].p(j,Y):(Lt(),un(D[G],1,1,()=>{D[G]=null}),Wt(),g=D[l],g?g.p(j,Y):(g=D[l]=O[l](j),g.c()),Mt(g,1),g.m(c,null)),(!_||Y[0]&58720296&&y!==(y="position: fixed; "+(j[25]&&j[5]?"width: 100vw;":"")+"; right: "+(j[25]&&j[5]?"0":j[3])+"px; user-select: none; "+(j[25]&&j[5]?"bottom: 0px":j[24]+":"+j[23]+"px")))&&$(c,"style",y),(!_||Y[0]&35651584)&&K(c,"cursor-pointer",!j[21]&&!j[25])},i(j){_||(Mt(g),_=!0)},o(j){un(g),_=!1},d(j){j&&p(c),D[l].d(),s[54](null),L=!1,h(R)}}}let Op="We could not connect to a NIP-46 bunker with that url, are you sure it is set up correctly?",Rp="We were not able to connect using this address. For it to work it has to come from a NIP-46 provider.",Dr=20;function ul(s){return window.open(s,"window.nostr","width=600,height=800,popup=yes")}function Gv(s,c,l){let g,y,_,L,R,O,D=$v("only screen and (max-width: 640px)");N(s,D,ye=>l(5,O=ye));let H={ORIGIN:"wnj:origin",CLIENT_SECRET:"wnj:clientSecret",Y_POS:"wnj:ypos",CALLBACK_TOKEN:"wnj:callbackToken",BUNKER_POINTER:"wnj:bunkerPointer"},j,{accent:Y}=c,{position:G="top"}=c,{startHidden:ee}=c,{compactMode:Q}=c,te=window,re=new y1,X,fe,Ae,Te,he,le,se=localStorage.getItem(H.CLIENT_SECRET);se?le=$u(se):(le=e1(),localStorage.setItem(H.CLIENT_SECRET,Qt(le)));let be="closed",Be,Oe,wt,yt,vt,ge,ke=null,Ue=null,Ge=null,Ye=!1,Ke,Ft,Pt,Jt=!1,_t,hn,Sn=[],{right:jn=20}=c,Fr=!1,sn=!1,jr,ko,an,sr={pool:re,onauth(ye){Ke?l(13,ke=ye):_t?(l(15,Ge=ye),l(25,_=!0)):l(14,Ue=ye)}},So=gh(()=>{switch(be){case"justopened":l(44,be="opened");break;case"justclosed":l(44,be="closed");break}},500);function Ao(){l(44,be="justopened"),So()}function Hr(){l(44,be="justclosed"),So()}function va(){if(Be&&!ge){hl();return}Ao()}fl();let Dp={isWnj:!0,async getPublicKey(){return Be?Be.pubkey:(!vt&&!ge&&Ao(),(await yt).bp.pubkey)},async signEvent(ye){try{return!vt&&!ge&&va(),await(await yt).signEvent(ye)}finally{l(15,Ge=null),Hr()}},async getRelays(){return!vt&&!ge&&va(),(await yt).getRelays()},nip04:{async encrypt(ye,ft){return!vt&&!ge&&va(),(await yt).nip04Encrypt(ye,ft)},async decrypt(ye,ft){return!vt&&!ge&&va(),(await yt).nip04Decrypt(ye,ft)}}};function fl(){Hr(),Be=null,yt=new Promise((ye,ft)=>{Oe=ye,wt=ft}),l(21,_t=null),l(12,vt=!1),l(16,Ye=!1),l(17,Ke=!1),ge=!1,hn=null,l(19,Pt="")}ue(()=>{if(!Be){let ye=localStorage.getItem(H.BUNKER_POINTER);ye&&(Be=JSON.parse(ye),pl())}if(te.nostr&&!te.nostr.isWnj){te.destroyWnj();return}else Object.defineProperty(window,"nostr",{get(){return Dp},set(ye){Dp=ye,ye.isWnj||te.destroyWnj()},configurable:!0});return()=>{hn&&hn.close()}});function Xv(ye){Math.abs(y-ko)>6||Date.now()-an>600||be==="justopened"||be==="justclosed"||(ye.composedPath().find(ft=>ft.id==="wnj")?Ao():Hr())}function e_(ye){Hr(),l(17,Ke=!1),l(13,ke=null),l(14,Ue=null),l(15,Ge=null),ye.stopPropagation()}function t_(ye){l(20,Jt=!0),ye.stopPropagation()}function n_(ye){l(20,Jt=!1),ye.stopPropagation()}async function r_(ye){ye.preventDefault();try{if(Be=await wv(X.value),!Be){X.value.match(ya)?l(19,Pt=Op):l(19,Pt=Rp);return}X.setCustomValidity(""),l(19,Pt=""),await hl(),pl()}catch{X.value.match(ya)?l(19,Pt=Op):l(19,Pt=Rp),l(12,vt=!1)}}async function o_(ye){ye.preventDefault(),localStorage.removeItem(H.BUNKER_POINTER),fl()}async function i_(ye){ye.preventDefault(),l(17,Ke=!0),Sn.length===0&&(l(22,Sn=await vv(re,["wss://relay.nostr.band","wss://nos.lol","wss://relay.primal.net"])),l(10,he=Sn[0]))}function s_(ye){l(17,Ke=!1)}async function a_(ye){if(ye.preventDefault(),!he)return;l(18,Ft=!0);let ft=await yv(he,sr,Ae.value,he.domain,void 0);l(18,Ft=!1),Ao(),l(17,Ke=!1),Be=ft.bp,pl(),hl(ft)}let c_=gh(async()=>{he&&Ae.value.length>0&&(await _v(Ae.value+"@"+he.domain)?Ae.setCustomValidity(`'${Ae.value}' is already taken.`):Ae.setCustomValidity(""))},500);function u_(){l(16,Ye=!1),l(12,vt=!1),wt("connection aborted"),fl()}async function hl(ye=void 0){ye=ye||new Ep(le,Be,sr),l(12,vt=!0);let ft=setTimeout(()=>{l(16,Ye=!0),l(25,_=!0)},5e3);try{await ye.connect(),ge=!0,localStorage.setItem(H.BUNKER_POINTER,JSON.stringify(Be)),Hr(),Oe(ye)}catch(ar){wt(ar?.message||String(ar))}finally{clearTimeout(ft),l(12,vt=!1),l(16,Ye=!1),l(13,ke=null),l(14,Ue=null),l(15,Ge=null)}}function pl(ye=null){let ft=Be.pubkey;l(21,_t={pubkey:ft,npub:xv(ft),event:null}),hn=re.subscribeMany(["wss://nos.lol","wss://user.kindpag.es"],[{kinds:[0],authors:[ft]}],{onevent(ar){var Fp;if(!((((Fp=_t.event)==null?void 0:Fp.created_at)||0)>=ar.created_at))try{let{name:E_,picture:x_}=JSON.parse(ar.content);l(21,_t.event=ar,_t),l(21,_t.name=E_,_t),l(21,_t.picture=x_,_t),ye?.(),ye=null}catch{}}})}function l_(ye){if(_)return;Fr=!0;let ft=j.getBoundingClientRect();jr=ye.clientY-ft.top,ko=y,an=Date.now()}function d_(ye){Fr&&(g==="top"?l(23,y=ye.clientY):l(23,y=window.innerHeight-ye.clientY),l(23,y-=jr),l(45,sn=!0),y<Dr&&l(23,y=Dr),y>window.innerHeight-Dr&&l(23,y=window.innerHeight-Dr))}function f_(){if(Fr=!1,setTimeout(()=>{l(45,sn=!1)},10),sn){let ye=j.getBoundingClientRect(),ft=window.innerHeight,ar=ft/2;ye.top<ar?(l(24,g="top"),l(23,y=ye.top)):(l(24,g="bottom"),l(23,y=ft-ye.bottom)),y<Dr&&l(23,y=Dr),localStorage.setItem(H.ORIGIN,g),localStorage.setItem(H.Y_POS,y.toString())}}let h_=()=>ul(ke),p_=()=>ul(Ue),g_=()=>{ul(Ge)};function m_(ye){ve[ye?"unshift":"push"](()=>{Ae=ye,l(8,Ae)})}function b_(){Te=this.value,l(9,Te)}function w_(){he=V(this),l(10,he),l(22,Sn)}function y_(ye){ve[ye?"unshift":"push"](()=>{X=ye,l(7,X)})}function v_(){fe=this.value,l(4,fe)}function __(ye){ve[ye?"unshift":"push"](()=>{j=ye,l(6,j)})}return s.$$set=ye=>{"accent"in ye&&l(0,Y=ye.accent),"position"in ye&&l(43,G=ye.position),"startHidden"in ye&&l(1,ee=ye.startHidden),"compactMode"in ye&&l(2,Q=ye.compactMode),"right"in ye&&l(3,jn=ye.right)},s.$$.update=()=>{s.$$.dirty[0]&32|s.$$.dirty[1]&4096&&l(24,g=O?"bottom":localStorage.getItem(H.ORIGIN)||G),s.$$.dirty[0]&32&&l(23,y=O?Dr:parseInt(localStorage.getItem(H.Y_POS)||"0")||Dr),s.$$.dirty[1]&8192&&l(25,_=be==="justopened"||be==="opened"),s.$$.dirty[0]&1|s.$$.dirty[1]&16384&&l(27,L=sn?"cursor-grabbing outline-dashed outline-"+Y+"-500 outline-1 outline-offset-4":"outline-none"),s.$$.dirty[0]&16&&l(26,R=fe&&(fe.match(ya)||fe.match(xp)))},[Y,ee,Q,jn,fe,O,j,X,Ae,Te,he,le,vt,ke,Ue,Ge,Ye,Ke,Ft,Pt,Jt,_t,Sn,y,g,_,R,L,D,Xv,e_,t_,n_,r_,o_,i_,s_,a_,c_,u_,l_,d_,f_,G,be,sn,h_,p_,g_,m_,b_,w_,y_,v_,__]}class Zv extends hh{constructor(c){super(),fh(this,c,Gv,Kv,w,{accent:0,position:43,startHidden:1,compactMode:2,right:3},null,[-1,-1,-1])}}let ai=window;ai.destroyWnj=()=>{setTimeout(()=>{Yv.$destroy()},1)};let ll=document.createElement("div");ll.style.zIndex="90000",document.body.appendChild(ll);let dl=document.createElement("div");dl.id="wnj";let Up=document.createElement("style");Up.innerHTML=i;let zp=ll.attachShadow({mode:"open"});zp.appendChild(dl),zp.appendChild(Up);let Yv=new Zv({target:dl,props:{accent:((e=ai.wnjParams)==null?void 0:e.accent)||"cyan",position:((t=ai.wnjParams)==null?void 0:t.position)==="bottom"?"bottom":"top",startHidden:!!((n=ai.wnjParams)!=null&&n.startHidden),compactMode:!!((r=ai.wnjParams)!=null&&r.compactMode)}});if(!((o=ai.wnjParams)!=null&&o.disableOverflowFix)){var Mp=document.createElement("style"),Jv=`
    html, body {
      overflow: auto;
      height: 100%;
    }
  `;Mp.innerHTML=Jv,document.head.appendChild(Mp)}})()});function ze(){}function It(e,t){for(let n in t)e[n]=t[n];return e}function bl(e){return e()}function Ea(){return Object.create(null)}function An(e){e.forEach(bl)}function rs(e){return typeof e=="function"}function tt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}var _a;function Nt(e,t){return e===t?!0:(_a||(_a=document.createElement("a")),_a.href=t,e===_a.href)}function Hp(e){return Object.keys(e).length===0}function $o(e,t,n,r){if(e){let o=Vp(e,t,n,r);return e[0](o)}}function Vp(e,t,n,r){return e[1]&&r?It(n.ctx.slice(),e[1](r(t))):n.ctx}function To(e,t,n,r){if(e[2]&&r){let o=e[2](r(n));if(t.dirty===void 0)return o;if(typeof o=="object"){let i=[],a=Math.max(t.dirty.length,o.length);for(let u=0;u<a;u+=1)i[u]=t.dirty[u]|o[u];return i}return t.dirty|o}return t.dirty}function Bo(e,t,n,r,o,i){if(o){let a=Vp(t,n,r,i);e.p(a,o)}}function Lo(e){if(e.ctx.length>32){let t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function ci(e){let t={};for(let n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function cr(e,t){let n={};t=new Set(t);for(let r in e)!t.has(r)&&r[0]!=="$"&&(n[r]=e[r]);return n}function wl(e){return e??""}var yl=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;var xa=class e{_listeners="WeakMap"in yl?new WeakMap:void 0;_observer=void 0;options;constructor(t){this.options=t}observe(t,n){return this._listeners.set(t,n),this._getObserver().observe(t,this.options),()=>{this._listeners.delete(t),this._observer.unobserve(t)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver(t=>{for(let n of t)e.entries.set(n.target,n),this._listeners.get(n.target)?.(n)}))}};xa.entries="WeakMap"in yl?new WeakMap:void 0;var qp=!1;function Wp(){qp=!0}function Qp(){qp=!1}function ne(e,t){e.appendChild(t)}function me(e,t,n){e.insertBefore(t,n||null)}function pe(e){e.parentNode&&e.parentNode.removeChild(e)}function Xt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function ae(e){return document.createElement(e)}function Me(e){return document.createTextNode(e)}function Ne(){return Me(" ")}function kt(){return Me("")}function os(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function ie(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}var N_=["width","height"];function ur(e,t){let n=Object.getOwnPropertyDescriptors(e.__proto__);for(let r in t)t[r]==null?e.removeAttribute(r):r==="style"?e.style.cssText=t[r]:r==="__value"?e.value=e[r]=t[r]:n[r]&&n[r].set&&N_.indexOf(r)===-1?e[r]=t[r]:ie(e,r,t[r])}function is(e,t,n){let r=t.toLowerCase();r in e?e[r]=typeof e[r]=="boolean"&&n===""?!0:n:t in e?e[t]=typeof e[t]=="boolean"&&n===""?!0:n:ie(e,t,n)}function Kp(e){return Array.from(e.childNodes)}function Ze(e,t){t=""+t,e.data!==t&&(e.data=t)}function ka(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function Gp(e){let t={};return e.childNodes.forEach(n=>{t[n.slot||"default"]=!0}),t}var Vr;function lr(e){Vr=e}function ss(){if(!Vr)throw new Error("Function called outside component initialization");return Vr}function Ot(e){ss().$$.on_mount.push(e)}function vl(e){ss().$$.after_update.push(e)}function _l(e){ss().$$.on_destroy.push(e)}function El(){let e=ss();return(t,n,{cancelable:r=!1}={})=>{let o=e.$$.callbacks[t];if(o){let i=ka(t,n,{cancelable:r});return o.slice().forEach(a=>{a.call(e,i)}),!i.defaultPrevented}return!0}}var Co=[];var Sa=[],li=[],Zp=[],D_=Promise.resolve(),kl=!1;function Yp(){kl||(kl=!0,D_.then($n))}function as(e){li.push(e)}var xl=new Set,ui=0;function $n(){if(ui!==0)return;let e=Vr;do{try{for(;ui<Co.length;){let t=Co[ui];ui++,lr(t),F_(t.$$)}}catch(t){throw Co.length=0,ui=0,t}for(lr(null),Co.length=0,ui=0;Sa.length;)Sa.pop()();for(let t=0;t<li.length;t+=1){let n=li[t];xl.has(n)||(xl.add(n),n())}li.length=0}while(Co.length);for(;Zp.length;)Zp.pop()();kl=!1,xl.clear(),lr(e)}function F_(e){if(e.fragment!==null){e.update(),An(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(as)}}function Jp(e){let t=[],n=[];li.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),li=t}var Aa=new Set,Po;function ht(){Po={r:0,c:[],p:Po}}function pt(){Po.r||An(Po.c),Po=Po.p}function Ee(e,t){e&&e.i&&(Aa.delete(e),e.i(t))}function $e(e,t,n,r){if(e&&e.o){if(Aa.has(e))return;Aa.add(e),Po.c.push(()=>{Aa.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Je(e){return e?.length!==void 0?e:Array.from(e)}function Hn(e,t){let n={},r={},o={$$scope:1},i=e.length;for(;i--;){let a=e[i],u=t[i];if(u){for(let d in a)d in u||(r[d]=1);for(let d in u)o[d]||(n[d]=u[d],o[d]=1);e[i]=u}else for(let d in a)o[d]=1}for(let a in r)a in n||(n[a]=void 0);return n}function $a(e){return typeof e=="object"&&e!==null?e:{}}var j_=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],H_=new Set([...j_]);function gt(e){e&&e.c()}function st(e,t,n){let{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),as(()=>{let i=e.$$.on_mount.map(bl).filter(rs);e.$$.on_destroy?e.$$.on_destroy.push(...i):An(i),e.$$.on_mount=[]}),o.forEach(as)}function at(e,t){let n=e.$$;n.fragment!==null&&(Jp(n.after_update),An(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function q_(e,t){e.$$.dirty[0]===-1&&(Co.push(e),Yp(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ct(e,t,n,r,o,i,a=null,u=[-1]){let d=Vr;lr(e);let h=e.$$={fragment:null,ctx:[],props:i,update:ze,not_equal:o,bound:Ea(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:Ea(),dirty:u,skip_bound:!1,root:t.target||d.$$.root};a&&a(h.root);let m=!1;if(h.ctx=n?n(e,t.props||{},(w,x,...P)=>{let I=P.length?P[0]:x;return h.ctx&&o(h.ctx[w],h.ctx[w]=I)&&(!h.skip_bound&&h.bound[w]&&h.bound[w](I),m&&q_(e,w)),x}):[],h.update(),m=!0,An(h.before_update),h.fragment=r?r(h.ctx):!1,t.target){if(t.hydrate){Wp();let w=Kp(t.target);h.fragment&&h.fragment.l(w),w.forEach(pe)}else h.fragment&&h.fragment.c();t.intro&&Ee(e.$$.fragment),st(e,t.target,t.anchor),Qp(),$n()}lr(d)}var W_;typeof HTMLElement=="function"&&(W_=class extends HTMLElement{$$ctor;$$s;$$c;$$cn=!1;$$d={};$$r=!1;$$p_d={};$$l={};$$l_u=new Map;constructor(e,t,n){super(),this.$$ctor=e,this.$$s=t,n&&this.attachShadow({mode:"open"})}addEventListener(e,t,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){let r=this.$$c.$on(e,t);this.$$l_u.set(t,r)}super.addEventListener(e,t,n)}removeEventListener(e,t,n){if(super.removeEventListener(e,t,n),this.$$c){let r=this.$$l_u.get(t);r&&(r(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(o){return()=>{let i;return{c:function(){i=ae("slot"),o!=="default"&&ie(i,"name",o)},m:function(d,h){me(d,i,h)},d:function(d){d&&pe(i)}}}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let t={},n=Gp(this);for(let o of this.$$s)o in n&&(t[o]=[e(o)]);for(let o of this.attributes){let i=this.$$g_p(o.name);i in this.$$d||(this.$$d[i]=Sl(i,o.value,this.$$p_d,"toProp"))}for(let o in this.$$p_d)!(o in this.$$d)&&this[o]!==void 0&&(this.$$d[o]=this[o],delete this[o]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:t,$$scope:{ctx:[]}}});let r=()=>{this.$$r=!0;for(let o in this.$$p_d)if(this.$$d[o]=this.$$c.$$.ctx[this.$$c.$$.props[o]],this.$$p_d[o].reflect){let i=Sl(o,this.$$d[o],this.$$p_d,"toAttribute");i==null?this.removeAttribute(this.$$p_d[o].attribute||o):this.setAttribute(this.$$p_d[o].attribute||o,i)}this.$$r=!1};this.$$c.$$.after_update.push(r),r();for(let o in this.$$l)for(let i of this.$$l[o]){let a=this.$$c.$on(o,i);this.$$l_u.set(i,a)}this.$$l={}}}attributeChangedCallback(e,t,n){this.$$r||(e=this.$$g_p(e),this.$$d[e]=Sl(e,n,this.$$p_d,"toProp"),this.$$c?.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function Sl(e,t,n,r){let o=n[e]?.type;if(t=o==="Boolean"&&typeof t!="boolean"?t!=null:t,!r||!n[e])return t;if(r==="toAttribute")switch(o){case"Object":case"Array":return t==null?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return t??null;default:return t}else switch(o){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":return t;case"Number":return t!=null?+t:t;default:return t}}var nt=class{$$=void 0;$$set=void 0;$destroy(){at(this,1),this.$destroy=ze}$on(t,n){if(!rs(n))return ze;let r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{let o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!Hp(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}};var Xp="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Xp);var tm=ml(Bl(),1);var n2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Ll=e=>e instanceof Uint8Array;var Ta=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Tn=(e,t)=>e<<32-t|e>>>t,r2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!r2)throw new Error("Non little-endian hardware is not supported");var o2=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ut(e){if(!Ll(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=o2[e[n]];return t}function cs(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){let o=r*2,i=e.slice(o,o+2),a=Number.parseInt(i,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");n[r]=a}return n}function i2(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function fi(e){if(typeof e=="string"&&(e=i2(e)),!Ll(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Ba(...e){let t=new Uint8Array(e.reduce((r,o)=>r+o.length,0)),n=0;return e.forEach(r=>{if(!Ll(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}var di=class{clone(){return this._cloneInto()}};function Cl(e){let t=r=>e().update(fi(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function hi(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function dr(...e){let t=(o,i)=>a=>o(i(a)),n=Array.from(e).reverse().reduce((o,i)=>o?t(o,i.encode):i.encode,void 0),r=e.reduce((o,i)=>o?t(o,i.decode):i.decode,void 0);return{encode:n,decode:r}}function fr(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(hi(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);let r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function hr(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function Ca(e,t="="){if(hi(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of n)if(typeof o!="string")throw new Error(`padding.decode: non-string input=${o}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function ag(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function ng(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0,o=[],i=Array.from(e);for(i.forEach(a=>{if(hi(a),a<0||a>=t)throw new Error(`Wrong integer: ${a}`)});;){let a=0,u=!0;for(let d=r;d<i.length;d++){let h=i[d],m=t*a+h;if(!Number.isSafeInteger(m)||t*a/t!==a||m-h!==t*a)throw new Error("convertRadix: carry overflow");if(a=m%n,i[d]=Math.floor(m/n),!Number.isSafeInteger(i[d])||i[d]*n+a!==m)throw new Error("convertRadix: carry overflow");if(u)i[d]?u=!1:r=d;else continue}if(o.push(a),u)break}for(let a=0;a<e.length-1&&e[a]===0;a++)o.push(0);return o.reverse()}var cg=(e,t)=>t?cg(t,e%t):e,La=(e,t)=>e+(t-cg(e,t));function Pl(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(La(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${La(t,n)}`);let o=0,i=0,a=2**n-1,u=[];for(let d of e){if(hi(d),d>=2**t)throw new Error(`convertRadix2: invalid data word=${d} from=${t}`);if(o=o<<t|d,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)u.push((o>>i-n&a)>>>0);o&=2**i-1}if(o=o<<n-i&a,!r&&i>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&u.push(o>>>0),u}function s2(e){return hi(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return ng(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(ng(t,e,2**8))}}}function qr(e,t=!1){if(hi(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(La(8,e)>32||La(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Pl(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Pl(n,e,8,t))}}}function rg(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}var a2=dr(qr(4),fr("0123456789ABCDEF"),hr("")),c2=dr(qr(5),fr("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Ca(5),hr("")),FA=dr(qr(5),fr("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Ca(5),hr("")),jA=dr(qr(5),fr("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),hr(""),ag(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),Pa=dr(qr(6),fr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Ca(6),hr("")),u2=dr(qr(6),fr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Ca(6),hr("")),Ol=e=>dr(s2(58),fr(e),hr("")),Il=Ol("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),HA=Ol("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),VA=Ol("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),og=[0,2,3,5,6,7,9,10,11],l2={encode(e){let t="";for(let n=0;n<e.length;n+=8){let r=e.subarray(n,n+8);t+=Il.encode(r).padStart(og[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){let r=e.slice(n,n+11),o=og.indexOf(r.length),i=Il.decode(r);for(let a=0;a<i.length-o;a++)if(i[a]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(i.slice(i.length-o)))}return Uint8Array.from(t)}};var Nl=dr(fr("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),hr("")),ig=[996825010,642813549,513874426,1027748829,705979059];function us(e){let t=e>>25,n=(e&33554431)<<5;for(let r=0;r<ig.length;r++)(t>>r&1)===1&&(n^=ig[r]);return n}function sg(e,t,n=1){let r=e.length,o=1;for(let i=0;i<r;i++){let a=e.charCodeAt(i);if(a<33||a>126)throw new Error(`Invalid prefix (${e})`);o=us(o)^a>>5}o=us(o);for(let i=0;i<r;i++)o=us(o)^e.charCodeAt(i)&31;for(let i of t)o=us(o)^i;for(let i=0;i<6;i++)o=us(o);return o^=n,Nl.encode(Pl([o%2**30],30,5,!1))}function ug(e){let t=e==="bech32"?1:734539939,n=qr(5),r=n.decode,o=n.encode,i=rg(r);function a(m,w,x=90){if(typeof m!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof m}`);if(!Array.isArray(w)||w.length&&typeof w[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof w}`);let P=m.length+7+w.length;if(x!==!1&&P>x)throw new TypeError(`Length ${P} exceeds limit ${x}`);return m=m.toLowerCase(),`${m}1${Nl.encode(w)}${sg(m,w,t)}`}function u(m,w=90){if(typeof m!="string")throw new Error(`bech32.decode input should be string, not ${typeof m}`);if(m.length<8||w!==!1&&m.length>w)throw new TypeError(`Wrong string length: ${m.length} (${m}). Expected (8..${w})`);let x=m.toLowerCase();if(m!==x&&m!==m.toUpperCase())throw new Error("String must be lowercase or uppercase");m=x;let P=m.lastIndexOf("1");if(P===0||P===-1)throw new Error('Letter "1" must be present between prefix and data only');let I=m.slice(0,P),S=m.slice(P+1);if(S.length<6)throw new Error("Data must be at least 6 characters long");let N=Nl.decode(S).slice(0,-6),z=sg(I,N,t);if(!S.endsWith(z))throw new Error(`Invalid checksum in ${m}: expected "${z}"`);return{prefix:I,words:N}}let d=rg(u);function h(m){let{prefix:w,words:x}=u(m,!1);return{prefix:w,words:x,bytes:r(x)}}return{encode:a,decode:u,decodeToBytes:h,decodeUnsafe:d,fromWords:r,fromWordsUnsafe:i,toWords:o}}var pr=ug("bech32"),qA=ug("bech32m"),d2={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},f2=dr(qr(4),fr("0123456789abcdef"),hr(""),ag(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),h2={utf8:d2,hex:f2,base16:a2,base32:c2,base64:Pa,base64url:u2,base58:Il,base58xmr:l2},WA=`Invalid encoding type. Available types: ${Object.keys(h2).join(", ")}`;var ls=new TextDecoder("utf-8"),Io=new TextEncoder;function No(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var Rl=class{value;next=null;prev=null;constructor(t){this.value=t}},Ia=class{first;last;constructor(){this.first=null,this.last=null}enqueue(t){let n=new Rl(t);return this.last?this.last===this.first?(this.last=n,this.last.prev=this.first,this.first.next=n):(n.prev=this.last,this.last.next=n,this.last=n):(this.first=n,this.last=n),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){let n=this.first;return this.first=null,this.last=null,n.value}let t=this.first;return this.first=t.next,t.value}};var g2=5e3,lg=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function dg(e){return b2("npub",cs(e))}function m2(e,t){let n=pr.toWords(t);return pr.encode(e,n,g2)}function b2(e,t){return m2(e,t)}function zl(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function ds(e,t){let n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);let r=zl(n);return(o,i)=>r.then(a=>i(a.transaction(t,o).objectStore(t)))}var Ul;function fg(){return Ul||(Ul=ds("keyval-store","keyval")),Ul}function Na(e,t=fg()){return t("readwrite",n=>(e.forEach(r=>n.put(r[1],r[0])),zl(n.transaction)))}function Oa(e,t=fg()){return t("readonly",n=>Promise.all(e.map(r=>zl(n.get(r)))))}var y2=Math.pow(2,8)-1,v2=Math.pow(2,16)-1,_2=Math.pow(2,32)-1,JA=Math.pow(2,7)-1,XA=Math.pow(2,15)-1,e9=Math.pow(2,31)-1;var hg=function(e){var t=e-1;if(t<=y2)return Uint8Array;if(t<=v2)return Uint16Array;if(t<=_2)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")};function Vn(e){if(this.capacity=e,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var t=hg(e);this.forward=new t(e),this.backward=new t(e),this.K=new Array(e),this.V=new Array(e),this.size=0,this.head=0,this.tail=0,this.items={}}Vn.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}};Vn.prototype.splayOnTop=function(e){var t=this.head;if(this.head===e)return this;var n=this.backward[e],r=this.forward[e];return this.tail===e?this.tail=n:this.backward[r]=n,this.forward[n]=r,this.backward[t]=e,this.head=e,this.forward[e]=t,this};Vn.prototype.set=function(e,t){var n=this.items[e];if(typeof n<"u"){this.splayOnTop(n),this.V[n]=t;return}this.size<this.capacity?n=this.size++:(n=this.tail,this.tail=this.backward[n],delete this.items[this.K[n]]),this.items[e]=n,this.K[n]=e,this.V[n]=t,this.forward[n]=this.head,this.backward[this.head]=n,this.head=n};Vn.prototype.setpop=function(e,t){var n=null,r=null,o=this.items[e];return typeof o<"u"?(this.splayOnTop(o),n=this.V[o],this.V[o]=t,{evicted:!1,key:e,value:n}):(this.size<this.capacity?o=this.size++:(o=this.tail,this.tail=this.backward[o],n=this.V[o],r=this.K[o],delete this.items[r]),this.items[e]=o,this.K[o]=e,this.V[o]=t,this.forward[o]=this.head,this.backward[this.head]=o,this.head=o,r?{evicted:!0,key:r,value:n}:null)};Vn.prototype.has=function(e){return e in this.items};Vn.prototype.get=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.splayOnTop(t),this.V[t]};Vn.prototype.peek=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.V[t]};function Ra(){let e=new Vn(2e3);return e.delete=t=>{},e}function pg(e){return!!e}function gg(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Ml(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function mg(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");gg(e.outputLen),gg(e.blockLen)}function pi(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function bg(e,t){Ml(e);let n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}var Ua=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var wg=e=>e instanceof Uint8Array;var za=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Bn=(e,t)=>e<<32-t|e>>>t,x2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!x2)throw new Error("Non little-endian hardware is not supported");function k2(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function fs(e){if(typeof e=="string"&&(e=k2(e)),!wg(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function yg(...e){let t=new Uint8Array(e.reduce((r,o)=>r+o.length,0)),n=0;return e.forEach(r=>{if(!wg(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}var gi=class{clone(){return this._cloneInto()}},a9={}.toString;function vg(e){let t=r=>e().update(fs(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Ma(e=32){if(Ua&&typeof Ua.getRandomValues=="function")return Ua.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function S2(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);let o=BigInt(32),i=BigInt(4294967295),a=Number(n>>o&i),u=Number(n&i),d=r?4:0,h=r?0:4;e.setUint32(t+d,a,r),e.setUint32(t+h,u,r)}var Da=class extends gi{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=za(this.buffer)}update(t){pi(this);let{view:n,buffer:r,blockLen:o}=this;t=fs(t);let i=t.length;for(let a=0;a<i;){let u=Math.min(o-this.pos,i-a);if(u===o){let d=za(t);for(;o<=i-a;a+=o)this.process(d,a);continue}r.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){pi(this),bg(t,this),this.finished=!0;let{buffer:n,view:r,blockLen:o,isLE:i}=this,{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(r,0),a=0);for(let w=a;w<o;w++)n[w]=0;S2(r,o-8,BigInt(this.length*8),i),this.process(r,0);let u=za(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let h=d/4,m=this.get();if(h>m.length)throw new Error("_sha2: outputLen bigger than state");for(let w=0;w<h;w++)u.setUint32(4*w,m[w],i)}digest(){let{buffer:t,outputLen:n}=this;this.digestInto(t);let r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:n,buffer:r,length:o,finished:i,destroyed:a,pos:u}=this;return t.length=o,t.pos=u,t.finished=i,t.destroyed=a,o%n&&t.buffer.set(r),t}};var A2=(e,t,n)=>e&t^~e&n,$2=(e,t,n)=>e&t^e&n^t&n,T2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Wr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qr=new Uint32Array(64),Dl=class extends Da{constructor(){super(64,32,8,!1),this.A=Wr[0]|0,this.B=Wr[1]|0,this.C=Wr[2]|0,this.D=Wr[3]|0,this.E=Wr[4]|0,this.F=Wr[5]|0,this.G=Wr[6]|0,this.H=Wr[7]|0}get(){let{A:t,B:n,C:r,D:o,E:i,F:a,G:u,H:d}=this;return[t,n,r,o,i,a,u,d]}set(t,n,r,o,i,a,u,d){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=a|0,this.G=u|0,this.H=d|0}process(t,n){for(let w=0;w<16;w++,n+=4)Qr[w]=t.getUint32(n,!1);for(let w=16;w<64;w++){let x=Qr[w-15],P=Qr[w-2],I=Bn(x,7)^Bn(x,18)^x>>>3,S=Bn(P,17)^Bn(P,19)^P>>>10;Qr[w]=S+Qr[w-7]+I+Qr[w-16]|0}let{A:r,B:o,C:i,D:a,E:u,F:d,G:h,H:m}=this;for(let w=0;w<64;w++){let x=Bn(u,6)^Bn(u,11)^Bn(u,25),P=m+x+A2(u,d,h)+T2[w]+Qr[w]|0,S=(Bn(r,2)^Bn(r,13)^Bn(r,22))+$2(r,o,i)|0;m=h,h=d,d=u,u=a+P|0,a=i,i=o,o=r,r=P+S|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,a=a+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,m=m+this.H|0,this.set(r,o,i,a,u,d,h,m)}roundClean(){Qr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Fa=vg(()=>new Dl);var Vl={};L_(Vl,{bitGet:()=>O2,bitLen:()=>N2,bitMask:()=>hs,bitSet:()=>R2,bytesToHex:()=>Oo,bytesToNumberBE:()=>Rt,bytesToNumberLE:()=>Va,concatBytes:()=>gr,createHmacDrbg:()=>Hl,ensureBytes:()=>St,equalBytes:()=>P2,hexToBytes:()=>Ro,hexToNumber:()=>jl,numberToBytesBE:()=>Ln,numberToBytesLE:()=>qa,numberToHexUnpadded:()=>xg,numberToVarBytesBE:()=>C2,utf8ToBytes:()=>I2,validateObject:()=>Kr});var Eg=BigInt(0),ja=BigInt(1),B2=BigInt(2),Ha=e=>e instanceof Uint8Array,L2=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Oo(e){if(!Ha(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=L2[e[n]];return t}function xg(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function jl(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Ro(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){let o=r*2,i=e.slice(o,o+2),a=Number.parseInt(i,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");n[r]=a}return n}function Rt(e){return jl(Oo(e))}function Va(e){if(!Ha(e))throw new Error("Uint8Array expected");return jl(Oo(Uint8Array.from(e).reverse()))}function Ln(e,t){return Ro(e.toString(16).padStart(t*2,"0"))}function qa(e,t){return Ln(e,t).reverse()}function C2(e){return Ro(xg(e))}function St(e,t,n){let r;if(typeof t=="string")try{r=Ro(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Ha(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let o=r.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function gr(...e){let t=new Uint8Array(e.reduce((r,o)=>r+o.length,0)),n=0;return e.forEach(r=>{if(!Ha(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function P2(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function I2(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function N2(e){let t;for(t=0;e>Eg;e>>=ja,t+=1);return t}function O2(e,t){return e>>BigInt(t)&ja}var R2=(e,t,n)=>e|(n?ja:Eg)<<BigInt(t),hs=e=>(B2<<BigInt(e-1))-ja,Fl=e=>new Uint8Array(e),_g=e=>Uint8Array.from(e);function Hl(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Fl(e),o=Fl(e),i=0,a=()=>{r.fill(1),o.fill(0),i=0},u=(...w)=>n(o,r,...w),d=(w=Fl())=>{o=u(_g([0]),w),r=u(),w.length!==0&&(o=u(_g([1]),w),r=u())},h=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let w=0,x=[];for(;w<t;){r=u();let P=r.slice();x.push(P),w+=r.length}return gr(...x)};return(w,x)=>{a(),d(w);let P;for(;!(P=x(h()));)d();return a(),P}}var U2={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Kr(e,t,n={}){let r=(o,i,a)=>{let u=U2[i];if(typeof u!="function")throw new Error(`Invalid validator "${i}", expected function`);let d=e[o];if(!(a&&d===void 0)&&!u(d,e))throw new Error(`Invalid param ${String(o)}=${d} (${typeof d}), expected ${i}`)};for(let[o,i]of Object.entries(t))r(o,i,!1);for(let[o,i]of Object.entries(n))r(o,i,!0);return e}var $t=BigInt(0),lt=BigInt(1),Uo=BigInt(2),z2=BigInt(3),ql=BigInt(4),kg=BigInt(5),Sg=BigInt(8),M2=BigInt(9),D2=BigInt(16);function At(e,t){let n=e%t;return n>=$t?n:t+n}function F2(e,t,n){if(n<=$t||t<$t)throw new Error("Expected power/modulo > 0");if(n===lt)return $t;let r=lt;for(;t>$t;)t&lt&&(r=r*e%n),e=e*e%n,t>>=lt;return r}function cn(e,t,n){let r=e;for(;t-- >$t;)r*=r,r%=n;return r}function Wa(e,t){if(e===$t||t<=$t)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=At(e,t),r=t,o=$t,i=lt,a=lt,u=$t;for(;n!==$t;){let h=r/n,m=r%n,w=o-a*h,x=i-u*h;r=n,n=m,o=a,i=u,a=w,u=x}if(r!==lt)throw new Error("invert: does not exist");return At(o,t)}function j2(e){let t=(e-lt)/Uo,n,r,o;for(n=e-lt,r=0;n%Uo===$t;n/=Uo,r++);for(o=Uo;o<e&&F2(o,t,e)!==e-lt;o++);if(r===1){let a=(e+lt)/ql;return function(d,h){let m=d.pow(h,a);if(!d.eql(d.sqr(m),h))throw new Error("Cannot find square root");return m}}let i=(n+lt)/Uo;return function(u,d){if(u.pow(d,t)===u.neg(u.ONE))throw new Error("Cannot find square root");let h=r,m=u.pow(u.mul(u.ONE,o),n),w=u.pow(d,i),x=u.pow(d,n);for(;!u.eql(x,u.ONE);){if(u.eql(x,u.ZERO))return u.ZERO;let P=1;for(let S=u.sqr(x);P<h&&!u.eql(S,u.ONE);P++)S=u.sqr(S);let I=u.pow(m,lt<<BigInt(h-P-1));m=u.sqr(I),w=u.mul(w,I),x=u.mul(x,m),h=P}return w}}function H2(e){if(e%ql===z2){let t=(e+lt)/ql;return function(r,o){let i=r.pow(o,t);if(!r.eql(r.sqr(i),o))throw new Error("Cannot find square root");return i}}if(e%Sg===kg){let t=(e-kg)/Sg;return function(r,o){let i=r.mul(o,Uo),a=r.pow(i,t),u=r.mul(o,a),d=r.mul(r.mul(u,Uo),a),h=r.mul(u,r.sub(d,r.ONE));if(!r.eql(r.sqr(h),o))throw new Error("Cannot find square root");return h}}return e%D2,j2(e)}var V2=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Wl(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=V2.reduce((r,o)=>(r[o]="function",r),t);return Kr(e,n)}function q2(e,t,n){if(n<$t)throw new Error("Expected power > 0");if(n===$t)return e.ONE;if(n===lt)return t;let r=e.ONE,o=t;for(;n>$t;)n&lt&&(r=e.mul(r,o)),o=e.sqr(o),n>>=lt;return r}function W2(e,t){let n=new Array(t.length),r=t.reduce((i,a,u)=>e.is0(a)?i:(n[u]=i,e.mul(i,a)),e.ONE),o=e.inv(r);return t.reduceRight((i,a,u)=>e.is0(a)?i:(n[u]=e.mul(i,n[u]),e.mul(i,a)),o),n}function Ql(e,t){let n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Ag(e,t,n=!1,r={}){if(e<=$t)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:o,nByteLength:i}=Ql(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let a=H2(e),u=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:hs(o),ZERO:$t,ONE:lt,create:d=>At(d,e),isValid:d=>{if(typeof d!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof d}`);return $t<=d&&d<e},is0:d=>d===$t,isOdd:d=>(d&lt)===lt,neg:d=>At(-d,e),eql:(d,h)=>d===h,sqr:d=>At(d*d,e),add:(d,h)=>At(d+h,e),sub:(d,h)=>At(d-h,e),mul:(d,h)=>At(d*h,e),pow:(d,h)=>q2(u,d,h),div:(d,h)=>At(d*Wa(h,e),e),sqrN:d=>d*d,addN:(d,h)=>d+h,subN:(d,h)=>d-h,mulN:(d,h)=>d*h,inv:d=>Wa(d,e),sqrt:r.sqrt||(d=>a(u,d)),invertBatch:d=>W2(u,d),cmov:(d,h,m)=>m?h:d,toBytes:d=>n?qa(d,i):Ln(d,i),fromBytes:d=>{if(d.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${d.length}`);return n?Va(d):Rt(d)}});return Object.freeze(u)}function $g(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function Kl(e){let t=$g(e);return t+Math.ceil(t/2)}function Tg(e,t,n=!1){let r=e.length,o=$g(t),i=Kl(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);let a=n?Rt(e):Va(e),u=At(a,t-lt)+lt;return n?qa(u,o):Ln(u,o)}var K2=BigInt(0),Gl=BigInt(1);function Bg(e,t){let n=(o,i)=>{let a=i.negate();return o?a:i},r=o=>{let i=Math.ceil(t/o)+1,a=2**(o-1);return{windows:i,windowSize:a}};return{constTimeNegate:n,unsafeLadder(o,i){let a=e.ZERO,u=o;for(;i>K2;)i&Gl&&(a=a.add(u)),u=u.double(),i>>=Gl;return a},precomputeWindow(o,i){let{windows:a,windowSize:u}=r(i),d=[],h=o,m=h;for(let w=0;w<a;w++){m=h,d.push(m);for(let x=1;x<u;x++)m=m.add(h),d.push(m);h=m.double()}return d},wNAF(o,i,a){let{windows:u,windowSize:d}=r(o),h=e.ZERO,m=e.BASE,w=BigInt(2**o-1),x=2**o,P=BigInt(o);for(let I=0;I<u;I++){let S=I*d,N=Number(a&w);a>>=P,N>d&&(N-=x,a+=Gl);let z=S,B=S+Math.abs(N)-1,f=I%2!==0,p=N<0;N===0?m=m.add(n(f,i[z])):h=h.add(n(p,i[B]))}return{p:h,f:m}},wNAFCached(o,i,a,u){let d=o._WINDOW_SIZE||1,h=i.get(o);return h||(h=this.precomputeWindow(o,d),d!==1&&i.set(o,u(h))),this.wNAF(d,h,a)}}}function Zl(e){return Wl(e.Fp),Kr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ql(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function G2(e){let t=Zl(e);Kr(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:Z2,hexToBytes:Y2}=Vl,zo={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=zo;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Z2(r),l:e.subarray(n+2)}},toSig(e){let{Err:t}=zo,n=typeof e=="string"?Y2(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");let{d:o,l:i}=zo._parseInt(n.subarray(2)),{d:a,l:u}=zo._parseInt(i);if(u.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:a}},hexFromSig(e){let t=h=>Number.parseInt(h[0],16)&8?"00"+h:h,n=h=>{let m=h.toString(16);return m.length&1?`0${m}`:m},r=t(n(e.s)),o=t(n(e.r)),i=r.length/2,a=o.length/2,u=n(i),d=n(a);return`30${n(a+i+4)}02${d}${o}02${u}${r}`}},mr=BigInt(0),pn=BigInt(1),E9=BigInt(2),Lg=BigInt(3),x9=BigInt(4);function J2(e){let t=G2(e),{Fp:n}=t,r=t.toBytes||((I,S,N)=>{let z=S.toAffine();return gr(Uint8Array.from([4]),n.toBytes(z.x),n.toBytes(z.y))}),o=t.fromBytes||(I=>{let S=I.subarray(1),N=n.fromBytes(S.subarray(0,n.BYTES)),z=n.fromBytes(S.subarray(n.BYTES,2*n.BYTES));return{x:N,y:z}});function i(I){let{a:S,b:N}=t,z=n.sqr(I),B=n.mul(z,I);return n.add(n.add(B,n.mul(I,S)),N)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function a(I){return typeof I=="bigint"&&mr<I&&I<t.n}function u(I){if(!a(I))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function d(I){let{allowedPrivateKeyLengths:S,nByteLength:N,wrapPrivateKey:z,n:B}=t;if(S&&typeof I!="bigint"){if(I instanceof Uint8Array&&(I=Oo(I)),typeof I!="string"||!S.includes(I.length))throw new Error("Invalid key");I=I.padStart(N*2,"0")}let f;try{f=typeof I=="bigint"?I:Rt(St("private key",I,N))}catch{throw new Error(`private key must be ${N} bytes, hex or bigint, not ${typeof I}`)}return z&&(f=At(f,B)),u(f),f}let h=new Map;function m(I){if(!(I instanceof w))throw new Error("ProjectivePoint expected")}class w{constructor(S,N,z){if(this.px=S,this.py=N,this.pz=z,S==null||!n.isValid(S))throw new Error("x required");if(N==null||!n.isValid(N))throw new Error("y required");if(z==null||!n.isValid(z))throw new Error("z required")}static fromAffine(S){let{x:N,y:z}=S||{};if(!S||!n.isValid(N)||!n.isValid(z))throw new Error("invalid affine point");if(S instanceof w)throw new Error("projective point not allowed");let B=f=>n.eql(f,n.ZERO);return B(N)&&B(z)?w.ZERO:new w(N,z,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){let N=n.invertBatch(S.map(z=>z.pz));return S.map((z,B)=>z.toAffine(N[B])).map(w.fromAffine)}static fromHex(S){let N=w.fromAffine(o(St("pointHex",S)));return N.assertValidity(),N}static fromPrivateKey(S){return w.BASE.multiply(d(S))}_setWindowSize(S){this._WINDOW_SIZE=S,h.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:S,y:N}=this.toAffine();if(!n.isValid(S)||!n.isValid(N))throw new Error("bad point: x or y not FE");let z=n.sqr(N),B=i(S);if(!n.eql(z,B))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:S}=this.toAffine();if(n.isOdd)return!n.isOdd(S);throw new Error("Field doesn't support isOdd")}equals(S){m(S);let{px:N,py:z,pz:B}=this,{px:f,py:p,pz:b}=S,v=n.eql(n.mul(N,b),n.mul(f,B)),k=n.eql(n.mul(z,b),n.mul(p,B));return v&&k}negate(){return new w(this.px,n.neg(this.py),this.pz)}double(){let{a:S,b:N}=t,z=n.mul(N,Lg),{px:B,py:f,pz:p}=this,b=n.ZERO,v=n.ZERO,k=n.ZERO,A=n.mul(B,B),T=n.mul(f,f),U=n.mul(p,p),C=n.mul(B,f);return C=n.add(C,C),k=n.mul(B,p),k=n.add(k,k),b=n.mul(S,k),v=n.mul(z,U),v=n.add(b,v),b=n.sub(T,v),v=n.add(T,v),v=n.mul(b,v),b=n.mul(C,b),k=n.mul(z,k),U=n.mul(S,U),C=n.sub(A,U),C=n.mul(S,C),C=n.add(C,k),k=n.add(A,A),A=n.add(k,A),A=n.add(A,U),A=n.mul(A,C),v=n.add(v,A),U=n.mul(f,p),U=n.add(U,U),A=n.mul(U,C),b=n.sub(b,A),k=n.mul(U,T),k=n.add(k,k),k=n.add(k,k),new w(b,v,k)}add(S){m(S);let{px:N,py:z,pz:B}=this,{px:f,py:p,pz:b}=S,v=n.ZERO,k=n.ZERO,A=n.ZERO,T=t.a,U=n.mul(t.b,Lg),C=n.mul(N,f),$=n.mul(z,p),F=n.mul(B,b),q=n.add(N,z),E=n.add(f,p);q=n.mul(q,E),E=n.add(C,$),q=n.sub(q,E),E=n.add(N,B);let M=n.add(f,b);return E=n.mul(E,M),M=n.add(C,F),E=n.sub(E,M),M=n.add(z,B),v=n.add(p,b),M=n.mul(M,v),v=n.add($,F),M=n.sub(M,v),A=n.mul(T,E),v=n.mul(U,F),A=n.add(v,A),v=n.sub($,A),A=n.add($,A),k=n.mul(v,A),$=n.add(C,C),$=n.add($,C),F=n.mul(T,F),E=n.mul(U,E),$=n.add($,F),F=n.sub(C,F),F=n.mul(T,F),E=n.add(E,F),C=n.mul($,E),k=n.add(k,C),C=n.mul(M,E),v=n.mul(q,v),v=n.sub(v,C),C=n.mul(q,$),A=n.mul(M,A),A=n.add(A,C),new w(v,k,A)}subtract(S){return this.add(S.negate())}is0(){return this.equals(w.ZERO)}wNAF(S){return P.wNAFCached(this,h,S,N=>{let z=n.invertBatch(N.map(B=>B.pz));return N.map((B,f)=>B.toAffine(z[f])).map(w.fromAffine)})}multiplyUnsafe(S){let N=w.ZERO;if(S===mr)return N;if(u(S),S===pn)return this;let{endo:z}=t;if(!z)return P.unsafeLadder(this,S);let{k1neg:B,k1:f,k2neg:p,k2:b}=z.splitScalar(S),v=N,k=N,A=this;for(;f>mr||b>mr;)f&pn&&(v=v.add(A)),b&pn&&(k=k.add(A)),A=A.double(),f>>=pn,b>>=pn;return B&&(v=v.negate()),p&&(k=k.negate()),k=new w(n.mul(k.px,z.beta),k.py,k.pz),v.add(k)}multiply(S){u(S);let N=S,z,B,{endo:f}=t;if(f){let{k1neg:p,k1:b,k2neg:v,k2:k}=f.splitScalar(N),{p:A,f:T}=this.wNAF(b),{p:U,f:C}=this.wNAF(k);A=P.constTimeNegate(p,A),U=P.constTimeNegate(v,U),U=new w(n.mul(U.px,f.beta),U.py,U.pz),z=A.add(U),B=T.add(C)}else{let{p,f:b}=this.wNAF(N);z=p,B=b}return w.normalizeZ([z,B])[0]}multiplyAndAddUnsafe(S,N,z){let B=w.BASE,f=(b,v)=>v===mr||v===pn||!b.equals(B)?b.multiplyUnsafe(v):b.multiply(v),p=f(this,N).add(f(S,z));return p.is0()?void 0:p}toAffine(S){let{px:N,py:z,pz:B}=this,f=this.is0();S==null&&(S=f?n.ONE:n.inv(B));let p=n.mul(N,S),b=n.mul(z,S),v=n.mul(B,S);if(f)return{x:n.ZERO,y:n.ZERO};if(!n.eql(v,n.ONE))throw new Error("invZ was invalid");return{x:p,y:b}}isTorsionFree(){let{h:S,isTorsionFree:N}=t;if(S===pn)return!0;if(N)return N(w,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:S,clearCofactor:N}=t;return S===pn?this:N?N(w,this):this.multiplyUnsafe(t.h)}toRawBytes(S=!0){return this.assertValidity(),r(w,this,S)}toHex(S=!0){return Oo(this.toRawBytes(S))}}w.BASE=new w(t.Gx,t.Gy,n.ONE),w.ZERO=new w(n.ZERO,n.ONE,n.ZERO);let x=t.nBitLength,P=Bg(w,t.endo?Math.ceil(x/2):x);return{CURVE:t,ProjectivePoint:w,normPrivateKeyToScalar:d,weierstrassEquation:i,isWithinCurveOrder:a}}function X2(e){let t=Zl(e);return Kr(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Cg(e){let t=X2(e),{Fp:n,n:r}=t,o=n.BYTES+1,i=2*n.BYTES+1;function a(E){return mr<E&&E<n.ORDER}function u(E){return At(E,r)}function d(E){return Wa(E,r)}let{ProjectivePoint:h,normPrivateKeyToScalar:m,weierstrassEquation:w,isWithinCurveOrder:x}=J2({...t,toBytes(E,M,V){let K=M.toAffine(),Z=n.toBytes(K.x),W=gr;return V?W(Uint8Array.from([M.hasEvenY()?2:3]),Z):W(Uint8Array.from([4]),Z,n.toBytes(K.y))},fromBytes(E){let M=E.length,V=E[0],K=E.subarray(1);if(M===o&&(V===2||V===3)){let Z=Rt(K);if(!a(Z))throw new Error("Point is not on curve");let W=w(Z),J=n.sqrt(W),ue=(J&pn)===pn;return(V&1)===1!==ue&&(J=n.neg(J)),{x:Z,y:J}}else if(M===i&&V===4){let Z=n.fromBytes(K.subarray(0,n.BYTES)),W=n.fromBytes(K.subarray(n.BYTES,2*n.BYTES));return{x:Z,y:W}}else throw new Error(`Point of length ${M} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}}),P=E=>Oo(Ln(E,t.nByteLength));function I(E){let M=r>>pn;return E>M}function S(E){return I(E)?u(-E):E}let N=(E,M,V)=>Rt(E.slice(M,V));class z{constructor(M,V,K){this.r=M,this.s=V,this.recovery=K,this.assertValidity()}static fromCompact(M){let V=t.nByteLength;return M=St("compactSignature",M,V*2),new z(N(M,0,V),N(M,V,2*V))}static fromDER(M){let{r:V,s:K}=zo.toSig(St("DER",M));return new z(V,K)}assertValidity(){if(!x(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!x(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(M){return new z(this.r,this.s,M)}recoverPublicKey(M){let{r:V,s:K,recovery:Z}=this,W=k(St("msgHash",M));if(Z==null||![0,1,2,3].includes(Z))throw new Error("recovery id invalid");let J=Z===2||Z===3?V+t.n:V;if(J>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");let ue=(Z&1)===0?"02":"03",_e=h.fromHex(ue+P(J)),ve=d(J),Pe=u(-W*ve),oe=u(K*ve),Se=h.BASE.multiplyAndAddUnsafe(_e,Pe,oe);if(!Se)throw new Error("point at infinify");return Se.assertValidity(),Se}hasHighS(){return I(this.s)}normalizeS(){return this.hasHighS()?new z(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return Ro(this.toDERHex())}toDERHex(){return zo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ro(this.toCompactHex())}toCompactHex(){return P(this.r)+P(this.s)}}let B={isValidPrivateKey(E){try{return m(E),!0}catch{return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{let E=Kl(t.n);return Tg(t.randomBytes(E),t.n)},precompute(E=8,M=h.BASE){return M._setWindowSize(E),M.multiply(BigInt(3)),M}};function f(E,M=!0){return h.fromPrivateKey(E).toRawBytes(M)}function p(E){let M=E instanceof Uint8Array,V=typeof E=="string",K=(M||V)&&E.length;return M?K===o||K===i:V?K===2*o||K===2*i:E instanceof h}function b(E,M,V=!0){if(p(E))throw new Error("first arg must be private key");if(!p(M))throw new Error("second arg must be public key");return h.fromHex(M).multiply(m(E)).toRawBytes(V)}let v=t.bits2int||function(E){let M=Rt(E),V=E.length*8-t.nBitLength;return V>0?M>>BigInt(V):M},k=t.bits2int_modN||function(E){return u(v(E))},A=hs(t.nBitLength);function T(E){if(typeof E!="bigint")throw new Error("bigint expected");if(!(mr<=E&&E<A))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Ln(E,t.nByteLength)}function U(E,M,V=C){if(["recovered","canonical"].some(Re=>Re in V))throw new Error("sign() legacy options not supported");let{hash:K,randomBytes:Z}=t,{lowS:W,prehash:J,extraEntropy:ue}=V;W==null&&(W=!0),E=St("msgHash",E),J&&(E=St("prehashed msgHash",K(E)));let _e=k(E),ve=m(M),Pe=[T(ve),T(_e)];if(ue!=null){let Re=ue===!0?Z(n.BYTES):ue;Pe.push(St("extraEntropy",Re))}let oe=gr(...Pe),Se=_e;function Ve(Re){let je=v(Re);if(!x(je))return;let xt=d(je),Qe=h.BASE.multiply(je).toAffine(),de=u(Qe.x);if(de===mr)return;let De=u(xt*u(Se+de*ve));if(De===mr)return;let Ce=(Qe.x===de?0:2)|Number(Qe.y&pn),Ie=De;return W&&I(De)&&(Ie=S(De),Ce^=1),new z(de,Ie,Ce)}return{seed:oe,k2sig:Ve}}let C={lowS:t.lowS,prehash:!1},$={lowS:t.lowS,prehash:!1};function F(E,M,V=C){let{seed:K,k2sig:Z}=U(E,M,V),W=t;return Hl(W.hash.outputLen,W.nByteLength,W.hmac)(K,Z)}h.BASE._setWindowSize(8);function q(E,M,V,K=$){let Z=E;if(M=St("msgHash",M),V=St("publicKey",V),"strict"in K)throw new Error("options.strict was renamed to lowS");let{lowS:W,prehash:J}=K,ue,_e;try{if(typeof Z=="string"||Z instanceof Uint8Array)try{ue=z.fromDER(Z)}catch(Qe){if(!(Qe instanceof zo.Err))throw Qe;ue=z.fromCompact(Z)}else if(typeof Z=="object"&&typeof Z.r=="bigint"&&typeof Z.s=="bigint"){let{r:Qe,s:de}=Z;ue=new z(Qe,de)}else throw new Error("PARSE");_e=h.fromHex(V)}catch(Qe){if(Qe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(W&&ue.hasHighS())return!1;J&&(M=t.hash(M));let{r:ve,s:Pe}=ue,oe=k(M),Se=d(Pe),Ve=u(oe*Se),Re=u(ve*Se),je=h.BASE.multiplyAndAddUnsafe(_e,Ve,Re)?.toAffine();return je?u(je.x)===ve:!1}return{CURVE:t,getPublicKey:f,getSharedSecret:b,sign:F,verify:q,ProjectivePoint:h,Signature:z,utils:B}}var Qa=class extends gi{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,mg(t);let r=fs(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=t.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(t){return pi(this),this.iHash.update(t),this}digestInto(t){pi(this),Ml(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:n,iHash:r,finished:o,destroyed:i,blockLen:a,outputLen:u}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=a,t.outputLen=u,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Yl=(e,t,n)=>new Qa(e,t).update(n).digest();Yl.create=(e,t)=>new Qa(e,t);function e3(e){return{hash:e,hmac:(t,...n)=>Yl(e,t,yg(...n)),randomBytes:Ma}}function Pg(e,t){let n=r=>Cg({...e,...e3(r)});return Object.freeze({...n(t),create:n})}var Ya=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ka=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Og=BigInt(1),Ga=BigInt(2),Ig=(e,t)=>(e+t/Ga)/t;function Rg(e){let t=Ya,n=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),a=BigInt(23),u=BigInt(44),d=BigInt(88),h=e*e*e%t,m=h*h*e%t,w=cn(m,n,t)*m%t,x=cn(w,n,t)*m%t,P=cn(x,Ga,t)*h%t,I=cn(P,o,t)*P%t,S=cn(I,i,t)*I%t,N=cn(S,u,t)*S%t,z=cn(N,d,t)*N%t,B=cn(z,u,t)*S%t,f=cn(B,n,t)*m%t,p=cn(f,a,t)*I%t,b=cn(p,r,t)*h%t,v=cn(b,Ga,t);if(!Xl.eql(Xl.sqr(v),e))throw new Error("Cannot find square root");return v}var Xl=Ag(Ya,void 0,void 0,{sqrt:Rg}),nd=Pg({a:BigInt(0),b:BigInt(7),Fp:Xl,n:Ka,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=Ka,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Og*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),u=Ig(i*e,t),d=Ig(-r*e,t),h=At(e-u*n-d*o,t),m=At(-u*r-d*i,t),w=h>a,x=m>a;if(w&&(h=t-h),x&&(m=t-m),h>a||m>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:w,k1:h,k2neg:x,k2:m}}}},Fa),Ja=BigInt(0),Ug=e=>typeof e=="bigint"&&Ja<e&&e<Ya,t3=e=>typeof e=="bigint"&&Ja<e&&e<Ka,Ng={};function Za(e,...t){let n=Ng[e];if(n===void 0){let r=Fa(Uint8Array.from(e,o=>o.charCodeAt(0)));n=gr(r,r),Ng[e]=n}return Fa(gr(n,...t))}var rd=e=>e.toRawBytes(!0).slice(1),ed=e=>Ln(e,32),Jl=e=>At(e,Ya),ps=e=>At(e,Ka),od=nd.ProjectivePoint,n3=(e,t,n)=>od.BASE.multiplyAndAddUnsafe(e,t,n);function td(e){let t=nd.utils.normPrivateKeyToScalar(e),n=od.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:ps(-t),bytes:rd(n)}}function zg(e){if(!Ug(e))throw new Error("bad x: need 0 < x < p");let t=Jl(e*e),n=Jl(t*e+BigInt(7)),r=Rg(n);r%Ga!==Ja&&(r=Jl(-r));let o=new od(e,r,Og);return o.assertValidity(),o}function Mg(...e){return ps(Rt(Za("BIP0340/challenge",...e)))}function r3(e){return td(e).bytes}function o3(e,t,n=Ma(32)){let r=St("message",e),{bytes:o,scalar:i}=td(t),a=St("auxRand",n,32),u=ed(i^Rt(Za("BIP0340/aux",a))),d=Za("BIP0340/nonce",u,o,r),h=ps(Rt(d));if(h===Ja)throw new Error("sign failed: k is zero");let{bytes:m,scalar:w}=td(h),x=Mg(m,o,r),P=new Uint8Array(64);if(P.set(m,0),P.set(ed(ps(w+x*i)),32),!Dg(P,r,o))throw new Error("sign: Invalid signature produced");return P}function Dg(e,t,n){let r=St("signature",e,64),o=St("message",t),i=St("publicKey",n,32);try{let a=zg(Rt(i)),u=Rt(r.subarray(0,32));if(!Ug(u))return!1;let d=Rt(r.subarray(32,64));if(!t3(d))return!1;let h=Mg(ed(u),rd(a),o),m=n3(a,d,ps(-h));return!(!m||!m.hasEvenY()||m.toAffine().x!==u)}catch{return!1}}var gn={getPublicKey:r3,sign:o3,verify:Dg,utils:{randomPrivateKey:nd.utils.randomPrivateKey,lift_x:zg,pointToBytes:rd,numberToBytesBE:Ln,bytesToNumberBE:Rt,taggedHash:Za,mod:At}};var br=Symbol("verified"),i3=e=>e instanceof Object;function Xa(e){if(!i3(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}function id(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function s3(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Fg(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function a3(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");id(e.outputLen),id(e.blockLen)}function c3(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function u3(e,t){Fg(e);let n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}var l3={number:id,bool:s3,bytes:Fg,hash:a3,exists:c3,output:u3},qn=l3;function d3(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);let o=BigInt(32),i=BigInt(4294967295),a=Number(n>>o&i),u=Number(n&i),d=r?4:0,h=r?0:4;e.setUint32(t+d,a,r),e.setUint32(t+h,u,r)}var ec=class extends di{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ta(this.buffer)}update(t){qn.exists(this);let{view:n,buffer:r,blockLen:o}=this;t=fi(t);let i=t.length;for(let a=0;a<i;){let u=Math.min(o-this.pos,i-a);if(u===o){let d=Ta(t);for(;o<=i-a;a+=o)this.process(d,a);continue}r.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){qn.exists(this),qn.output(t,this),this.finished=!0;let{buffer:n,view:r,blockLen:o,isLE:i}=this,{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(r,0),a=0);for(let w=a;w<o;w++)n[w]=0;d3(r,o-8,BigInt(this.length*8),i),this.process(r,0);let u=Ta(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let h=d/4,m=this.get();if(h>m.length)throw new Error("_sha2: outputLen bigger than state");for(let w=0;w<h;w++)u.setUint32(4*w,m[w],i)}digest(){let{buffer:t,outputLen:n}=this;this.digestInto(t);let r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:n,buffer:r,length:o,finished:i,destroyed:a,pos:u}=this;return t.length=o,t.pos=u,t.finished=i,t.destroyed=a,o%n&&t.buffer.set(r),t}};var f3=(e,t,n)=>e&t^~e&n,h3=(e,t,n)=>e&t^e&n^t&n,p3=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Gr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Zr=new Uint32Array(64),tc=class extends ec{constructor(){super(64,32,8,!1),this.A=Gr[0]|0,this.B=Gr[1]|0,this.C=Gr[2]|0,this.D=Gr[3]|0,this.E=Gr[4]|0,this.F=Gr[5]|0,this.G=Gr[6]|0,this.H=Gr[7]|0}get(){let{A:t,B:n,C:r,D:o,E:i,F:a,G:u,H:d}=this;return[t,n,r,o,i,a,u,d]}set(t,n,r,o,i,a,u,d){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=a|0,this.G=u|0,this.H=d|0}process(t,n){for(let w=0;w<16;w++,n+=4)Zr[w]=t.getUint32(n,!1);for(let w=16;w<64;w++){let x=Zr[w-15],P=Zr[w-2],I=Tn(x,7)^Tn(x,18)^x>>>3,S=Tn(P,17)^Tn(P,19)^P>>>10;Zr[w]=S+Zr[w-7]+I+Zr[w-16]|0}let{A:r,B:o,C:i,D:a,E:u,F:d,G:h,H:m}=this;for(let w=0;w<64;w++){let x=Tn(u,6)^Tn(u,11)^Tn(u,25),P=m+x+f3(u,d,h)+p3[w]+Zr[w]|0,S=(Tn(r,2)^Tn(r,13)^Tn(r,22))+h3(r,o,i)|0;m=h,h=d,d=u,u=a+P|0,a=i,i=o,o=r,r=P+S|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,a=a+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,m=m+this.H|0,this.set(r,o,i,a,u,d,h,m)}roundClean(){Zr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},sd=class extends tc{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},Mo=Cl(()=>new tc),q9=Cl(()=>new sd);var ad=class{generateSecretKey(){return gn.utils.randomPrivateKey()}getPublicKey(t){return ut(gn.getPublicKey(t))}finalizeEvent(t,n){let r=t;return r.pubkey=ut(gn.getPublicKey(n)),r.id=nc(r),r.sig=ut(gn.sign(nc(r),n)),r[br]=!0,r}verifyEvent(t){if(typeof t[br]=="boolean")return t[br];let n=nc(t);if(n!==t.id)return t[br]=!1,!1;try{let r=gn.verify(t.sig,n,t.pubkey);return t[br]=r,r}catch{return t[br]=!1,!1}}};function g3(e){if(!Xa(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function nc(e){let t=Mo(Io.encode(g3(e)));return ut(t)}var rc=new ad,m3=rc.generateSecretKey,b3=rc.getPublicKey,gs=rc.finalizeEvent,mi=rc.verifyEvent;var jg=22242;function y3(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1)return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),o=e[`#${r}`];if(o&&!t.tags.find(([i,a])=>i===n.slice(1)&&o.indexOf(a)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function Hg(e,t){for(let n=0;n<e.length;n++)if(y3(e[n],t))return!0;return!1}function Vg(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function qg(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let i=r+1+o;return e.slice(r+1,i)}function Wg(e,t){return{kind:jg,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function Qg(){return new Promise(e=>{let t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}var Kg=e=>(e[br]=!0,!0);var ms=class e{url;_connected=!1;onclose=null;onnotice=t=>console.debug(`NOTICE from ${this.url}: ${t}`);_onauth=null;baseEoseTimeout=4400;connectionTimeout=4400;publishTimeout=4400;openSubs=new Map;connectionTimeoutHandle;connectionPromise;openCountRequests=new Map;openEventPublishes=new Map;ws;incomingMessageQueue=new Ia;queueRunning=!1;challenge;serial=0;verifyEvent;_WebSocket;constructor(t,n){this.url=No(t),this.verifyEvent=n.verifyEvent,this._WebSocket=n.websocketImplementation||WebSocket}static async connect(t,n){let r=new e(t,n);return await r.connect(),r}closeAllSubscriptions(t){for(let[n,r]of this.openSubs)r.close(t);this.openSubs.clear();for(let[n,r]of this.openEventPublishes)r.reject(new Error(t));this.openEventPublishes.clear();for(let[n,r]of this.openCountRequests)r.reject(new Error(t));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((t,n)=>{this.connectionTimeoutHandle=setTimeout(()=>{n("connection timed out"),this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new this._WebSocket(this.url)}catch(r){n(r);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,t()},this.ws.onerror=r=>{n(r.message||"websocket error"),this._connected&&(this._connected=!1,this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{this._connected&&(this._connected=!1,this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await Qg();this.queueRunning=!1}handleNext(){let t=this.incomingMessageQueue.dequeue();if(!t)return!1;let n=qg(t);if(n){let r=this.openSubs.get(n);if(!r)return;let o=Vg(t,"id"),i=r.alreadyHaveEvent?.(o);if(r.receivedEvent?.(this,o),i)return}try{let r=JSON.parse(t);switch(r[0]){case"EVENT":{let o=this.openSubs.get(r[1]),i=r[2];this.verifyEvent(i)&&Hg(o.filters,i)&&o.onevent(i);return}case"COUNT":{let o=r[1],i=r[2],a=this.openCountRequests.get(o);a&&(a.resolve(i.count),this.openCountRequests.delete(o));return}case"EOSE":{let o=this.openSubs.get(r[1]);if(!o)return;o.receivedEose();return}case"OK":{let o=r[1],i=r[2],a=r[3],u=this.openEventPublishes.get(o);u&&(i?u.resolve(a):u.reject(new Error(a)),this.openEventPublishes.delete(o));return}case"CLOSED":{let o=r[1],i=this.openSubs.get(o);if(!i)return;i.closed=!0,i.close(r[2]);return}case"NOTICE":this.onnotice(r[1]);return;case"AUTH":{this.challenge=r[1],this._onauth?.(r[1]);return}}}catch{return}}async send(t){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{this.ws?.send(t)})}async auth(t){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");let n=await t(Wg(this.url,this.challenge)),r=new Promise((o,i)=>{this.openEventPublishes.set(n.id,{resolve:o,reject:i})});return this.send('["AUTH",'+JSON.stringify(n)+"]"),r}async publish(t){let n=new Promise((r,o)=>{this.openEventPublishes.set(t.id,{resolve:r,reject:o})});return this.send('["EVENT",'+JSON.stringify(t)+"]"),setTimeout(()=>{let r=this.openEventPublishes.get(t.id);r&&(r.reject(new Error("publish timed out")),this.openEventPublishes.delete(t.id))},this.publishTimeout),n}async count(t,n){this.serial++;let r=n?.id||"count:"+this.serial,o=new Promise((i,a)=>{this.openCountRequests.set(r,{resolve:i,reject:a})});return this.send('["COUNT","'+r+'",'+JSON.stringify(t).substring(1)),o}subscribe(t,n){let r=this.prepareSubscription(t,n);return r.fire(),r}prepareSubscription(t,n){this.serial++;let r=n.id||"sub:"+this.serial,o=new cd(this,r,t,n);return this.openSubs.set(r,o),o}close(){this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,this.ws?.close()}_onmessage(t){this.incomingMessageQueue.enqueue(t.data),this.queueRunning||this.runQueue()}},cd=class{relay;id;closed=!1;eosed=!1;filters;alreadyHaveEvent;receivedEvent;onevent;oneose;onclose;eoseTimeout;eoseTimeoutHandle;constructor(t,n,r,o){this.relay=t,this.filters=r,this.id=n,this.alreadyHaveEvent=o.alreadyHaveEvent,this.receivedEvent=o.receivedEvent,this.eoseTimeout=o.eoseTimeout||t.baseEoseTimeout,this.oneose=o.oneose,this.onclose=o.onclose,this.onevent=o.onevent||(i=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,i)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,this.oneose?.())}close(t="closed by caller"){!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),this.onclose?.(t)}};var E3;try{E3=WebSocket}catch{}var oc=class{relays=new Map;seenOn=new Map;trackRelays=!1;verifyEvent;trustedRelayURLs=new Set;_WebSocket;constructor(t){this.verifyEvent=t.verifyEvent,this._WebSocket=t.websocketImplementation}async ensureRelay(t,n){t=No(t);let r=this.relays.get(t);return r||(r=new ms(t,{verifyEvent:this.trustedRelayURLs.has(t)?Kg:this.verifyEvent,websocketImplementation:this._WebSocket}),n?.connectionTimeout&&(r.connectionTimeout=n.connectionTimeout),this.relays.set(t,r)),await r.connect(),r}close(t){t.map(No).forEach(n=>{this.relays.get(n)?.close()})}subscribeMany(t,n,r){return this.subscribeManyMap(Object.fromEntries(t.map(o=>[o,n])),r)}subscribeManyMap(t,n){this.trackRelays&&(n.receivedEvent=(x,P)=>{let I=this.seenOn.get(P);I||(I=new Set,this.seenOn.set(P,I)),I.add(x)});let r=new Set,o=[],i=Object.keys(t).length,a=[],u=x=>{a[x]=!0,a.filter(P=>P).length===i&&(n.oneose?.(),u=()=>{})},d=[],h=(x,P)=>{u(x),d[x]=P,d.filter(I=>I).length===i&&(n.onclose?.(d),h=()=>{})},m=x=>{if(n.alreadyHaveEvent?.(x))return!0;let P=r.has(x);return r.add(x),P},w=Promise.all(Object.entries(t).map(async(x,P,I)=>{if(I.indexOf(x)!==P){h(P,"duplicate url");return}let[S,N]=x;S=No(S);let z;try{z=await this.ensureRelay(S,{connectionTimeout:n.maxWait?Math.max(n.maxWait*.8,n.maxWait-1e3):void 0})}catch(f){h(P,f?.message||String(f));return}let B=z.subscribe(N,{...n,oneose:()=>u(P),onclose:f=>h(P,f),alreadyHaveEvent:m,eoseTimeout:n.maxWait});o.push(B)}));return{async close(){await w,o.forEach(x=>{x.close()})}}}subscribeManyEose(t,n,r){let o=this.subscribeMany(t,n,{...r,oneose(){o.close()}});return o}async querySync(t,n,r){return new Promise(async o=>{let i=[];this.subscribeManyEose(t,[n],{...r,onevent(a){i.push(a)},onclose(a){o(i)}})})}async get(t,n,r){n.limit=1;let o=await this.querySync(t,n,r);return o.sort((i,a)=>a.created_at-i.created_at),o[0]||null}publish(t,n){return t.map(No).map(async(r,o,i)=>{if(i.indexOf(r)!==o)return Promise.reject("duplicate url");let a=await this.ensureRelay(r);return a.publish(n).then(u=>{if(this.trackRelays){let d=this.seenOn.get(n.id);d||(d=new Set,this.seenOn.set(n.id,d)),d.add(a)}return u})})}listConnectionStatus(){let t=new Map;return this.relays.forEach((n,r)=>t.set(r,n.connected)),t}destroy(){this.relays.forEach(t=>t.close()),this.relays=new Map}};var Gg;try{Gg=WebSocket}catch{}var bs=class extends oc{constructor(){super({verifyEvent:mi,websocketImplementation:Gg})}};var S3;try{S3=fetch}catch{}var T3;try{T3=fetch}catch{}var P3=new RegExp(`nostr:(${lg.source})`);var z3;try{z3=fetch}catch{}var ic=class extends di{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,qn.hash(t);let r=fi(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=t.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(t){return qn.exists(this),this.iHash.update(t),this}digestInto(t){qn.exists(this),qn.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:n,iHash:r,finished:o,destroyed:i,blockLen:a,outputLen:u}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=a,t.outputLen=u,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},ld=(e,t,n)=>new ic(e,t).update(n).digest();ld.create=(e,t)=>new ic(e,t);var n$=new Uint8Array([0]),r$=new Uint8Array;var j3;try{j3=fetch}catch{}var B$=2*24*60*60;var Yg=ml(Bl(),1);var ws=["wss://nos.lol","wss://user.kindpag.es"],Zg=["wss://nos.lol","wss://user.kindpag.es"];var W3=0,G$=fd(3,ws,dd(e=>{if(e.length>=2&&e[0]==="p")return e[1]}),e=>[]),Do=fd(10002,Zg,dd(e=>{if(e.length===2)return{url:e[1],read:!0,write:!0};if(e[2]==="read")return{url:e[1],read:!0,write:!1};if(e[2]==="write")return{url:e[1],read:!1,write:!0}}),e=>[{url:"wss://relay.damus.io",read:!0,write:!0},{url:"wss://nos.lol",read:!0,write:!0}]),Z$=fd(1e4,[],dd(e=>{if(e.length>=2){switch(e[0]){case"p":return{label:"pubkey",value:e[1]};case"e":return{label:"thread",value:e[1]};case"t":return{label:"hashtag",value:e[1]};case"word":return{label:"word",value:e[1]}}return}}),e=>[]);function dd(e){return t=>t?t.tags.map(e).filter(pg):[]}function fd(e,t,n,r){let o=Ra(),i=ds(`@nostr/gadgets/list:${e}`,"cache"),a=new Yg.default(u=>new Promise(async d=>{let h=[],m=Math.round(Date.now()/1e3),w=await Oa(u.map(P=>P.target),i).then(P=>P.map((I,S)=>{let N=u[S];return N.index=S,I?!I.lastAttempt||I.lastAttempt<m-60*60*24*2?(h.push(N),I):(I.event===null&&I.lastAttempt<Date.now()/1e3-60*60&&h.push(N),I):(h.push(N),{items:r(N.target),event:null})}));if(h.length===0){d(w);return}let x={};for(let P=0;P<h.length;P++){let I=h[P],S=I.relays.slice(0,Math.min(4,I.relays.length));do S.push(Q3(t));while(S.length<3);for(let N=0;N<S.length;N++){let z=S[N],B=x[z];B||(B=[{kinds:[e],authors:[]}],x[z]=B),B[0]?.authors?.push(I.target)}}try{let P;P=Yr.subscribeManyMap(x,{label:`kind:${e}:batch(${h.length})`,onevent(I){for(let S=0;S<h.length;S++){let N=h[S];if(N.target===I.pubkey){if(w[N.index]?.event?.created_at||0>I.created_at)return;w[N.index]={event:I,items:n(I)};return}}},oneose(){P?.close()},async onclose(){d(w),Na(h.map(I=>[I.target,{...w[I.index],lastAttempt:m}]),i)}})}catch(P){d(w.map(I=>P))}}),{cache:!0,cacheKeyFn:u=>u.target,cacheMap:o});return async function(u,d=[]){let h=d;if(e===10002)return await a.load({target:u,relays:h});{let m=await Do(u,d);return h.push(...m.items.filter(({write:w})=>w).map(({url:w})=>w).slice(0,3)),await a.load({target:u,relays:h})}}}function Q3(e){return e[W3++%e.length]}var sc=class{relayBySerial=[];orderedRelaysByPubKey={};hasLoadedRelaysFor=new Set;export(){return JSON.stringify({relayBySerial:this.relayBySerial,orderedRelaysByPubKey:this.orderedRelaysByPubKey})}import(t){let{relayBySerial:n,orderedRelaysByPubKey:r}=JSON.parse(t);this.relayBySerial=n,this.orderedRelaysByPubKey=r}save(t,n,r,o){let i=this.relayBySerial.indexOf(n);i===-1&&(i=this.relayBySerial.length,this.relayBySerial.push(n));let a=this.orderedRelaysByPubKey[t];a||(a=[]);let u=a.findIndex(d=>d.serial===i);if(u===-1){let d=new hd(i);d.timestamps[r]=o,a.push(d)}else a[u].timestamps[r]<o&&(a[u].timestamps[r]=o);this.orderedRelaysByPubKey[t]=a}async topN(t,n){if(!this.hasLoadedRelaysFor.has(t)){try{let{event:i,items:a}=await Do(t);i&&a.forEach(u=>{u.write&&this.save(t,u.url,Wn.lastInRelayList,i.created_at)})}catch{}this.hasLoadedRelaysFor.add(t)}let r=[],o=this.orderedRelaysByPubKey[t];if(o){o.sort((i,a)=>a.sum()-i.sum());for(let i=0;i<n&&i<o.length;i++)r.push(this.relayBySerial[o[i].serial])}return r}printScores(){console.log("= print scores");for(let t in this.orderedRelaysByPubKey){let n=this.orderedRelaysByPubKey[t];console.log(`== relay scores for ${t}`);for(let r=0;r<n.entries.length;r++){let o=n[r];console.log(`  ${r.toString().padStart(3)} :: ${this.relayBySerial[o.serial].padEnd(30)} (${o.serial}) ::> ${o.sum().toString().padStart(12)}`)}}}},hd=class{serial;timestamps=new Array(7).fill(0);constructor(t){this.serial=t}sum(){let t=Date.now()/1e3+86400,n=0;for(let r=0;r<this.timestamps.length;r++){if(this.timestamps[r]===0)continue;let o=K3[r]*1e10/Math.pow(Math.max(t-this.timestamps[r],1),1.3);n+=o}return n}},Wn;(function(e){e[e.lastFetchAttempt=0]="lastFetchAttempt",e[e.mostRecentEventFetched=1]="mostRecentEventFetched",e[e.lastInRelayList=2]="lastInRelayList",e[e.lastInTag=3]="lastInTag",e[e.lastInNprofile=4]="lastInNprofile",e[e.lastInNevent=5]="lastInNevent",e[e.lastInNIP05=6]="lastInNIP05"})(Wn||(Wn={}));var K3={[Wn.lastFetchAttempt]:-500,[Wn.mostRecentEventFetched]:700,[Wn.lastInRelayList]:350,[Wn.lastInTag]:5,[Wn.lastInNprofile]:22,[Wn.lastInNevent]:8,[Wn.lastInNIP05]:7};var Yr=new bs;var nT=new sc;var Jg=0;var Xg=ds("@nostr/gadgets/metadata","cache");function nm(e){return typeof e=="string"?em.load({pubkey:e}):em.load(e)}var em=new tm.default(async e=>new Promise(async t=>{let n=[],r=Math.round(Date.now()/1e3),o=await Oa(e.map(a=>a.pubkey),Xg).then(a=>a.map((u,d)=>{let h=e[d];if(u)return u.lastAttempt<r-60*60*24*2?(n.push(h),u.lastAttempt=r,u):(u.lastAttempt<r-60*60&&!u.metadata.name&&!u.metadata.picture&&!u.metadata.about&&(n.push(h),u.lastAttempt=Math.round(Date.now()/1e3)),u);{n.push(h);let m=G3(h.pubkey);return m.lastAttempt=r,m}}));if(n.length===0){t(o);return}let i={};await Promise.all(n.map(async({pubkey:a,relays:u=[]})=>{let d=new Set(u.slice(0,3));try{let{items:h}=await Do(a),m=0;for(let w=0;w<h.length&&!(h[w].write&&(d.add(h[w].url),m++,m>=2));w++);}catch(h){console.error("Failed to load relay list for",a,h)}do d.add(ws[Jg%ws.length]),Jg++;while(d.size<2);i[a]=Array.from(d)}));try{let a={};for(let[d,h]of Object.entries(i))for(let m of h)a[m]||(a[m]=[{kinds:[0],authors:[]}]),a[m][0].authors.push(d);let u=Yr.subscribeManyMap(a,{label:`metadata(${e.length})`,onevent(d){for(let h=0;h<e.length;h++)if(e[h].pubkey===d.pubkey){let m=o[h];if(m.lastUpdated>d.created_at)return;Z3(m,d);return}},oneose(){t(o),u.close();let d=[];for(let h=0;h<o.length;h++){let m=o[h];m.pubkey&&d.push([m.pubkey,m])}Na(d,Xg)}})}catch(a){for(let u=0;u<o.length;u++)o[u]=a;t(o)}}),{cacheKeyFn:e=>e.pubkey,cache:!0,cacheMap:Ra()});function G3(e){let t=dg(e);return{pubkey:e,npub:t,shortName:t.substring(0,8)+"\u2026"+t.substring(59),lastUpdated:0,metadata:{}}}function Z3(e,t){let n={};try{n=JSON.parse(t.content)}catch{}e.metadata=n,e.shortName=n.name||n.display_name||n.nip05?.split("@")?.[0]||e.shortName,n.picture&&(e.image=n.picture)}var ys=new TextDecoder("utf-8"),ac=new TextEncoder;var rm=5e3;function Y3(e){let t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=e&255,t}function bi(e){let{prefix:t,words:n}=pr.decode(e,rm),r=new Uint8Array(pr.fromWords(n));switch(t){case"nprofile":{let o=pd(r);if(!o[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(o[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:ut(o[0][0]),relays:o[1]?o[1].map(i=>ys.decode(i)):[]}}}case"nevent":{let o=pd(r);if(!o[0]?.[0])throw new Error("missing TLV 0 for nevent");if(o[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(o[2]&&o[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(o[3]&&o[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:ut(o[0][0]),relays:o[1]?o[1].map(i=>ys.decode(i)):[],author:o[2]?.[0]?ut(o[2][0]):void 0,kind:o[3]?.[0]?parseInt(ut(o[3][0]),16):void 0}}}case"naddr":{let o=pd(r);if(!o[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!o[2]?.[0])throw new Error("missing TLV 2 for naddr");if(o[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!o[3]?.[0])throw new Error("missing TLV 3 for naddr");if(o[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:ys.decode(o[0][0]),pubkey:ut(o[2][0]),kind:parseInt(ut(o[3][0]),16),relays:o[1]?o[1].map(i=>ys.decode(i)):[]}}}case"nsec":return{type:t,data:r};case"npub":case"note":return{type:t,data:ut(r)};default:throw new Error(`unknown prefix ${t}`)}}function pd(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],i=n.slice(2,2+o);if(n=n.slice(2+o),i.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(i)}return t}function J3(e,t){let n=pr.toWords(t);return pr.encode(e,n,rm)}function om(e){let t;e.kind!==void 0&&(t=Y3(e.kind));let n=X3({0:[cs(e.id)],1:(e.relays||[]).map(r=>ac.encode(r)),2:e.author?[cs(e.author)]:[],3:t?[new Uint8Array(t)]:[]});return J3("nevent",n)}function X3(e){let t=[];return Object.entries(e).reverse().forEach(([n,r])=>{r.forEach(o=>{let i=new Uint8Array(o.length+2);i.set([parseInt(n)],0),i.set([o.length],1),i.set(o,2),t.push(i)})}),Ba(...t)}async function wi(){let e=document.querySelector('meta[name="author"]'),t=document.querySelector('meta[name="relays"]'),n=document.querySelector('meta[name="topics"]'),r=document.querySelector('meta[name="comments"]');if(!e)throw new Error("Missing meta tags for configuration");let o=e.getAttribute("content"),i=[],a=[],u=t?.getAttribute?.("content")?.split(",").map(P=>P.trim());if(u&&u.length>0)i=u,a=u;else{let P=(await Do(bi(o).data)).items;a=P.filter(I=>I.write).map(I=>I.url),i=P.filter(I=>I.read).map(I=>I.url)}let d=n?.getAttribute?.("content")?.split(",").map(P=>P.trim()).filter(P=>P!=="")||[],h=(r?.getAttribute?.("content")||"no")==="yes",m=[],w=document.querySelectorAll("meta"),x="block:";return w.forEach(P=>{let I=P.getAttribute("name");if(!I||!I.startsWith(x))return;let S=I.substring(x.length);if(!["articles","notes","images"].includes(S))return;let N=P.getAttribute("content"),z=N?N.split("-"):[],B={};z.length>0&&!isNaN(Number(z[0]))&&(B.count=parseInt(z[0],10),z.shift());let f=z.findIndex(p=>["list","slide","grid"].includes(p));f>=0&&(B.style=z[f],z.splice(f,1)),z.forEach(p=>{p.startsWith("m")&&!isNaN(Number(p.substring(1)))&&(B.minChars=parseInt(p.substring(1),10)),p.startsWith("i")&&(B.ids=B.ids||[],B.ids.push(p.substring(1)))}),m.push({type:S,config:B})}),m.length==0&&(m.push({type:"articles",config:{count:3,style:"grid"}}),m.push({type:"notes",config:{count:10,style:"slide",minChars:400}}),m.push({type:"articles",config:{count:2,style:"grid"}}),m.push({type:"images",config:{count:10,style:"grid"}}),m.push({type:"articles",config:{count:10,style:"list"}}),m.push({type:"articles",config:{count:2,style:"grid"}}),m.push({type:"articles",config:{count:30,style:"list"}})),{npub:o,readRelays:i,writeRelays:a,topics:d,comments:h,blocks:m}}var am=ml(sm(),1);var Fo=Symbol("verified"),e8=e=>e instanceof Object;function gd(e){if(!e8(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}function cm(e){for(let t of e.tags)if(t[0]==="e"&&(t[3]==="root"||t[3]==="reply"))return!1;return!0}var md=new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"});function Jr(e){let t,n,r=[],o,i=!1;return e.kind==30023?(t=e.tags.find(([a])=>a==="title")?.[1],t||(t="Article of "+md.format(new Date(e.created_at*1e3)),i=!0),n=e.tags.find(([a])=>a==="summary")?.[1]||void 0,o=e.tags.find(([a])=>a==="image")?.[1]||void 0):e.kind==20?(t=e.tags.find(([a])=>a==="title")?.[1],t||(t="Photo of "+md.format(new Date(e.created_at*1e3)),i=!0),n=e.content,e.tags.forEach(a=>{if(a[0]==="imeta"){let u=a[1].split(" ")[1];r.push(u)}}),o=r[0]):(t=e.tags.find(([a])=>a==="subject")?.[1],t||(t="Note of "+md.format(new Date(e.created_at*1e3)),i=!0),n=e.content.slice(0,200)+"..."),{id:e.id,kind:e.kind,created_at:e.created_at,title:t,autogeneratedTitle:i,image:o,images:r,summary:n,content:e.content}}async function t8(e){try{let t=e.match(/^([a-zA-Z0-9-_.]+)@([a-zA-Z0-9-.]+)$/);if(!t)return null;let[n,r,o]=t,i=`https://${o}/.well-known/nostr.json?name=${r}`,a=await fetch(i);if(!a.ok)return console.error(`Failed to fetch NIP-05 data: ${a.status}`),null;let u=await a.json();return u&&u.names&&u.names[r]?u.names[r]:null}catch(t){return console.error("Error resolving NIP-05 address:",t),null}}async function jo(e){let t,n=[];if(e.includes("@")){let r=await t8(e);if(r)t=r;else return console.error("Failed to resolve NIP-05 address"),null}else try{let r=bi(e);if(r.type==="npub")t=r.data;else if(r.type==="nprofile")t=r.data.pubkey,n=r.data.relays||[];else return console.error("author should be an npub"),null}catch(r){if(e.length===64)t=e;else return console.error("Failed to decode npub:",r),null}return nm({pubkey:t,relays:n})}async function n8(e){let t=/nostr:(npub1\w+|nprofile1\w+)/g,r=(e.match(t)||[]).map(async a=>{try{let u=await jo(a.slice(6));return u?{match:a,replacement:`[${u.shortName}](${a})`}:{match:a,replacement:a}}catch(u){return console.error("Failed to fetch profile:",u),{match:a,replacement:a}}}),o=await Promise.all(r),i=e;return o.forEach(({match:a,replacement:u})=>{i=i.replace(a,u)}),i}function r8(e){let t=/(^|\s|\n|\()(nevent1\w+|note1\w+|npub1\w+|nprofile1\w+)(?=\s|\n|\)|$)/gm;e=e.replace(t,(o,i,a)=>`${i}nostr:${a}`);let n=/(^|\s|\n)nostr:(nevent1\w+|note1\w+|npub1\w+|nprofile1\w+)(?=\s|\n|$)/gm;e=e.replace(n,(o,i,a)=>{let u=a.slice(0,24);return`${i}[${u}...](nostr:${a})`});let r=/\(nostr:([a-zA-Z0-9]+)\)/g;return e=e.replace(r,(o,i)=>`(https://njump.me/${i})`),e}function o8(e){let t=/(?<!$)\s*(https?:\/\/(?!.*$).*?\.(?:png|jpg|jpeg|gif|bmp))\s*(?!\))/gi;return e.replace(t,(r,o)=>` ![Image](${o}) `)}function i8(e){let t=/\s*(https?:\/\/\S+\.(?:mp4|webm|ogg|mov))(\s*|$)/gi;return e.replace(t,(r,o)=>` <video controls><source src="${o}" type="video/mp4"></video> `)}function s8(e){let t=/\s*(https?:\/\/\S+\.(?:mp3))(\s*|$)/gi;return e.replace(t,(r,o)=>` <audio controls src="${o}"></audio> `)}function a8(e){return[{regex:/<<|/g,replacement:"&laquo;"},{regex:/>>|/g,replacement:"&raquo;"},{regex:/\.\.\./g,replacement:"&hellip;"},{regex:/---/g,replacement:"&mdash;"},{regex:/--/g,replacement:"&mdash;"}].forEach(({regex:n,replacement:r})=>{e=e.replace(n,r)}),e}async function um(e){let t=e.content;return t=await n8(t),t=r8(t),t=o8(t),t=i8(t),t=s8(t),t=a8(t),e.kind==1&&(t=t.replace(/\n/g,`
<br/>`)),"title"in e&&(t=t.replace("# "+e.title,"")),t=new am.default.Converter({simplifiedAutoLink:!0,tables:!0,strikethrough:!0}).makeHtml(t),t}function jt(e,t=!1){let n=new Date(e*1e3),r={day:"2-digit",month:"2-digit",year:"numeric"},o=new Intl.DateTimeFormat("en-US",r).formatToParts(n),i,a,u;o.forEach(h=>{h.type==="day"&&(i=h.value),h.type==="month"&&(a=h.value),h.type==="year"&&(u=h.value)});let d=`${i} ${a} ${u}`;if(t){let h={hour:"2-digit",minute:"2-digit",hourCycle:"h23"},w=new Intl.DateTimeFormat("en-US",h).format(n);d+=` - ${w}`}return d}async function bd(){try{let e=await fetch(window.location.href);if(!e.ok)throw new Error("Network response was not ok");let t=await e.text(),n=new Blob([t],{type:"text/html"}),r=URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download="index.html",o.click(),URL.revokeObjectURL(r)}catch(e){console.error("Error downloading the original HTML:",e)}}var yd=class{generateSecretKey(){return gn.utils.randomPrivateKey()}getPublicKey(t){return ut(gn.getPublicKey(t))}finalizeEvent(t,n){let r=t;return r.pubkey=ut(gn.getPublicKey(n)),r.id=wd(r),r.sig=ut(gn.sign(wd(r),n)),r[Fo]=!0,r}verifyEvent(t){if(typeof t[Fo]=="boolean")return t[Fo];let n=wd(t);if(n!==t.id)return t[Fo]=!1,!1;try{let r=gn.verify(t.sig,n,t.pubkey);return t[Fo]=r,r}catch{return t[Fo]=!1,!1}}};function c8(e){if(!gd(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function wd(e){let t=Mo(ac.encode(c8(e)));return ut(t)}var uc=new yd,LT=uc.generateSecretKey,CT=uc.getPublicKey,PT=uc.finalizeEvent,IT=uc.verifyEvent;var yi=[];function lm(e,t=ze){let n,r=new Set;function o(u){if(tt(e,u)&&(e=u,n)){let d=!yi.length;for(let h of r)h[1](),yi.push(h,e);if(d){for(let h=0;h<yi.length;h+=2)yi[h][0](yi[h+1]);yi.length=0}}}function i(u){o(u(e))}function a(u,d=ze){let h=[u,d];return r.add(h),r.size===1&&(n=t(o,i)||ze),u(e),()=>{r.delete(h),r.size===0&&n&&(n(),n=null)}}return{set:o,update:i,subscribe:a}}var vi=lm("");function u8(e){let t;return{c(){t=ae("div"),t.innerHTML='<div class="loader svelte-mae19q"></div>',ie(t,"class","loader-container svelte-mae19q")},m(n,r){me(n,t,r)},p:ze,i:ze,o:ze,d(n){n&&pe(t)}}}var vd=class extends nt{constructor(t){super(),ct(this,t,null,u8,tt,{})}},dm=vd;var l8=/\W/m,fm=/\W |\W$|$|,| /m;function*hm(e){let t=e.length,n=0,r=0;for(;r<t;){let o=e.indexOf(":",r);if(o===-1)break;if(e.substring(o-5,o)==="nostr"){let i=e.substring(o+60).match(l8),a=i?o+60+i.index:t;try{let u,{data:d,type:h}=bi(e.substring(o+1,a));switch(h){case"npub":u={pubkey:d};break;case"nsec":case"note":r=a+1;continue;default:u=d}n!==o-5&&(yield{type:"text",text:e.substring(n,o-5)}),yield{type:"reference",pointer:u},r=a,n=r;continue}catch{r=o+1;continue}}else if(e.substring(o-5,o)==="https"||e.substring(o-4,o)==="http"){let i=e.substring(o+4).match(fm),a=i?o+4+i.index:t,u=e[o-1]==="s"?5:4;try{let d=new URL(e.substring(o-u,a));if(d.hostname.indexOf(".")===-1)throw new Error("invalid url");if(n!==o-u&&(yield{type:"text",text:e.substring(n,o-u)}),d.pathname.endsWith(".png")||d.pathname.endsWith(".jpg")||d.pathname.endsWith(".jpeg")||d.pathname.endsWith(".gif")||d.pathname.endsWith(".webp")){yield{type:"image",url:d.toString()},r=a,n=r;continue}if(d.pathname.endsWith(".mp4")||d.pathname.endsWith(".avi")||d.pathname.endsWith(".webm")||d.pathname.endsWith(".mkv")){yield{type:"video",url:d.toString()},r=a,n=r;continue}if(d.pathname.endsWith(".mp3")||d.pathname.endsWith(".aac")||d.pathname.endsWith(".ogg")||d.pathname.endsWith(".opus")){yield{type:"audio",url:d.toString()},r=a,n=r;continue}yield{type:"url",url:d.toString()},r=a,n=r;continue}catch{r=a+1;continue}}else if(e.substring(o-3,o)==="wss"||e.substring(o-2,o)==="ws"){let i=e.substring(o+4).match(fm),a=i?o+4+i.index:t,u=e[o-1]==="s"?3:2;try{let d=new URL(e.substring(o-u,a));if(d.hostname.indexOf(".")===-1)throw new Error("invalid ws url");n!==o-u&&(yield{type:"text",text:e.substring(n,o-u)}),yield{type:"relay",url:d.toString()},r=a,n=r;continue}catch{r=a+1;continue}}else{r=o+1;continue}}n!==t&&(yield{type:"text",text:e.substring(n)})}var vs=new Set,Xr={reset(){vs.clear()},addDisplayedEvents(e){for(let t=0;t<e.length;t++){let n=e[t];vs.has(n.id)||vs.add(n.id)}},hasBeenDisplayed(e){return vs.has(e)},getDisplayedEventsCount(){return vs.size}};function f8(e,t){let n=0;for(let r of hm(e.content)){switch(r.type){case"text":n+=r.text.length;case"url":case"image":case"video":case"audio":case"reference":n+=14}if(n>=t)return!0}return!1}function _i(e,t,n,r=10,o,i){let a=[];i&&i.length<r&&(r=i.length);for(let u=0;u<e.length;u++){let d=e[u];if(!Xr.hasBeenDisplayed(d.id)&&t.includes(d.kind)&&!(i&&i.every(h=>!d.id.endsWith(h)))){if(n>0){if(o){if(!f8(d,n))continue}else if(d.content.length<n)continue}if(a.push(d),a.length===r)break}}return a.length>0&&Xr.addDisplayedEvents(a),a}function pm(e,t,n){let r=e.slice();return r[8]=t[n],r}function gm(e,t,n){let r=e.slice();return r[8]=t[n],r}function mm(e){let t;function n(i,a){if(i[0]==="grid")return p8;if(i[0]==="list")return h8}let r=n(e,-1),o=r&&r(e);return{c(){t=ae("section"),o&&o.c(),ie(t,"class","block articles")},m(i,a){me(i,t,a),o&&o.m(t,null)},p(i,a){r===(r=n(i,a))&&o?o.p(i,a):(o&&o.d(1),o=r&&r(i),o&&(o.c(),o.m(t,null)))},d(i){i&&pe(t),o&&o.d()}}}function h8(e){let t,n,r=Je(e[2]),o=[];for(let i=0;i<r.length;i+=1)o[i]=wm(pm(e,r,i));return{c(){t=ae("div"),n=ae("ul");for(let i=0;i<o.length;i+=1)o[i].c();ie(t,"class","list")},m(i,a){me(i,t,a),ne(t,n);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(n,null)},p(i,a){if(a&4){r=Je(i[2]);let u;for(u=0;u<r.length;u+=1){let d=pm(i,r,u);o[u]?o[u].p(d,a):(o[u]=wm(d),o[u].c(),o[u].m(n,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=r.length}},d(i){i&&pe(t),Xt(o,i)}}}function p8(e){let t,n,r=Je(e[2]),o=[];for(let i=0;i<r.length;i+=1)o[i]=Em(gm(e,r,i));return{c(){t=ae("div");for(let i=0;i<o.length;i+=1)o[i].c();ie(t,"class",n="grid "+(e[2].length%2!==0?"odd":""))},m(i,a){me(i,t,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(t,null)},p(i,a){if(a&6){r=Je(i[2]);let u;for(u=0;u<r.length;u+=1){let d=gm(i,r,u);o[u]?o[u].p(d,a):(o[u]=Em(d),o[u].c(),o[u].m(t,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=r.length}a&4&&n!==(n="grid "+(i[2].length%2!==0?"odd":""))&&ie(t,"class",n)},d(i){i&&pe(t),Xt(o,i)}}}function bm(e){let t,n=e[8].summary+"",r;return{c(){t=ae("div"),r=Me(n),ie(t,"class","summary")},m(o,i){me(o,t,i),ne(t,r)},p(o,i){i&4&&n!==(n=o[8].summary+"")&&Ze(r,n)},d(o){o&&pe(t)}}}function wm(e){let t,n,r,o=e[8].title+"",i,a,u,d,h=e[8].summary&&bm(e);return{c(){t=ae("li"),n=ae("a"),r=ae("h2"),i=Me(o),a=Ne(),h&&h.c(),d=Ne(),ie(n,"href",u=`#${e[8].id}`)},m(m,w){me(m,t,w),ne(t,n),ne(n,r),ne(r,i),ne(n,a),h&&h.m(n,null),ne(t,d)},p(m,w){w&4&&o!==(o=m[8].title+"")&&Ze(i,o),m[8].summary?h?h.p(m,w):(h=bm(m),h.c(),h.m(n,null)):h&&(h.d(1),h=null),w&4&&u!==(u=`#${m[8].id}`)&&ie(n,"href",u)},d(m){m&&pe(t),h&&h.d()}}}function ym(e){let t,n;return{c(){t=ae("img"),Nt(t.src,n=e[8].image)||ie(t,"src",n)},m(r,o){me(r,t,o)},p(r,o){o&4&&!Nt(t.src,n=r[8].image)&&ie(t,"src",n)},d(r){r&&pe(t)}}}function vm(e){let t,n=e[8].summary+"";return{c(){t=ae("div"),ie(t,"class","summary")},m(r,o){me(r,t,o),t.innerHTML=n},p(r,o){o&4&&n!==(n=r[8].summary+"")&&(t.innerHTML=n)},d(r){r&&pe(t)}}}function _m(e){let t;return{c(){t=ae("span"),t.textContent="- \u{1F4CC} Pinned",ie(t,"class","pinned")},m(n,r){me(n,t,r)},d(n){n&&pe(t)}}}function Em(e){let t,n,r,o,i=e[8].title+"",a,u,d,h,m,w=jt(e[8].created_at)+"",x,P,I=e[1]&&e[1].some(z),S,N;function z(...b){return e[6](e[8],...b)}let B=e[8].image&&ym(e),f=e[8].summary&&vm(e),p=I&&_m(e);return{c(){t=ae("div"),n=ae("a"),B&&B.c(),r=Ne(),o=ae("div"),a=Me(i),u=Ne(),f&&f.c(),d=Ne(),h=ae("div"),m=ae("span"),x=Me(w),P=Ne(),p&&p.c(),N=Ne(),ie(o,"class","title"),ie(m,"class","date"),ie(n,"href",S=`#${e[8].id}`),ie(t,"class","item")},m(b,v){me(b,t,v),ne(t,n),B&&B.m(n,null),ne(n,r),ne(n,o),ne(o,a),ne(n,u),f&&f.m(n,null),ne(n,d),ne(n,h),ne(h,m),ne(m,x),ne(h,P),p&&p.m(h,null),ne(t,N)},p(b,v){e=b,e[8].image?B?B.p(e,v):(B=ym(e),B.c(),B.m(n,r)):B&&(B.d(1),B=null),v&4&&i!==(i=e[8].title+"")&&Ze(a,i),e[8].summary?f?f.p(e,v):(f=vm(e),f.c(),f.m(n,d)):f&&(f.d(1),f=null),v&4&&w!==(w=jt(e[8].created_at)+"")&&Ze(x,w),v&6&&(I=e[1]&&e[1].some(z)),I?p||(p=_m(e),p.c(),p.m(h,null)):p&&(p.d(1),p=null),v&4&&S!==(S=`#${e[8].id}`)&&ie(n,"href",S)},d(b){b&&pe(t),B&&B.d(),f&&f.d(),p&&p.d()}}}function g8(e){let t,n=e[2].length>0&&mm(e);return{c(){n&&n.c(),t=kt()},m(r,o){n&&n.m(r,o),me(r,t,o)},p(r,[o]){r[2].length>0?n?n.p(r,o):(n=mm(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:ze,o:ze,d(r){r&&pe(t),n&&n.d(r)}}}function m8(e,t,n){let r,{events:o=[]}=t,{count:i=2}=t,{style:a="grid"}=t,{minChars:u=10}=t,{ids:d=void 0}=t,h=[30023];Ot(()=>{d&&n(0,a="grid")});let m=(w,x)=>w.id.endsWith(x);return e.$$set=w=>{"events"in w&&n(3,o=w.events),"count"in w&&n(4,i=w.count),"style"in w&&n(0,a=w.style),"minChars"in w&&n(5,u=w.minChars),"ids"in w&&n(1,d=w.ids)},e.$$.update=()=>{e.$$.dirty&58&&n(2,r=_i(o,h,u,i,!1,d).map(Jr))},[a,d,r,o,i,u,m]}var _d=class extends nt{constructor(t){super(),ct(this,t,m8,g8,tt,{events:3,count:4,style:0,minChars:5,ids:1})}},Ed=_d;function Qn(...e){return e.filter(Boolean).join(" ")}function xd(e,t){if(e){let n=Object.keys(e);for(let r=0;r<n.length;r++){let o=n[r];if(o!=="__proto__"&&t(e[o],o)===!1)break}}return e}function lc(e){let t=e.Components.Elements?.list.children;return t&&Array.prototype.slice.call(t)||[]}function Ho(e){return e!==null&&typeof e=="object"}function _s(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&!e.some((n,r)=>!_s(n,t[r]));if(Ho(e)&&Ho(t)){let n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&!n.some(o=>!Object.prototype.hasOwnProperty.call(t,o)||!_s(e[o],t[o]))}return e===t}function kd(e,t){return e.length===t.length&&!e.some((n,r)=>n!==t[r])}function Es(e,t){let n=e;return xd(t,(r,o)=>{Array.isArray(r)?n[o]=r.slice():Ho(r)?n[o]=Es(Ho(n[o])?n[o]:{},r):n[o]=r}),n}function xm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b8(e,t,n){return t&&xm(e.prototype,t),n&&xm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var km="(prefers-reduced-motion: reduce)",ki=1,w8=2,$i=3,Bi=4,Ps=5,fc=6,mc=7,y8={CREATED:ki,MOUNTED:w8,IDLE:$i,MOVING:Bi,SCROLLING:Ps,DRAGGING:fc,DESTROYED:mc};function Er(e){e.length=0}function ro(e,t,n){return Array.prototype.slice.call(e,t,n)}function Xe(e){return e.bind.apply(e,[null].concat(ro(arguments,1)))}var zm=setTimeout,Bd=function(){};function Sm(e){return requestAnimationFrame(e)}function vc(e,t){return typeof t===e}function Ss(e){return!Rd(e)&&vc("object",e)}var Od=Array.isArray,Mm=Xe(vc,"function"),to=Xe(vc,"string"),Is=Xe(vc,"undefined");function Rd(e){return e===null}function Dm(e){try{return e instanceof(e.ownerDocument.defaultView||window).HTMLElement}catch{return!1}}function Ns(e){return Od(e)?e:[e]}function wn(e,t){Ns(e).forEach(t)}function Ud(e,t){return e.indexOf(t)>-1}function hc(e,t){return e.push.apply(e,Ns(t)),e}function yr(e,t,n){e&&wn(t,function(r){r&&e.classList[n?"add":"remove"](r)})}function Kn(e,t){yr(e,to(t)?t.split(" "):t,!0)}function Os(e,t){wn(t,e.appendChild.bind(e))}function zd(e,t){wn(e,function(n){var r=(t||n).parentNode;r&&r.insertBefore(n,t)})}function As(e,t){return Dm(e)&&(e.msMatchesSelector||e.matches).call(e,t)}function Fm(e,t){var n=e?ro(e.children):[];return t?n.filter(function(r){return As(r,t)}):n}function Rs(e,t){return t?Fm(e,t)[0]:e.firstElementChild}var $s=Object.keys;function qo(e,t,n){return e&&(n?$s(e).reverse():$s(e)).forEach(function(r){r!=="__proto__"&&t(e[r],r)}),e}function Ts(e){return ro(arguments,1).forEach(function(t){qo(t,function(n,r){e[r]=t[r]})}),e}function eo(e){return ro(arguments,1).forEach(function(t){qo(t,function(n,r){Od(n)?e[r]=n.slice():Ss(n)?e[r]=eo({},Ss(e[r])?e[r]:{},n):e[r]=n})}),e}function Am(e,t){wn(t||$s(e),function(n){delete e[n]})}function Gn(e,t){wn(e,function(n){wn(t,function(r){n&&n.removeAttribute(r)})})}function Fe(e,t,n){Ss(t)?qo(t,function(r,o){Fe(e,o,r)}):wn(e,function(r){Rd(n)||n===""?Gn(r,t):r.setAttribute(t,String(n))})}function Si(e,t,n){var r=document.createElement(e);return t&&(to(t)?Kn(r,t):Fe(r,t)),n&&Os(n,r),r}function Cn(e,t,n){if(Is(n))return getComputedStyle(e)[t];Rd(n)||(e.style[t]=""+n)}function Bs(e,t){Cn(e,"display",t)}function jm(e){e.setActive&&e.setActive()||e.focus({preventScroll:!0})}function Pn(e,t){return e.getAttribute(t)}function $m(e,t){return e&&e.classList.contains(t)}function mn(e){return e.getBoundingClientRect()}function Wo(e){wn(e,function(t){t&&t.parentNode&&t.parentNode.removeChild(t)})}function Hm(e){return Rs(new DOMParser().parseFromString(e,"text/html").body)}function wr(e,t){e.preventDefault(),t&&(e.stopPropagation(),e.stopImmediatePropagation())}function Vm(e,t){return e&&e.querySelector(t)}function Md(e,t){return t?ro(e.querySelectorAll(t)):[]}function vr(e,t){yr(e,t,!1)}function Ld(e){return e.timeStamp}function Vo(e){return to(e)?e:e?e+"px":""}var Us="splide",Dd="data-"+Us;function xs(e,t){if(!e)throw new Error("["+Us+"] "+(t||""))}var no=Math.min,bc=Math.max,wc=Math.floor,Ls=Math.ceil,en=Math.abs;function qm(e,t,n){return en(e-t)<n}function pc(e,t,n,r){var o=no(t,n),i=bc(t,n);return r?o<e&&e<i:o<=e&&e<=i}function Ei(e,t,n){var r=no(t,n),o=bc(t,n);return no(bc(r,e),o)}function Cd(e){return+(e>0)-+(e<0)}function Pd(e,t){return wn(t,function(n){e=e.replace("%s",""+n)}),e}function Fd(e){return e<10?"0"+e:""+e}var Tm={};function v8(e){return""+e+Fd(Tm[e]=(Tm[e]||0)+1)}function Wm(){var e=[];function t(a,u,d,h){o(a,u,function(m,w,x){var P="addEventListener"in m,I=P?m.removeEventListener.bind(m,w,d,h):m.removeListener.bind(m,d);P?m.addEventListener(w,d,h):m.addListener(d),e.push([m,w,x,d,I])})}function n(a,u,d){o(a,u,function(h,m,w){e=e.filter(function(x){return x[0]===h&&x[1]===m&&x[2]===w&&(!d||x[3]===d)?(x[4](),!1):!0})})}function r(a,u,d){var h,m=!0;return typeof CustomEvent=="function"?h=new CustomEvent(u,{bubbles:m,detail:d}):(h=document.createEvent("CustomEvent"),h.initCustomEvent(u,m,!1,d)),a.dispatchEvent(h),h}function o(a,u,d){wn(a,function(h){h&&wn(u,function(m){m.split(" ").forEach(function(w){var x=w.split(".");d(h,x[0],x[1])})})})}function i(){e.forEach(function(a){a[4]()}),Er(e)}return{bind:t,unbind:n,dispatch:r,destroy:i}}var xr="mounted",Bm="ready",In="move",oo="moved",zs="click",_c="active",Ec="inactive",xc="visible",kc="hidden",mt="refresh",Ut="updated",Qo="resize",Ms="resized",jd="drag",Hd="dragging",Vd="dragged",Ds="scroll",io="scrolled",_8="overflow",Sc="destroy",Ac="arrows:mounted",$c="arrows:updated",Tc="pagination:mounted",Bc="pagination:updated",Fs="navigation:mounted",Lc="autoplay:play",Cc="autoplay:playing",Pc="autoplay:pause",js="lazyload:loaded",Qm="sk",Km="sh",yc="ei";function rt(e){var t=e?e.event.bus:document.createDocumentFragment(),n=Wm();function r(i,a){n.bind(t,Ns(i).join(" "),function(u){a.apply(a,Od(u.detail)?u.detail:[])})}function o(i){n.dispatch(t,i,ro(arguments,1))}return e&&e.event.on(Sc,n.destroy),Ts(n,{bus:t,on:r,off:Xe(n.unbind,t),emit:o})}function Ic(e,t,n,r){var o=Date.now,i,a=0,u,d=!0,h=0;function m(){if(!d){if(a=e?no((o()-i)/e,1):1,n&&n(a),a>=1&&(t(),i=o(),r&&++h>=r))return x();u=Sm(m)}}function w(z){z||I(),i=o()-(z?a*e:0),d=!1,u=Sm(m)}function x(){d=!0}function P(){i=o(),a=0,n&&n(a)}function I(){u&&cancelAnimationFrame(u),a=0,u=0,d=!0}function S(z){e=z}function N(){return d}return{start:w,rewind:P,pause:x,cancel:I,set:S,isPaused:N}}function E8(e){var t=e;function n(o){t=o}function r(o){return Ud(Ns(o),t)}return{set:n,is:r}}function x8(e,t){var n=Ic(t||0,e,null,1);return function(){n.isPaused()&&n.start()}}function k8(e,t,n){var r=e.state,o=n.breakpoints||{},i=n.reducedMotion||{},a=Wm(),u=[];function d(){var I=n.mediaQuery==="min";$s(o).sort(function(S,N){return I?+S-+N:+N-+S}).forEach(function(S){m(o[S],"("+(I?"min":"max")+"-width:"+S+"px)")}),m(i,km),w()}function h(I){I&&a.destroy()}function m(I,S){var N=matchMedia(S);a.bind(N,"change",w),u.push([I,N])}function w(){var I=r.is(mc),S=n.direction,N=u.reduce(function(z,B){return eo(z,B[1].matches?B[0]:{})},{});Am(n),P(N),n.destroy?e.destroy(n.destroy==="completely"):I?(h(!0),e.mount()):S!==n.direction&&e.refresh()}function x(I){matchMedia(km).matches&&(I?eo(n,i):Am(n,$s(i)))}function P(I,S,N){eo(n,I),S&&eo(Object.getPrototypeOf(n),I),(N||!r.is(ki))&&e.emit(Ut,n)}return{setup:d,destroy:h,reduce:x,set:P}}var Nc="Arrow",Oc=Nc+"Left",Rc=Nc+"Right",Gm=Nc+"Up",Zm=Nc+"Down";var Lm="rtl",Uc="ttb",Sd={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[Gm,Rc],ArrowRight:[Zm,Oc]};function S8(e,t,n){function r(i,a,u){u=u||n.direction;var d=u===Lm&&!a?1:u===Uc?0:-1;return Sd[i]&&Sd[i][d]||i.replace(/width|left|right/i,function(h,m){var w=Sd[h.toLowerCase()][d]||h;return m>0?w.charAt(0).toUpperCase()+w.slice(1):w})}function o(i){return i*(n.direction===Lm?1:-1)}return{resolve:r,orient:o}}var _r="role",Ai="tabindex",A8="disabled",Nn="aria-",Hs=Nn+"controls",Ym=Nn+"current",Cm=Nn+"selected",bn=Nn+"label",qd=Nn+"labelledby",Jm=Nn+"hidden",Wd=Nn+"orientation",Cs=Nn+"roledescription",Pm=Nn+"live",Im=Nn+"busy",Nm=Nn+"atomic",Qd=[_r,Ai,A8,Hs,Ym,bn,qd,Jm,Wd,Cs],Zn=Us+"__",so="is-",Ad=Us,Om=Zn+"track",$8=Zn+"list",zc=Zn+"slide",Xm=zc+"--clone",T8=zc+"__container",Kd=Zn+"arrows",Mc=Zn+"arrow",e0=Mc+"--prev",t0=Mc+"--next",Dc=Zn+"pagination",n0=Dc+"__page",B8=Zn+"progress",L8=B8+"__bar",Gd=Zn+"toggle",LB=Gd+"__play",CB=Gd+"__pause",C8=Zn+"spinner",P8=Zn+"sr",I8=so+"initialized",Ko=so+"active",r0=so+"prev",o0=so+"next",Id=so+"visible",Nd=so+"loading",i0=so+"focus-in",s0=so+"overflow",N8=[Ko,Id,r0,o0,Nd,i0,s0],O8={slide:zc,clone:Xm,arrows:Kd,arrow:Mc,prev:e0,next:t0,pagination:Dc,page:n0,spinner:C8};function R8(e,t){if(Mm(e.closest))return e.closest(t);for(var n=e;n&&n.nodeType===1&&!As(n,t);)n=n.parentElement;return n}var U8=5,Rm=200,a0="touchstart mousedown",$d="touchmove mousemove",Td="touchend touchcancel mouseup click";function z8(e,t,n){var r=rt(e),o=r.on,i=r.bind,a=e.root,u=n.i18n,d={},h=[],m=[],w=[],x,P,I;function S(){f(),p(),B()}function N(){o(mt,z),o(mt,S),o(Ut,B),i(document,a0+" keydown",function(k){I=k.type==="keydown"},{capture:!0}),i(a,"focusin",function(){yr(a,i0,!!I)})}function z(k){var A=Qd.concat("style");Er(h),vr(a,m),vr(x,w),Gn([x,P],A),Gn(a,k?A:["style",Cs])}function B(){vr(a,m),vr(x,w),m=v(Ad),w=v(Om),Kn(a,m),Kn(x,w),Fe(a,bn,n.label),Fe(a,qd,n.labelledby)}function f(){x=b("."+Om),P=Rs(x,"."+$8),xs(x&&P,"A track/list element is missing."),hc(h,Fm(P,"."+zc+":not(."+Xm+")")),qo({arrows:Kd,pagination:Dc,prev:e0,next:t0,bar:L8,toggle:Gd},function(k,A){d[A]=b("."+k)}),Ts(d,{root:a,track:x,list:P,slides:h})}function p(){var k=a.id||v8(Us),A=n.role;a.id=k,x.id=x.id||k+"-track",P.id=P.id||k+"-list",!Pn(a,_r)&&a.tagName!=="SECTION"&&A&&Fe(a,_r,A),Fe(a,Cs,u.carousel),Fe(P,_r,"presentation")}function b(k){var A=Vm(a,k);return A&&R8(A,"."+Ad)===a?A:void 0}function v(k){return[k+"--"+n.type,k+"--"+n.direction,n.drag&&k+"--draggable",n.isNavigation&&k+"--nav",k===Ad&&Ko]}return Ts(d,{setup:S,mount:N,destroy:z})}var Ti="slide",Li="loop",Vs="fade";function M8(e,t,n,r){var o=rt(e),i=o.on,a=o.emit,u=o.bind,d=e.Components,h=e.root,m=e.options,w=m.isNavigation,x=m.updateOnMove,P=m.i18n,I=m.pagination,S=m.slideFocus,N=d.Direction.resolve,z=Pn(r,"style"),B=Pn(r,bn),f=n>-1,p=Rs(r,"."+T8),b;function v(){f||(r.id=h.id+"-slide"+Fd(t+1),Fe(r,_r,I?"tabpanel":"group"),Fe(r,Cs,P.slide),Fe(r,bn,B||Pd(P.slideLabel,[t+1,e.length]))),k()}function k(){u(r,"click",Xe(a,zs,K)),u(r,"keydown",Xe(a,Qm,K)),i([oo,Km,io],C),i(Fs,T),x&&i(In,U)}function A(){b=!0,o.destroy(),vr(r,N8),Gn(r,Qd),Fe(r,"style",z),Fe(r,bn,B||"")}function T(){var Z=e.splides.map(function(W){var J=W.splide.Components.Slides.getAt(t);return J?J.slide.id:""}).join(" ");Fe(r,bn,Pd(P.slideX,(f?n:t)+1)),Fe(r,Hs,Z),Fe(r,_r,S?"button":""),S&&Gn(r,Cs)}function U(){b||C()}function C(){if(!b){var Z=e.index;$(),F(),yr(r,r0,t===Z-1),yr(r,o0,t===Z+1)}}function $(){var Z=E();Z!==$m(r,Ko)&&(yr(r,Ko,Z),Fe(r,Ym,w&&Z||""),a(Z?_c:Ec,K))}function F(){var Z=M(),W=!Z&&(!E()||f);if(e.state.is([Bi,Ps])||Fe(r,Jm,W||""),Fe(Md(r,m.focusableNodes||""),Ai,W?-1:""),S&&Fe(r,Ai,W?-1:0),Z!==$m(r,Id)&&(yr(r,Id,Z),a(Z?xc:kc,K)),!Z&&document.activeElement===r){var J=d.Slides.getAt(e.index);J&&jm(J.slide)}}function q(Z,W,J){Cn(J&&p||r,Z,W)}function E(){var Z=e.index;return Z===t||m.cloneStatus&&Z===n}function M(){if(e.is(Vs))return E();var Z=mn(d.Elements.track),W=mn(r),J=N("left",!0),ue=N("right",!0);return wc(Z[J])<=Ls(W[J])&&wc(W[ue])<=Ls(Z[ue])}function V(Z,W){var J=en(Z-t);return!f&&(m.rewind||e.is(Li))&&(J=no(J,e.length-J)),J<=W}var K={index:t,slideIndex:n,slide:r,container:p,isClone:f,mount:v,destroy:A,update:C,style:q,isWithin:V};return K}function D8(e,t,n){var r=rt(e),o=r.on,i=r.emit,a=r.bind,u=t.Elements,d=u.slides,h=u.list,m=[];function w(){x(),o(mt,P),o(mt,x)}function x(){d.forEach(function(C,$){S(C,$,-1)})}function P(){b(function(C){C.destroy()}),Er(m)}function I(){b(function(C){C.update()})}function S(C,$,F){var q=M8(e,$,F,C);q.mount(),m.push(q),m.sort(function(E,M){return E.index-M.index})}function N(C){return C?v(function($){return!$.isClone}):m}function z(C){var $=t.Controller,F=$.toIndex(C),q=$.hasFocus()?1:n.perPage;return v(function(E){return pc(E.index,F,F+q-1)})}function B(C){return v(C)[0]}function f(C,$){wn(C,function(F){if(to(F)&&(F=Hm(F)),Dm(F)){var q=d[$];q?zd(F,q):Os(h,F),Kn(F,n.classes.slide),A(F,Xe(i,Qo))}}),i(mt)}function p(C){Wo(v(C).map(function($){return $.slide})),i(mt)}function b(C,$){N($).forEach(C)}function v(C){return m.filter(Mm(C)?C:function($){return to(C)?As($.slide,C):Ud(Ns(C),$.index)})}function k(C,$,F){b(function(q){q.style(C,$,F)})}function A(C,$){var F=Md(C,"img"),q=F.length;q?F.forEach(function(E){a(E,"load error",function(){--q||$()})}):$()}function T(C){return C?d.length:m.length}function U(){return m.length>n.perPage}return{mount:w,destroy:P,update:I,register:S,get:N,getIn:z,getAt:B,add:f,remove:p,forEach:b,filter:v,style:k,getLength:T,isEnough:U}}function F8(e,t,n){var r=rt(e),o=r.on,i=r.bind,a=r.emit,u=t.Slides,d=t.Direction.resolve,h=t.Elements,m=h.root,w=h.track,x=h.list,P=u.getAt,I=u.style,S,N,z;function B(){f(),i(window,"resize load",x8(Xe(a,Qo))),o([Ut,mt],f),o(Qo,p)}function f(){S=n.direction===Uc,Cn(m,"maxWidth",Vo(n.width)),Cn(w,d("paddingLeft"),b(!1)),Cn(w,d("paddingRight"),b(!0)),p(!0)}function p(K){var Z=mn(m);(K||N.width!==Z.width||N.height!==Z.height)&&(Cn(w,"height",v()),I(d("marginRight"),Vo(n.gap)),I("width",A()),I("height",T(),!0),N=Z,a(Ms),z!==(z=V())&&(yr(m,s0,z),a(_8,z)))}function b(K){var Z=n.padding,W=d(K?"right":"left");return Z&&Vo(Z[W]||(Ss(Z)?0:Z))||"0px"}function v(){var K="";return S&&(K=k(),xs(K,"height or heightRatio is missing."),K="calc("+K+" - "+b(!1)+" - "+b(!0)+")"),K}function k(){return Vo(n.height||mn(x).width*n.heightRatio)}function A(){return n.autoWidth?null:Vo(n.fixedWidth)||(S?"":U())}function T(){return Vo(n.fixedHeight)||(S?n.autoHeight?null:U():k())}function U(){var K=Vo(n.gap);return"calc((100%"+(K&&" + "+K)+")/"+(n.perPage||1)+(K&&" - "+K)+")"}function C(){return mn(x)[d("width")]}function $(K,Z){var W=P(K||0);return W?mn(W.slide)[d("width")]+(Z?0:E()):0}function F(K,Z){var W=P(K);if(W){var J=mn(W.slide)[d("right")],ue=mn(x)[d("left")];return en(J-ue)+(Z?0:E())}return 0}function q(K){return F(e.length-1)-F(0)+$(0,K)}function E(){var K=P(0);return K&&parseFloat(Cn(K.slide,d("marginRight")))||0}function M(K){return parseFloat(Cn(w,d("padding"+(K?"Right":"Left"))))||0}function V(){return e.is(Vs)||q(!0)>C()}return{mount:B,resize:p,listSize:C,slideSize:$,sliderSize:q,totalSize:F,getPadding:M,isOverflow:V}}var j8=2;function H8(e,t,n){var r=rt(e),o=r.on,i=t.Elements,a=t.Slides,u=t.Direction.resolve,d=[],h;function m(){o(mt,w),o([Ut,Qo],P),(h=N())&&(I(h),t.Layout.resize(!0))}function w(){x(),m()}function x(){Wo(d),Er(d),r.destroy()}function P(){var z=N();h!==z&&(h<z||!z)&&r.emit(mt)}function I(z){var B=a.get().slice(),f=B.length;if(f){for(;B.length<z;)hc(B,B);hc(B.slice(-z),B.slice(0,z)).forEach(function(p,b){var v=b<z,k=S(p.slide,b);v?zd(k,B[0].slide):Os(i.list,k),hc(d,k),a.register(k,b-z+(v?0:f),p.index)})}}function S(z,B){var f=z.cloneNode(!0);return Kn(f,n.classes.clone),f.id=e.root.id+"-clone"+Fd(B+1),f}function N(){var z=n.clones;if(!e.is(Li))z=0;else if(Is(z)){var B=n[u("fixedWidth")]&&t.Layout.slideSize(0),f=B&&Ls(mn(i.track)[u("width")]/B);z=f||n[u("autoWidth")]&&e.length||n.perPage*j8}return z}return{mount:m,destroy:x}}function V8(e,t,n){var r=rt(e),o=r.on,i=r.emit,a=e.state.set,u=t.Layout,d=u.slideSize,h=u.getPadding,m=u.totalSize,w=u.listSize,x=u.sliderSize,P=t.Direction,I=P.resolve,S=P.orient,N=t.Elements,z=N.list,B=N.track,f;function p(){f=t.Transition,o([xr,Ms,Ut,mt],b)}function b(){t.Controller.isBusy()||(t.Scroll.cancel(),k(e.index),t.Slides.update())}function v(W,J,ue,_e){W!==J&&K(W>ue)&&(C(),A(U(q(),W>ue),!0)),a(Bi),i(In,J,ue,W),f.start(J,function(){a($i),i(oo,J,ue,W),_e&&_e()})}function k(W){A(F(W,!0))}function A(W,J){if(!e.is(Vs)){var ue=J?W:T(W);Cn(z,"transform","translate"+I("X")+"("+ue+"px)"),W!==ue&&i(Km)}}function T(W){if(e.is(Li)){var J=$(W),ue=J>t.Controller.getEnd(),_e=J<0;(_e||ue)&&(W=U(W,ue))}return W}function U(W,J){var ue=W-V(J),_e=x();return W-=S(_e*(Ls(en(ue)/_e)||1))*(J?1:-1),W}function C(){A(q(),!0),f.cancel()}function $(W){for(var J=t.Slides.get(),ue=0,_e=1/0,ve=0;ve<J.length;ve++){var Pe=J[ve].index,oe=en(F(Pe,!0)-W);if(oe<=_e)_e=oe,ue=Pe;else break}return ue}function F(W,J){var ue=S(m(W-1)-M(W));return J?E(ue):ue}function q(){var W=I("left");return mn(z)[W]-mn(B)[W]+S(h(!1))}function E(W){return n.trimSpace&&e.is(Ti)&&(W=Ei(W,0,S(x(!0)-w()))),W}function M(W){var J=n.focus;return J==="center"?(w()-d(W,!0))/2:+J*d(W)||0}function V(W){return F(W?t.Controller.getEnd():0,!!n.trimSpace)}function K(W){var J=S(U(q(),W));return W?J>=0:J<=z[I("scrollWidth")]-mn(B)[I("width")]}function Z(W,J){J=Is(J)?q():J;var ue=W!==!0&&S(J)<S(V(!1)),_e=W!==!1&&S(J)>S(V(!0));return ue||_e}return{mount:p,move:v,jump:k,translate:A,shift:U,cancel:C,toIndex:$,toPosition:F,getPosition:q,getLimit:V,exceededLimit:Z,reposition:b}}function q8(e,t,n){var r=rt(e),o=r.on,i=r.emit,a=t.Move,u=a.getPosition,d=a.getLimit,h=a.toPosition,m=t.Slides,w=m.isEnough,x=m.getLength,P=n.omitEnd,I=e.is(Li),S=e.is(Ti),N=Xe(q,!1),z=Xe(q,!0),B=n.start||0,f,p=B,b,v,k;function A(){T(),o([Ut,mt,yc],T),o(Ms,U)}function T(){b=x(!0),v=n.perMove,k=n.perPage,f=K();var oe=Ei(B,0,P?f:b-1);oe!==B&&(B=oe,a.reposition())}function U(){f!==K()&&i(yc)}function C(oe,Se,Ve){if(!Pe()){var Re=F(oe),je=V(Re);je>-1&&(Se||je!==B)&&(ue(je),a.move(Re,je,p,Ve))}}function $(oe,Se,Ve,Re){t.Scroll.scroll(oe,Se,Ve,function(){var je=V(a.toIndex(u()));ue(P?no(je,f):je),Re&&Re()})}function F(oe){var Se=B;if(to(oe)){var Ve=oe.match(/([+\-<>])(\d+)?/)||[],Re=Ve[1],je=Ve[2];Re==="+"||Re==="-"?Se=E(B+ +(""+Re+(+je||1)),B):Re===">"?Se=je?Z(+je):N(!0):Re==="<"&&(Se=z(!0))}else Se=I?oe:Ei(oe,0,f);return Se}function q(oe,Se){var Ve=v||(ve()?1:k),Re=E(B+Ve*(oe?-1:1),B,!(v||ve()));return Re===-1&&S&&!qm(u(),d(!oe),1)?oe?0:f:Se?Re:V(Re)}function E(oe,Se,Ve){if(w()||ve()){var Re=M(oe);Re!==oe&&(Se=oe,oe=Re,Ve=!1),oe<0||oe>f?!v&&(pc(0,oe,Se,!0)||pc(f,Se,oe,!0))?oe=Z(W(oe)):I?oe=Ve?oe<0?-(b%k||k):b:oe:n.rewind?oe=oe<0?f:0:oe=-1:Ve&&oe!==Se&&(oe=Z(W(Se)+(oe<Se?-1:1)))}else oe=-1;return oe}function M(oe){if(S&&n.trimSpace==="move"&&oe!==B)for(var Se=u();Se===h(oe,!0)&&pc(oe,0,e.length-1,!n.rewind);)oe<B?--oe:++oe;return oe}function V(oe){return I?(oe+b)%b||0:oe}function K(){for(var oe=b-(ve()||I&&v?1:k);P&&oe-- >0;)if(h(b-1,!0)!==h(oe,!0)){oe++;break}return Ei(oe,0,b-1)}function Z(oe){return Ei(ve()?oe:k*oe,0,f)}function W(oe){return ve()?no(oe,f):wc((oe>=f?b-1:oe)/k)}function J(oe){var Se=a.toIndex(oe);return S?Ei(Se,0,f):Se}function ue(oe){oe!==B&&(p=B,B=oe)}function _e(oe){return oe?p:B}function ve(){return!Is(n.focus)||n.isNavigation}function Pe(){return e.state.is([Bi,Ps])&&!!n.waitForTransition}return{mount:A,go:C,scroll:$,getNext:N,getPrev:z,getAdjacent:q,getEnd:K,setIndex:ue,getIndex:_e,toIndex:Z,toPage:W,toDest:J,hasFocus:ve,isBusy:Pe}}var W8="http://www.w3.org/2000/svg",Q8="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z",dc=40;function K8(e,t,n){var r=rt(e),o=r.on,i=r.bind,a=r.emit,u=n.classes,d=n.i18n,h=t.Elements,m=t.Controller,w=h.arrows,x=h.track,P=w,I=h.prev,S=h.next,N,z,B={};function f(){b(),o(Ut,p)}function p(){v(),f()}function b(){var $=n.arrows;$&&!(I&&S)&&T(),I&&S&&(Ts(B,{prev:I,next:S}),Bs(P,$?"":"none"),Kn(P,z=Kd+"--"+n.direction),$&&(k(),C(),Fe([I,S],Hs,x.id),a(Ac,I,S)))}function v(){r.destroy(),vr(P,z),N?(Wo(w?[I,S]:P),I=S=null):Gn([I,S],Qd)}function k(){o([xr,oo,mt,io,yc],C),i(S,"click",Xe(A,">")),i(I,"click",Xe(A,"<"))}function A($){m.go($,!0)}function T(){P=w||Si("div",u.arrows),I=U(!0),S=U(!1),N=!0,Os(P,[I,S]),!w&&zd(P,x)}function U($){var F='<button class="'+u.arrow+" "+($?u.prev:u.next)+'" type="button"><svg xmlns="'+W8+'" viewBox="0 0 '+dc+" "+dc+'" width="'+dc+'" height="'+dc+'" focusable="false"><path d="'+(n.arrowPath||Q8)+'" />';return Hm(F)}function C(){if(I&&S){var $=e.index,F=m.getPrev(),q=m.getNext(),E=F>-1&&$<F?d.last:d.prev,M=q>-1&&$>q?d.first:d.next;I.disabled=F<0,S.disabled=q<0,Fe(I,bn,E),Fe(S,bn,M),a($c,I,S,F,q)}}return{arrows:B,mount:f,destroy:v,update:C}}var G8=Dd+"-interval";function Z8(e,t,n){var r=rt(e),o=r.on,i=r.bind,a=r.emit,u=Ic(n.interval,e.go.bind(e,">"),k),d=u.isPaused,h=t.Elements,m=t.Elements,w=m.root,x=m.toggle,P=n.autoplay,I,S,N=P==="pause";function z(){P&&(B(),x&&Fe(x,Hs,h.track.id),N||f(),v())}function B(){n.pauseOnHover&&i(w,"mouseenter mouseleave",function(T){I=T.type==="mouseenter",b()}),n.pauseOnFocus&&i(w,"focusin focusout",function(T){S=T.type==="focusin",b()}),x&&i(x,"click",function(){N?f():p(!0)}),o([In,Ds,mt],u.rewind),o(In,A)}function f(){d()&&t.Slides.isEnough()&&(u.start(!n.resetProgress),S=I=N=!1,v(),a(Lc))}function p(T){T===void 0&&(T=!0),N=!!T,v(),d()||(u.pause(),a(Pc))}function b(){N||(I||S?p(!1):f())}function v(){x&&(yr(x,Ko,!N),Fe(x,bn,n.i18n[N?"play":"pause"]))}function k(T){var U=h.bar;U&&Cn(U,"width",T*100+"%"),a(Cc,T)}function A(T){var U=t.Slides.getAt(T);u.set(U&&+Pn(U.slide,G8)||n.interval)}return{mount:z,destroy:u.cancel,play:f,pause:p,isPaused:d}}function Y8(e,t,n){var r=rt(e),o=r.on;function i(){n.cover&&(o(js,Xe(u,!0)),o([xr,Ut,mt],Xe(a,!0)))}function a(d){t.Slides.forEach(function(h){var m=Rs(h.container||h.slide,"img");m&&m.src&&u(d,m,h)})}function u(d,h,m){m.style("background",d?'center/cover no-repeat url("'+h.src+'")':"",!0),Bs(h,d?"none":"")}return{mount:i,destroy:Xe(a,!1)}}var J8=10,X8=600,eE=.6,tE=1.5,nE=800;function rE(e,t,n){var r=rt(e),o=r.on,i=r.emit,a=e.state.set,u=t.Move,d=u.getPosition,h=u.getLimit,m=u.exceededLimit,w=u.translate,x=e.is(Ti),P,I,S=1;function N(){o(In,p),o([Ut,mt],b)}function z(k,A,T,U,C){var $=d();if(p(),T&&(!x||!m())){var F=t.Layout.sliderSize(),q=Cd(k)*F*wc(en(k)/F)||0;k=u.toPosition(t.Controller.toDest(k%F))+q}var E=qm($,k,1);S=1,A=E?0:A||bc(en(k-$)/tE,nE),I=U,P=Ic(A,B,Xe(f,$,k,C),1),a(Ps),i(Ds),P.start()}function B(){a($i),I&&I(),i(io)}function f(k,A,T,U){var C=d(),$=k+(A-k)*v(U),F=($-C)*S;w(C+F),x&&!T&&m()&&(S*=eE,en(F)<J8&&z(h(m(!0)),X8,!1,I,!0))}function p(){P&&P.cancel()}function b(){P&&!P.isPaused()&&(p(),B())}function v(k){var A=n.easingFunc;return A?A(k):1-Math.pow(1-k,4)}return{mount:N,destroy:p,scroll:z,cancel:b}}var xi={passive:!1,capture:!0};function oE(e,t,n){var r=rt(e),o=r.on,i=r.emit,a=r.bind,u=r.unbind,d=e.state,h=t.Move,m=t.Scroll,w=t.Controller,x=t.Elements.track,P=t.Media.reduce,I=t.Direction,S=I.resolve,N=I.orient,z=h.getPosition,B=h.exceededLimit,f,p,b,v,k,A=!1,T,U,C;function $(){a(x,$d,Bd,xi),a(x,Td,Bd,xi),a(x,a0,q,xi),a(x,"click",V,{capture:!0}),a(x,"dragstart",wr),o([xr,Ut],F)}function F(){var de=n.drag;Qe(!de),v=de==="free"}function q(de){if(T=!1,!U){var De=je(de);Re(de.target)&&(De||!de.button)&&(w.isBusy()?wr(de,!0):(C=De?x:window,k=d.is([Bi,Ps]),b=null,a(C,$d,E,xi),a(C,Td,M,xi),h.cancel(),m.cancel(),K(de)))}}function E(de){if(d.is(fc)||(d.set(fc),i(jd)),de.cancelable)if(k){h.translate(f+Ve(ve(de)));var De=Pe(de)>Rm,Ce=A!==(A=B());(De||Ce)&&K(de),T=!0,i(Hd),wr(de)}else J(de)&&(k=W(de),wr(de))}function M(de){d.is(fc)&&(d.set($i),i(Vd)),k&&(Z(de),wr(de)),u(C,$d,E),u(C,Td,M),k=!1}function V(de){!U&&T&&wr(de,!0)}function K(de){b=p,p=de,f=z()}function Z(de){var De=ue(de),Ce=_e(De),Ie=n.rewind&&n.rewindByDrag;P(!1),v?w.scroll(Ce,0,n.snap):e.is(Vs)?w.go(N(Cd(De))<0?Ie?"<":"-":Ie?">":"+"):e.is(Ti)&&A&&Ie?w.go(B(!0)?">":"<"):w.go(w.toDest(Ce),!0),P(!0)}function W(de){var De=n.dragMinThreshold,Ce=Ss(De),Ie=Ce&&De.mouse||0,qe=(Ce?De.touch:+De)||10;return en(ve(de))>(je(de)?qe:Ie)}function J(de){return en(ve(de))>en(ve(de,!0))}function ue(de){if(e.is(Li)||!A){var De=Pe(de);if(De&&De<Rm)return ve(de)/De}return 0}function _e(de){return z()+Cd(de)*no(en(de)*(n.flickPower||600),v?1/0:t.Layout.listSize()*(n.flickMaxPages||1))}function ve(de,De){return Se(de,De)-Se(oe(de),De)}function Pe(de){return Ld(de)-Ld(oe(de))}function oe(de){return p===de&&b||p}function Se(de,De){return(je(de)?de.changedTouches[0]:de)["page"+S(De?"Y":"X")]}function Ve(de){return de/(A&&e.is(Ti)?U8:1)}function Re(de){var De=n.noDrag;return!As(de,"."+n0+", ."+Mc)&&(!De||!As(de,De))}function je(de){return typeof TouchEvent<"u"&&de instanceof TouchEvent}function xt(){return k}function Qe(de){U=de}return{mount:$,disable:Qe,isDragging:xt}}var iE={Spacebar:" ",Right:Rc,Left:Oc,Up:Gm,Down:Zm};function Zd(e){return e=to(e)?e:e.key,iE[e]||e}var Um="keydown";function sE(e,t,n){var r=rt(e),o=r.on,i=r.bind,a=r.unbind,u=e.root,d=t.Direction.resolve,h,m;function w(){x(),o(Ut,P),o(Ut,x),o(In,S)}function x(){var z=n.keyboard;z&&(h=z==="global"?window:u,i(h,Um,N))}function P(){a(h,Um)}function I(z){m=z}function S(){var z=m;m=!0,zm(function(){m=z})}function N(z){if(!m){var B=Zd(z);B===d(Oc)?e.go("<"):B===d(Rc)&&e.go(">")}}return{mount:w,destroy:P,disable:I}}var ks=Dd+"-lazy",gc=ks+"-srcset",aE="["+ks+"], ["+gc+"]";function cE(e,t,n){var r=rt(e),o=r.on,i=r.off,a=r.bind,u=r.emit,d=n.lazyLoad==="sequential",h=[oo,io],m=[];function w(){n.lazyLoad&&(x(),o(mt,x))}function x(){Er(m),P(),d?z():(i(h),o(h,I),I())}function P(){t.Slides.forEach(function(B){Md(B.slide,aE).forEach(function(f){var p=Pn(f,ks),b=Pn(f,gc);if(p!==f.src||b!==f.srcset){var v=n.classes.spinner,k=f.parentElement,A=Rs(k,"."+v)||Si("span",v,k);m.push([f,B,A]),f.src||Bs(f,"none")}})})}function I(){m=m.filter(function(B){var f=n.perPage*((n.preloadPages||1)+1)-1;return B[1].isWithin(e.index,f)?S(B):!0}),m.length||i(h)}function S(B){var f=B[0];Kn(B[1].slide,Nd),a(f,"load error",Xe(N,B)),Fe(f,"src",Pn(f,ks)),Fe(f,"srcset",Pn(f,gc)),Gn(f,ks),Gn(f,gc)}function N(B,f){var p=B[0],b=B[1];vr(b.slide,Nd),f.type!=="error"&&(Wo(B[2]),Bs(p,""),u(js,p,b),u(Qo)),d&&z()}function z(){m.length&&S(m.shift())}return{mount:w,destroy:Xe(Er,m),check:I}}function uE(e,t,n){var r=rt(e),o=r.on,i=r.emit,a=r.bind,u=t.Slides,d=t.Elements,h=t.Controller,m=h.hasFocus,w=h.getIndex,x=h.go,P=t.Direction.resolve,I=d.pagination,S=[],N,z;function B(){f(),o([Ut,mt,yc],B);var U=n.pagination;I&&Bs(I,U?"":"none"),U&&(o([In,Ds,io],T),p(),T(),i(Tc,{list:N,items:S},A(e.index)))}function f(){N&&(Wo(I?ro(N.children):N),vr(N,z),Er(S),N=null),r.destroy()}function p(){var U=e.length,C=n.classes,$=n.i18n,F=n.perPage,q=m()?h.getEnd()+1:Ls(U/F);N=I||Si("ul",C.pagination,d.track.parentElement),Kn(N,z=Dc+"--"+k()),Fe(N,_r,"tablist"),Fe(N,bn,$.select),Fe(N,Wd,k()===Uc?"vertical":"");for(var E=0;E<q;E++){var M=Si("li",null,N),V=Si("button",{class:C.page,type:"button"},M),K=u.getIn(E).map(function(W){return W.slide.id}),Z=!m()&&F>1?$.pageX:$.slideX;a(V,"click",Xe(b,E)),n.paginationKeyboard&&a(V,"keydown",Xe(v,E)),Fe(M,_r,"presentation"),Fe(V,_r,"tab"),Fe(V,Hs,K.join(" ")),Fe(V,bn,Pd(Z,E+1)),Fe(V,Ai,-1),S.push({li:M,button:V,page:E})}}function b(U){x(">"+U,!0)}function v(U,C){var $=S.length,F=Zd(C),q=k(),E=-1;F===P(Rc,!1,q)?E=++U%$:F===P(Oc,!1,q)?E=(--U+$)%$:F==="Home"?E=0:F==="End"&&(E=$-1);var M=S[E];M&&(jm(M.button),x(">"+E),wr(C,!0))}function k(){return n.paginationDirection||n.direction}function A(U){return S[h.toPage(U)]}function T(){var U=A(w(!0)),C=A(w());if(U){var $=U.button;vr($,Ko),Gn($,Cm),Fe($,Ai,-1)}if(C){var F=C.button;Kn(F,Ko),Fe(F,Cm,!0),Fe(F,Ai,"")}i(Bc,{list:N,items:S},U,C)}return{items:S,mount:B,destroy:f,getAt:A,update:T}}var lE=[" ","Enter"];function dE(e,t,n){var r=n.isNavigation,o=n.slideFocus,i=[];function a(){e.splides.forEach(function(I){I.isParent||(h(e,I.splide),h(I.splide,e))}),r&&m()}function u(){i.forEach(function(I){I.destroy()}),Er(i)}function d(){u(),a()}function h(I,S){var N=rt(I);N.on(In,function(z,B,f){S.go(S.is(Li)?f:z)}),i.push(N)}function m(){var I=rt(e),S=I.on;S(zs,x),S(Qm,P),S([xr,Ut],w),i.push(I),I.emit(Fs,e.splides)}function w(){Fe(t.Elements.list,Wd,n.direction===Uc?"vertical":"")}function x(I){e.go(I.index)}function P(I,S){Ud(lE,Zd(S))&&(x(I),wr(S))}return{setup:Xe(t.Media.set,{slideFocus:Is(o)?r:o},!0),mount:a,destroy:u,remount:d}}function fE(e,t,n){var r=rt(e),o=r.bind,i=0;function a(){n.wheel&&o(t.Elements.track,"wheel",u,xi)}function u(h){if(h.cancelable){var m=h.deltaY,w=m<0,x=Ld(h),P=n.wheelMinThreshold||0,I=n.wheelSleep||0;en(m)>P&&x-i>I&&(e.go(w?"<":">"),i=x),d(w)&&wr(h)}}function d(h){return!n.releaseWheel||e.state.is(Bi)||t.Controller.getAdjacent(h)!==-1}return{mount:a}}var hE=90;function pE(e,t,n){var r=rt(e),o=r.on,i=t.Elements.track,a=n.live&&!n.isNavigation,u=Si("span",P8),d=Ic(hE,Xe(m,!1));function h(){a&&(x(!t.Autoplay.isPaused()),Fe(i,Nm,!0),u.textContent="\u2026",o(Lc,Xe(x,!0)),o(Pc,Xe(x,!1)),o([oo,io],Xe(m,!0)))}function m(P){Fe(i,Im,P),P?(Os(i,u),d.start()):(Wo(u),d.cancel())}function w(){Gn(i,[Pm,Nm,Im]),Wo(u)}function x(P){a&&Fe(i,Pm,P?"off":"polite")}return{mount:h,disable:x,destroy:w}}var gE=Object.freeze({__proto__:null,Media:k8,Direction:S8,Elements:z8,Slides:D8,Layout:F8,Clones:H8,Move:V8,Controller:q8,Arrows:K8,Autoplay:Z8,Cover:Y8,Scroll:rE,Drag:oE,Keyboard:sE,LazyLoad:cE,Pagination:uE,Sync:dE,Wheel:fE,Live:pE}),mE={prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},bE={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:O8,i18n:mE,reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function wE(e,t,n){var r=t.Slides;function o(){rt(e).on([xr,mt],i)}function i(){r.forEach(function(u){u.style("transform","translateX(-"+100*u.index+"%)")})}function a(u,d){r.style("transition","opacity "+n.speed+"ms "+n.easing),zm(d)}return{mount:o,start:a,cancel:Bd}}function yE(e,t,n){var r=t.Move,o=t.Controller,i=t.Scroll,a=t.Elements.list,u=Xe(Cn,a,"transition"),d;function h(){rt(e).bind(a,"transitionend",function(P){P.target===a&&d&&(w(),d())})}function m(P,I){var S=r.toPosition(P,!0),N=r.getPosition(),z=x(P);en(S-N)>=1&&z>=1?n.useScroll?i.scroll(S,z,!1,I):(u("transform "+z+"ms "+n.easing),r.translate(S,!0),d=I):(r.jump(P),I())}function w(){u(""),i.cancel()}function x(P){var I=n.rewindSpeed;if(e.is(Ti)&&I){var S=o.getIndex(!0),N=o.getEnd();if(S===0&&P>=N||S>=N&&P===0)return I}return n.speed}return{mount:h,start:m,cancel:w}}var vE=function(){function e(n,r){this.event=rt(),this.Components={},this.state=E8(ki),this.splides=[],this._o={},this._E={};var o=to(n)?Vm(document,n):n;xs(o,o+" is invalid."),this.root=o,r=eo({label:Pn(o,bn)||"",labelledby:Pn(o,qd)||""},bE,e.defaults,r||{});try{eo(r,JSON.parse(Pn(o,Dd)))}catch{xs(!1,"Invalid JSON")}this._o=Object.create(eo({},r))}var t=e.prototype;return t.mount=function(r,o){var i=this,a=this.state,u=this.Components;xs(a.is([ki,mc]),"Already mounted!"),a.set(ki),this._C=u,this._T=o||this._T||(this.is(Vs)?wE:yE),this._E=r||this._E;var d=Ts({},gE,this._E,{Transition:this._T});return qo(d,function(h,m){var w=h(i,u,i._o);u[m]=w,w.setup&&w.setup()}),qo(u,function(h){h.mount&&h.mount()}),this.emit(xr),Kn(this.root,I8),a.set($i),this.emit(Bm),this},t.sync=function(r){return this.splides.push({splide:r}),r.splides.push({splide:this,isParent:!0}),this.state.is($i)&&(this._C.Sync.remount(),r.Components.Sync.remount()),this},t.go=function(r){return this._C.Controller.go(r),this},t.on=function(r,o){return this.event.on(r,o),this},t.off=function(r){return this.event.off(r),this},t.emit=function(r){var o;return(o=this.event).emit.apply(o,[r].concat(ro(arguments,1))),this},t.add=function(r,o){return this._C.Slides.add(r,o),this},t.remove=function(r){return this._C.Slides.remove(r),this},t.is=function(r){return this._o.type===r},t.refresh=function(){return this.emit(mt),this},t.destroy=function(r){r===void 0&&(r=!0);var o=this.event,i=this.state;return i.is(ki)?rt(this).on(Bm,this.destroy.bind(this,r)):(qo(this._C,function(a){a.destroy&&a.destroy(r)},!0),o.emit(Sc),o.destroy(),r&&Er(this.splides),i.set(mc)),this},b8(e,[{key:"options",get:function(){return this._o},set:function(r){this._C.Media.set(r,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}]),e}(),Fc=vE;Fc.defaults={};Fc.STATES=y8;var _E=[xr,mt,Qo,Ms,jd,Hd,Vd,Ds,io,Sc,Lc,Pc];function c0(e,t){let n=(r,o={})=>{t(EE(r),{splide:e,...o})};e.on(zs,(r,o)=>{n(zs,{Slide:r,e:o})}),e.on(In,(r,o,i)=>{n(In,{index:r,prev:o,dest:i})}),e.on(oo,(r,o,i)=>{n(oo,{index:r,prev:o,dest:i})}),e.on(_c,r=>{n(_c,{Slide:r})}),e.on(Ec,r=>{n(Ec,{Slide:r})}),e.on(xc,r=>{n(xc,{Slide:r})}),e.on(kc,r=>{n(kc,{Slide:r})}),e.on(Ut,r=>{n(Ut,r)}),e.on(Ac,(r,o)=>{n(Ac,{prev:r,next:o})}),e.on($c,(r,o)=>{n($c,{prev:r,next:o})}),e.on(Tc,(r,o)=>{n(Tc,{data:r,item:o})}),e.on(Bc,(r,o,i)=>{n(Bc,{data:r,prev:o,curr:i})}),e.on(Fs,r=>{n(Fs,{splides:r})}),e.on(Cc,r=>{n(Cc,{rate:r})}),e.on(js,(r,o)=>{n(js,{img:r,Slide:o})}),_E.forEach(r=>{e.on(r,()=>{n(r)})})}function EE(e){return e.split(":").map((t,n)=>n>0?t.charAt(0).toUpperCase()+t.slice(1):t).join("").replace("Lazyload","LazyLoad")}function xE(e){let t,n=e[11].default,r=$o(n,e,e[13],null);return{c(){r&&r.c()},m(o,i){r&&r.m(o,i),t=!0},p(o,i){r&&r.p&&(!t||i&8192)&&Bo(r,n,o,o[13],t?To(n,o[13],i,null):Lo(o[13]),null)},i(o){t||(Ee(r,o),t=!0)},o(o){$e(r,o),t=!1},d(o){r&&r.d(o)}}}function kE(e){let t,n;return t=new Jd({props:{$$slots:{default:[SE]},$$scope:{ctx:e}}}),{c(){gt(t.$$.fragment)},m(r,o){st(t,r,o),n=!0},p(r,o){let i={};o&8192&&(i.$$scope={dirty:o,ctx:r}),t.$set(i)},i(r){n||(Ee(t.$$.fragment,r),n=!0)},o(r){$e(t.$$.fragment,r),n=!1},d(r){at(t,r)}}}function SE(e){let t,n=e[11].default,r=$o(n,e,e[13],null);return{c(){r&&r.c()},m(o,i){r&&r.m(o,i),t=!0},p(o,i){r&&r.p&&(!t||i&8192)&&Bo(r,n,o,o[13],t?To(n,o[13],i,null):Lo(o[13]),null)},i(o){t||(Ee(r,o),t=!0)},o(o){$e(r,o),t=!1},d(o){r&&r.d(o)}}}function AE(e){let t,n,r,o,i,a=[kE,xE],u=[];function d(w,x){return w[1]?0:1}n=d(e,-1),r=u[n]=a[n](e);let h=[{class:o=Qn("splide",e[0])},e[3]],m={};for(let w=0;w<h.length;w+=1)m=It(m,h[w]);return{c(){t=ae("div"),r.c(),ur(t,m)},m(w,x){me(w,t,x),u[n].m(t,null),e[12](t),i=!0},p(w,[x]){let P=n;n=d(w,x),n===P?u[n].p(w,x):(ht(),$e(u[P],1,1,()=>{u[P]=null}),pt(),r=u[n],r?r.p(w,x):(r=u[n]=a[n](w),r.c()),Ee(r,1),r.m(t,null)),ur(t,m=Hn(h,[(!i||x&1&&o!==(o=Qn("splide",w[0])))&&{class:o},x&8&&w[3]]))},i(w){i||(Ee(r),i=!0)},o(w){$e(r),i=!1},d(w){w&&pe(t),u[n].d(),e[12](null)}}}function $E(e,t,n){let r=["class","options","splide","extensions","transition","hasTrack","go","sync"],o=cr(t,r),{$$slots:i={},$$scope:a}=t,{class:u=void 0}=t,{options:d={}}=t,{splide:h=void 0}=t,{extensions:m=void 0}=t,{transition:w=void 0}=t,{hasTrack:x=!0}=t,P=El(),I,S,N=Es({},d);Ot(()=>(n(4,h=new Fc(I,d)),c0(h,P),h.mount(m,w),S=lc(h),()=>h.destroy())),vl(()=>{if(h){let p=lc(h);kd(S,p)||(h.refresh(),S=p.slice())}});function z(p){h?.go(p)}function B(p){h?.sync(p)}function f(p){Sa[p?"unshift":"push"](()=>{I=p,n(2,I)})}return e.$$set=p=>{t=It(It({},t),ci(p)),n(3,o=cr(t,r)),"class"in p&&n(0,u=p.class),"options"in p&&n(5,d=p.options),"splide"in p&&n(4,h=p.splide),"extensions"in p&&n(6,m=p.extensions),"transition"in p&&n(7,w=p.transition),"hasTrack"in p&&n(1,x=p.hasTrack),"$$scope"in p&&n(13,a=p.$$scope)},e.$$.update=()=>{e.$$.dirty&1072&&h&&!_s(N,d)&&(n(4,h.options=d,h),n(10,N=Es({},N)))},[u,x,I,o,h,d,m,w,z,B,N,i,f,a]}var Yd=class extends nt{constructor(t){super(),ct(this,t,$E,AE,tt,{class:0,options:5,splide:4,extensions:6,transition:7,hasTrack:1,go:8,sync:9})}get class(){return this.$$.ctx[0]}set class(t){this.$$set({class:t}),$n()}get options(){return this.$$.ctx[5]}set options(t){this.$$set({options:t}),$n()}get splide(){return this.$$.ctx[4]}set splide(t){this.$$set({splide:t}),$n()}get extensions(){return this.$$.ctx[6]}set extensions(t){this.$$set({extensions:t}),$n()}get transition(){return this.$$.ctx[7]}set transition(t){this.$$set({transition:t}),$n()}get hasTrack(){return this.$$.ctx[1]}set hasTrack(t){this.$$set({hasTrack:t}),$n()}get go(){return this.$$.ctx[8]}get sync(){return this.$$.ctx[9]}},qs=Yd;function TE(e){let t,n,r,o,i=e[3].default,a=$o(i,e,e[2],null),u=[{class:r=Qn("splide__track",e[0])},e[1]],d={};for(let h=0;h<u.length;h+=1)d=It(d,u[h]);return{c(){t=ae("div"),n=ae("ul"),a&&a.c(),ie(n,"class","splide__list"),ur(t,d)},m(h,m){me(h,t,m),ne(t,n),a&&a.m(n,null),o=!0},p(h,[m]){a&&a.p&&(!o||m&4)&&Bo(a,i,h,h[2],o?To(i,h[2],m,null):Lo(h[2]),null),ur(t,d=Hn(u,[(!o||m&1&&r!==(r=Qn("splide__track",h[0])))&&{class:r},m&2&&h[1]]))},i(h){o||(Ee(a,h),o=!0)},o(h){$e(a,h),o=!1},d(h){h&&pe(t),a&&a.d(h)}}}function BE(e,t,n){let r=["class"],o=cr(t,r),{$$slots:i={},$$scope:a}=t,{class:u=void 0}=t;return e.$$set=d=>{t=It(It({},t),ci(d)),n(1,o=cr(t,r)),"class"in d&&n(0,u=d.class),"$$scope"in d&&n(2,a=d.$$scope)},[u,o,a,i]}var Xd=class extends nt{constructor(t){super(),ct(this,t,BE,TE,tt,{class:0})}},Jd=Xd;function LE(e){let t,n,r,o=e[3].default,i=$o(o,e,e[2],null),a=[{class:n=Qn("splide__slide",e[0])},e[1]],u={};for(let d=0;d<a.length;d+=1)u=It(u,a[d]);return{c(){t=ae("li"),i&&i.c(),ur(t,u)},m(d,h){me(d,t,h),i&&i.m(t,null),r=!0},p(d,[h]){i&&i.p&&(!r||h&4)&&Bo(i,o,d,d[2],r?To(o,d[2],h,null):Lo(d[2]),null),ur(t,u=Hn(a,[(!r||h&1&&n!==(n=Qn("splide__slide",d[0])))&&{class:n},h&2&&d[1]]))},i(d){r||(Ee(i,d),r=!0)},o(d){$e(i,d),r=!1},d(d){d&&pe(t),i&&i.d(d)}}}function CE(e,t,n){let r=["class"],o=cr(t,r),{$$slots:i={},$$scope:a}=t,{class:u=void 0}=t;return e.$$set=d=>{t=It(It({},t),ci(d)),n(1,o=cr(t,r)),"class"in d&&n(0,u=d.class),"$$scope"in d&&n(2,a=d.$$scope)},[u,o,a,i]}var ef=class extends nt{constructor(t){super(),ct(this,t,CE,LE,tt,{class:0})}},Ws=ef;function u0(e,t,n){let r=e.slice();return r[9]=t[n],r}function l0(e,t,n){let r=e.slice();return r[9]=t[n],r}function d0(e,t,n){let r=e.slice();return r[9]=t[n],r}function f0(e){let t,n,r,o,i=[NE,IE,PE],a=[];function u(d,h){return d[0]==="grid"?0:d[0]==="list"?1:d[0]==="slide"&&d[2]?2:-1}return~(n=u(e,-1))&&(r=a[n]=i[n](e)),{c(){t=ae("section"),r&&r.c(),ie(t,"class","block notes")},m(d,h){me(d,t,h),~n&&a[n].m(t,null),o=!0},p(d,h){let m=n;n=u(d,h),n===m?~n&&a[n].p(d,h):(r&&(ht(),$e(a[m],1,1,()=>{a[m]=null}),pt()),~n?(r=a[n],r?r.p(d,h):(r=a[n]=i[n](d),r.c()),Ee(r,1),r.m(t,null)):r=null)},i(d){o||(Ee(r),o=!0)},o(d){$e(r),o=!1},d(d){d&&pe(t),~n&&a[n].d()}}}function PE(e){let t,n;return t=new qs({props:{class:"slide",options:{type:"loop",gap:"1rem",pagination:!1,perPage:3,breakpoints:{640:{perPage:2}},autoplay:!0},$$slots:{default:[RE]},$$scope:{ctx:e}}}),{c(){gt(t.$$.fragment)},m(r,o){st(t,r,o),n=!0},p(r,o){let i={};o&65544&&(i.$$scope={dirty:o,ctx:r}),t.$set(i)},i(r){n||(Ee(t.$$.fragment,r),n=!0)},o(r){$e(t.$$.fragment,r),n=!1},d(r){at(t,r)}}}function IE(e){let t,n,r=Je(e[3]),o=[];for(let i=0;i<r.length;i+=1)o[i]=p0(l0(e,r,i));return{c(){t=ae("div"),n=ae("ul");for(let i=0;i<o.length;i+=1)o[i].c();ie(t,"class","list")},m(i,a){me(i,t,a),ne(t,n);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(n,null)},p(i,a){if(a&8){r=Je(i[3]);let u;for(u=0;u<r.length;u+=1){let d=l0(i,r,u);o[u]?o[u].p(d,a):(o[u]=p0(d),o[u].c(),o[u].m(n,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=r.length}},i:ze,o:ze,d(i){i&&pe(t),Xt(o,i)}}}function NE(e){let t,n,r=Je(e[3]),o=[];for(let i=0;i<r.length;i+=1)o[i]=w0(d0(e,r,i));return{c(){t=ae("div");for(let i=0;i<o.length;i+=1)o[i].c();ie(t,"class",n="grid "+(e[3].length%2!==0?"odd":""))},m(i,a){me(i,t,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(t,null)},p(i,a){if(a&10){r=Je(i[3]);let u;for(u=0;u<r.length;u+=1){let d=d0(i,r,u);o[u]?o[u].p(d,a):(o[u]=w0(d),o[u].c(),o[u].m(t,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=r.length}a&8&&n!==(n="grid "+(i[3].length%2!==0?"odd":""))&&ie(t,"class",n)},i:ze,o:ze,d(i){i&&pe(t),Xt(o,i)}}}function OE(e){let t,n,r=jt(e[9].created_at,!0)+"",o,i,a=e[9].summary+"",u,d,h;return{c(){t=ae("a"),n=ae("div"),o=Me(r),i=Ne(),u=Me(a),h=Ne(),ie(n,"class","date"),ie(t,"href",d=`#${e[9].id}`)},m(m,w){me(m,t,w),ne(t,n),ne(n,o),ne(t,i),ne(t,u),me(m,h,w)},p(m,w){w&8&&r!==(r=jt(m[9].created_at,!0)+"")&&Ze(o,r),w&8&&a!==(a=m[9].summary+"")&&Ze(u,a),w&8&&d!==(d=`#${m[9].id}`)&&ie(t,"href",d)},d(m){m&&(pe(t),pe(h))}}}function h0(e){let t,n;return t=new Ws({props:{$$slots:{default:[OE]},$$scope:{ctx:e}}}),{c(){gt(t.$$.fragment)},m(r,o){st(t,r,o),n=!0},p(r,o){let i={};o&65544&&(i.$$scope={dirty:o,ctx:r}),t.$set(i)},i(r){n||(Ee(t.$$.fragment,r),n=!0)},o(r){$e(t.$$.fragment,r),n=!1},d(r){at(t,r)}}}function RE(e){let t,n,r=Je(e[3]),o=[];for(let a=0;a<r.length;a+=1)o[a]=h0(u0(e,r,a));let i=a=>$e(o[a],1,1,()=>{o[a]=null});return{c(){for(let a=0;a<o.length;a+=1)o[a].c();t=kt()},m(a,u){for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(a,u);me(a,t,u),n=!0},p(a,u){if(u&8){r=Je(a[3]);let d;for(d=0;d<r.length;d+=1){let h=u0(a,r,d);o[d]?(o[d].p(h,u),Ee(o[d],1)):(o[d]=h0(h),o[d].c(),Ee(o[d],1),o[d].m(t.parentNode,t))}for(ht(),d=r.length;d<o.length;d+=1)i(d);pt()}},i(a){if(!n){for(let u=0;u<r.length;u+=1)Ee(o[u]);n=!0}},o(a){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)$e(o[u]);n=!1},d(a){a&&pe(t),Xt(o,a)}}}function p0(e){let t,n,r,o=e[9].title+"",i,a,u,d=e[9].summary+"",h,m,w;return{c(){t=ae("li"),n=ae("a"),r=ae("h2"),i=Me(o),a=Ne(),u=ae("div"),h=Me(d),w=Ne(),ie(u,"class","summary"),ie(n,"href",m=`#${e[9].id}`)},m(x,P){me(x,t,P),ne(t,n),ne(n,r),ne(r,i),ne(n,a),ne(n,u),ne(u,h),ne(t,w)},p(x,P){P&8&&o!==(o=x[9].title+"")&&Ze(i,o),P&8&&d!==(d=x[9].summary+"")&&Ze(h,d),P&8&&m!==(m=`#${x[9].id}`)&&ie(n,"href",m)},d(x){x&&pe(t)}}}function g0(e){let t,n;return{c(){t=ae("img"),Nt(t.src,n=e[9].image)||ie(t,"src",n)},m(r,o){me(r,t,o)},p(r,o){o&8&&!Nt(t.src,n=r[9].image)&&ie(t,"src",n)},d(r){r&&pe(t)}}}function m0(e){let t,n=e[9].summary+"";return{c(){t=ae("div"),ie(t,"class","summary")},m(r,o){me(r,t,o),t.innerHTML=n},p(r,o){o&8&&n!==(n=r[9].summary+"")&&(t.innerHTML=n)},d(r){r&&pe(t)}}}function b0(e){let t;return{c(){t=ae("span"),t.textContent="- \u{1F4CC} Pinned",ie(t,"class","pinned")},m(n,r){me(n,t,r)},d(n){n&&pe(t)}}}function w0(e){let t,n,r,o,i=e[9].title+"",a,u,d,h,m=jt(e[9].created_at)+"",w,x,P=e[1]&&e[1].some(N),I,S;function N(...p){return e[7](e[9],...p)}let z=e[9].image&&g0(e),B=e[9].summary&&m0(e),f=P&&b0(e);return{c(){t=ae("div"),n=ae("a"),z&&z.c(),r=Ne(),o=ae("div"),a=Me(i),u=Ne(),B&&B.c(),d=Ne(),h=ae("span"),w=Me(m),x=Ne(),f&&f.c(),S=Ne(),ie(o,"class","title"),ie(h,"class","date"),ie(n,"href",I=`#${e[9].id}`),ie(t,"class","item")},m(p,b){me(p,t,b),ne(t,n),z&&z.m(n,null),ne(n,r),ne(n,o),ne(o,a),ne(n,u),B&&B.m(n,null),ne(n,d),ne(n,h),ne(h,w),ne(n,x),f&&f.m(n,null),ne(t,S)},p(p,b){e=p,e[9].image?z?z.p(e,b):(z=g0(e),z.c(),z.m(n,r)):z&&(z.d(1),z=null),b&8&&i!==(i=e[9].title+"")&&Ze(a,i),e[9].summary?B?B.p(e,b):(B=m0(e),B.c(),B.m(n,d)):B&&(B.d(1),B=null),b&8&&m!==(m=jt(e[9].created_at)+"")&&Ze(w,m),b&10&&(P=e[1]&&e[1].some(N)),P?f||(f=b0(e),f.c(),f.m(n,null)):f&&(f.d(1),f=null),b&8&&I!==(I=`#${e[9].id}`)&&ie(n,"href",I)},d(p){p&&pe(t),z&&z.d(),B&&B.d(),f&&f.d()}}}function UE(e){let t,n,r=e[3].length>0&&f0(e);return{c(){r&&r.c(),t=kt()},m(o,i){r&&r.m(o,i),me(o,t,i),n=!0},p(o,[i]){o[3].length>0?r?(r.p(o,i),i&8&&Ee(r,1)):(r=f0(o),r.c(),Ee(r,1),r.m(t.parentNode,t)):r&&(ht(),$e(r,1,1,()=>{r=null}),pt())},i(o){n||(Ee(r),n=!0)},o(o){$e(r),n=!1},d(o){o&&pe(t),r&&r.d(o)}}}function zE(e,t,n){let r,{events:o=[]}=t,{count:i=10}=t,{style:a="list"}=t,{minChars:u=0}=t,{ids:d=void 0}=t,{noMoreEvents:h=!1}=t,m=[1];Ot(()=>{d&&n(0,a="grid")});let w=(x,P)=>x.id.endsWith(P);return e.$$set=x=>{"events"in x&&n(4,o=x.events),"count"in x&&n(5,i=x.count),"style"in x&&n(0,a=x.style),"minChars"in x&&n(6,u=x.minChars),"ids"in x&&n(1,d=x.ids),"noMoreEvents"in x&&n(2,h=x.noMoreEvents)},e.$$.update=()=>{e.$$.dirty&114&&n(3,r=_i(o,m,u,i,!0,d).map(Jr))},[a,d,h,r,o,i,u,w]}var tf=class extends nt{constructor(t){super(),ct(this,t,zE,UE,tt,{events:4,count:5,style:0,minChars:6,ids:1,noMoreEvents:2})}},nf=tf;function y0(e,t,n){let r=e.slice();return r[8]=t[n],r}function v0(e,t,n){let r=e.slice();return r[8]=t[n],r}function _0(e,t,n){let r=e.slice();return r[8]=t[n],r}function E0(e){let t,n,r,o,i=[FE,DE,ME],a=[];function u(d,h){return d[0]==="grid"?0:d[0]==="list"?1:d[0]==="slide"?2:-1}return~(n=u(e,-1))&&(r=a[n]=i[n](e)),{c(){t=ae("section"),r&&r.c(),ie(t,"class","block images")},m(d,h){me(d,t,h),~n&&a[n].m(t,null),o=!0},p(d,h){let m=n;n=u(d,h),n===m?~n&&a[n].p(d,h):(r&&(ht(),$e(a[m],1,1,()=>{a[m]=null}),pt()),~n?(r=a[n],r?r.p(d,h):(r=a[n]=i[n](d),r.c()),Ee(r,1),r.m(t,null)):r=null)},i(d){o||(Ee(r),o=!0)},o(d){$e(r),o=!1},d(d){d&&pe(t),~n&&a[n].d()}}}function ME(e){let t,n;return t=new qs({props:{class:"short-notes",options:{type:"loop",gap:"1rem",pagination:!1,perPage:3,breakpoints:{640:{perPage:2}},autoplay:!0},$$slots:{default:[HE]},$$scope:{ctx:e}}}),{c(){gt(t.$$.fragment)},m(r,o){st(t,r,o),n=!0},p(r,o){let i={};o&32772&&(i.$$scope={dirty:o,ctx:r}),t.$set(i)},i(r){n||(Ee(t.$$.fragment,r),n=!0)},o(r){$e(t.$$.fragment,r),n=!1},d(r){at(t,r)}}}function DE(e){let t,n,r=Je(e[2]),o=[];for(let i=0;i<r.length;i+=1)o[i]=k0(v0(e,r,i));return{c(){t=ae("div"),n=ae("ul");for(let i=0;i<o.length;i+=1)o[i].c();ie(t,"class","list")},m(i,a){me(i,t,a),ne(t,n);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(n,null)},p(i,a){if(a&4){r=Je(i[2]);let u;for(u=0;u<r.length;u+=1){let d=v0(i,r,u);o[u]?o[u].p(d,a):(o[u]=k0(d),o[u].c(),o[u].m(n,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=r.length}},i:ze,o:ze,d(i){i&&pe(t),Xt(o,i)}}}function FE(e){let t,n,r=Je(e[2]),o=[];for(let i=0;i<r.length;i+=1)o[i]=$0(_0(e,r,i));return{c(){t=ae("div");for(let i=0;i<o.length;i+=1)o[i].c();ie(t,"class",n="grid "+(e[2].length%2!==0?"odd":"")+" "+(e[2].length==1?"single":""))},m(i,a){me(i,t,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(t,null)},p(i,a){if(a&6){r=Je(i[2]);let u;for(u=0;u<r.length;u+=1){let d=_0(i,r,u);o[u]?o[u].p(d,a):(o[u]=$0(d),o[u].c(),o[u].m(t,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=r.length}a&4&&n!==(n="grid "+(i[2].length%2!==0?"odd":"")+" "+(i[2].length==1?"single":""))&&ie(t,"class",n)},i:ze,o:ze,d(i){i&&pe(t),Xt(o,i)}}}function jE(e){let t,n,r=jt(e[8].created_at,!0)+"",o,i,a=e[8].summary+"",u,d,h;return{c(){t=ae("a"),n=ae("div"),o=Me(r),i=Ne(),u=Me(a),h=Ne(),ie(n,"class","date"),ie(t,"href",d=`#${e[8].id}`)},m(m,w){me(m,t,w),ne(t,n),ne(n,o),ne(t,i),ne(t,u),me(m,h,w)},p(m,w){w&4&&r!==(r=jt(m[8].created_at,!0)+"")&&Ze(o,r),w&4&&a!==(a=m[8].summary+"")&&Ze(u,a),w&4&&d!==(d=`#${m[8].id}`)&&ie(t,"href",d)},d(m){m&&(pe(t),pe(h))}}}function x0(e){let t,n;return t=new Ws({props:{$$slots:{default:[jE]},$$scope:{ctx:e}}}),{c(){gt(t.$$.fragment)},m(r,o){st(t,r,o),n=!0},p(r,o){let i={};o&32772&&(i.$$scope={dirty:o,ctx:r}),t.$set(i)},i(r){n||(Ee(t.$$.fragment,r),n=!0)},o(r){$e(t.$$.fragment,r),n=!1},d(r){at(t,r)}}}function HE(e){let t,n,r=Je(e[2]),o=[];for(let a=0;a<r.length;a+=1)o[a]=x0(y0(e,r,a));let i=a=>$e(o[a],1,1,()=>{o[a]=null});return{c(){for(let a=0;a<o.length;a+=1)o[a].c();t=kt()},m(a,u){for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(a,u);me(a,t,u),n=!0},p(a,u){if(u&4){r=Je(a[2]);let d;for(d=0;d<r.length;d+=1){let h=y0(a,r,d);o[d]?(o[d].p(h,u),Ee(o[d],1)):(o[d]=x0(h),o[d].c(),Ee(o[d],1),o[d].m(t.parentNode,t))}for(ht(),d=r.length;d<o.length;d+=1)i(d);pt()}},i(a){if(!n){for(let u=0;u<r.length;u+=1)Ee(o[u]);n=!0}},o(a){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)$e(o[u]);n=!1},d(a){a&&pe(t),Xt(o,a)}}}function k0(e){let t,n,r,o=e[8].title+"",i,a,u,d,h=e[8].summary+"",m,w;return{c(){t=ae("li"),n=ae("h2"),r=ae("a"),i=Me(o),u=Ne(),d=ae("div"),m=Me(h),w=Ne(),ie(r,"href",a=`#${e[8].id}`),ie(d,"class","summary")},m(x,P){me(x,t,P),ne(t,n),ne(n,r),ne(r,i),ne(t,u),ne(t,d),ne(d,m),ne(t,w)},p(x,P){P&4&&o!==(o=x[8].title+"")&&Ze(i,o),P&4&&a!==(a=`#${x[8].id}`)&&ie(r,"href",a),P&4&&h!==(h=x[8].summary+"")&&Ze(m,h)},d(x){x&&pe(t)}}}function S0(e){let t,n=e[8].title+"",r;return{c(){t=ae("div"),r=Me(n),ie(t,"class","title")},m(o,i){me(o,t,i),ne(t,r)},p(o,i){i&4&&n!==(n=o[8].title+"")&&Ze(r,n)},d(o){o&&pe(t)}}}function A0(e){let t;return{c(){t=ae("span"),t.textContent="- \u{1F4CC} Pinned",ie(t,"class","pinned")},m(n,r){me(n,t,r)},d(n){n&&pe(t)}}}function $0(e){let t,n,r,o,i,a,u,d=jt(e[8].created_at)+"",h,m,w=e[1]&&e[1].some(I),x,P;function I(...z){return e[6](e[8],...z)}let S=!e[8].autogeneratedTitle&&e[8].title&&S0(e),N=w&&A0(e);return{c(){t=ae("div"),n=ae("a"),r=ae("img"),i=Ne(),S&&S.c(),a=Ne(),u=ae("span"),h=Me(d),m=Ne(),N&&N.c(),P=Ne(),Nt(r.src,o=e[8].image)||ie(r,"src",o),ie(u,"class","date"),ie(n,"href",x=`#${e[8].id}`),ie(t,"class","item")},m(z,B){me(z,t,B),ne(t,n),ne(n,r),ne(n,i),S&&S.m(n,null),ne(n,a),ne(n,u),ne(u,h),ne(n,m),N&&N.m(n,null),ne(t,P)},p(z,B){e=z,B&4&&!Nt(r.src,o=e[8].image)&&ie(r,"src",o),!e[8].autogeneratedTitle&&e[8].title?S?S.p(e,B):(S=S0(e),S.c(),S.m(n,a)):S&&(S.d(1),S=null),B&4&&d!==(d=jt(e[8].created_at)+"")&&Ze(h,d),B&6&&(w=e[1]&&e[1].some(I)),w?N||(N=A0(e),N.c(),N.m(n,null)):N&&(N.d(1),N=null),B&4&&x!==(x=`#${e[8].id}`)&&ie(n,"href",x)},d(z){z&&pe(t),S&&S.d(),N&&N.d()}}}function VE(e){let t,n,r=e[2].length>0&&E0(e);return{c(){r&&r.c(),t=kt()},m(o,i){r&&r.m(o,i),me(o,t,i),n=!0},p(o,[i]){o[2].length>0?r?(r.p(o,i),i&4&&Ee(r,1)):(r=E0(o),r.c(),Ee(r,1),r.m(t.parentNode,t)):r&&(ht(),$e(r,1,1,()=>{r=null}),pt())},i(o){n||(Ee(r),n=!0)},o(o){$e(r),n=!1},d(o){o&&pe(t),r&&r.d(o)}}}function qE(e,t,n){let r,{events:o=[]}=t,{count:i=10}=t,{style:a="grid"}=t,{minChars:u=0}=t,{ids:d=void 0}=t,h=[20];Ot(()=>{d&&n(0,a="grid")});let m=(w,x)=>w.id.endsWith(x);return e.$$set=w=>{"events"in w&&n(3,o=w.events),"count"in w&&n(4,i=w.count),"style"in w&&n(0,a=w.style),"minChars"in w&&n(5,u=w.minChars),"ids"in w&&n(1,d=w.ids)},e.$$.update=()=>{e.$$.dirty&58&&n(2,r=_i(o,h,u,i,!0,d).map(Jr))},[a,d,r,o,i,u,m]}var rf=class extends nt{constructor(t){super(),ct(this,t,qE,VE,tt,{events:3,count:4,style:0,minChars:5,ids:1})}},of=rf;function T0(e,t,n){let r=e.slice();return r[7]=t[n],r}function B0(e,t,n){let r=e.slice();return r[10]=t[n],r}function L0(e){let t,n,r,o,i=e[4].slice(0,9)+"..."+e[4].slice(-5),a,u,d,h,m,w,x,P,I=e[1]?.shortName+"",S;return{c(){t=ae("div"),n=ae("div"),r=Me("Profile: "),o=ae("a"),a=Me(i),d=Ne(),h=ae("h1"),m=ae("div"),w=ae("img"),P=Ne(),S=Me(I),ie(o,"href",u="https://njump.me/"+e[4]),ie(n,"class","external-link"),Nt(w.src,x=e[1]?.image)||ie(w,"src",x),ie(m,"class","picture-container"),ie(t,"class","header home")},m(N,z){me(N,t,z),ne(t,n),ne(n,r),ne(n,o),ne(o,a),ne(t,d),ne(t,h),ne(h,m),ne(m,w),ne(h,P),ne(h,S)},p(N,z){z&16&&i!==(i=N[4].slice(0,9)+"..."+N[4].slice(-5))&&Ze(a,i),z&16&&u!==(u="https://njump.me/"+N[4])&&ie(o,"href",u),z&2&&!Nt(w.src,x=N[1]?.image)&&ie(w,"src",x),z&2&&I!==(I=N[1]?.shortName+"")&&Ze(S,I)},d(N){N&&pe(t)}}}function WE(e){let t,n;return t=new dm({}),{c(){gt(t.$$.fragment)},m(r,o){st(t,r,o),n=!0},p:ze,i(r){n||(Ee(t.$$.fragment,r),n=!0)},o(r){$e(t.$$.fragment,r),n=!1},d(r){at(t,r)}}}function QE(e){let t,n,r=e[0].length>0&&e[3]&&Xr.getDisplayedEventsCount()<12,o,i,a=e[5].length>0&&C0(e),u=e[6]&&e[2].length>0&&I0(e),d=r&&O0(e);return{c(){a&&a.c(),t=Ne(),u&&u.c(),n=Ne(),d&&d.c(),o=kt()},m(h,m){a&&a.m(h,m),me(h,t,m),u&&u.m(h,m),me(h,n,m),d&&d.m(h,m),me(h,o,m),i=!0},p(h,m){h[5].length>0?a?a.p(h,m):(a=C0(h),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),h[6]&&h[2].length>0?u?(u.p(h,m),m&68&&Ee(u,1)):(u=I0(h),u.c(),Ee(u,1),u.m(n.parentNode,n)):u&&(ht(),$e(u,1,1,()=>{u=null}),pt()),m&9&&(r=h[0].length>0&&h[3]&&Xr.getDisplayedEventsCount()<12),r?d?(d.p(h,m),m&9&&Ee(d,1)):(d=O0(h),d.c(),Ee(d,1),d.m(o.parentNode,o)):d&&(ht(),$e(d,1,1,()=>{d=null}),pt())},i(h){i||(Ee(u),Ee(d),i=!0)},o(h){$e(u),$e(d),i=!1},d(h){h&&(pe(t),pe(n),pe(o)),a&&a.d(h),u&&u.d(h),d&&d.d(h)}}}function C0(e){let t,n,r,o,i,a,u=Je(e[5]),d=[];for(let h=0;h<u.length;h+=1)d[h]=P0(B0(e,u,h));return{c(){t=ae("div"),n=ae("div"),r=ae("a"),o=Me("Home"),a=Ne();for(let h=0;h<d.length;h+=1)d[h].c();ie(r,"href","#"),ie(r,"class",i=e[0]==""?"selected":""),ie(t,"class","topic-wrapper")},m(h,m){me(h,t,m),ne(t,n),ne(n,r),ne(r,o),ne(t,a);for(let w=0;w<d.length;w+=1)d[w]&&d[w].m(t,null)},p(h,m){if(m&1&&i!==(i=h[0]==""?"selected":"")&&ie(r,"class",i),m&33){u=Je(h[5]);let w;for(w=0;w<u.length;w+=1){let x=B0(h,u,w);d[w]?d[w].p(x,m):(d[w]=P0(x),d[w].c(),d[w].m(t,null))}for(;w<d.length;w+=1)d[w].d(1);d.length=u.length}},d(h){h&&pe(t),Xt(d,h)}}}function P0(e){let t,n,r,o=e[10]+"",i,a,u;return{c(){t=ae("div"),n=ae("a"),r=Me("#"),i=Me(o),ie(n,"href",a="#tags/"+e[10]),ie(n,"class",u=e[10]==e[0]?"selected":"")},m(d,h){me(d,t,h),ne(t,n),ne(n,r),ne(n,i)},p(d,h){h&32&&o!==(o=d[10]+"")&&Ze(i,o),h&32&&a!==(a="#tags/"+d[10])&&ie(n,"href",a),h&33&&u!==(u=d[10]==d[0]?"selected":"")&&ie(n,"class",u)},d(d){d&&pe(t)}}}function I0(e){let t,n,r=Je(e[6]),o=[];for(let a=0;a<r.length;a+=1)o[a]=N0(T0(e,r,a));let i=a=>$e(o[a],1,1,()=>{o[a]=null});return{c(){for(let a=0;a<o.length;a+=1)o[a].c();t=kt()},m(a,u){for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(a,u);me(a,t,u),n=!0},p(a,u){if(u&76){r=Je(a[6]);let d;for(d=0;d<r.length;d+=1){let h=T0(a,r,d);o[d]?(o[d].p(h,u),Ee(o[d],1)):(o[d]=N0(h),o[d].c(),Ee(o[d],1),o[d].m(t.parentNode,t))}for(ht(),d=r.length;d<o.length;d+=1)i(d);pt()}},i(a){if(!n){for(let u=0;u<r.length;u+=1)Ee(o[u]);n=!0}},o(a){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)$e(o[u]);n=!1},d(a){a&&pe(t),Xt(o,a)}}}function KE(e){let t,n,r=[{events:e[2]},e[7].config],o={};for(let i=0;i<r.length;i+=1)o=It(o,r[i]);return t=new of({props:o}),{c(){gt(t.$$.fragment)},m(i,a){st(t,i,a),n=!0},p(i,a){let u=a&68?Hn(r,[a&4&&{events:i[2]},a&64&&$a(i[7].config)]):{};t.$set(u)},i(i){n||(Ee(t.$$.fragment,i),n=!0)},o(i){$e(t.$$.fragment,i),n=!1},d(i){at(t,i)}}}function GE(e){let t,n,r=[{events:e[2]},e[7].config,{noMoreEvents:e[3]}],o={};for(let i=0;i<r.length;i+=1)o=It(o,r[i]);return t=new nf({props:o}),{c(){gt(t.$$.fragment)},m(i,a){st(t,i,a),n=!0},p(i,a){let u=a&76?Hn(r,[a&4&&{events:i[2]},a&64&&$a(i[7].config),a&8&&{noMoreEvents:i[3]}]):{};t.$set(u)},i(i){n||(Ee(t.$$.fragment,i),n=!0)},o(i){$e(t.$$.fragment,i),n=!1},d(i){at(t,i)}}}function ZE(e){let t,n,r=[{events:e[2]},e[7].config],o={};for(let i=0;i<r.length;i+=1)o=It(o,r[i]);return t=new Ed({props:o}),{c(){gt(t.$$.fragment)},m(i,a){st(t,i,a),n=!0},p(i,a){let u=a&68?Hn(r,[a&4&&{events:i[2]},a&64&&$a(i[7].config)]):{};t.$set(u)},i(i){n||(Ee(t.$$.fragment,i),n=!0)},o(i){$e(t.$$.fragment,i),n=!1},d(i){at(t,i)}}}function N0(e){let t,n,r,o,i=[ZE,GE,KE],a=[];function u(d,h){return d[7].type==="articles"?0:d[7].type==="notes"?1:d[7].type==="images"?2:-1}return~(t=u(e,-1))&&(n=a[t]=i[t](e)),{c(){n&&n.c(),r=kt()},m(d,h){~t&&a[t].m(d,h),me(d,r,h),o=!0},p(d,h){let m=t;t=u(d,h),t===m?~t&&a[t].p(d,h):(n&&(ht(),$e(a[m],1,1,()=>{a[m]=null}),pt()),~t?(n=a[t],n?n.p(d,h):(n=a[t]=i[t](d),n.c()),Ee(n,1),n.m(r.parentNode,r)):n=null)},i(d){o||(Ee(n),o=!0)},o(d){$e(n),o=!1},d(d){d&&pe(r),~t&&a[t].d(d)}}}function O0(e){let t,n,r,o,i,a;return t=new Ed({props:{events:e[2],count:40,style:"grid"}}),r=new of({props:{events:e[2],count:40,style:"grid"}}),i=new nf({props:{events:e[2],count:40,style:"grid"}}),{c(){gt(t.$$.fragment),n=Ne(),gt(r.$$.fragment),o=Ne(),gt(i.$$.fragment)},m(u,d){st(t,u,d),me(u,n,d),st(r,u,d),me(u,o,d),st(i,u,d),a=!0},p(u,d){let h={};d&4&&(h.events=u[2]),t.$set(h);let m={};d&4&&(m.events=u[2]),r.$set(m);let w={};d&4&&(w.events=u[2]),i.$set(w)},i(u){a||(Ee(t.$$.fragment,u),Ee(r.$$.fragment,u),Ee(i.$$.fragment,u),a=!0)},o(u){$e(t.$$.fragment,u),$e(r.$$.fragment,u),$e(i.$$.fragment,u),a=!1},d(u){u&&(pe(n),pe(o)),at(t,u),at(r,u),at(i,u)}}}function YE(e){let t,n,r,o,i,a=e[1]&&L0(e),u=[QE,WE],d=[];function h(m,w){return m[2].length>20||m[3]?0:1}return n=h(e,-1),r=d[n]=u[n](e),{c(){a&&a.c(),t=Ne(),r.c(),o=kt()},m(m,w){a&&a.m(m,w),me(m,t,w),d[n].m(m,w),me(m,o,w),i=!0},p(m,[w]){m[1]?a?a.p(m,w):(a=L0(m),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null);let x=n;n=h(m,w),n===x?d[n].p(m,w):(ht(),$e(d[x],1,1,()=>{d[x]=null}),pt(),r=d[n],r?r.p(m,w):(r=d[n]=u[n](m),r.c()),Ee(r,1),r.m(o.parentNode,o))},i(m){i||(Ee(r),i=!0)},o(m){$e(r),i=!1},d(m){m&&(pe(t),pe(o)),a&&a.d(m),d[n].d(m)}}}function JE(e,t,n){let r=[],o=!1,i="",a=[],u,{tag:d}=t,{profile:h}=t;return Ot(()=>{Xr.reset(),wi().then(async({npub:m,writeRelays:w,topics:x,blocks:P})=>{if(n(4,i=m),n(1,h=await jo(i)),!h)throw new Error("invalid npub");n(5,a=x),n(6,u=P),vi.set(h.shortName+" home, powered by Nostr");let I=[{kinds:[1],authors:[h.pubkey],limit:1e3},{kinds:[30023],authors:[h.pubkey],limit:1e3},{kinds:[20],authors:[h.pubkey],limit:1e3}];d&&(n(0,d=d.substring(5)),I=I.map(S=>({...S,"#t":[d]}))),Yr.subscribeManyEose(w,I,{onevent:async S=>{cm(S)&&n(2,r=[...r,S].sort((N,z)=>z.created_at-N.created_at))},onclose(){n(3,o=!0),console.log("Got",r.length,"events"),console.log("Finish, subscription closed.")}})})}),e.$$set=m=>{"tag"in m&&n(0,d=m.tag),"profile"in m&&n(1,h=m.profile)},e.$$.update=()=>{e.$$.dirty&4&&r&&Xr.reset()},vi.subscribe(m=>{document.title=m}),[d,h,r,o,i,a,u]}var sf=class extends nt{constructor(t){super(),ct(this,t,JE,YE,tt,{tag:0,profile:1})}},af=sf;var XE=Object.defineProperty,ex=(e,t,n)=>t in e?XE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,we=(e,t,n)=>(ex(e,typeof t!="symbol"?t+"":t,n),n),tx=(e,t)=>e===t,nn=Symbol("solid-proxy"),ta=Symbol("solid-track"),Gc={equals:tx},hb=wb,Tr=1,Zc=2,pb={owned:null,cleanups:null,context:null,owner:null},cf={},it=null,uf=null,ot=null,qt=null,Sr=null,lu=0;function Af(e,t){let n=ot,r=it,o=e.length===0,i=t===void 0?r:t,a=o?pb:{owned:null,cleanups:null,context:i?i.context:null,owner:i},u=o?e:()=>e(()=>kn(()=>fu(a)));it=a,ot=null;try{return go(u,!0)}finally{ot=n,it=r}}function Et(e,t){t=t?Object.assign({},Gc,t):Gc;let n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=o=>(typeof o=="function"&&(o=o(n.value)),bb(n,o));return[mb.bind(n),r]}function fo(e,t,n){let r=du(e,t,!0,Tr);Qi(r)}function En(e,t,n){let r=du(e,t,!1,Tr);Qi(r)}function Di(e,t,n){hb=sx;let r=du(e,t,!1,Tr),o=$f&&rx($f);o&&(r.suspense=o),(!n||!n.render)&&(r.user=!0),Sr?Sr.push(r):Qi(r)}function We(e,t,n){n=n?Object.assign({},Gc,n):Gc;let r=du(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Qi(r),mb.bind(r)}function nx(e){return e&&typeof e=="object"&&"then"in e}function gb(e,t,n){let r,o,i;arguments.length===2&&typeof t=="object"||arguments.length===1?(r=!0,o=e,i=t||{}):(r=e,o=t,i=n||{});let a=null,u=cf,d=!1,h="initialValue"in i,m=typeof r=="function"&&We(r),w=new Set,[x,P]=(i.storage||Et)(i.initialValue),[I,S]=Et(void 0),[N,z]=Et(void 0,{equals:!1}),[B,f]=Et(h?"ready":"unresolved");function p(A,T,U,C){return a===A&&(a=null,C!==void 0&&(h=!0),(A===u||T===u)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(C,{value:T})),u=cf,b(T,U)),T}function b(A,T){go(()=>{T===void 0&&P(()=>A),f(T!==void 0?"errored":h?"ready":"unresolved"),S(T);for(let U of w.keys())U.decrement();w.clear()},!1)}function v(){let A=$f,T=x(),U=I();if(U!==void 0&&!a)throw U;return ot&&!ot.user&&A&&fo(()=>{N(),a&&(A.resolved||w.has(A)||(A.increment(),w.add(A)))}),T}function k(A=!0){if(A!==!1&&d)return;d=!1;let T=m?m():r;if(T==null||T===!1){p(a,kn(x));return}let U=u!==cf?u:kn(()=>o(T,{value:x(),refetching:A}));return nx(U)?(a=U,"value"in U?(U.status==="success"?p(a,U.value,void 0,T):p(a,void 0,void 0,T),U):(d=!0,queueMicrotask(()=>d=!1),go(()=>{f(h?"refreshing":"pending"),z()},!1),U.then(C=>p(U,C,void 0,T),C=>p(U,void 0,vb(C),T)))):(p(a,U,void 0,T),U)}return Object.defineProperties(v,{state:{get:()=>B()},error:{get:()=>I()},loading:{get(){let A=B();return A==="pending"||A==="refreshing"}},latest:{get(){if(!h)return v();let A=I();if(A&&!a)throw A;return x()}}}),m?fo(()=>k(!1)):k(!1),[v,{refetch:k,mutate:P}]}function Oi(e){return go(e,!1)}function kn(e){if(ot===null)return e();let t=ot;ot=null;try{return e()}finally{ot=t}}function ho(e,t,n){let r=Array.isArray(e),o,i=n&&n.defer;return a=>{let u;if(r){u=Array(e.length);for(let h=0;h<e.length;h++)u[h]=e[h]()}else u=e();if(i){i=!1;return}let d=kn(()=>t(u,o,a));return o=u,d}}function Ri(e){return it===null||(it.cleanups===null?it.cleanups=[e]:it.cleanups.push(e)),e}function Fi(){return ot}function rx(e){return it&&it.context&&it.context[e.id]!==void 0?it.context[e.id]:e.defaultValue}var $f;function mb(){if(this.sources&&this.state)if(this.state===Tr)Qi(this);else{let e=qt;qt=null,go(()=>Jc(this),!1),qt=e}if(ot){let e=this.observers?this.observers.length:0;ot.sources?(ot.sources.push(this),ot.sourceSlots.push(e)):(ot.sources=[this],ot.sourceSlots=[e]),this.observers?(this.observers.push(ot),this.observerSlots.push(ot.sources.length-1)):(this.observers=[ot],this.observerSlots=[ot.sources.length-1])}return this.value}function bb(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&go(()=>{for(let o=0;o<e.observers.length;o+=1){let i=e.observers[o],a=uf&&uf.running;a&&uf.disposed.has(i),(a?!i.tState:!i.state)&&(i.pure?qt.push(i):Sr.push(i),i.observers&&yb(i)),a||(i.state=Tr)}if(qt.length>1e6)throw qt=[],new Error},!1)),t}function Qi(e){if(!e.fn)return;fu(e);let t=it,n=ot,r=lu;ot=it=e,ox(e,e.value,r),ot=n,it=t}function ox(e,t,n){let r;try{r=e.fn(t)}catch(o){return e.pure&&(e.state=Tr,e.owned&&e.owned.forEach(fu),e.owned=null),e.updatedAt=n+1,_b(o)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?bb(e,r):e.value=r,e.updatedAt=n)}function du(e,t,n,r=Tr,o){let i={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:it,context:it?it.context:null,pure:n};return it===null||it!==pb&&(it.owned?it.owned.push(i):it.owned=[i]),i}function Yc(e){if(e.state===0)return;if(e.state===Zc)return Jc(e);if(e.suspense&&kn(e.suspense.inFallback))return e.suspense.effects.push(e);let t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<lu);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===Tr)Qi(e);else if(e.state===Zc){let r=qt;qt=null,go(()=>Jc(e,t[0]),!1),qt=r}}function go(e,t){if(qt)return e();let n=!1;t||(qt=[]),Sr?n=!0:Sr=[],lu++;try{let r=e();return ix(n),r}catch(r){n||(Sr=null),qt=null,_b(r)}}function ix(e){if(qt&&(wb(qt),qt=null),e)return;let t=Sr;Sr=null,t.length&&go(()=>hb(t),!1)}function wb(e){for(let t=0;t<e.length;t++)Yc(e[t])}function sx(e){let t,n=0;for(t=0;t<e.length;t++){let r=e[t];r.user?e[n++]=r:Yc(r)}for(t=0;t<n;t++)Yc(e[t])}function Jc(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){let r=e.sources[n];if(r.sources){let o=r.state;o===Tr?r!==t&&(!r.updatedAt||r.updatedAt<lu)&&Yc(r):o===Zc&&Jc(r,t)}}}function yb(e){for(let t=0;t<e.observers.length;t+=1){let n=e.observers[t];n.state||(n.state=Zc,n.pure?qt.push(n):Sr.push(n),n.observers&&yb(n))}}function fu(e){let t;if(e.sources)for(;e.sources.length;){let n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){let i=o.pop(),a=n.observerSlots.pop();r<o.length&&(i.sourceSlots[a]=r,o[r]=i,n.observerSlots[r]=a)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)fu(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function vb(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function _b(e,t=it){throw vb(e)}var R0=Symbol("fallback");function U0(e){for(let t=0;t<e.length;t++)e[t]()}function ax(e,t,n={}){let r=[],o=[],i=[],a=[],u=0,d;return Ri(()=>U0(i)),()=>{let h=e()||[];return h[ta],kn(()=>{if(h.length===0)return u!==0&&(U0(i),i=[],r=[],o=[],u=0,a=[]),n.fallback&&(r=[R0],o[0]=Af(w=>(i[0]=w,n.fallback())),u=1),o;for(r[0]===R0&&(i[0](),i=[],r=[],o=[],u=0),d=0;d<h.length;d++)d<r.length&&r[d]!==h[d]?a[d](()=>h[d]):d>=r.length&&(o[d]=Af(m));for(;d<r.length;d++)i[d]();return u=a.length=i.length=h.length,r=h.slice(0),o=o.slice(0,u)});function m(w){i[d]=w;let[x,P]=Et(h[d]);return a[d]=P,t(x,d)}}}function Rn(e,t){return kn(()=>e(t||{}))}var cx=e=>`Stale read from <${e}>.`;function ux(e){let t="fallback"in e&&{fallback:()=>e.fallback};return We(ax(()=>e.each,e.children,t||void 0))}function Xc(e){let t=e.keyed,n=We(()=>e.when,void 0,{equals:(r,o)=>t?r===o:!r==!o});return We(()=>{let r=n();if(r){let o=e.children;return typeof o=="function"&&o.length>0?kn(()=>o(t?r:()=>{if(!kn(n))throw cx("Show");return e.when})):o}return e.fallback},void 0,void 0)}function lx(e,t,n){let r=n.length,o=t.length,i=r,a=0,u=0,d=t[o-1].nextSibling,h=null;for(;a<o||u<i;){if(t[a]===n[u]){a++,u++;continue}for(;t[o-1]===n[i-1];)o--,i--;if(o===a){let m=i<r?u?n[u-1].nextSibling:n[i-u]:d;for(;u<i;)e.insertBefore(n[u++],m)}else if(i===u)for(;a<o;)(!h||!h.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[i-1]&&n[u]===t[o-1]){let m=t[--o].nextSibling;e.insertBefore(n[u++],t[a++].nextSibling),e.insertBefore(n[--i],m),t[o]=n[i]}else{if(!h){h=new Map;let w=u;for(;w<i;)h.set(n[w],w++)}let m=h.get(t[a]);if(m!=null)if(u<m&&m<i){let w=a,x=1,P;for(;++w<o&&w<i&&!((P=h.get(t[w]))==null||P!==m+x);)x++;if(x>m-u){let I=t[a];for(;u<m;)e.insertBefore(n[u++],I)}else e.replaceChild(n[u++],t[a++])}else a++;else t[a++].remove()}}}var z0="_$DX_DELEGATE";function He(e,t,n){let r,o=()=>{let a=document.createElement("template");return a.innerHTML=e,n?a.content.firstChild.firstChild:a.content.firstChild},i=t?()=>kn(()=>document.importNode(r||(r=o()),!0)):()=>(r||(r=o())).cloneNode(!0);return i.cloneNode=i,i}function Wf(e,t=window.document){let n=t[z0]||(t[z0]=new Set);for(let r=0,o=e.length;r<o;r++){let i=e[r];n.has(i)||(n.add(i),t.addEventListener(i,hx))}}function Vt(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function dx(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){let o=n[0];e.addEventListener(t,n[0]=i=>o.call(e,n[1],i))}else e.addEventListener(t,n)}function fx(e,t,n){if(!t)return n?Vt(e,"style"):t;let r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let o,i;for(i in n)t[i]==null&&r.removeProperty(i),delete n[i];for(i in t)o=t[i],o!==n[i]&&(r.setProperty(i,o),n[i]=o);return n}function Eb(e,t,n){return kn(()=>e(t,n))}function Le(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return eu(e,t,r,n);En(o=>eu(e,t(),o,n),r)}function hx(e){let t=`$$${e.type}`,n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){let r=n[t];if(r&&!n.disabled){let o=n[`${t}Data`];if(o!==void 0?r.call(n,o,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function eu(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;let i=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,i==="string"||i==="number")if(i==="number"&&(t=t.toString()),a){let u=n[0];u&&u.nodeType===3?u.data=t:u=document.createTextNode(t),n=Ci(e,n,r,u)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||i==="boolean")n=Ci(e,n,r);else{if(i==="function")return En(()=>{let u=t();for(;typeof u=="function";)u=u();n=eu(e,u,n,r)}),()=>n;if(Array.isArray(t)){let u=[],d=n&&Array.isArray(n);if(Tf(u,t,n,o))return En(()=>n=eu(e,u,n,r,!0)),()=>n;if(u.length===0){if(n=Ci(e,n,r),a)return n}else d?n.length===0?M0(e,u,r):lx(e,n,u):(n&&Ci(e),M0(e,u));n=u}else if(t.nodeType){if(Array.isArray(n)){if(a)return n=Ci(e,n,r,t);Ci(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Tf(e,t,n,r){let o=!1;for(let i=0,a=t.length;i<a;i++){let u=t[i],d=n&&n[i],h;if(!(u==null||u===!0||u===!1))if((h=typeof u)=="object"&&u.nodeType)e.push(u);else if(Array.isArray(u))o=Tf(e,u,d)||o;else if(h==="function")if(r){for(;typeof u=="function";)u=u();o=Tf(e,Array.isArray(u)?u:[u],Array.isArray(d)?d:[d])||o}else e.push(u),o=!0;else{let m=String(u);d&&d.nodeType===3&&d.data===m?e.push(d):e.push(document.createTextNode(m))}}return o}function M0(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function Ci(e,t,n,r){if(n===void 0)return e.textContent="";let o=r||document.createTextNode("");if(t.length){let i=!1;for(let a=t.length-1;a>=0;a--){let u=t[a];if(o!==u){let d=u.parentNode===e;!i&&!a?d?e.replaceChild(o,u):e.insertBefore(o,n):d&&u.remove()}else i=!0}}else e.insertBefore(o,n);return[o]}function px(e){return Object.keys(e).reduce((n,r)=>{let o=e[r];return n[r]=Object.assign({},o),kb(o.value)&&!yx(o.value)&&!Array.isArray(o.value)&&(n[r].value=Object.assign({},o.value)),Array.isArray(o.value)&&(n[r].value=o.value.slice(0)),n},{})}function gx(e){return e?Object.keys(e).reduce((n,r)=>{let o=e[r];return n[r]=kb(o)&&"value"in o?o:{value:o},n[r].attribute||(n[r].attribute=wx(r)),n[r].parse="parse"in n[r]?n[r].parse:typeof n[r].value!="string",n},{}):{}}function mx(e){return Object.keys(e).reduce((n,r)=>(n[r]=e[r].value,n),{})}function bx(e,t){let n=px(t);return Object.keys(t).forEach(o=>{let i=n[o],a=e.getAttribute(i.attribute),u=e[o];a&&(i.value=i.parse?xb(a):a),u!=null&&(i.value=Array.isArray(u)?u.slice(0):u),i.reflect&&D0(e,i.attribute,i.value),Object.defineProperty(e,o,{get(){return i.value},set(d){let h=i.value;i.value=d,i.reflect&&D0(this,i.attribute,i.value);for(let m=0,w=this.__propertyChangedCallbacks.length;m<w;m++)this.__propertyChangedCallbacks[m](o,d,h)},enumerable:!0,configurable:!0})}),n}function xb(e){if(e)try{return JSON.parse(e)}catch{return e}}function D0(e,t,n){if(n==null||n===!1)return e.removeAttribute(t);let r=JSON.stringify(n);e.__updating[t]=!0,r==="true"&&(r=""),e.setAttribute(t,r),Promise.resolve().then(()=>delete e.__updating[t])}function wx(e){return e.replace(/\.?([A-Z]+)/g,(t,n)=>"-"+n.toLowerCase()).replace("_","-").replace(/^-/,"")}function kb(e){return e!=null&&(typeof e=="object"||typeof e=="function")}function yx(e){return Object.prototype.toString.call(e)==="[object Function]"}function vx(e){return typeof e=="function"&&e.toString().indexOf("class")===0}var lf;function _x(e,t){let n=Object.keys(t);return class extends e{static get observedAttributes(){return n.map(o=>t[o].attribute)}constructor(){super(),this.__initialized=!1,this.__released=!1,this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props={}}connectedCallback(){if(this.__initialized)return;this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props=bx(this,t);let o=mx(this.props),i=this.Component,a=lf;try{lf=this,this.__initialized=!0,vx(i)?new i(o,{element:this}):i(o,{element:this})}finally{lf=a}}async disconnectedCallback(){if(await Promise.resolve(),this.isConnected)return;this.__propertyChangedCallbacks.length=0;let o=null;for(;o=this.__releaseCallbacks.pop();)o(this);delete this.__initialized,this.__released=!0}attributeChangedCallback(o,i,a){if(this.__initialized&&!this.__updating[o]&&(o=this.lookupProp(o),o in t)){if(a==null&&!this[o])return;this[o]=t[o].parse?xb(a):a}}lookupProp(o){if(t)return n.find(i=>o===i||o===t[i].attribute)}get renderRoot(){return this.shadowRoot||this.attachShadow({mode:"open"})}addReleaseCallback(o){this.__releaseCallbacks.push(o)}addPropertyChangedCallback(o){this.__propertyChangedCallbacks.push(o)}}}function Ex(e,t={},n={}){let{BaseElement:r=HTMLElement,extension:o}=n;return i=>{if(!e)throw new Error("tag is required to register a Component");let a=customElements.get(e);return a?(a.prototype.Component=i,a):(a=_x(r,gx(t)),a.prototype.Component=i,a.prototype.registeredTag=e,customElements.define(e,a,o),a)}}function xx(e){let t=Object.keys(e),n={};for(let r=0;r<t.length;r++){let[o,i]=Et(e[t[r]]);Object.defineProperty(n,t[r],{get:o,set(a){i(()=>a)}})}return n}function kx(e){if(e.assignedSlot&&e.assignedSlot._$owner)return e.assignedSlot._$owner;let t=e.parentNode;for(;t&&!t._$owner&&!(t.assignedSlot&&t.assignedSlot._$owner);)t=t.parentNode;return t&&t.assignedSlot?t.assignedSlot._$owner:e._$owner}function Sx(e){return(t,n)=>{let{element:r}=n;return Af(o=>{let i=xx(t);r.addPropertyChangedCallback((u,d)=>i[u]=d),r.addReleaseCallback(()=>{r.renderRoot.textContent="",o()});let a=e(i,n);return Le(r.renderRoot,a)},kx(r))}}function Ax(e,t,n){return arguments.length===2&&(n=t,t={}),Ex(e,t)(Sx(n))}var $x=`#ztr-content,
#ztr-content img {
  max-width: 100%;
}

#ztr-root {
  display: flex;
  flex-direction: column;
  font-family: var(--ztr-font);
  font-size: var(--ztr-font-size);
  color: var(--ztr-text-color);
  border: 1px solid transparent;
  word-wrap: break-word;
  /* removes margin collapse */
  margin-top: 4em;
  line-height: 1.2em;
}

#ztr-subtitle {
  font-size: 1.2em;
  color: #666;
}

a {
  color: var(--ztr-link-color);
  text-decoration: none;
}

/* Comment */

.ztr-comment {
  position: relative;
  margin: 0;
  padding: 0;
}

.ztr-comment,
.ztr-reply-button {
  background-color: var(--ztr-background-color, rgba(0, 0, 0, 0.03));
}

.ztr-comment-body {
  padding: 1em;
}

.ztr-comment:first-child {
  border-top-left-radius: 0.3em;
  border-top-right-radius: 0.3em;
}

.ztr-comment:last-child {
  border-bottom-left-radius: 0.3em;
  border-bottom-right-radius: 0.3em;
}

.ztr-comment-info-wrapper {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.ztr-comment-info {
  display: flex;
  align-items: center;
}

.ztr-comment-info-picture {
  width: 3.5em;
}

ul.ztr-comment-info-items {
  display: flex;
  align-items: center;
  list-style: none;
  margin: 0;
  padding: 0;
  font-size: 0.9em;
}

ul.ztr-comment-info-items li {
  display: inline-block;
  cursor: default;
  padding-right: 0.5em;
}

ul.ztr-comment-info-items li a {
  font-weight: 600;
}

.ztr-comment-info-author a {
  font-size: 1.2em;
  padding-right: 0.2em;
}

.ztr-comment-info-dots {
  cursor: pointer;
}

.ztr-comment-info-separator {
  width: 0.5em;
}

.ztr-comment-info-picture img {
  width: 2em;
  height: 2em;
  border-radius: 50%;
  padding: 0.5em;
  position: relative;
  display: block;
  object-fit: cover;
}

.ztr-comment-text,
#ztr-content {
  margin-bottom: 0.75em;
  padding: 0 0.8em 0 3.5em;
  line-height: 1.5em;
  line-break: loose;
  word-break: break-word;
  overflow: hidden;
  max-width: 750px;
}

.ztr-comment-text p {
  margin: 0 0 0.5em 0;
}

.ztr-comment-text code {
  font-size: 1.1em;
  margin: 0 0.2em;
}

.ztr-comment-text pre,
.ztr-info-pane pre {
  white-space: pre-wrap;
  white-space: -moz-pre-wrap;
  word-wrap: break-word;
}

.ztr-comment-text a:hover {
  text-decoration: underline;
}

.ztr-comment-text img {
  max-width: 100%;
}

.ztr-comment-text .warning {
  margin-top: 0em;
  font-size: 0.8em;
  display: flex;
  align-items: center;
}

.ztr-comment-text .warning svg {
  height: 1.2em;
  fill: #e4984d;
  padding-right: 0.7em;
}

.ztr-comment-replies {
  margin-left: 2em;
}

.highlight p {
  background: #F6AD55;
  color: #2B2B2B;
  display: inline;
  padding: 0.2em;
}

/* Styling the reply to comment form */

.ztr-comment-expand {
  display: flex;
  justify-content: center;
}

.ztr-comment-expand span {
  margin: 1em 0 1em 0.35em;
  cursor: pointer;
}

ul.ztr-comment-actions,
.ztr-comment-expand {
  display: flex;
  align-items: center;
  list-style: none;
  margin: 0;
  padding: 0 0 0 3.5em;
  font-weight: 600;
  user-select: none;
}

ul.ztr-comment-actions li {
  display: inline-flex;
  align-items: center;
  text-align: center;
  padding: 0 2em 0 0;
  cursor: pointer;
}

ul.ztr-comment-actions li span {
  padding: 0.25em 0.25em 0 0.25em;
  color: var(--ztr-icon-color, #3B3B3B);
}

svg {
  fill: var(--ztr-icon-color, #3B3B3B);
  width: 1.1em;
  height: 1.1em;
}

.ztr-comment-action-reply:hover svg {
  fill: #92379c;
}

.ztr-comment-action-reply:hover span {
  color: #92379c;
}

.ztr-comment-action-zap:hover svg {
  fill: #e4984d;
}

.ztr-comment-action-zap:hover span {
  color: #e4984d;
}

.ztr-comment-action-like:hover svg {
  fill: #e35428;
}

.ztr-comment-action-like:hover span {
  color: #e35428;
}

.ztr-reply-form {
  padding: 0 0.5em 0 3.5em;
}

.ztr-reply-form textarea {
  font-family: var(--ztr-font);
  font-size: 1.1em;
  line-height: 1.4;
  color: #2B2B2B;
  background-color: #FDFDFD;
  border: 1px solid #BBB;
  outline: none;
  width: calc(100% - 1.5em);
  padding: 0.7em;
  margin: 0.5em 0;
  height: 4em;
  border-radius: 0.2em;
  min-height: 4em;
  resize: vertical;
}

.ztr-reply-form:disabled {
  opacity: 65%;
  user-select: none;
}

.ztr-reply-controls {
  display: flex;
  align-items: center;
  justify-content: flex-end;
}

.ztr-reply-controls span {
  font-weight: bold;
  font-size: 0.85em;
  margin-right: 1em;
  user-select: none;
  cursor: default;
}

.ztr-reply-error {
  color: rgb(202, 23, 23);
}

.ztr-reply-controls button {
  font-family: var(--ztr-font);
  appearance: none;
  border: none;
  padding: 0.5em 1em;
  border-radius: 0.2em;
  font-size: 0.85em;
  font-weight: 600;
  cursor: pointer;
}

.ztr-reply-login-button {
  color: white;
  background-color: var(--ztr-login-button-color, #2B2B2B);
  margin-left: 1em;
}

.ztr-reply-button {
  color: var(--ztr-text-color);
  display: flex;
  align-items: center;
}

.ztr-info-pane {
  padding: 0 0.5em 1em 3.5em;
}

.ztr-info-pane pre {
  font-size: 0.8em;
}

.ztr-spinner {
  width: 1.2em;
  height: 1.2em;
  padding: 0.9em;
  animation: rotate 4s linear infinite;
}

.ztr-reply-button:disabled {
  opacity: 65%;
  pointer-events: none;
  cursor: pointer;
  user-select: none;
}

.ztr-spinner .path {
  stroke: var(--ztr-text-color, #2B2B2B);
  stroke-linecap: round;
  animation: dash 1.5s ease-in-out infinite;
}

@keyframes rotate {
  100% {
    transform: rotate(360deg);
  }
}

@keyframes dash {
  0% {
    stroke-dasharray: 1, 150;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -35;
  }

  100% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -124;
  }
}

/* new */

.ztr-comment-new .ztr-reply-form {
  margin: 0.5em 0;
  padding: 0;
}

.ztr-comment-new .ztr-comment-body {
  padding: 0;
}

.ztr-comment-new .ztr-comment-actions {
  font-size: 1.1em;
  padding: 0;
}

/* Dark mode defaults */

@media (prefers-color-scheme: dark) {
  .ztr-spinner .path {
    stroke: var(--ztr-text-color, #DEDEDE);
  }

  .ztr-comment,
  .ztr-reply-button {
    background-color: var(--ztr-background-color, rgba(255, 255, 255, 0.06));
  }

  .ztr-reply-login-button {
    color: #2B2B2B;
    background-color: var(--ztr-login-button-color, #DEDEDE);
  }

  svg {
    fill: var(--ztr-icon-color, #DEDEDE);
  }

  ul.ztr-comment-actions li span {
    color: var(--ztr-icon-color);
  }

  .ztr-comment-action-reply:hover svg {
    fill: #96609c;
  }

  .ztr-comment-action-reply:hover span {
    color: #96609c;
  }
}`;function F0(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Sb(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Tx(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");F0(e.outputLen),F0(e.blockLen)}function tu(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Bx(e,t){Sb(e);let n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}var df=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Ab=e=>e instanceof Uint8Array,ff=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Yn=(e,t)=>e<<32-t|e>>>t,Lx=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Lx)throw new Error("Non little-endian hardware is not supported");function Cx(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Qf(e){if(typeof e=="string"&&(e=Cx(e)),!Ab(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Px(...e){let t=new Uint8Array(e.reduce((r,o)=>r+o.length,0)),n=0;return e.forEach(r=>{if(!Ab(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}var $b=class{clone(){return this._cloneInto()}};function Ix(e){let t=r=>e().update(Qf(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Tb(e=32){if(df&&typeof df.getRandomValues=="function")return df.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Nx(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);let o=BigInt(32),i=BigInt(4294967295),a=Number(n>>o&i),u=Number(n&i),d=r?4:0,h=r?0:4;e.setUint32(t+d,a,r),e.setUint32(t+h,u,r)}var Ox=class extends $b{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ff(this.buffer)}update(t){tu(this);let{view:n,buffer:r,blockLen:o}=this;t=Qf(t);let i=t.length;for(let a=0;a<i;){let u=Math.min(o-this.pos,i-a);if(u===o){let d=ff(t);for(;o<=i-a;a+=o)this.process(d,a);continue}r.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){tu(this),Bx(t,this),this.finished=!0;let{buffer:n,view:r,blockLen:o,isLE:i}=this,{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(r,0),a=0);for(let w=a;w<o;w++)n[w]=0;Nx(r,o-8,BigInt(this.length*8),i),this.process(r,0);let u=ff(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let h=d/4,m=this.get();if(h>m.length)throw new Error("_sha2: outputLen bigger than state");for(let w=0;w<h;w++)u.setUint32(4*w,m[w],i)}digest(){let{buffer:t,outputLen:n}=this;this.digestInto(t);let r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:n,buffer:r,length:o,finished:i,destroyed:a,pos:u}=this;return t.length=o,t.pos=u,t.finished=i,t.destroyed=a,o%n&&t.buffer.set(r),t}},Rx=(e,t,n)=>e&t^~e&n,Ux=(e,t,n)=>e&t^e&n^t&n,zx=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ao=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),co=new Uint32Array(64),Mx=class extends Ox{constructor(){super(64,32,8,!1),this.A=ao[0]|0,this.B=ao[1]|0,this.C=ao[2]|0,this.D=ao[3]|0,this.E=ao[4]|0,this.F=ao[5]|0,this.G=ao[6]|0,this.H=ao[7]|0}get(){let{A:t,B:n,C:r,D:o,E:i,F:a,G:u,H:d}=this;return[t,n,r,o,i,a,u,d]}set(t,n,r,o,i,a,u,d){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=a|0,this.G=u|0,this.H=d|0}process(t,n){for(let w=0;w<16;w++,n+=4)co[w]=t.getUint32(n,!1);for(let w=16;w<64;w++){let x=co[w-15],P=co[w-2],I=Yn(x,7)^Yn(x,18)^x>>>3,S=Yn(P,17)^Yn(P,19)^P>>>10;co[w]=S+co[w-7]+I+co[w-16]|0}let{A:r,B:o,C:i,D:a,E:u,F:d,G:h,H:m}=this;for(let w=0;w<64;w++){let x=Yn(u,6)^Yn(u,11)^Yn(u,25),P=m+x+Rx(u,d,h)+zx[w]+co[w]|0,S=(Yn(r,2)^Yn(r,13)^Yn(r,22))+Ux(r,o,i)|0;m=h,h=d,d=u,u=a+P|0,a=i,i=o,o=r,r=P+S|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,a=a+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,m=m+this.H|0,this.set(r,o,i,a,u,d,h,m)}roundClean(){co.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Bf=Ix(()=>new Mx);var Bb=BigInt(0),hu=BigInt(1),Dx=BigInt(2),pu=e=>e instanceof Uint8Array,Fx=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ji(e){if(!pu(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Fx[e[n]];return t}function Lb(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function Kf(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Hi(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){let o=r*2,i=e.slice(o,o+2),a=Number.parseInt(i,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");n[r]=a}return n}function rn(e){return Kf(ji(e))}function Gf(e){if(!pu(e))throw new Error("Uint8Array expected");return Kf(ji(Uint8Array.from(e).reverse()))}function mo(e,t){return Hi(e.toString(16).padStart(t*2,"0"))}function Zf(e,t){return mo(e,t).reverse()}function jx(e){return Hi(Lb(e))}function Ht(e,t,n){let r;if(typeof t=="string")try{r=Hi(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(pu(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let o=r.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function Xo(...e){let t=new Uint8Array(e.reduce((r,o)=>r+o.length,0)),n=0;return e.forEach(r=>{if(!pu(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function Hx(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Vx(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function qx(e){let t;for(t=0;e>Bb;e>>=hu,t+=1);return t}function Wx(e,t){return e>>BigInt(t)&hu}var Qx=(e,t,n)=>e|(n?hu:Bb)<<BigInt(t),Yf=e=>(Dx<<BigInt(e-1))-hu,hf=e=>new Uint8Array(e),j0=e=>Uint8Array.from(e);function Cb(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=hf(e),o=hf(e),i=0,a=()=>{r.fill(1),o.fill(0),i=0},u=(...w)=>n(o,r,...w),d=(w=hf())=>{o=u(j0([0]),w),r=u(),w.length!==0&&(o=u(j0([1]),w),r=u())},h=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let w=0,x=[];for(;w<t;){r=u();let P=r.slice();x.push(P),w+=r.length}return Xo(...x)};return(w,x)=>{a(),d(w);let P;for(;!(P=x(h()));)d();return a(),P}}var Kx={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function oa(e,t,n={}){let r=(o,i,a)=>{let u=Kx[i];if(typeof u!="function")throw new Error(`Invalid validator "${i}", expected function`);let d=e[o];if(!(a&&d===void 0)&&!u(d,e))throw new Error(`Invalid param ${String(o)}=${d} (${typeof d}), expected ${i}`)};for(let[o,i]of Object.entries(t))r(o,i,!1);for(let[o,i]of Object.entries(n))r(o,i,!0);return e}var Gx=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Wx,bitLen:qx,bitMask:Yf,bitSet:Qx,bytesToHex:ji,bytesToNumberBE:rn,bytesToNumberLE:Gf,concatBytes:Xo,createHmacDrbg:Cb,ensureBytes:Ht,equalBytes:Hx,hexToBytes:Hi,hexToNumber:Kf,numberToBytesBE:mo,numberToBytesLE:Zf,numberToHexUnpadded:Lb,numberToVarBytesBE:jx,utf8ToBytes:Vx,validateObject:oa},Symbol.toStringTag,{value:"Module"}));var Bt=BigInt(0),bt=BigInt(1),Zo=BigInt(2),Zx=BigInt(3),Lf=BigInt(4),H0=BigInt(5),V0=BigInt(8);BigInt(9);BigInt(16);function zt(e,t){let n=e%t;return n>=Bt?n:t+n}function Yx(e,t,n){if(n<=Bt||t<Bt)throw new Error("Expected power/modulo > 0");if(n===bt)return Bt;let r=bt;for(;t>Bt;)t&bt&&(r=r*e%n),e=e*e%n,t>>=bt;return r}function yn(e,t,n){let r=e;for(;t-- >Bt;)r*=r,r%=n;return r}function Cf(e,t){if(e===Bt||t<=Bt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=zt(e,t),r=t,o=Bt,i=bt;for(;n!==Bt;){let u=r/n,d=r%n,h=o-i*u;r=n,n=d,o=i,i=h}if(r!==bt)throw new Error("invert: does not exist");return zt(o,t)}function Jx(e){let t=(e-bt)/Zo,n,r,o;for(n=e-bt,r=0;n%Zo===Bt;n/=Zo,r++);for(o=Zo;o<e&&Yx(o,t,e)!==e-bt;o++);if(r===1){let a=(e+bt)/Lf;return function(d,h){let m=d.pow(h,a);if(!d.eql(d.sqr(m),h))throw new Error("Cannot find square root");return m}}let i=(n+bt)/Zo;return function(u,d){if(u.pow(d,t)===u.neg(u.ONE))throw new Error("Cannot find square root");let h=r,m=u.pow(u.mul(u.ONE,o),n),w=u.pow(d,i),x=u.pow(d,n);for(;!u.eql(x,u.ONE);){if(u.eql(x,u.ZERO))return u.ZERO;let P=1;for(let S=u.sqr(x);P<h&&!u.eql(S,u.ONE);P++)S=u.sqr(S);let I=u.pow(m,bt<<BigInt(h-P-1));m=u.sqr(I),w=u.mul(w,I),x=u.mul(x,m),h=P}return w}}function Xx(e){if(e%Lf===Zx){let t=(e+bt)/Lf;return function(r,o){let i=r.pow(o,t);if(!r.eql(r.sqr(i),o))throw new Error("Cannot find square root");return i}}if(e%V0===H0){let t=(e-H0)/V0;return function(r,o){let i=r.mul(o,Zo),a=r.pow(i,t),u=r.mul(o,a),d=r.mul(r.mul(u,Zo),a),h=r.mul(u,r.sub(d,r.ONE));if(!r.eql(r.sqr(h),o))throw new Error("Cannot find square root");return h}}return Jx(e)}var ek=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function tk(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=ek.reduce((r,o)=>(r[o]="function",r),t);return oa(e,n)}function nk(e,t,n){if(n<Bt)throw new Error("Expected power > 0");if(n===Bt)return e.ONE;if(n===bt)return t;let r=e.ONE,o=t;for(;n>Bt;)n&bt&&(r=e.mul(r,o)),o=e.sqr(o),n>>=bt;return r}function rk(e,t){let n=new Array(t.length),r=t.reduce((i,a,u)=>e.is0(a)?i:(n[u]=i,e.mul(i,a)),e.ONE),o=e.inv(r);return t.reduceRight((i,a,u)=>e.is0(a)?i:(n[u]=e.mul(i,n[u]),e.mul(i,a)),o),n}function Pb(e,t){let n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ok(e,t,n=!1,r={}){if(e<=Bt)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:o,nByteLength:i}=Pb(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let a=Xx(e),u=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:Yf(o),ZERO:Bt,ONE:bt,create:d=>zt(d,e),isValid:d=>{if(typeof d!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof d}`);return Bt<=d&&d<e},is0:d=>d===Bt,isOdd:d=>(d&bt)===bt,neg:d=>zt(-d,e),eql:(d,h)=>d===h,sqr:d=>zt(d*d,e),add:(d,h)=>zt(d+h,e),sub:(d,h)=>zt(d-h,e),mul:(d,h)=>zt(d*h,e),pow:(d,h)=>nk(u,d,h),div:(d,h)=>zt(d*Cf(h,e),e),sqrN:d=>d*d,addN:(d,h)=>d+h,subN:(d,h)=>d-h,mulN:(d,h)=>d*h,inv:d=>Cf(d,e),sqrt:r.sqrt||(d=>a(u,d)),invertBatch:d=>rk(u,d),cmov:(d,h,m)=>m?h:d,toBytes:d=>n?Zf(d,i):mo(d,i),fromBytes:d=>{if(d.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${d.length}`);return n?Gf(d):rn(d)}});return Object.freeze(u)}function Ib(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function Nb(e){let t=Ib(e);return t+Math.ceil(t/2)}function ik(e,t,n=!1){let r=e.length,o=Ib(t),i=Nb(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);let a=n?rn(e):Gf(e),u=zt(a,t-bt)+bt;return n?Zf(u,o):mo(u,o)}var sk=BigInt(0),pf=BigInt(1);function ak(e,t){let n=(o,i)=>{let a=i.negate();return o?a:i},r=o=>{let i=Math.ceil(t/o)+1,a=2**(o-1);return{windows:i,windowSize:a}};return{constTimeNegate:n,unsafeLadder(o,i){let a=e.ZERO,u=o;for(;i>sk;)i&pf&&(a=a.add(u)),u=u.double(),i>>=pf;return a},precomputeWindow(o,i){let{windows:a,windowSize:u}=r(i),d=[],h=o,m=h;for(let w=0;w<a;w++){m=h,d.push(m);for(let x=1;x<u;x++)m=m.add(h),d.push(m);h=m.double()}return d},wNAF(o,i,a){let{windows:u,windowSize:d}=r(o),h=e.ZERO,m=e.BASE,w=BigInt(2**o-1),x=2**o,P=BigInt(o);for(let I=0;I<u;I++){let S=I*d,N=Number(a&w);a>>=P,N>d&&(N-=x,a+=pf);let z=S,B=S+Math.abs(N)-1,f=I%2!==0,p=N<0;N===0?m=m.add(n(f,i[z])):h=h.add(n(p,i[B]))}return{p:h,f:m}},wNAFCached(o,i,a,u){let d=o._WINDOW_SIZE||1,h=i.get(o);return h||(h=this.precomputeWindow(o,d),d!==1&&i.set(o,u(h))),this.wNAF(d,h,a)}}}function Ob(e){return tk(e.Fp),oa(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Pb(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function ck(e){let t=Ob(e);oa(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:uk,hexToBytes:lk}=Gx,Jo={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=Jo;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:uk(r),l:e.subarray(n+2)}},toSig(e){let{Err:t}=Jo,n=typeof e=="string"?lk(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");let{d:o,l:i}=Jo._parseInt(n.subarray(2)),{d:a,l:u}=Jo._parseInt(i);if(u.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:a}},hexFromSig(e){let t=h=>Number.parseInt(h[0],16)&8?"00"+h:h,n=h=>{let m=h.toString(16);return m.length&1?`0${m}`:m},r=t(n(e.s)),o=t(n(e.r)),i=r.length/2,a=o.length/2,u=n(i),d=n(a);return`30${n(a+i+4)}02${d}${o}02${u}${r}`}},kr=BigInt(0),vn=BigInt(1);BigInt(2);var q0=BigInt(3);BigInt(4);function dk(e){let t=ck(e),{Fp:n}=t,r=t.toBytes||((I,S,N)=>{let z=S.toAffine();return Xo(Uint8Array.from([4]),n.toBytes(z.x),n.toBytes(z.y))}),o=t.fromBytes||(I=>{let S=I.subarray(1),N=n.fromBytes(S.subarray(0,n.BYTES)),z=n.fromBytes(S.subarray(n.BYTES,2*n.BYTES));return{x:N,y:z}});function i(I){let{a:S,b:N}=t,z=n.sqr(I),B=n.mul(z,I);return n.add(n.add(B,n.mul(I,S)),N)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function a(I){return typeof I=="bigint"&&kr<I&&I<t.n}function u(I){if(!a(I))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function d(I){let{allowedPrivateKeyLengths:S,nByteLength:N,wrapPrivateKey:z,n:B}=t;if(S&&typeof I!="bigint"){if(I instanceof Uint8Array&&(I=ji(I)),typeof I!="string"||!S.includes(I.length))throw new Error("Invalid key");I=I.padStart(N*2,"0")}let f;try{f=typeof I=="bigint"?I:rn(Ht("private key",I,N))}catch{throw new Error(`private key must be ${N} bytes, hex or bigint, not ${typeof I}`)}return z&&(f=zt(f,B)),u(f),f}let h=new Map;function m(I){if(!(I instanceof w))throw new Error("ProjectivePoint expected")}class w{constructor(S,N,z){if(this.px=S,this.py=N,this.pz=z,S==null||!n.isValid(S))throw new Error("x required");if(N==null||!n.isValid(N))throw new Error("y required");if(z==null||!n.isValid(z))throw new Error("z required")}static fromAffine(S){let{x:N,y:z}=S||{};if(!S||!n.isValid(N)||!n.isValid(z))throw new Error("invalid affine point");if(S instanceof w)throw new Error("projective point not allowed");let B=f=>n.eql(f,n.ZERO);return B(N)&&B(z)?w.ZERO:new w(N,z,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){let N=n.invertBatch(S.map(z=>z.pz));return S.map((z,B)=>z.toAffine(N[B])).map(w.fromAffine)}static fromHex(S){let N=w.fromAffine(o(Ht("pointHex",S)));return N.assertValidity(),N}static fromPrivateKey(S){return w.BASE.multiply(d(S))}_setWindowSize(S){this._WINDOW_SIZE=S,h.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:S,y:N}=this.toAffine();if(!n.isValid(S)||!n.isValid(N))throw new Error("bad point: x or y not FE");let z=n.sqr(N),B=i(S);if(!n.eql(z,B))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:S}=this.toAffine();if(n.isOdd)return!n.isOdd(S);throw new Error("Field doesn't support isOdd")}equals(S){m(S);let{px:N,py:z,pz:B}=this,{px:f,py:p,pz:b}=S,v=n.eql(n.mul(N,b),n.mul(f,B)),k=n.eql(n.mul(z,b),n.mul(p,B));return v&&k}negate(){return new w(this.px,n.neg(this.py),this.pz)}double(){let{a:S,b:N}=t,z=n.mul(N,q0),{px:B,py:f,pz:p}=this,b=n.ZERO,v=n.ZERO,k=n.ZERO,A=n.mul(B,B),T=n.mul(f,f),U=n.mul(p,p),C=n.mul(B,f);return C=n.add(C,C),k=n.mul(B,p),k=n.add(k,k),b=n.mul(S,k),v=n.mul(z,U),v=n.add(b,v),b=n.sub(T,v),v=n.add(T,v),v=n.mul(b,v),b=n.mul(C,b),k=n.mul(z,k),U=n.mul(S,U),C=n.sub(A,U),C=n.mul(S,C),C=n.add(C,k),k=n.add(A,A),A=n.add(k,A),A=n.add(A,U),A=n.mul(A,C),v=n.add(v,A),U=n.mul(f,p),U=n.add(U,U),A=n.mul(U,C),b=n.sub(b,A),k=n.mul(U,T),k=n.add(k,k),k=n.add(k,k),new w(b,v,k)}add(S){m(S);let{px:N,py:z,pz:B}=this,{px:f,py:p,pz:b}=S,v=n.ZERO,k=n.ZERO,A=n.ZERO,T=t.a,U=n.mul(t.b,q0),C=n.mul(N,f),$=n.mul(z,p),F=n.mul(B,b),q=n.add(N,z),E=n.add(f,p);q=n.mul(q,E),E=n.add(C,$),q=n.sub(q,E),E=n.add(N,B);let M=n.add(f,b);return E=n.mul(E,M),M=n.add(C,F),E=n.sub(E,M),M=n.add(z,B),v=n.add(p,b),M=n.mul(M,v),v=n.add($,F),M=n.sub(M,v),A=n.mul(T,E),v=n.mul(U,F),A=n.add(v,A),v=n.sub($,A),A=n.add($,A),k=n.mul(v,A),$=n.add(C,C),$=n.add($,C),F=n.mul(T,F),E=n.mul(U,E),$=n.add($,F),F=n.sub(C,F),F=n.mul(T,F),E=n.add(E,F),C=n.mul($,E),k=n.add(k,C),C=n.mul(M,E),v=n.mul(q,v),v=n.sub(v,C),C=n.mul(q,$),A=n.mul(M,A),A=n.add(A,C),new w(v,k,A)}subtract(S){return this.add(S.negate())}is0(){return this.equals(w.ZERO)}wNAF(S){return P.wNAFCached(this,h,S,N=>{let z=n.invertBatch(N.map(B=>B.pz));return N.map((B,f)=>B.toAffine(z[f])).map(w.fromAffine)})}multiplyUnsafe(S){let N=w.ZERO;if(S===kr)return N;if(u(S),S===vn)return this;let{endo:z}=t;if(!z)return P.unsafeLadder(this,S);let{k1neg:B,k1:f,k2neg:p,k2:b}=z.splitScalar(S),v=N,k=N,A=this;for(;f>kr||b>kr;)f&vn&&(v=v.add(A)),b&vn&&(k=k.add(A)),A=A.double(),f>>=vn,b>>=vn;return B&&(v=v.negate()),p&&(k=k.negate()),k=new w(n.mul(k.px,z.beta),k.py,k.pz),v.add(k)}multiply(S){u(S);let N=S,z,B,{endo:f}=t;if(f){let{k1neg:p,k1:b,k2neg:v,k2:k}=f.splitScalar(N),{p:A,f:T}=this.wNAF(b),{p:U,f:C}=this.wNAF(k);A=P.constTimeNegate(p,A),U=P.constTimeNegate(v,U),U=new w(n.mul(U.px,f.beta),U.py,U.pz),z=A.add(U),B=T.add(C)}else{let{p,f:b}=this.wNAF(N);z=p,B=b}return w.normalizeZ([z,B])[0]}multiplyAndAddUnsafe(S,N,z){let B=w.BASE,f=(b,v)=>v===kr||v===vn||!b.equals(B)?b.multiplyUnsafe(v):b.multiply(v),p=f(this,N).add(f(S,z));return p.is0()?void 0:p}toAffine(S){let{px:N,py:z,pz:B}=this,f=this.is0();S==null&&(S=f?n.ONE:n.inv(B));let p=n.mul(N,S),b=n.mul(z,S),v=n.mul(B,S);if(f)return{x:n.ZERO,y:n.ZERO};if(!n.eql(v,n.ONE))throw new Error("invZ was invalid");return{x:p,y:b}}isTorsionFree(){let{h:S,isTorsionFree:N}=t;if(S===vn)return!0;if(N)return N(w,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:S,clearCofactor:N}=t;return S===vn?this:N?N(w,this):this.multiplyUnsafe(t.h)}toRawBytes(S=!0){return this.assertValidity(),r(w,this,S)}toHex(S=!0){return ji(this.toRawBytes(S))}}w.BASE=new w(t.Gx,t.Gy,n.ONE),w.ZERO=new w(n.ZERO,n.ONE,n.ZERO);let x=t.nBitLength,P=ak(w,t.endo?Math.ceil(x/2):x);return{CURVE:t,ProjectivePoint:w,normPrivateKeyToScalar:d,weierstrassEquation:i,isWithinCurveOrder:a}}function fk(e){let t=Ob(e);return oa(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function hk(e){let t=fk(e),{Fp:n,n:r}=t,o=n.BYTES+1,i=2*n.BYTES+1;function a(E){return kr<E&&E<n.ORDER}function u(E){return zt(E,r)}function d(E){return Cf(E,r)}let{ProjectivePoint:h,normPrivateKeyToScalar:m,weierstrassEquation:w,isWithinCurveOrder:x}=dk({...t,toBytes(E,M,V){let K=M.toAffine(),Z=n.toBytes(K.x),W=Xo;return V?W(Uint8Array.from([M.hasEvenY()?2:3]),Z):W(Uint8Array.from([4]),Z,n.toBytes(K.y))},fromBytes(E){let M=E.length,V=E[0],K=E.subarray(1);if(M===o&&(V===2||V===3)){let Z=rn(K);if(!a(Z))throw new Error("Point is not on curve");let W=w(Z),J=n.sqrt(W),ue=(J&vn)===vn;return(V&1)===1!==ue&&(J=n.neg(J)),{x:Z,y:J}}else if(M===i&&V===4){let Z=n.fromBytes(K.subarray(0,n.BYTES)),W=n.fromBytes(K.subarray(n.BYTES,2*n.BYTES));return{x:Z,y:W}}else throw new Error(`Point of length ${M} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}}),P=E=>ji(mo(E,t.nByteLength));function I(E){let M=r>>vn;return E>M}function S(E){return I(E)?u(-E):E}let N=(E,M,V)=>rn(E.slice(M,V));class z{constructor(M,V,K){this.r=M,this.s=V,this.recovery=K,this.assertValidity()}static fromCompact(M){let V=t.nByteLength;return M=Ht("compactSignature",M,V*2),new z(N(M,0,V),N(M,V,2*V))}static fromDER(M){let{r:V,s:K}=Jo.toSig(Ht("DER",M));return new z(V,K)}assertValidity(){if(!x(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!x(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(M){return new z(this.r,this.s,M)}recoverPublicKey(M){let{r:V,s:K,recovery:Z}=this,W=k(Ht("msgHash",M));if(Z==null||![0,1,2,3].includes(Z))throw new Error("recovery id invalid");let J=Z===2||Z===3?V+t.n:V;if(J>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");let ue=(Z&1)===0?"02":"03",_e=h.fromHex(ue+P(J)),ve=d(J),Pe=u(-W*ve),oe=u(K*ve),Se=h.BASE.multiplyAndAddUnsafe(_e,Pe,oe);if(!Se)throw new Error("point at infinify");return Se.assertValidity(),Se}hasHighS(){return I(this.s)}normalizeS(){return this.hasHighS()?new z(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return Hi(this.toDERHex())}toDERHex(){return Jo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Hi(this.toCompactHex())}toCompactHex(){return P(this.r)+P(this.s)}}let B={isValidPrivateKey(E){try{return m(E),!0}catch{return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{let E=Nb(t.n);return ik(t.randomBytes(E),t.n)},precompute(E=8,M=h.BASE){return M._setWindowSize(E),M.multiply(BigInt(3)),M}};function f(E,M=!0){return h.fromPrivateKey(E).toRawBytes(M)}function p(E){let M=E instanceof Uint8Array,V=typeof E=="string",K=(M||V)&&E.length;return M?K===o||K===i:V?K===2*o||K===2*i:E instanceof h}function b(E,M,V=!0){if(p(E))throw new Error("first arg must be private key");if(!p(M))throw new Error("second arg must be public key");return h.fromHex(M).multiply(m(E)).toRawBytes(V)}let v=t.bits2int||function(E){let M=rn(E),V=E.length*8-t.nBitLength;return V>0?M>>BigInt(V):M},k=t.bits2int_modN||function(E){return u(v(E))},A=Yf(t.nBitLength);function T(E){if(typeof E!="bigint")throw new Error("bigint expected");if(!(kr<=E&&E<A))throw new Error(`bigint expected < 2^${t.nBitLength}`);return mo(E,t.nByteLength)}function U(E,M,V=C){if(["recovered","canonical"].some(Re=>Re in V))throw new Error("sign() legacy options not supported");let{hash:K,randomBytes:Z}=t,{lowS:W,prehash:J,extraEntropy:ue}=V;W==null&&(W=!0),E=Ht("msgHash",E),J&&(E=Ht("prehashed msgHash",K(E)));let _e=k(E),ve=m(M),Pe=[T(ve),T(_e)];if(ue!=null){let Re=ue===!0?Z(n.BYTES):ue;Pe.push(Ht("extraEntropy",Re))}let oe=Xo(...Pe),Se=_e;function Ve(Re){let je=v(Re);if(!x(je))return;let xt=d(je),Qe=h.BASE.multiply(je).toAffine(),de=u(Qe.x);if(de===kr)return;let De=u(xt*u(Se+de*ve));if(De===kr)return;let Ce=(Qe.x===de?0:2)|Number(Qe.y&vn),Ie=De;return W&&I(De)&&(Ie=S(De),Ce^=1),new z(de,Ie,Ce)}return{seed:oe,k2sig:Ve}}let C={lowS:t.lowS,prehash:!1},$={lowS:t.lowS,prehash:!1};function F(E,M,V=C){let{seed:K,k2sig:Z}=U(E,M,V),W=t;return Cb(W.hash.outputLen,W.nByteLength,W.hmac)(K,Z)}h.BASE._setWindowSize(8);function q(E,M,V,K=$){var Z;let W=E;if(M=Ht("msgHash",M),V=Ht("publicKey",V),"strict"in K)throw new Error("options.strict was renamed to lowS");let{lowS:J,prehash:ue}=K,_e,ve;try{if(typeof W=="string"||W instanceof Uint8Array)try{_e=z.fromDER(W)}catch(de){if(!(de instanceof Jo.Err))throw de;_e=z.fromCompact(W)}else if(typeof W=="object"&&typeof W.r=="bigint"&&typeof W.s=="bigint"){let{r:de,s:De}=W;_e=new z(de,De)}else throw new Error("PARSE");ve=h.fromHex(V)}catch(de){if(de.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(J&&_e.hasHighS())return!1;ue&&(M=t.hash(M));let{r:Pe,s:oe}=_e,Se=k(M),Ve=d(oe),Re=u(Se*Ve),je=u(Pe*Ve),xt=(Z=h.BASE.multiplyAndAddUnsafe(ve,Re,je))==null?void 0:Z.toAffine();return xt?u(xt.x)===Pe:!1}return{CURVE:t,getPublicKey:f,getSharedSecret:b,sign:F,verify:q,ProjectivePoint:h,Signature:z,utils:B}}var nu=class extends $b{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Tx(t);let r=Qf(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=t.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(t){return tu(this),this.iHash.update(t),this}digestInto(t){tu(this),Sb(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:n,iHash:r,finished:o,destroyed:i,blockLen:a,outputLen:u}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=a,t.outputLen=u,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Rb=(e,t,n)=>new nu(e,t).update(n).digest();Rb.create=(e,t)=>new nu(e,t);function pk(e){return{hash:e,hmac:(t,...n)=>Rb(e,t,Px(...n)),randomBytes:Tb}}function gk(e,t){let n=r=>hk({...e,...pk(r)});return Object.freeze({...n(t),create:n})}var gu=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ru=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ub=BigInt(1),ou=BigInt(2),W0=(e,t)=>(e+t/ou)/t;function zb(e){let t=gu,n=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),a=BigInt(23),u=BigInt(44),d=BigInt(88),h=e*e*e%t,m=h*h*e%t,w=yn(m,n,t)*m%t,x=yn(w,n,t)*m%t,P=yn(x,ou,t)*h%t,I=yn(P,o,t)*P%t,S=yn(I,i,t)*I%t,N=yn(S,u,t)*S%t,z=yn(N,d,t)*N%t,B=yn(z,u,t)*S%t,f=yn(B,n,t)*m%t,p=yn(f,a,t)*I%t,b=yn(p,r,t)*h%t,v=yn(b,ou,t);if(!Pf.eql(Pf.sqr(v),e))throw new Error("Cannot find square root");return v}var Pf=ok(gu,void 0,void 0,{sqrt:zb}),Jf=gk({a:BigInt(0),b:BigInt(7),Fp:Pf,n:ru,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=ru,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ub*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),u=W0(i*e,t),d=W0(-r*e,t),h=zt(e-u*n-d*o,t),m=zt(-u*r-d*i,t),w=h>a,x=m>a;if(w&&(h=t-h),x&&(m=t-m),h>a||m>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:w,k1:h,k2neg:x,k2:m}}}},Bf),mu=BigInt(0),Mb=e=>typeof e=="bigint"&&mu<e&&e<gu,mk=e=>typeof e=="bigint"&&mu<e&&e<ru,Q0={};function iu(e,...t){let n=Q0[e];if(n===void 0){let r=Bf(Uint8Array.from(e,o=>o.charCodeAt(0)));n=Xo(r,r),Q0[e]=n}return Bf(Xo(n,...t))}var Xf=e=>e.toRawBytes(!0).slice(1),If=e=>mo(e,32),gf=e=>zt(e,gu),na=e=>zt(e,ru),eh=Jf.ProjectivePoint,bk=(e,t,n)=>eh.BASE.multiplyAndAddUnsafe(e,t,n);function Nf(e){let t=Jf.utils.normPrivateKeyToScalar(e),n=eh.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:na(-t),bytes:Xf(n)}}function Db(e){if(!Mb(e))throw new Error("bad x: need 0 < x < p");let t=gf(e*e),n=gf(t*e+BigInt(7)),r=zb(n);r%ou!==mu&&(r=gf(-r));let o=new eh(e,r,Ub);return o.assertValidity(),o}function Fb(...e){return na(rn(iu("BIP0340/challenge",...e)))}function wk(e){return Nf(e).bytes}function yk(e,t,n=Tb(32)){let r=Ht("message",e),{bytes:o,scalar:i}=Nf(t),a=Ht("auxRand",n,32),u=If(i^rn(iu("BIP0340/aux",a))),d=iu("BIP0340/nonce",u,o,r),h=na(rn(d));if(h===mu)throw new Error("sign failed: k is zero");let{bytes:m,scalar:w}=Nf(h),x=Fb(m,o,r),P=new Uint8Array(64);if(P.set(m,0),P.set(If(na(w+x*i)),32),!jb(P,r,o))throw new Error("sign: Invalid signature produced");return P}function jb(e,t,n){let r=Ht("signature",e,64),o=Ht("message",t),i=Ht("publicKey",n,32);try{let a=Db(rn(i)),u=rn(r.subarray(0,32));if(!Mb(u))return!1;let d=rn(r.subarray(32,64));if(!mk(d))return!1;let h=Fb(If(u),Xf(a),o),m=bk(a,d,na(-h));return!(!m||!m.hasEvenY()||m.toAffine().x!==u)}catch{return!1}}var Zt={getPublicKey:wk,sign:yk,verify:jb,utils:{randomPrivateKey:Jf.utils.randomPrivateKey,lift_x:Db,pointToBytes:Xf,numberToBytesBE:mo,bytesToNumberBE:rn,taggedHash:iu,mod:zt}};var Hb=e=>e instanceof Uint8Array,mf=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Jn=(e,t)=>e<<32-t|e>>>t,vk=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!vk)throw new Error("Non little-endian hardware is not supported");var _k=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function et(e){if(!Hb(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=_k[e[n]];return t}function Vb(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){let o=r*2,i=e.slice(o,o+2),a=Number.parseInt(i,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");n[r]=a}return n}function Ek(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function qb(e){if(typeof e=="string"&&(e=Ek(e)),!Hb(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}var Of=class{clone(){return this._cloneInto()}};function Wb(e){let t=r=>e().update(qb(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Rf(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function xk(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Qb(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function kk(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Rf(e.outputLen),Rf(e.blockLen)}function Sk(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Ak(e,t){Qb(e);let n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}var bf={number:Rf,bool:xk,bytes:Qb,hash:kk,exists:Sk,output:Ak};function $k(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);let o=BigInt(32),i=BigInt(4294967295),a=Number(n>>o&i),u=Number(n&i),d=r?4:0,h=r?0:4;e.setUint32(t+d,a,r),e.setUint32(t+h,u,r)}var Uf=class extends Of{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=mf(this.buffer)}update(t){bf.exists(this);let{view:n,buffer:r,blockLen:o}=this;t=qb(t);let i=t.length;for(let a=0;a<i;){let u=Math.min(o-this.pos,i-a);if(u===o){let d=mf(t);for(;o<=i-a;a+=o)this.process(d,a);continue}r.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){bf.exists(this),bf.output(t,this),this.finished=!0;let{buffer:n,view:r,blockLen:o,isLE:i}=this,{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(r,0),a=0);for(let w=a;w<o;w++)n[w]=0;$k(r,o-8,BigInt(this.length*8),i),this.process(r,0);let u=mf(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let h=d/4,m=this.get();if(h>m.length)throw new Error("_sha2: outputLen bigger than state");for(let w=0;w<h;w++)u.setUint32(4*w,m[w],i)}digest(){let{buffer:t,outputLen:n}=this;this.digestInto(t);let r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:n,buffer:r,length:o,finished:i,destroyed:a,pos:u}=this;return t.length=o,t.pos=u,t.finished=i,t.destroyed=a,o%n&&t.buffer.set(r),t}},Tk=(e,t,n)=>e&t^~e&n,Bk=(e,t,n)=>e&t^e&n^t&n,Lk=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),uo=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),lo=new Uint32Array(64),su=class extends Uf{constructor(){super(64,32,8,!1),this.A=uo[0]|0,this.B=uo[1]|0,this.C=uo[2]|0,this.D=uo[3]|0,this.E=uo[4]|0,this.F=uo[5]|0,this.G=uo[6]|0,this.H=uo[7]|0}get(){let{A:t,B:n,C:r,D:o,E:i,F:a,G:u,H:d}=this;return[t,n,r,o,i,a,u,d]}set(t,n,r,o,i,a,u,d){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=a|0,this.G=u|0,this.H=d|0}process(t,n){for(let w=0;w<16;w++,n+=4)lo[w]=t.getUint32(n,!1);for(let w=16;w<64;w++){let x=lo[w-15],P=lo[w-2],I=Jn(x,7)^Jn(x,18)^x>>>3,S=Jn(P,17)^Jn(P,19)^P>>>10;lo[w]=S+lo[w-7]+I+lo[w-16]|0}let{A:r,B:o,C:i,D:a,E:u,F:d,G:h,H:m}=this;for(let w=0;w<64;w++){let x=Jn(u,6)^Jn(u,11)^Jn(u,25),P=m+x+Tk(u,d,h)+Lk[w]+lo[w]|0,S=(Jn(r,2)^Jn(r,13)^Jn(r,22))+Bk(r,o,i)|0;m=h,h=d,d=u,u=a+P|0,a=i,i=o,o=r,r=P+S|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,a=a+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,m=m+this.H|0,this.set(r,o,i,a,u,d,h,m)}roundClean(){lo.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},zf=class extends su{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},th=Wb(()=>new su);Wb(()=>new zf);var Go=Symbol("verified"),Ck=e=>e instanceof Object;function Pk(e){if(!Ck(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var Ik=new TextEncoder;function Zs(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var Nk=class{constructor(t){we(this,"value"),we(this,"next",null),we(this,"prev",null),this.value=t}},Ok=class{constructor(){we(this,"first"),we(this,"last"),this.first=null,this.last=null}enqueue(t){let n=new Nk(t);return this.last?this.last===this.first?(this.last=n,this.last.prev=this.first,this.first.next=n):(n.prev=this.last,this.last.next=n,this.last=n):(this.first=n,this.last=n),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){let n=this.first;return this.first=null,this.last=null,n.value}let t=this.first;return this.first=t.next,t.value}},Rk=class{generateSecretKey(){return Zt.utils.randomPrivateKey()}getPublicKey(t){return et(Zt.getPublicKey(t))}finalizeEvent(t,n){let r=t;return r.pubkey=et(Zt.getPublicKey(n)),r.id=wf(r),r.sig=et(Zt.sign(wf(r),n)),r[Go]=!0,r}verifyEvent(t){if(typeof t[Go]=="boolean")return t[Go];let n=wf(t);if(n!==t.id)return t[Go]=!1,!1;try{let r=Zt.verify(t.sig,n,t.pubkey);return t[Go]=r,r}catch{return t[Go]=!1,!1}}};function Uk(e){if(!Pk(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function wf(e){let t=th(Ik.encode(Uk(e)));return et(t)}var bu=new Rk;bu.generateSecretKey;bu.getPublicKey;bu.finalizeEvent;var zk=bu.verifyEvent,Mk=22242;function Dk(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1&&!e.ids.some(n=>t.id.startsWith(n))||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1&&!e.authors.some(n=>t.pubkey.startsWith(n)))return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),o=e[`#${r}`];if(o&&!t.tags.find(([i,a])=>i===n.slice(1)&&o.indexOf(a)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function Fk(e,t){for(let n=0;n<e.length;n++)if(Dk(e[n],t))return!0;return!1}function jk(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function Hk(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let i=r+1+o;return e.slice(r+1,i)}function Vk(e,t){return{kind:Mk,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function qk(){return new Promise(e=>{let t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}var Wk=e=>(e[Go]=!0,!0),Kb;try{Kb=WebSocket}catch{}var Gb=class{constructor(t,n){we(this,"url"),we(this,"_connected",!1),we(this,"onclose",null),we(this,"onnotice",r=>console.debug(`NOTICE from ${this.url}: ${r}`)),we(this,"_onauth",null),we(this,"baseEoseTimeout",4400),we(this,"connectionTimeout",4400),we(this,"openSubs",new Map),we(this,"connectionTimeoutHandle"),we(this,"connectionPromise"),we(this,"openCountRequests",new Map),we(this,"openEventPublishes",new Map),we(this,"ws"),we(this,"incomingMessageQueue",new Ok),we(this,"queueRunning",!1),we(this,"challenge"),we(this,"serial",0),we(this,"verifyEvent"),this.url=Zs(t),this.verifyEvent=n.verifyEvent}static async connect(t,n){let r=new Gb(t,n);return await r.connect(),r}closeAllSubscriptions(t){for(let[n,r]of this.openSubs)r.close(t);this.openSubs.clear();for(let[n,r]of this.openEventPublishes)r.reject(new Error(t));this.openEventPublishes.clear();for(let[n,r]of this.openCountRequests)r.reject(new Error(t));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((t,n)=>{this.connectionTimeoutHandle=setTimeout(()=>{var r;n("connection timed out"),this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new Kb(this.url)}catch(r){n(r);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,t()},this.ws.onerror=r=>{var o;n(r.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(o=this.onclose)==null||o.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var r;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await qk();this.queueRunning=!1}handleNext(){var t,n,r;let o=this.incomingMessageQueue.dequeue();if(!o)return!1;let i=Hk(o);if(i){let a=this.openSubs.get(i);if(!a)return;let u=jk(o,"id"),d=(t=a.alreadyHaveEvent)==null?void 0:t.call(a,u);if((n=a.receivedEvent)==null||n.call(a,this,u),d)return}try{let a=JSON.parse(o);switch(a[0]){case"EVENT":{let u=this.openSubs.get(a[1]),d=a[2];this.verifyEvent(d)&&Fk(u.filters,d)&&u.onevent(d);return}case"COUNT":{let u=a[1],d=a[2],h=this.openCountRequests.get(u);h&&(h.resolve(d.count),this.openCountRequests.delete(u));return}case"EOSE":{let u=this.openSubs.get(a[1]);if(!u)return;u.receivedEose();return}case"OK":{let u=a[1],d=a[2],h=a[3],m=this.openEventPublishes.get(u);d?m.resolve(h):m.reject(new Error(h)),this.openEventPublishes.delete(u);return}case"CLOSED":{let u=a[1],d=this.openSubs.get(u);if(!d)return;d.closed=!0,d.close(a[2]);return}case"NOTICE":this.onnotice(a[1]);return;case"AUTH":{this.challenge=a[1],(r=this._onauth)==null||r.call(this,a[1]);return}}}catch{return}}async send(t){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var n;(n=this.ws)==null||n.send(t)})}async auth(t){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");let n=await t(Vk(this.url,this.challenge)),r=new Promise((o,i)=>{this.openEventPublishes.set(n.id,{resolve:o,reject:i})});return this.send('["AUTH",'+JSON.stringify(n)+"]"),r}async publish(t){let n=new Promise((r,o)=>{this.openEventPublishes.set(t.id,{resolve:r,reject:o})});return this.send('["EVENT",'+JSON.stringify(t)+"]"),n}async count(t,n){this.serial++;let r=n?.id||"count:"+this.serial,o=new Promise((i,a)=>{this.openCountRequests.set(r,{resolve:i,reject:a})});return this.send('["COUNT","'+r+'",'+JSON.stringify(t)+"]"),o}subscribe(t,n){let r=this.prepareSubscription(t,n);return r.fire(),r}prepareSubscription(t,n){this.serial++;let r=n.id||"sub:"+this.serial,o=new Qk(this,r,t,n);return this.openSubs.set(r,o),o}close(){var t;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(t=this.ws)==null||t.close()}_onmessage(t){this.incomingMessageQueue.enqueue(t.data),this.queueRunning||this.runQueue()}},Qk=class{constructor(t,n,r,o){we(this,"relay"),we(this,"id"),we(this,"closed",!1),we(this,"eosed",!1),we(this,"filters"),we(this,"alreadyHaveEvent"),we(this,"receivedEvent"),we(this,"onevent"),we(this,"oneose"),we(this,"onclose"),we(this,"eoseTimeout"),we(this,"eoseTimeoutHandle"),this.relay=t,this.filters=r,this.id=n,this.alreadyHaveEvent=o.alreadyHaveEvent,this.receivedEvent=o.receivedEvent,this.eoseTimeout=o.eoseTimeout||t.baseEoseTimeout,this.oneose=o.oneose,this.onclose=o.onclose,this.onevent=o.onevent||(i=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,i)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var t;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(t=this.oneose)==null||t.call(this))}close(t="closed by caller"){var n;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(n=this.onclose)==null||n.call(this,t)}},Kk=class{constructor(e){we(this,"relays",new Map),we(this,"seenOn",new Map),we(this,"trackRelays",!1),we(this,"verifyEvent"),we(this,"trustedRelayURLs",new Set),this.verifyEvent=e.verifyEvent}async ensureRelay(e,t){e=Zs(e);let n=this.relays.get(e);return n||(n=new Gb(e,{verifyEvent:this.trustedRelayURLs.has(e)?Wk:this.verifyEvent}),t?.connectionTimeout&&(n.connectionTimeout=t.connectionTimeout),this.relays.set(e,n)),await n.connect(),n}close(e){e.map(Zs).forEach(t=>{var n;(n=this.relays.get(t))==null||n.close()})}subscribeMany(e,t,n){this.trackRelays&&(n.receivedEvent=(w,x)=>{let P=this.seenOn.get(x);P||(P=new Set,this.seenOn.set(x,P)),P.add(w)});let r=new Set,o=[],i=[],a=w=>{var x;i[w]=!0,i.filter(P=>P).length===e.length&&((x=n.oneose)==null||x.call(n),a=()=>{})},u=[],d=(w,x)=>{var P;a(w),u[w]=x,u.filter(I=>I).length===e.length&&((P=n.onclose)==null||P.call(n,u),d=()=>{})},h=w=>{var x;if((x=n.alreadyHaveEvent)!=null&&x.call(n,w))return!0;let P=r.has(w);return r.add(w),P},m=Promise.all(e.map(Zs).map(async(w,x,P)=>{if(P.indexOf(w)!==x){d(x,"duplicate url");return}let I;try{I=await this.ensureRelay(w,{connectionTimeout:n.maxWait?Math.max(n.maxWait*.8,n.maxWait-1e3):void 0})}catch(N){d(x,N?.message||String(N));return}let S=I.subscribe(t,{...n,oneose:()=>a(x),onclose:N=>d(x,N),alreadyHaveEvent:h,eoseTimeout:n.maxWait});o.push(S)}));return{async close(){await m,o.forEach(w=>{w.close()})}}}subscribeManyEose(e,t,n){let r=this.subscribeMany(e,t,{...n,oneose(){r.close()}});return r}async querySync(e,t,n){return new Promise(async r=>{let o=[];this.subscribeManyEose(e,[t],{...n,onevent(i){o.push(i)},onclose(i){r(o)}})})}async get(e,t,n){t.limit=1;let r=await this.querySync(e,t,n);return r.sort((o,i)=>i.created_at-o.created_at),r[0]||null}publish(e,t){return e.map(Zs).map(async(n,r,o)=>o.indexOf(n)!==r?Promise.reject("duplicate url"):(await this.ensureRelay(n)).publish(t))}},Gk=class extends Kk{constructor(){super({verifyEvent:zk})}},ra=Symbol("store-raw"),er=Symbol("store-node"),_n=Symbol("store-has"),Zb=Symbol("store-self");function Yb(e){let t=e[nn];if(!t&&(Object.defineProperty(e,nn,{value:t=new Proxy(e,Yk)}),!Array.isArray(e))){let n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,i=n.length;o<i;o++){let a=n[o];r[a].get&&Object.defineProperty(e,a,{enumerable:r[a].enumerable,get:r[a].get.bind(t)})}}return t}function Ar(e){let t;return e!=null&&typeof e=="object"&&(e[nn]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function $r(e,t=new Set){let n,r,o,i;if(n=e!=null&&e[ra])return n;if(!Ar(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let a=0,u=e.length;a<u;a++)o=e[a],(r=$r(o,t))!==o&&(e[a]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);let a=Object.keys(e),u=Object.getOwnPropertyDescriptors(e);for(let d=0,h=a.length;d<h;d++)i=a[d],!u[i].get&&(o=e[i],(r=$r(o,t))!==o&&(e[i]=r))}return e}function Vi(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function ei(e,t,n){if(e[t])return e[t];let[r,o]=Et(n,{equals:!1,internal:!0});return r.$=o,e[t]=r}function Zk(e,t){let n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===nn||t===er||(delete n.value,delete n.writable,n.get=()=>e[nn][t]),n}function nh(e){Fi()&&ei(Vi(e,er),Zb)()}function Jb(e){return nh(e),Reflect.ownKeys(e)}var Yk={get(e,t,n){if(t===ra)return e;if(t===nn)return n;if(t===ta)return nh(e),n;let r=Vi(e,er),o=r[t],i=o?o():e[t];if(t===er||t===_n||t==="__proto__")return i;if(!o){let a=Object.getOwnPropertyDescriptor(e,t);Fi()&&(typeof i!="function"||e.hasOwnProperty(t))&&!(a&&a.get)&&(i=ei(r,t,i)())}return Ar(i)?Yb(i):i},has(e,t){return t===ra||t===nn||t===ta||t===er||t===_n||t==="__proto__"?!0:(Fi()&&ei(Vi(e,_n),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Jb,getOwnPropertyDescriptor:Zk};function tn(e,t,n,r=!1){if(!r&&e[t]===n)return;let o=e[t],i=e.length;n===void 0?(delete e[t],e[_n]&&e[_n][t]&&o!==void 0&&e[_n][t].$()):(e[t]=n,e[_n]&&e[_n][t]&&o===void 0&&e[_n][t].$());let a=Vi(e,er),u;if((u=ei(a,t,o))&&u.$(()=>n),Array.isArray(e)&&e.length!==i){for(let d=e.length;d<i;d++)(u=a[d])&&u.$();(u=ei(a,"length",i))&&u.$(e.length)}(u=a[Zb])&&u.$()}function Xb(e,t){let n=Object.keys(t);for(let r=0;r<n.length;r+=1){let o=n[r];tn(e,o,t[o])}}function Jk(e,t){if(typeof t=="function"&&(t=t(e)),t=$r(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){let o=t[n];e[n]!==o&&tn(e,n,o)}tn(e,"length",r)}else Xb(e,t)}function Ys(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();let a=typeof r,u=Array.isArray(e);if(Array.isArray(r)){for(let d=0;d<r.length;d++)Ys(e,[r[d]].concat(t),n);return}else if(u&&a==="function"){for(let d=0;d<e.length;d++)r(e[d],d)&&Ys(e,[d].concat(t),n);return}else if(u&&a==="object"){let{from:d=0,to:h=e.length-1,by:m=1}=r;for(let w=d;w<=h;w+=m)Ys(e,[w].concat(t),n);return}else if(t.length>1){Ys(e[r],t,[r].concat(n));return}o=e[r],n=[r].concat(n)}let i=t[0];typeof i=="function"&&(i=i(o,n),i===o)||r===void 0&&i==null||(i=$r(i),r===void 0||Ar(o)&&Ar(i)&&!Array.isArray(i)?Xb(o,i):tn(e,r,i))}function Xk(...[e,t]){let n=$r(e||{}),r=Array.isArray(n),o=Yb(n);function i(...a){Oi(()=>{r&&a.length===1?Jk(n,a[0]):Ys(n,a)})}return[o,i]}function e4(e,t){let n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||n.set||!n.configurable||t===nn||t===er||(delete n.value,delete n.writable,n.get=()=>e[nn][t],n.set=r=>e[nn][t]=r),n}var t4={get(e,t,n){if(t===ra)return e;if(t===nn)return n;if(t===ta)return nh(e),n;let r=Vi(e,er),o=r[t],i=o?o():e[t];if(t===er||t===_n||t==="__proto__")return i;if(!o){let a=Object.getOwnPropertyDescriptor(e,t),u=typeof i=="function";if(Fi()&&(!u||e.hasOwnProperty(t))&&!(a&&a.get))i=ei(r,t,i)();else if(i!=null&&u&&i===Array.prototype[t])return(...d)=>Oi(()=>Array.prototype[t].apply(n,d))}return Ar(i)?ew(i):i},has(e,t){return t===ra||t===nn||t===ta||t===er||t===_n||t==="__proto__"?!0:(Fi()&&ei(Vi(e,_n),t)(),t in e)},set(e,t,n){return Oi(()=>tn(e,t,$r(n))),!0},deleteProperty(e,t){return Oi(()=>tn(e,t,void 0,!0)),!0},ownKeys:Jb,getOwnPropertyDescriptor:e4};function ew(e){let t=e[nn];if(!t){Object.defineProperty(e,nn,{value:t=new Proxy(e,t4)});let n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,i=n.length;o<i;o++){let a=n[o];if(r[a].get){let u=r[a].get.bind(t);Object.defineProperty(e,a,{get:u})}if(r[a].set){let u=r[a].set;Object.defineProperty(e,a,{set:h=>Oi(()=>u.call(t,h))})}}}return t}function rh(e,t){let n=$r(e||{});return ew(n)}var Mf=Symbol("store-root");function Ni(e,t,n,r,o){let i=t[n];if(e===i)return;if(n!==Mf&&(!Ar(e)||!Ar(i)||o&&e[o]!==i[o])){tn(t,n,e);return}if(Array.isArray(e)){if(e.length&&i.length&&(!r||o&&e[0]&&e[0][o]!=null)){let d,h,m,w,x,P,I,S;for(m=0,w=Math.min(i.length,e.length);m<w&&(i[m]===e[m]||o&&i[m]&&e[m]&&i[m][o]===e[m][o]);m++)Ni(e[m],i,m,r,o);let N=new Array(e.length),z=new Map;for(w=i.length-1,x=e.length-1;w>=m&&x>=m&&(i[w]===e[x]||o&&i[m]&&e[m]&&i[w][o]===e[x][o]);w--,x--)N[x]=i[w];if(m>x||m>w){for(h=m;h<=x;h++)tn(i,h,e[h]);for(;h<e.length;h++)tn(i,h,N[h]),Ni(e[h],i,h,r,o);i.length>e.length&&tn(i,"length",e.length);return}for(I=new Array(x+1),h=x;h>=m;h--)P=e[h],S=o&&P?P[o]:P,d=z.get(S),I[h]=d===void 0?-1:d,z.set(S,h);for(d=m;d<=w;d++)P=i[d],S=o&&P?P[o]:P,h=z.get(S),h!==void 0&&h!==-1&&(N[h]=i[d],h=I[h],z.set(S,h));for(h=m;h<e.length;h++)h in N?(tn(i,h,N[h]),Ni(e[h],i,h,r,o)):tn(i,h,e[h])}else for(let d=0,h=e.length;d<h;d++)Ni(e[d],i,d,r,o);i.length>e.length&&tn(i,"length",e.length);return}let a=Object.keys(e);for(let d=0,h=a.length;d<h;d++)Ni(e[a[d]],i,a[d],r,o);let u=Object.keys(i);for(let d=0,h=u.length;d<h;d++)e[u[d]]===void 0&&tn(i,u[d],void 0)}function n4(e,t={}){let{merge:n,key:r="id"}=t,o=$r(e);return i=>{if(!Ar(i)||!Ar(o))return o;let a=Ni(o,{[Mf]:i},Mf,n,r);return a===void 0?i:a}}var Ui=new Gk,xe=rh({rootEventIds:[],filter:{},profiles:()=>[]}),Gt=rh({}),r4=["reply","likes","zaps","publish","watch","replyAnonymously","hideContent"],o4=e=>r4.includes(e);function Ki(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function Br(...e){let t=(o,i)=>a=>o(i(a)),n=Array.from(e).reverse().reduce((o,i)=>o?t(o,i.encode):i.encode,void 0),r=e.reduce((o,i)=>o?t(o,i.decode):i.decode,void 0);return{encode:n,decode:r}}function Lr(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(Ki(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);let r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function Cr(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function wu(e,t="="){if(Ki(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of n)if(typeof o!="string")throw new Error(`padding.decode: non-string input=${o}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function tw(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function K0(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0,o=[],i=Array.from(e);for(i.forEach(a=>{if(Ki(a),a<0||a>=t)throw new Error(`Wrong integer: ${a}`)});;){let a=0,u=!0;for(let d=r;d<i.length;d++){let h=i[d],m=t*a+h;if(!Number.isSafeInteger(m)||t*a/t!==a||m-h!==t*a)throw new Error("convertRadix: carry overflow");if(a=m%n,i[d]=Math.floor(m/n),!Number.isSafeInteger(i[d])||i[d]*n+a!==m)throw new Error("convertRadix: carry overflow");if(u)i[d]?u=!1:r=d;else continue}if(o.push(a),u)break}for(let a=0;a<e.length-1&&e[a]===0;a++)o.push(0);return o.reverse()}var nw=(e,t)=>t?nw(t,e%t):e,au=(e,t)=>e+(t-nw(e,t));function Df(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(au(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${au(t,n)}`);let o=0,i=0,a=2**n-1,u=[];for(let d of e){if(Ki(d),d>=2**t)throw new Error(`convertRadix2: invalid data word=${d} from=${t}`);if(o=o<<t|d,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)u.push((o>>i-n&a)>>>0);o&=2**i-1}if(o=o<<n-i&a,!r&&i>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&u.push(o>>>0),u}function i4(e){return Ki(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return K0(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(K0(t,e,2**8))}}}function bo(e,t=!1){if(Ki(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(au(8,e)>32||au(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Df(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Df(n,e,8,t))}}}function G0(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}var s4=Br(bo(4),Lr("0123456789ABCDEF"),Cr("")),a4=Br(bo(5),Lr("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),wu(5),Cr(""));Br(bo(5),Lr("0123456789ABCDEFGHIJKLMNOPQRSTUV"),wu(5),Cr(""));Br(bo(5),Lr("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Cr(""),tw(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));var c4=Br(bo(6),Lr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),wu(6),Cr("")),u4=Br(bo(6),Lr("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),wu(6),Cr("")),oh=e=>Br(i4(58),Lr(e),Cr("")),Ff=oh("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");oh("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");oh("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");var Z0=[0,2,3,5,6,7,9,10,11],l4={encode(e){let t="";for(let n=0;n<e.length;n+=8){let r=e.subarray(n,n+8);t+=Ff.encode(r).padStart(Z0[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){let r=e.slice(n,n+11),o=Z0.indexOf(r.length),i=Ff.decode(r);for(let a=0;a<i.length-o;a++)if(i[a]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(i.slice(i.length-o)))}return Uint8Array.from(t)}},jf=Br(Lr("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Cr("")),Y0=[996825010,642813549,513874426,1027748829,705979059];function Qs(e){let t=e>>25,n=(e&33554431)<<5;for(let r=0;r<Y0.length;r++)(t>>r&1)===1&&(n^=Y0[r]);return n}function J0(e,t,n=1){let r=e.length,o=1;for(let i=0;i<r;i++){let a=e.charCodeAt(i);if(a<33||a>126)throw new Error(`Invalid prefix (${e})`);o=Qs(o)^a>>5}o=Qs(o);for(let i=0;i<r;i++)o=Qs(o)^e.charCodeAt(i)&31;for(let i of t)o=Qs(o)^i;for(let i=0;i<6;i++)o=Qs(o);return o^=n,jf.encode(Df([o%2**30],30,5,!1))}function rw(e){let t=e==="bech32"?1:734539939,n=bo(5),r=n.decode,o=n.encode,i=G0(r);function a(m,w,x=90){if(typeof m!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof m}`);if(!Array.isArray(w)||w.length&&typeof w[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof w}`);let P=m.length+7+w.length;if(x!==!1&&P>x)throw new TypeError(`Length ${P} exceeds limit ${x}`);return m=m.toLowerCase(),`${m}1${jf.encode(w)}${J0(m,w,t)}`}function u(m,w=90){if(typeof m!="string")throw new Error(`bech32.decode input should be string, not ${typeof m}`);if(m.length<8||w!==!1&&m.length>w)throw new TypeError(`Wrong string length: ${m.length} (${m}). Expected (8..${w})`);let x=m.toLowerCase();if(m!==x&&m!==m.toUpperCase())throw new Error("String must be lowercase or uppercase");m=x;let P=m.lastIndexOf("1");if(P===0||P===-1)throw new Error('Letter "1" must be present between prefix and data only');let I=m.slice(0,P),S=m.slice(P+1);if(S.length<6)throw new Error("Data must be at least 6 characters long");let N=jf.decode(S).slice(0,-6),z=J0(I,N,t);if(!S.endsWith(z))throw new Error(`Invalid checksum in ${m}: expected "${z}"`);return{prefix:I,words:N}}let d=G0(u);function h(m){let{prefix:w,words:x}=u(m,!1);return{prefix:w,words:x,bytes:r(x)}}return{encode:a,decode:u,decodeToBytes:h,decodeUnsafe:d,fromWords:r,fromWordsUnsafe:i,toWords:o}}var qi=rw("bech32");rw("bech32m");var d4={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},f4=Br(bo(4),Lr("0123456789abcdef"),Cr(""),tw(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),h4={utf8:d4,hex:f4,base16:s4,base32:a4,base64:c4,base64url:u4,base58:Ff,base58xmr:l4};`${Object.keys(h4).join(", ")}`;var Ks=new TextDecoder("utf-8");new TextEncoder;var ow=5e3;function Wc(e){var t,n,r,o,i,a,u,d;let{prefix:h,words:m}=qi.decode(e,ow),w=new Uint8Array(qi.fromWords(m));switch(h){case"nprofile":{let x=jc(w);if(!((t=x[0])!=null&&t[0]))throw new Error("missing TLV 0 for nprofile");if(x[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:et(x[0][0]),relays:x[1]?x[1].map(P=>Ks.decode(P)):[]}}}case"nevent":{let x=jc(w);if(!((n=x[0])!=null&&n[0]))throw new Error("missing TLV 0 for nevent");if(x[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(x[2]&&x[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(x[3]&&x[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:et(x[0][0]),relays:x[1]?x[1].map(P=>Ks.decode(P)):[],author:(r=x[2])!=null&&r[0]?et(x[2][0]):void 0,kind:(o=x[3])!=null&&o[0]?parseInt(et(x[3][0]),16):void 0}}}case"naddr":{let x=jc(w);if(!((i=x[0])!=null&&i[0]))throw new Error("missing TLV 0 for naddr");if(!((a=x[2])!=null&&a[0]))throw new Error("missing TLV 2 for naddr");if(x[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=x[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(x[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Ks.decode(x[0][0]),pubkey:et(x[2][0]),kind:parseInt(et(x[3][0]),16),relays:x[1]?x[1].map(P=>Ks.decode(P)):[]}}}case"nrelay":{let x=jc(w);if(!((d=x[0])!=null&&d[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Ks.decode(x[0][0])}}case"nsec":return{type:h,data:w};case"npub":case"note":return{type:h,data:et(w)};default:throw new Error(`unknown prefix ${h}`)}}function jc(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],i=n.slice(2,2+o);if(n=n.slice(2+o),i.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(i)}return t}function iw(e){return sw("npub",Vb(e))}function X0(e){return sw("note",Vb(e))}function p4(e,t){let n=qi.toWords(t);return qi.encode(e,n,ow)}function sw(e,t){return p4(e,t)}var Gs=new TextDecoder("utf-8");new TextEncoder;var g4=5e3,m4=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function aw(e){var t,n,r,o,i,a,u,d;let{prefix:h,words:m}=qi.decode(e,g4),w=new Uint8Array(qi.fromWords(m));switch(h){case"nprofile":{let x=Hc(w);if(!((t=x[0])!=null&&t[0]))throw new Error("missing TLV 0 for nprofile");if(x[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:et(x[0][0]),relays:x[1]?x[1].map(P=>Gs.decode(P)):[]}}}case"nevent":{let x=Hc(w);if(!((n=x[0])!=null&&n[0]))throw new Error("missing TLV 0 for nevent");if(x[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(x[2]&&x[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(x[3]&&x[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:et(x[0][0]),relays:x[1]?x[1].map(P=>Gs.decode(P)):[],author:(r=x[2])!=null&&r[0]?et(x[2][0]):void 0,kind:(o=x[3])!=null&&o[0]?parseInt(et(x[3][0]),16):void 0}}}case"naddr":{let x=Hc(w);if(!((i=x[0])!=null&&i[0]))throw new Error("missing TLV 0 for naddr");if(!((a=x[2])!=null&&a[0]))throw new Error("missing TLV 2 for naddr");if(x[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=x[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(x[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Gs.decode(x[0][0]),pubkey:et(x[2][0]),kind:parseInt(et(x[3][0]),16),relays:x[1]?x[1].map(P=>Gs.decode(P)):[]}}}case"nrelay":{let x=Hc(w);if(!((d=x[0])!=null&&d[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Gs.decode(x[0][0])}}case"nsec":return{type:h,data:w};case"npub":case"note":return{type:h,data:et(w)};default:throw new Error(`unknown prefix ${h}`)}}function Hc(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],i=n.slice(2,2+o);if(n=n.slice(2+o),i.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(i)}return t}var b4=new RegExp(`nostr:(${m4.source})`),cw=()=>new RegExp(`\\b${b4.source}\\b`,"g");function*w4(e){let t=e.matchAll(cw());for(let n of t)try{let[r,o]=n;yield{uri:r,value:o,decoded:aw(o),start:n.index,end:n.index+r.length}}catch{}}function y4(e,t){return e.replaceAll(cw(),(n,r)=>t({uri:n,value:r,decoded:aw(r)}))}var v4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uw={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(v4,function(){function n(u){return u.replace(/\\([(){}[\]#*+\-.!_\\])/g,function(d,h){return String.fromCharCode(1,o.indexOf(h)+i)}).replace(/(\*\*|__|~~)(\S(?:[\s\S]*?\S)?)\1/g,function(d,h,m){return h==="~~"?"<del>"+m+"</del>":"<b>"+m+"</b>"}).replace(/(\n|^|\W)([_\*])(\S(?:[\s\S]*?\S)?)\2(\W|$|\n)/g,function(d,h,m,w,x){return h+"<i>"+w+"</i>"+x}).replace(/(!?)\[([^\]<>]+)\]\((\+?)([^ \)<>]+)(?: "([^\(\)\"]+)")?\)/g,function(d,h,m,w,x,P){var I=P?' title="'+P+'"':"";return h?'<img src="'+a.href(x)+'" alt="'+m+'"'+I+"/>":(w&&(I+=' target="_blank"'),'<a href="'+a.href(x)+'"'+I+">"+m+"</a>")})}function r(u){return u.replace(/\x01([\x0f-\x1c])/g,function(d,h){return o.charAt(h.charCodeAt(0)-i)})}var o="\\[!]#{()}*+-._",i=16,a=function(u){return u.replace(/.+(?:\n.+)*/g,function(d){var h=/^\s{4}([^]*)$/.exec(d);if(h)return"<pre><code>"+h[1].replace(/\n    /g,`
`)+"</code></pre>";for(var m,w=[],x=n(d).split(`
`),P=0,I=x.length;I>P;++P){var S=x[P],N=/^\s{0,3}(\#{1,6})\s+(.*?)\s*#*\s*$/.exec(S);if(N)w.push(m=[N[2],"h",N[1].length]);else{var z=/^(\s*)(?:[-*]|(\d[.)])) (.+)$/.exec(S);z?w.push(m=[z[3],z[2]?"ol":"ul",z[1].length]):/^\s{0,3}([-])(\s*\1){2,}\s*$/.test(S)?w.push(m=["","hr"]):m&&m[1]!=="hr"&&m[1]!=="h"?m[0]+=`
`+S:w.push(m=[S,"p",""])}}var B="",f=[];for(P=0,I=w.length;I>P;++P){m=w[P];var p=m[0],b=m[1],v=m[2];if(b==="ul"||b==="ol")!f.length||v>f[0][1]?(f.unshift([b,v]),B+="<"+f[0][0]+"><li>"+p):f.length>1&&v<=f[1][1]?(B+="</li></"+f.shift()[0]+">",--P):B+="</li><li>"+p;else{for(;f.length;)B+="</li></"+f.shift()[0]+">";B+=b==="hr"?"<hr/>":"<"+b+v+a.headAttrs(v,p)+">"+p+"</"+b+v+">"}}for(;f.length;)B+="</li></"+f.shift()[0]+">";return r(B)})};return a.href=function(u){return u},a.headAttrs=function(u,d){return""},a})})(uw);var E4=uw.exports,x4=_4(E4);function k4(e){return async()=>new Promise(t=>{setTimeout(t,e)})}function S4(e,{delay:t=void 0}={}){if(typeof t!="number"&&t!==void 0)throw new TypeError(`Expected \`interval\` to be of type \`number\` but received type \`${typeof t}\``);let n=t===void 0?async()=>{}:k4(t),r=[];return o=>{r.push(o),r.length===1&&(async()=>(await n(),e(r),r=[]))()}}var A4=(e,t)=>t.some(n=>e instanceof n),eb,tb;function $4(){return eb||(eb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function T4(){return tb||(tb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var lw=new WeakMap,Hf=new WeakMap,dw=new WeakMap,yf=new WeakMap,ih=new WeakMap;function B4(e){let t=new Promise((n,r)=>{let o=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(po(e.result)),o()},a=()=>{r(e.error),o()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&lw.set(n,e)}).catch(()=>{}),ih.set(t,e),t}function L4(e){if(Hf.has(e))return;let t=new Promise((n,r)=>{let o=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),o()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});Hf.set(e,t)}var Vf={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Hf.get(e);if(t==="objectStoreNames")return e.objectStoreNames||dw.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return po(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function C4(e){Vf=e(Vf)}function P4(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let r=e.call(vf(this),t,...n);return dw.set(r,t.sort?t.sort():[t]),po(r)}:T4().includes(e)?function(...t){return e.apply(vf(this),t),po(lw.get(this))}:function(...t){return po(e.apply(vf(this),t))}}function I4(e){return typeof e=="function"?P4(e):(e instanceof IDBTransaction&&L4(e),A4(e,$4())?new Proxy(e,Vf):e)}function po(e){if(e instanceof IDBRequest)return B4(e);if(yf.has(e))return yf.get(e);let t=I4(e);return t!==e&&(yf.set(e,t),ih.set(t,e)),t}var vf=e=>ih.get(e);function N4(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){let a=indexedDB.open(e,t),u=po(a);return r&&a.addEventListener("upgradeneeded",d=>{r(po(a.result),d.oldVersion,d.newVersion,po(a.transaction),d)}),n&&a.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{i&&d.addEventListener("close",()=>i()),o&&d.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}var O4=["get","getKey","getAll","getAllKeys","count"],R4=["put","add","delete","clear"],_f=new Map;function nb(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(_f.get(t))return _f.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,o=R4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||O4.includes(n)))return;let i=async function(a,...u){let d=this.transaction(a,o?"readwrite":"readonly"),h=d.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),o&&d.done]))[0]};return _f.set(t,i),i}C4(e=>({...e,get:(t,n,r)=>nb(t,n)||e.get(t,n,r),has:(t,n)=>!!nb(t,n)||e.has(t,n)}));function U4(e){let t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(let r of e.tags)r[0]==="e"&&r[1]&&n.push(r),r[0]==="p"&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<n.length;r++){let o=n[r],[i,a,u,d]=o,h={id:a,relays:u?[u]:[]},m=r===0,w=r===n.length-1;if(d==="root"){t.root=h;continue}if(d==="reply"){t.reply=h;continue}if(d==="mention"){t.mentions.push(h);continue}if(m){t.root=h;continue}if(w){t.reply=h;continue}t.mentions.push(h)}return t}var Js={events:"id",aggregates:["eid","k"],profiles:["pk"],relays:["n","a"]},z4=async(e,t)=>{if(t<=1){let i=[...e.objectStoreNames];await Promise.all(i.map(a=>e.deleteObjectStore(a)))}let n=e.createObjectStore("events",{keyPath:Js.events});n.createIndex("a","a"),n.createIndex("ro","ro"),n.createIndex("r","r"),n.createIndex("d","d"),n.createIndex("k","k"),e.createObjectStore("aggregates",{keyPath:Js.aggregates}),e.createObjectStore("profiles",{keyPath:Js.profiles}).createIndex("l","l"),e.createObjectStore("relays",{keyPath:Js.relays}).createIndex("a","a")},cu=e=>{var t,n;let r=U4(e),o=e.tags.find(S=>S[0]==="a"),i=o&&o[1],a=o&&o[3]==="mention",u=e.tags.find(S=>S[0]==="r"),d=u&&u[1],h=e.tags.filter(S=>S[0]==="t"),m=[...new Set(h.map(S=>S[1]))],w=e.tags.find(S=>S[0]==="d"),x=w&&w[1],P=e.tags.find(S=>S[0]==="title"),I=P&&P[1];return{id:e.id??"",k:e.kind,c:e.content,ts:e.created_at,pk:e.pubkey,ro:(t=r.root)==null?void 0:t.id,re:(n=r.reply)==null?void 0:n.id,me:r.mentions.map(S=>S.id),p:r.profiles.map(S=>S.pubkey),a:i,am:a,r:d,t:m,d:x,tl:I}},M4=()=>({}),zi=M4(),rb=!0,ob,yu=async()=>{if(rb!==!1)try{return ob||(ob=await N4("zapthreads",2,{upgrade:z4}))}catch{rb=!1}},Vc=e=>{let t=We(ho(e,()=>{let[n,r,o]=e(),i=()=>Wi(n,r,o),[a,{mutate:u}]=gb(()=>Xs[n],i,{initialValue:[],storage:fw});return Wi(n,r,o).then(u),a}));return()=>t()()},ib=e=>{let t=We(ho(e,()=>{let[n,r,o]=e(),i=()=>Mi(n,r,o),[a,{mutate:u}]=gb(()=>Xs[n],i,{initialValue:void 0,storage:fw});return Mi(n,r,o).then(u),a}));return()=>t()()},Wi=async(e,t,n)=>{let r=await yu();if(!r){let o=zi[e];if(o){if(n){let i=Array.isArray(t)?t:[t];return Object.values(o).filter(a=>i.includes(a[n.index]))}return Object.values(o)}return[]}if(t&&n){if(Array.isArray(t)){let o=t.map(a=>r.getAllFromIndex(e,n.index,a));return(await Promise.all(o)).flat()}return r.getAllFromIndex(e,n.index,t)}return r.getAll(e)},Mi=async(e,t,n)=>{let r=await yu();if(!r){let o=zi[e];if(o){if(n)return Object.values(o).find(a=>a[n.index]===t);let i=(t.lower?t.lower:t).toString();return o[i]}return}return n?r.getFromIndex(e,n.index,t):r.get(e,t)},Ef={},sb=(e,t)=>{zi[e]??(zi[e]={});for(let n of t){let r=Js[e];r=Array.isArray(r)?r:[r];let o=r.map(i=>n[i]).join(",");zi[e][o]=n}},xn=async(e,t,n={immediate:!1})=>{let r=await yu();if(n.immediate){r?r.put(e,t):sb(e,[t]),Xs[e]=+new Date;return}Ef[e]||(Ef[e]=S4(async o=>{if(!r){sb(e,o),Xs[e]=+new Date;return}let i=r.transaction(e,"readwrite");await Promise.all([...o.map(u=>i.store.put(u)),i.done])&&(Xs[e]=+new Date)},{delay:96})),Ef[e](t)},D4=async()=>{let e=await yu();if(!e){zi={};return}let t=[...e.objectStoreNames];await Promise.all(t.map(n=>e.clear(n)))},Xs=rh({});function fw(e){let[t,n]=Xk({value:e});return[()=>t.value,r=>{let o=$r(t.value);return typeof r=="function"&&(r=r(o)),n("value",n4(r)),t.value}]}var hw=async(e,t,n)=>{let r=+new Date,o=216e5,i=[...new Set(e)].filter(u=>{let d=n.find(h=>h.pk===u);return!(d?.l&&d.l>r-o)}).filter(u=>!!u);if(i.length===0)return;let a=await Ui.querySync(t,{kinds:[0],authors:i});for(let u of i){let d=a.find(h=>h.pubkey===u);if(d){let h=JSON.parse(d.content),m=d.pubkey,w={pk:m,ts:d.created_at,i:h.image||h.picture,n:h.displayName||h.display_name||h.name},x=n.find(P=>P.pk===m);!x||!x?.n||x.ts<w.ts?xn("profiles",{...w,l:r}):xn("profiles",{...x,l:r})}}},F4=async(e,t)=>{let r=(await Wi("relays",e.value,{index:"a"})).filter(o=>t.includes(o.n)).map(o=>o.l);return r.length>0?Math.min(...r)+1:0},j4=async(e,t)=>{let n={};for(let o of t){let i=Ui.seenOn.get(o.id);if(i)for(let a of i)o.ts>(n[a.url]||0)&&(n[a.url]=o.ts)}let r=await Wi("relays",e.value,{index:"a"});for(let o in n){let i=r.find(a=>a.n===o);i?n[o]>i.l&&(i.l=n[o],xn("relays",i)):xn("relays",{n:o,a:e.value,l:n[o]})}},H4=new RegExp("(?<=^|\\s)https?:\\/\\/[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&\\/\\/=]*)","gi"),V4=/(\S*(?:png|jpg|jpeg|gif|webp))/gi,q4=new RegExp("(?<=^|\\s)@?((naddr|npub|nevent|note)[a-z0-9]{20,})","g"),W4=/\`(.*?)\`/g,Q4=/\B\#([a-zA-Z0-9]+\b)(?!;)/g,pw=(e,t,n=[])=>{let r=e.c,o=t.urlPrefixes,i=t.profiles;r=r.replace(H4,u=>u.match(V4)?`![image](${u})`:`[${u}](${u})`);let a=[...new Set(e.t)];if(a.length>0){let u=new RegExp(`(^|\\s)\\#(${a.join("|")})`,"gi");r=r.replaceAll(u,`$1[#$2](${o.tag}$2)`)}return r=r.replaceAll(q4,"nostr:$1"),r=y4(r,({decoded:u,value:d})=>{switch(u.type){case"nprofile":let h=i().find(S=>S.pk===u.data.pubkey);return`[@${h?.n||Yo(d)}](${o.nprofile}${d})`;case"npub":let w=i().find(S=>S.pk===u.data);return`[@${w?.n||Yo(d)}](${o.npub}${d})`;case"note":return`[@${Yo(d)}](${o.note}${d})`;case"naddr":let P=u.data,I=n.find(S=>S.pk===P.pubkey&&S.d===P.identifier);return I&&I.tl?`[${I.tl}](${o.naddr}${d})`:`[@${Yo(d)}](${o.naddr}${d})`;case"nevent":return`[@${Yo(d)}](${o.nevent}${d})`;default:return d}}),r=r.replaceAll(W4,"<code>$1</code>"),x4(r.trim())},K4=e=>{let t=[],n=w4(e);for(let i of n){if(i.decoded.type==="npub"&&t.push(["p",i.decoded.data]),i.decoded.type==="naddr"){let a=i.decoded.data;t.push(["a",`${a.kind}:${a.pubkey}:${a.identifier}`,"","mention"])}i.decoded.type==="nevent"&&t.push(["e",i.decoded.data.id]),i.decoded.type==="note"&&t.push(["e",i.decoded.data])}let r=e.matchAll(Q4),o=new Set([...r].map(i=>i[1].toLowerCase()));for(let i of o)t.push(["t",i]);return t},G4=(e="")=>{let t={naddr:"https://njump.me/",npub:"https://njump.me/",nprofile:"https://njump.me/",nevent:"https://njump.me/",note:"https://njump.me/",tag:"https://snort.social/t/"};for(let n of e.split(",")){let[r,o]=n.split(":");o&&(t[r]=`https://${o}`)}return t},Yo=e=>e.substring(0,8)+"..."+e.substring(e.length-4),Qc=e=>e.sort((t,n)=>(t.ts||0)>=(n.ts||0)?-1:1),Un=20,Kc='data:image/svg+xml;utf-8,<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><circle cx="512" cy="512" r="512" fill="%23333" fill-rule="evenodd" /></svg>',Z4=e=>{let t=new Date,n=Math.floor((t.getTime()-e)/1e3);if(n<60)return"now";if(n<3600){let r=Math.floor(n/60);return`${r} minute${r===1?"":"s"} ago`}if(n<=86400){let r=Math.floor(n/3600);return`${r} hour${r===1?"":"s"} ago`}if(n<=604800){let r=Math.floor(n/86400);return`${r} day${r===1?"":"s"} ago`}if(n>604800){let r=new Date(e),o=r.toLocaleDateString("en-us",{day:"numeric",month:"long"}),i=r.getFullYear()===t.getFullYear()?"":" "+r.getFullYear();return"on "+o+i}return""},Y4=e=>e<1e4?e.toString():e<1e6?Math.round(e/1e3)+"k":Math.round(e/1e6)+"M",sh=e=>e.children.reduce((t,n)=>t+sh(n),e.children.length),J4=/\/+$/,X4=(e,t=!0)=>{let n=new URL(e);return n.hash="",t&&(n.pathname=n.pathname.replace(J4,"")),n.toString()},gw=(e,t)=>{let n=e.map(o=>({...o,children:[]})),r=new Set(n.filter(o=>{if(t){let i=t.id===(o.re||o.ro);return i&&(o.parent=t),i}return!n.find(i=>i.id===(o.re||o.ro))}));n=n.filter(o=>!r.has(o));for(let o of r)o.children.push(...gw(n,o));return[...r]},Pi=Symbol("verified"),e6=e=>e instanceof Object;function t6(e){if(!e6(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var n6=new TextEncoder,r6=class{generateSecretKey(){return Zt.utils.randomPrivateKey()}getPublicKey(t){return et(Zt.getPublicKey(t))}finalizeEvent(t,n){let r=t;return r.pubkey=et(Zt.getPublicKey(n)),r.id=ea(r),r.sig=et(Zt.sign(ea(r),n)),r[Pi]=!0,r}verifyEvent(t){if(typeof t[Pi]=="boolean")return t[Pi];let n=ea(t);if(n!==t.id)return t[Pi]=!1,!1;try{let r=Zt.verify(t.sig,n,t.pubkey);return t[Pi]=r,r}catch{return t[Pi]=!1,!1}}};function o6(e){if(!t6(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function ea(e){let t=th(n6.encode(o6(e)));return et(t)}var vu=new r6,i6=vu.generateSecretKey,mw=vu.getPublicKey,bw=vu.finalizeEvent;vu.verifyEvent;var s6=e=>{Di(()=>{let t=e();t&&setTimeout(()=>t.focus())})},Ii=Symbol("verified"),a6=e=>e instanceof Object;function c6(e){if(!a6(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}new TextDecoder("utf-8");var u6=new TextEncoder;function l6(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var d6=class{constructor(e){we(this,"value"),we(this,"next",null),we(this,"prev",null),this.value=e}},f6=class{constructor(){we(this,"first"),we(this,"last"),this.first=null,this.last=null}enqueue(e){let t=new d6(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){let t=this.first;return this.first=null,this.last=null,t.value}let e=this.first;return this.first=e.next,e.value}},h6=class{generateSecretKey(){return Zt.utils.randomPrivateKey()}getPublicKey(e){return et(Zt.getPublicKey(e))}finalizeEvent(e,t){let n=e;return n.pubkey=et(Zt.getPublicKey(t)),n.id=xf(n),n.sig=et(Zt.sign(xf(n),t)),n[Ii]=!0,n}verifyEvent(e){if(typeof e[Ii]=="boolean")return e[Ii];let t=xf(e);if(t!==e.id)return e[Ii]=!1,!1;try{let n=Zt.verify(e.sig,t,e.pubkey);return e[Ii]=n,n}catch{return e[Ii]=!1,!1}}};function p6(e){if(!c6(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function xf(e){let t=th(u6.encode(p6(e)));return et(t)}var _u=new h6;_u.generateSecretKey;_u.getPublicKey;_u.finalizeEvent;var g6=_u.verifyEvent,m6=22242;function b6(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1&&!e.ids.some(n=>t.id.startsWith(n))||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1&&!e.authors.some(n=>t.pubkey.startsWith(n)))return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),o=e[`#${r}`];if(o&&!t.tags.find(([i,a])=>i===n.slice(1)&&o.indexOf(a)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function w6(e,t){for(let n=0;n<e.length;n++)if(b6(e[n],t))return!0;return!1}function y6(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function v6(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let i=r+1+o;return e.slice(r+1,i)}function _6(e,t){return{kind:m6,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function E6(){return new Promise(e=>{let t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}var ww;try{ww=WebSocket}catch{}var yw=class{constructor(e,t){we(this,"url"),we(this,"_connected",!1),we(this,"onclose",null),we(this,"onnotice",n=>console.debug(`NOTICE from ${this.url}: ${n}`)),we(this,"_onauth",null),we(this,"baseEoseTimeout",4400),we(this,"connectionTimeout",4400),we(this,"openSubs",new Map),we(this,"connectionTimeoutHandle"),we(this,"connectionPromise"),we(this,"openCountRequests",new Map),we(this,"openEventPublishes",new Map),we(this,"ws"),we(this,"incomingMessageQueue",new f6),we(this,"queueRunning",!1),we(this,"challenge"),we(this,"serial",0),we(this,"verifyEvent"),this.url=l6(e),this.verifyEvent=t.verifyEvent}static async connect(e,t){let n=new yw(e,t);return await n.connect(),n}closeAllSubscriptions(e){for(let[t,n]of this.openSubs)n.close(e);this.openSubs.clear();for(let[t,n]of this.openEventPublishes)n.reject(new Error(e));this.openEventPublishes.clear();for(let[t,n]of this.openCountRequests)n.reject(new Error(e));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((e,t)=>{this.connectionTimeoutHandle=setTimeout(()=>{var n;t("connection timed out"),this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new ww(this.url)}catch(n){t(n);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,e()},this.ws.onerror=n=>{var r;t(n.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var n;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await E6();this.queueRunning=!1}handleNext(){var e,t,n;let r=this.incomingMessageQueue.dequeue();if(!r)return!1;let o=v6(r);if(o){let i=this.openSubs.get(o);if(!i)return;let a=y6(r,"id"),u=(e=i.alreadyHaveEvent)==null?void 0:e.call(i,a);if((t=i.receivedEvent)==null||t.call(i,this,a),u)return}try{let i=JSON.parse(r);switch(i[0]){case"EVENT":{let a=this.openSubs.get(i[1]),u=i[2];this.verifyEvent(u)&&w6(a.filters,u)&&a.onevent(u);return}case"COUNT":{let a=i[1],u=i[2],d=this.openCountRequests.get(a);d&&(d.resolve(u.count),this.openCountRequests.delete(a));return}case"EOSE":{let a=this.openSubs.get(i[1]);if(!a)return;a.receivedEose();return}case"OK":{let a=i[1],u=i[2],d=i[3],h=this.openEventPublishes.get(a);u?h.resolve(d):h.reject(new Error(d)),this.openEventPublishes.delete(a);return}case"CLOSED":{let a=i[1],u=this.openSubs.get(a);if(!u)return;u.closed=!0,u.close(i[2]);return}case"NOTICE":this.onnotice(i[1]);return;case"AUTH":{this.challenge=i[1],(n=this._onauth)==null||n.call(this,i[1]);return}}}catch{return}}async send(e){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var t;(t=this.ws)==null||t.send(e)})}async auth(e){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");let t=await e(_6(this.url,this.challenge)),n=new Promise((r,o)=>{this.openEventPublishes.set(t.id,{resolve:r,reject:o})});return this.send('["AUTH",'+JSON.stringify(t)+"]"),n}async publish(e){let t=new Promise((n,r)=>{this.openEventPublishes.set(e.id,{resolve:n,reject:r})});return this.send('["EVENT",'+JSON.stringify(e)+"]"),t}async count(e,t){this.serial++;let n=t?.id||"count:"+this.serial,r=new Promise((o,i)=>{this.openCountRequests.set(n,{resolve:o,reject:i})});return this.send('["COUNT","'+n+'",'+JSON.stringify(e)+"]"),r}subscribe(e,t){let n=this.prepareSubscription(e,t);return n.fire(),n}prepareSubscription(e,t){this.serial++;let n=t.id||"sub:"+this.serial,r=new x6(this,n,e,t);return this.openSubs.set(n,r),r}close(){var e;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(e=this.ws)==null||e.close()}_onmessage(e){this.incomingMessageQueue.enqueue(e.data),this.queueRunning||this.runQueue()}},x6=class{constructor(e,t,n,r){we(this,"relay"),we(this,"id"),we(this,"closed",!1),we(this,"eosed",!1),we(this,"filters"),we(this,"alreadyHaveEvent"),we(this,"receivedEvent"),we(this,"onevent"),we(this,"oneose"),we(this,"onclose"),we(this,"eoseTimeout"),we(this,"eoseTimeoutHandle"),this.relay=e,this.filters=n,this.id=t,this.alreadyHaveEvent=r.alreadyHaveEvent,this.receivedEvent=r.receivedEvent,this.eoseTimeout=r.eoseTimeout||e.baseEoseTimeout,this.oneose=r.oneose,this.onclose=r.onclose,this.onevent=r.onevent||(o=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,o)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var e;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(e=this.oneose)==null||e.call(this))}close(e="closed by caller"){var t;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(t=this.onclose)==null||t.call(this,e)}},vw=class extends yw{constructor(e){super(e,{verifyEvent:g6})}static async connect(e){let t=new vw(e);return await t.connect(),t}};new TextDecoder("utf-8");new TextEncoder;function k6(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var S6=He("<div class=ztr-comment-info-picture><img>"),A6=He("<div class=ztr-reply-form><textarea></textarea><div class=ztr-reply-controls>"),$6=He("<span>Publishing is disabled"),T6=He("<span class=ztr-reply-error>Error: "),B6=He('<svg class=ztr-spinner viewBox="0 0 50 50"><circle class=path cx=25 cy=25 r=20 fill=none stroke-width=5>'),L6=He("<button class=ztr-reply-button>Reply as "),C6=He("<button class=ztr-reply-button>Reply anonymously"),P6=He("<button class=ztr-reply-login-button>Log in"),I6=He("<li class=ztr-comment-action-like><span> likes"),N6=He("<li class=ztr-comment-action-zap><span> sats"),O6=He("<div class=ztr-comment-new><div class=ztr-comment-body><ul class=ztr-comment-actions>"),_w=e=>{let[t,n]=Et(""),[r,o]=Et(!1),[i,a]=Et(),[u,d]=Et(""),h=()=>xe.anchor,m=xe.profiles,w=()=>xe.relays,x=async()=>{if(!window.nostr){I("Error: No NIP-07 extension!");return}let B=await window.nostr.getPublicKey();Gt.internal={pk:B,signEvent:async f=>window.nostr.signEvent(f)},d(""),Gt.active=Gt.internal};Di(async()=>{if(Gt.active){let B=Gt.active.pk,f=m().find(p=>p.pk===B);f||(f={pk:B,l:0,ts:0},await xn("profiles",f)),a(f),hw([B],w(),m())}else a()});let P=async(B,f)=>{var p;o(!1),n(""),d(f??""),await xn("events",cu(B),{immediate:!0}),(p=e.onDone)==null||p.call(globalThis)},I=B=>{o(!1),d(`Error: ${B}`)},S=async B=>{let f;if(B)f=Gt.active;else{if(!Gt.anonymous){let T=i6();Gt.anonymous={pk:mw(T),signEvent:async U=>({sig:bw(U,T).sig})}}f=Gt.anonymous}if(!f?.signEvent){I("Error: User has no signer!");return}let p=t().trim();if(!p)return;let b={kind:1,created_at:Math.round(Date.now()/1e3),content:p,pubkey:f.pk,tags:K4(p)};if(xe.anchorAuthor!==b.pubkey&&b.tags.push(["p",xe.anchorAuthor]),xe.externalAuthor)try{let T=Wc(xe.externalAuthor).data;b.tags.push(["p",T])}catch{}if(e.replyTo){let T=await Mi("events",IDBKeyRange.only(e.replyTo));T&&(b.tags.push(["e",T.ro,"","root"]),T.pk!==b.pubkey&&b.tags.push(["p",T.pk])),b.tags.push(["e",e.replyTo,"","reply"])}else{let T=xe.version||xe.rootEventIds[0];if(T)b.tags.push(["e",T,"","root"]);else if(h().type==="http"){let U=k6(h().value),C={pubkey:f.pk,created_at:Math.round(Date.now()/1e3),kind:8812,tags:[["r",U]],content:`Comments on ${U} \u21B4`},$={id:ea(C),...C,...await f.signEvent(C)};xn("events",cu($)),xe.disableFeatures.includes("publish")?console.log("Publishing root event disabled",$):Ui.publish(w(),$),xe.filter={"#e":[$.id]},b.tags.push(["e",$.id,"","root"])}}h().type==="naddr"&&b.tags.push(["a",h().value,"","root"]);let v=ea(b),k=await f.signEvent(b),A={id:v,...b,...k};if(o(!0),console.log(JSON.stringify(A,null,2)),xe.disableFeatures.includes("publish"))setTimeout(()=>P(A),1e3);else{let T=[];for(let U of w())try{await(await vw.connect(U)).publish(A)}catch(C){console.error(C),T.push(U)}if(T.length===w().length)I("Error: Your comment was not published to any relay");else{let U=`Published to ${T.length}/${w().length} relays (see console for more info)`,C=T.length>0?U:void 0;P(A,C)}T.length=0}},N=e.replyTo!==void 0,z;return s6(()=>N&&z),(()=>{let B=A6(),f=B.firstChild,p=f.nextSibling;f.addEventListener("change",v=>n(v.target.value));let b=z;return typeof b=="function"?Eb(b,f):z=f,f.autofocus=N,Le(p,(()=>{let v=We(()=>!!xe.disableFeatures.includes("publish"));return()=>v()&&$6()})(),null),Le(p,(()=>{let v=We(()=>!!u());return()=>v()&&(()=>{let k=T6();return k.firstChild,Le(k,u,null),k})()})(),null),Le(p,Rn(Xc,{get when(){return!r()},get fallback(){return B6()},get children(){let v=S6(),k=v.firstChild;return En(()=>{var A;return Vt(k,"src",((A=i())==null?void 0:A.i)||Kc)}),v}}),null),Le(p,(()=>{let v=We(()=>!!i());return()=>v()&&(()=>{let k=L6();return k.firstChild,k.$$click=()=>S(i()),Le(k,()=>i().n||Yo(iw(i().pk)),null),En(()=>k.disabled=r()),k})()})(),null),Le(p,(()=>{let v=We(()=>!i()&&!xe.disableFeatures.includes("replyAnonymously"));return()=>v()&&(()=>{let k=C6();return k.$$click=()=>S(),En(()=>k.disabled=r()),k})()})(),null),Le(p,(()=>{let v=We(()=>!i());return()=>v()&&(()=>{let k=P6();return k.$$click=()=>x(),k})()})(),null),En(v=>{let k=r(),A=xe.replyPlaceholder||"Add your comment...";return k!==v._v$&&(f.disabled=v._v$=k),A!==v._v$2&&Vt(f,"placeholder",v._v$2=A),v},{_v$:void 0,_v$2:void 0}),En(()=>f.value=t()),B})()},R6=()=>{let e=()=>xe.anchor,t=ib(()=>["aggregates",IDBKeyRange.only([e().value,9735])]),n=ib(()=>["aggregates",IDBKeyRange.only([e().value,7])]),r=()=>{var i;return((i=t())==null?void 0:i.sum)??0},o=()=>{var i;return((i=n())==null?void 0:i.ids.length)??0};return(()=>{let i=O6(),a=i.firstChild,u=a.firstChild;return Le(u,Rn(Xc,{get when(){return!xe.disableFeatures.includes("likes")},get children(){let d=I6(),h=d.firstChild,m=h.firstChild;return Le(d,c5,h),Le(h,o,m),d}}),null),Le(u,Rn(Xc,{get when(){return!xe.disableFeatures.includes("zaps")},get children(){let d=N6(),h=d.firstChild,m=h.firstChild;return Le(d,a5,h),Le(h,()=>Y4(r()),m),d}}),null),Le(a,Rn(_w,{}),null),i})()};Wf(["click"]);function U6(e){return e!==null&&(typeof e=="object"||typeof e=="function")}function ab(e,...t){return typeof e=="function"?e(...t):e}function z6(e){let t={...e},n={...e},r={},o=a=>{let u=r[a];if(!u){if(!Fi())return t[a];r[a]=u=Et(t[a],{internal:!0}),delete t[a]}return u[0]()};for(let a in e)Object.defineProperty(n,a,{get:()=>o(a),enumerable:!0});let i=(a,u)=>{let d=r[a];if(d)return d[1](u);a in t&&(t[a]=ab(u,[t[a]]))};return[n,(a,u)=>{if(U6(a)){let d=kn(()=>Object.entries(ab(a,n)));Oi(()=>{for(let[h,m]of d)i(h,()=>m)})}else i(a,u);return n}]}var Ew={width:null,height:null};function kf(e){if(!e)return{...Ew};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function M6(e){let t=typeof e=="function",[n,r]=z6(t?Ew:kf(e)),o=new ResizeObserver(([i])=>r(kf(i.target)));return Ri(()=>o.disconnect()),t?Di(()=>{let i=e();i&&(r(kf(i)),o.observe(i),Ri(()=>o.unobserve(i)))}):(o.observe(e),Ri(()=>o.unobserve(e))),n}var D6=He("<div class=ztr-thread>"),F6=He("<li class=ztr-comment-action-reply><span>"),j6=He("<div class=ztr-comment><div class=ztr-comment-body><div class=ztr-comment-info-wrapper><div class=ztr-comment-info><div class=ztr-comment-info-picture><img></div><ul class=ztr-comment-info-items><li class=ztr-comment-info-author><a target=_blank></a><span style=white-space:nowrap;><strong> <!>ed</strong> </span></li><li><a class=ztr-comment-info-dots></a></li></ul></div><ul class=ztr-comment-info-items></ul></div><div class=ztr-comment-text></div><div class=ztr-comment-text></div><ul class=ztr-comment-actions>"),H6=He("<li>\u25CF"),V6=He("<li> repl"),q6=He("<li><span>"),W6=He("<div class=ztr-info-pane><a target=_blank><small>Event data"),Q6=He("<p class=warning><span>This is a <!> that referenced this article in <a>another thread"),K6=He("<p class=warning><span>Article contents may have changed since this <!> was made"),G6=He("<p class=warning><span>Article contents changed since this <!> was made"),Z6=He("<div class=ztr-comment-expand><a></a><span>Show full comment"),Y6=He("<div class=ztr-comment-replies>"),J6=He('<svg viewBox="0 -6 60 60"xmlns=http://www.w3.org/2000/svg><path d="M 12.6030 50.4905 C 13.3758 50.4905 13.9307 50.1140 14.8621 49.2421 L 20.6483 43.8720 C 19.5188 42.9803 18.6073 41.5733 18.6073 38.3433 L 18.6073 25.2052 C 18.6073 19.1217 22.3129 15.5152 28.3766 15.5152 L 42.2479 15.5152 L 42.2281 14.7622 C 41.9306 10.6999 39.2557 8.0643 34.7177 8.0643 L 7.5301 8.0643 C 2.9922 8.0643 0 10.7791 0 15.4954 L 0 34.9548 C 0 39.6710 2.9922 42.7028 7.5301 42.7028 L 10.8195 42.7028 L 10.8195 48.4693 C 10.8195 49.6979 11.4735 50.4905 12.6030 50.4905 Z M 44.6058 53.2450 C 45.7353 53.2450 46.3895 52.4325 46.3895 51.2237 L 46.3895 45.4374 L 48.4702 45.4374 C 53.0078 45.4374 56 42.4056 56 37.7092 L 56 25.6610 C 56 20.9250 53.0078 18.2300 48.4702 18.2300 L 28.8522 18.2300 C 24.1161 18.2300 21.3221 20.9250 21.3221 25.6610 L 21.3221 37.7092 C 21.3221 42.4056 24.1161 45.4374 28.8522 45.4374 L 35.1735 45.4374 L 42.3470 51.9767 C 43.2784 52.8487 43.8331 53.2450 44.6058 53.2450 Z">'),X6=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="-120 -80 528 588"><path d="M349.4 44.6c5.9-13.7 1.5-29.7-10.6-38.5s-28.6-8-39.9 1.8l-256 224c-10 8.8-13.6 22.9-8.9 35.3S50.7 288 64 288H175.5L98.6 467.4c-5.9 13.7-1.5 29.7 10.6 38.5s28.6 8 39.9-1.8l256-224c10-8.8 13.6-22.9 8.9-35.3s-16.6-20.7-30-20.7H272.5L349.4 44.6z">'),e5=He('<svg viewBox="0 -16 180 180"xmlns=http://www.w3.org/2000/svg><path d="M60.732 29.7C41.107 29.7 22 39.7 22 67.41c0 27.29 45.274 67.29 74 94.89 28.744-27.6 74-67.6 74-94.89 0-27.71-19.092-37.71-38.695-37.71C116 29.7 104.325 41.575 96 54.066 87.638 41.516 76 29.7 60.732 29.7z">'),t5=He('<svg viewBox="0 0 576 512"><path d="M168 80c-13.3 0-24 10.7-24 24V408c0 8.4-1.4 16.5-4.1 24H440c13.3 0 24-10.7 24-24V104c0-13.3-10.7-24-24-24H168zM72 480c-39.8 0-72-32.2-72-72V112C0 98.7 10.7 88 24 88s24 10.7 24 24V408c0 13.3 10.7 24 24 24s24-10.7 24-24V104c0-39.8 32.2-72 72-72H440c39.8 0 72 32.2 72 72V408c0 39.8-32.2 72-72 72H72zM176 136c0-13.3 10.7-24 24-24h96c13.3 0 24 10.7 24 24v80c0 13.3-10.7 24-24 24H200c-13.3 0-24-10.7-24-24V136zm200-24h32c13.3 0 24 10.7 24 24s-10.7 24-24 24H376c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80h32c13.3 0 24 10.7 24 24s-10.7 24-24 24H376c-13.3 0-24-10.7-24-24s10.7-24 24-24zM200 272H408c13.3 0 24 10.7 24 24s-10.7 24-24 24H200c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80H408c13.3 0 24 10.7 24 24s-10.7 24-24 24H200c-13.3 0-24-10.7-24-24s10.7-24 24-24z">'),n5=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 -200 560 640"><path d="M8 256a56 56 0 1 1 112 0A56 56 0 1 1 8 256zm160 0a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112z">'),r5=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 -50 256 512"><path d="M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z">'),o5=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 -50 320 512"><path d="M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z">'),i5=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 512 512"><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z">'),xw=e=>{let t=()=>xe.anchor,n=xe.profiles;return(()=>{let r=D6();return Le(r,Rn(ux,{get each(){return Qc(e.nestedEvents())},children:o=>{let[i,a]=Et(!1),[u,d]=Et(!1),[h,m]=Et(!1),[w,x]=Et(!1),P=500,[I,S]=Et(),N=M6(I),[z,B]=Et(Kc),f=()=>o().pk,p=()=>iw(f()),b=()=>n().find(M=>M.pk===f());Di(async()=>{var M;B(((M=b())==null?void 0:M.i)||Kc)});let v,k=()=>Z4(o().ts*1e3),[A,T]=Et();Di(()=>{T(k()),v=setInterval(()=>{T(k())},60*1e3)});let U=()=>o().a===t().value&&o().am,C=()=>o().k===9802?"highlight":U()?"mention":"comment",$=We(()=>sh(o())),F=()=>!o().parent&&!o().ro,q=()=>!o().parent&&o().ro&&!xe.rootEventIds.includes(o().ro),E=()=>!o().parent&&o().ro&&xe.rootEventIds.includes(o().ro)&&xe.version&&xe.version!==o().ro;return Ri(()=>clearInterval(v)),(()=>{let M=j6(),V=M.firstChild,K=V.firstChild,Z=K.firstChild,W=Z.firstChild,J=W.firstChild,ue=W.nextSibling,_e=ue.firstChild,ve=_e.firstChild,Pe=ve.nextSibling,oe=Pe.firstChild,Se=oe.firstChild,Ve=Se.nextSibling;Ve.nextSibling,oe.nextSibling;let Re=_e.nextSibling,je=Re.firstChild,xt=Z.nextSibling,Qe=K.nextSibling,de=Qe.nextSibling,De=de.nextSibling;return J.addEventListener("error",()=>B(Kc)),Le(ve,()=>{var Ce;return((Ce=b())==null?void 0:Ce.n)||Yo(p())}),Le(oe,C,Ve),Le(Pe,A,null),Le(ue,(()=>{let Ce=We(()=>$()>0&&N.width>600);return()=>Ce()&&[H6(),(()=>{let Ie=V6(),qe=Ie.firstChild;return Le(Ie,$,qe),Le(Ie,()=>$()>1?"ies":"y",null),Le(Ie,()=>h()?" (hidden)":"",null),Ie})()]})(),Re),je.$$click=()=>x(!w()),Le(je,kw),Le(xt,(()=>{let Ce=We(()=>$()>0);return()=>Ce()&&(()=>{let Ie=q6(),qe=Ie.firstChild;return qe.$$click=()=>m(!h()),Le(qe,(()=>{let Lt=We(()=>!!h());return()=>Lt()?l5():d5()})()),Ie})()})()),Le(V,(()=>{let Ce=We(()=>!!w());return()=>Ce()&&(()=>{let Ie=W6(),qe=Ie.firstChild;return En(()=>Vt(qe,"href",xe.urlPrefixes.note+X0(o().id))),Ie})()})(),Qe),Le(Qe,(()=>{let Ce=We(()=>!!q());return()=>Ce()&&(()=>{let Ie=Q6(),qe=Ie.firstChild,Lt=qe.firstChild,Wt=Lt.nextSibling,Mt=Wt.nextSibling,un=Mt.nextSibling;return Le(Ie,Sf,qe),Le(qe,C,Wt),En(()=>Vt(un,"href",xe.urlPrefixes.note+X0(o().ro))),Ie})()})(),null),Le(Qe,(()=>{let Ce=We(()=>!!F());return()=>Ce()&&(()=>{let Ie=K6(),qe=Ie.firstChild,Lt=qe.firstChild,Wt=Lt.nextSibling;return Wt.nextSibling,Le(Ie,Sf,qe),Le(qe,C,Wt),Ie})()})(),null),Le(Qe,(()=>{let Ce=We(()=>!!E());return()=>Ce()&&(()=>{let Ie=G6(),qe=Ie.firstChild,Lt=qe.firstChild,Wt=Lt.nextSibling;return Wt.nextSibling,Le(Ie,Sf,qe),Le(qe,C,Wt),Ie})()})(),null),Eb(S,de),Le(V,(()=>{let Ce=We(()=>!!(N.height&&N.height>=P&&!u()));return()=>Ce()&&(()=>{let Ie=Z6(),qe=Ie.firstChild,Lt=qe.nextSibling;return`${Un}px`!=null?qe.style.setProperty("height",`${Un}px`):qe.style.removeProperty("height"),Le(qe,u5),Lt.$$click=()=>d(!0),Ie})()})(),De),Le(De,Rn(Xc,{get when(){return!xe.disableFeatures.includes("reply")},get children(){let Ce=F6(),Ie=Ce.firstChild;return Ce.$$click=()=>a(!i())&&x(!1),Le(Ce,s5,Ie),Le(Ie,()=>i()?"Cancel":"Reply"),Ce}})),Le(V,(()=>{let Ce=We(()=>!!i());return()=>Ce()&&Rn(_w,{get replyTo(){return o().id},onDone:()=>a(!1)})})(),null),Le(M,(()=>{let Ce=We(()=>!h());return()=>Ce()&&(()=>{let Ie=Y6();return Le(Ie,Rn(xw,{nestedEvents:()=>o().children,get articles(){return e.articles}})),Ie})()})(),null),En(Ce=>{let Ie=z(),qe=xe.urlPrefixes.npub+p(),Lt=o().k==9802,Wt=u()?{}:{"max-height":`${P}px`},Mt=pw(o(),xe,e.articles());return Ie!==Ce._v$&&Vt(J,"src",Ce._v$=Ie),qe!==Ce._v$2&&Vt(ve,"href",Ce._v$2=qe),Lt!==Ce._v$3&&de.classList.toggle("highlight",Ce._v$3=Lt),Ce._v$4=fx(de,Wt,Ce._v$4),Mt!==Ce._v$5&&(de.innerHTML=Ce._v$5=Mt),Ce},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),M})()}})),r})()},s5=()=>(()=>{let e=J6();return Vt(e,"width",Un),Vt(e,"height",Un),e})(),a5=()=>(()=>{let e=X6();return Vt(e,"width",Un),Vt(e,"height",Un),e})(),c5=()=>(()=>{let e=e5();return Vt(e,"width",Un),Vt(e,"height",Un),e})(),u5=()=>(()=>{let e=t5();return Vt(e,"width",Un),Vt(e,"height",Un),e})(),kw=()=>n5(),l5=()=>r5(),d5=()=>o5(),Sf=()=>(()=>{let e=i5();return Vt(e,"height",Un),e})();Wf(["click"]);var Sw={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64url=e.base64=e.base32crockford=e.base32hex=e.base32=e.base16=e.utils=e.assertNumber=void 0;function t(C){if(!Number.isSafeInteger(C))throw new Error(`Wrong integer: ${C}`)}e.assertNumber=t;function n(...C){let $=(E,M)=>V=>E(M(V)),F=Array.from(C).reverse().reduce((E,M)=>E?$(E,M.encode):M.encode,void 0),q=C.reduce((E,M)=>E?$(E,M.decode):M.decode,void 0);return{encode:F,decode:q}}function r(C){return{encode:$=>{if(!Array.isArray($)||$.length&&typeof $[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return $.map(F=>{if(t(F),F<0||F>=C.length)throw new Error(`Digit index outside alphabet: ${F} (alphabet: ${C.length})`);return C[F]})},decode:$=>{if(!Array.isArray($)||$.length&&typeof $[0]!="string")throw new Error("alphabet.decode input should be array of strings");return $.map(F=>{if(typeof F!="string")throw new Error(`alphabet.decode: not string element=${F}`);let q=C.indexOf(F);if(q===-1)throw new Error(`Unknown letter: "${F}". Allowed: ${C}`);return q})}}}function o(C=""){if(typeof C!="string")throw new Error("join separator should be string");return{encode:$=>{if(!Array.isArray($)||$.length&&typeof $[0]!="string")throw new Error("join.encode input should be array of strings");for(let F of $)if(typeof F!="string")throw new Error(`join.encode: non-string input=${F}`);return $.join(C)},decode:$=>{if(typeof $!="string")throw new Error("join.decode input should be string");return $.split(C)}}}function i(C,$="="){if(t(C),typeof $!="string")throw new Error("padding chr should be string");return{encode(F){if(!Array.isArray(F)||F.length&&typeof F[0]!="string")throw new Error("padding.encode input should be array of strings");for(let q of F)if(typeof q!="string")throw new Error(`padding.encode: non-string input=${q}`);for(;F.length*C%8;)F.push($);return F},decode(F){if(!Array.isArray(F)||F.length&&typeof F[0]!="string")throw new Error("padding.encode input should be array of strings");for(let E of F)if(typeof E!="string")throw new Error(`padding.decode: non-string input=${E}`);let q=F.length;if(q*C%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;q>0&&F[q-1]===$;q--)if(!((q-1)*C%8))throw new Error("Invalid padding: string has too much padding");return F.slice(0,q)}}}function a(C){if(typeof C!="function")throw new Error("normalize fn should be function");return{encode:$=>$,decode:$=>C($)}}function u(C,$,F){if($<2)throw new Error(`convertRadix: wrong from=${$}, base cannot be less than 2`);if(F<2)throw new Error(`convertRadix: wrong to=${F}, base cannot be less than 2`);if(!Array.isArray(C))throw new Error("convertRadix: data should be array");if(!C.length)return[];let q=0,E=[],M=Array.from(C);for(M.forEach(V=>{if(t(V),V<0||V>=$)throw new Error(`Wrong integer: ${V}`)});;){let V=0,K=!0;for(let Z=q;Z<M.length;Z++){let W=M[Z],J=$*V+W;if(!Number.isSafeInteger(J)||$*V/$!==V||J-W!==$*V)throw new Error("convertRadix: carry overflow");if(V=J%F,M[Z]=Math.floor(J/F),!Number.isSafeInteger(M[Z])||M[Z]*F+V!==J)throw new Error("convertRadix: carry overflow");if(K)M[Z]?K=!1:q=Z;else continue}if(E.push(V),K)break}for(let V=0;V<C.length-1&&C[V]===0;V++)E.push(0);return E.reverse()}let d=(C,$)=>$?d($,C%$):C,h=(C,$)=>C+($-d(C,$));function m(C,$,F,q){if(!Array.isArray(C))throw new Error("convertRadix2: data should be array");if($<=0||$>32)throw new Error(`convertRadix2: wrong from=${$}`);if(F<=0||F>32)throw new Error(`convertRadix2: wrong to=${F}`);if(h($,F)>32)throw new Error(`convertRadix2: carry overflow from=${$} to=${F} carryBits=${h($,F)}`);let E=0,M=0,V=2**F-1,K=[];for(let Z of C){if(t(Z),Z>=2**$)throw new Error(`convertRadix2: invalid data word=${Z} from=${$}`);if(E=E<<$|Z,M+$>32)throw new Error(`convertRadix2: carry overflow pos=${M} from=${$}`);for(M+=$;M>=F;M-=F)K.push((E>>M-F&V)>>>0);E&=2**M-1}if(E=E<<F-M&V,!q&&M>=$)throw new Error("Excess padding");if(!q&&E)throw new Error(`Non-zero padding: ${E}`);return q&&M>0&&K.push(E>>>0),K}function w(C){return t(C),{encode:$=>{if(!($ instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return u(Array.from($),2**8,C)},decode:$=>{if(!Array.isArray($)||$.length&&typeof $[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(u($,C,2**8))}}}function x(C,$=!1){if(t(C),C<=0||C>32)throw new Error("radix2: bits should be in (0..32]");if(h(8,C)>32||h(C,8)>32)throw new Error("radix2: carry overflow");return{encode:F=>{if(!(F instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return m(Array.from(F),8,C,!$)},decode:F=>{if(!Array.isArray(F)||F.length&&typeof F[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(m(F,C,8,$))}}}function P(C){if(typeof C!="function")throw new Error("unsafeWrapper fn should be function");return function(...$){try{return C.apply(null,$)}catch{}}}function I(C,$){if(t(C),typeof $!="function")throw new Error("checksum fn should be function");return{encode(F){if(!(F instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");let q=$(F).slice(0,C),E=new Uint8Array(F.length+C);return E.set(F),E.set(q,F.length),E},decode(F){if(!(F instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");let q=F.slice(0,-C),E=$(q).slice(0,C),M=F.slice(-C);for(let V=0;V<C;V++)if(E[V]!==M[V])throw new Error("Invalid checksum");return q}}}e.utils={alphabet:r,chain:n,checksum:I,radix:w,radix2:x,join:o,padding:i},e.base16=n(x(4),r("0123456789ABCDEF"),o("")),e.base32=n(x(5),r("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),i(5),o("")),e.base32hex=n(x(5),r("0123456789ABCDEFGHIJKLMNOPQRSTUV"),i(5),o("")),e.base32crockford=n(x(5),r("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),a(C=>C.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),e.base64=n(x(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),i(6),o("")),e.base64url=n(x(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),i(6),o(""));let S=C=>n(w(58),r(C),o(""));e.base58=S("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=S("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=S("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");let N=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(C){let $="";for(let F=0;F<C.length;F+=8){let q=C.subarray(F,F+8);$+=e.base58.encode(q).padStart(N[q.length],"1")}return $},decode(C){let $=[];for(let F=0;F<C.length;F+=11){let q=C.slice(F,F+11),E=N.indexOf(q.length),M=e.base58.decode(q);for(let V=0;V<M.length-E;V++)if(M[V]!==0)throw new Error("base58xmr: wrong padding");$=$.concat(Array.from(M.slice(M.length-E)))}return Uint8Array.from($)}};let z=C=>n(I(4,$=>C(C($))),e.base58);e.base58check=z;let B=n(r("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),f=[996825010,642813549,513874426,1027748829,705979059];function p(C){let $=C>>25,F=(C&33554431)<<5;for(let q=0;q<f.length;q++)($>>q&1)===1&&(F^=f[q]);return F}function b(C,$,F=1){let q=C.length,E=1;for(let M=0;M<q;M++){let V=C.charCodeAt(M);if(V<33||V>126)throw new Error(`Invalid prefix (${C})`);E=p(E)^V>>5}E=p(E);for(let M=0;M<q;M++)E=p(E)^C.charCodeAt(M)&31;for(let M of $)E=p(E)^M;for(let M=0;M<6;M++)E=p(E);return E^=F,B.encode(m([E%2**30],30,5,!1))}function v(C){let $=C==="bech32"?1:734539939,F=x(5),q=F.decode,E=F.encode,M=P(q);function V(J,ue,_e=90){if(typeof J!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof J}`);if(!Array.isArray(ue)||ue.length&&typeof ue[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof ue}`);let ve=J.length+7+ue.length;if(_e!==!1&&ve>_e)throw new TypeError(`Length ${ve} exceeds limit ${_e}`);return J=J.toLowerCase(),`${J}1${B.encode(ue)}${b(J,ue,$)}`}function K(J,ue=90){if(typeof J!="string")throw new Error(`bech32.decode input should be string, not ${typeof J}`);if(J.length<8||ue!==!1&&J.length>ue)throw new TypeError(`Wrong string length: ${J.length} (${J}). Expected (8..${ue})`);let _e=J.toLowerCase();if(J!==_e&&J!==J.toUpperCase())throw new Error("String must be lowercase or uppercase");J=_e;let ve=J.lastIndexOf("1");if(ve===0||ve===-1)throw new Error('Letter "1" must be present between prefix and data only');let Pe=J.slice(0,ve),oe=J.slice(ve+1);if(oe.length<6)throw new Error("Data must be at least 6 characters long");let Se=B.decode(oe).slice(0,-6),Ve=b(Pe,Se,$);if(!oe.endsWith(Ve))throw new Error(`Invalid checksum in ${J}: expected "${Ve}"`);return{prefix:Pe,words:Se}}let Z=P(K);function W(J){let{prefix:ue,words:_e}=K(J,!1);return{prefix:ue,words:_e,bytes:q(_e)}}return{encode:V,decode:K,decodeToBytes:W,decodeUnsafe:Z,fromWords:q,fromWordsUnsafe:M,toWords:E}}e.bech32=v("bech32"),e.bech32m=v("bech32m"),e.utf8={encode:C=>new TextDecoder().decode(C),decode:C=>new TextEncoder().encode(C)},e.hex=n(x(4),r("0123456789abcdef"),o(""),a(C=>{if(typeof C!="string"||C.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof C} with length ${C.length}`);return C.toLowerCase()}));let k={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},A=`Invalid encoding type. Available types: ${Object.keys(k).join(", ")}`,T=(C,$)=>{if(typeof C!="string"||!k.hasOwnProperty(C))throw new TypeError(A);if(!($ instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return k[C].encode($)};e.bytesToString=T,e.str=e.bytesToString;let U=(C,$)=>{if(!k.hasOwnProperty(C))throw new TypeError(A);if(typeof $!="string")throw new TypeError("stringToBytes() expects string");return k[C].decode($)};e.stringToBytes=U,e.bytes=e.stringToBytes})(Sw);var{bech32:Xn,hex:On,utf8:f5}=Sw,cb={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},ub={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},lb={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},db={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},qc=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],h5={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},p5=BigInt("2100000000000000000"),fb=BigInt(1e11),qf={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},Aw={};for(let e=0,t=Object.keys(qf);e<t.length;e++){let n=t[e],r=qf[t[e]].toString();Aw[r]=n}var g5={1:e=>On.encode(Xn.fromWordsUnsafe(e)),16:e=>On.encode(Xn.fromWordsUnsafe(e)),13:e=>f5.encode(Xn.fromWordsUnsafe(e)),19:e=>On.encode(Xn.fromWordsUnsafe(e)),23:e=>On.encode(Xn.fromWordsUnsafe(e)),27:e=>On.encode(Xn.fromWordsUnsafe(e)),6:uu,24:uu,3:b5,5:w5};function m5(e){return t=>({tagCode:parseInt(e),words:Xn.encode("unknown",t,Number.MAX_SAFE_INTEGER)})}function uu(e){return e.reverse().reduce((t,n,r)=>t+n*Math.pow(32,r),0)}function b5(e){let t=[],n,r,o,i,a,u=Xn.fromWordsUnsafe(e);for(;u.length>0;)n=On.encode(u.slice(0,33)),r=On.encode(u.slice(33,41)),o=parseInt(On.encode(u.slice(41,45)),16),i=parseInt(On.encode(u.slice(45,49)),16),a=parseInt(On.encode(u.slice(49,51)),16),u=u.slice(51),t.push({pubkey:n,short_channel_id:r,fee_base_msat:o,fee_proportional_millionths:i,cltv_expiry_delta:a});return t}function w5(e){let t=e.slice().reverse().map(o=>[!!(o&1),!!(o&2),!!(o&4),!!(o&8),!!(o&16)]).reduce((o,i)=>o.concat(i),[]);for(;t.length<qc.length*2;)t.push(!1);let n={};qc.forEach((o,i)=>{let a;t[i*2]?a="required":t[i*2+1]?a="supported":a="unsupported",n[o]=a});let r=t.slice(qc.length*2);return n.extra_bits={start_bit:qc.length*2,bits:r,has_required:r.reduce((o,i,a)=>a%2!==0?o||!1:o||i,!1)},n}function $w(e,t){let n,r;if(e.slice(-1).match(/^[munp]$/))n=e.slice(-1),r=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");r=e}if(!r.match(/^\d+$/))throw new Error("Not a valid human readable amount");let o=BigInt(r),i=n?o*fb/h5[n]:o*fb;if(n==="p"&&o%BigInt(10)!==BigInt(0)||i>p5)throw new Error("Amount is outside of valid range");return t?i.toString():i}function y5(e,t){if(typeof e!="string")throw new Error("Lightning Payment Request must be string");if(e.slice(0,2).toLowerCase()!=="ln")throw new Error("Not a proper lightning payment request");let n=[],r=Xn.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();let o=r.prefix,i=r.words,a=e.slice(o.length+1),u=i.slice(-104);i=i.slice(0,-104);let d=o.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(d&&!d[2]&&(d=o.match(/^ln(\S+)$/)),!d)throw new Error("Not a proper lightning payment request");n.push({name:"lightning_network",letters:"ln"});let h=d[1],m;if(t){if(t.bech32===void 0||t.pubKeyHash===void 0||t.scriptHash===void 0||!Array.isArray(t.validWitnessVersions))throw new Error("Invalid network");m=t}else switch(h){case cb.bech32:m=cb;break;case ub.bech32:m=ub;break;case lb.bech32:m=lb;break;case db.bech32:m=db;break}if(!m||m.bech32!==h)throw new Error("Unknown coin bech32 prefix");n.push({name:"coin_network",letters:h,value:m});let w=d[2],x;if(w){let p=d[3];x=$w(w+p,!0),n.push({name:"amount",letters:d[2]+d[3],value:x})}else x=null;n.push({name:"separator",letters:"1"});let P=uu(i.slice(0,7));i=i.slice(7),n.push({name:"timestamp",letters:a.slice(0,7),value:P}),a=a.slice(7);let I,S,N,z;for(;i.length>0;){let p=i[0].toString();I=Aw[p]||"unknown_tag",S=g5[p]||m5(p),i=i.slice(1),N=uu(i.slice(0,2)),i=i.slice(2),z=i.slice(0,N),i=i.slice(N),n.push({name:I,tag:a[0],letters:a.slice(0,3+N),value:S(z)}),a=a.slice(3+N)}n.push({name:"signature",letters:a.slice(0,104),value:On.encode(Xn.fromWordsUnsafe(u))}),a=a.slice(104),n.push({name:"checksum",letters:a});let B={paymentRequest:e,sections:n,get expiry(){let p=n.find(b=>b.name==="expiry");if(p)return f("timestamp")+p.value},get route_hints(){return n.filter(p=>p.name==="route_hint").map(p=>p.value)}};for(let p in qf)p!=="route_hint"&&Object.defineProperty(B,p,{get(){return f(p)}});return B;function f(p){let b=n.find(v=>v.name===p);return b?b.value:void 0}}var v5={decode:y5,hrpToMillisat:$w},_5=He("<div id=ztr-root><style></style><div style=float:right;opacity:0.2;>"),E5=He("<div id=ztr-content>"),x5=He("<h1>Error!"),k5=He("<div class=ztr-comment-text><pre></pre><p>Only properly formed NIP-19 naddr, note and nevent encoded entities and URLs are supported."),S5=He("<h2 id=ztr-title>"),A5=He("<p>Powered by <a href=https://github.com/fr4nzap/zapthreads>zapthreads"),$5=He("<button>Clear cache"),T5=He("<p>Anchor version: "),B5=e=>{fo(()=>{xe.anchor=(()=>{let f=e.anchor.trim();try{if(f.startsWith("http")){let b=!e.legacyUrl;return{type:"http",value:X4(f,b)}}let p=Wc(f);switch(p.type){case"nevent":return{type:"note",value:p.data.id};case"note":return{type:"note",value:p.data};case"naddr":let b=p.data;return{type:"naddr",value:`${b.kind}:${b.pubkey}:${b.identifier}`}}}catch(p){return console.error(p),{type:"error",value:`Malformed anchor: ${f}`}}})();let B="wss://relay.damus.io,wss://nos.lol";xe.relays=(e.relays||B).split(",").map(f=>new URL(f).toString()),(e.author||"").startsWith("npub")&&(xe.externalAuthor=e.author),xe.disableFeatures=e.disable.split(",").map(f=>f.trim()).filter(o4),xe.urlPrefixes=G4(e.urls),xe.replyPlaceholder=e.replyPlaceholder});let t=()=>xe.anchor,n=()=>xe.relays,r=()=>xe.disableFeatures,o=()=>e.version;xe.profiles=Vc(()=>["profiles"]);let i=()=>r().includes("watch");fo(ho([t],()=>{xe.version=o()})),fo(ho([t,n],async()=>{if(t().type==="error")return;let B,f;switch(t().type){case"http":f=await Wi("events",t().value,{index:"r"}),xe.rootEventIds=Qc(f).map(C=>C.id),B={"#r":e.legacyUrl?[t().value]:[t().value,`${t().value}/`],kinds:[1,8812]};break;case"note":let k=await Mi("events",IDBKeyRange.only(t().value));if(k){f=[k],xe.rootEventIds=[k.id],xe.anchorAuthor=k.pk;return}else{f=[],B={ids:[t().value]};break}case"naddr":let[A,T,U]=t().value.split(":");f=(await Wi("events",U,{index:"d"})).filter(C=>C.pk===T),f.length>0&&(xe.rootEventIds=Qc(f).map(C=>C.id),xe.anchorAuthor=f[0].pk),B={authors:[T],kinds:[parseInt(A)],"#d":[U]};break;default:throw"error"}let b=(await Ui.querySync(n(),{...B})).map(cu);for(let v of b)t().type=="http"?(v.k==1&&v.c.includes("\u21B4")||v.k==8812)&&xn("events",v):xn("events",v);switch(t().type){case"http":case"naddr":let v=[...f,...b],k=Qc([...v]).map(A=>A.id);(k.length>0&&k[0])!==xe.rootEventIds[0]&&(xe.rootEventIds=k);break;case"note":xe.rootEventIds=b.map(A=>A.id);break}b.length>0&&(xe.anchorAuthor=b[0].pk)}));let a=()=>xe.rootEventIds;fo(ho([a,o],()=>{switch(t().type){case"http":case"note":(xe.filter["#e"]??[]).toString()!==a().toString()&&(xe.filter={"#e":a()});return;case"naddr":let B=xe.filter["#a"]&&xe.filter["#a"][0];t().value!==B&&(xe.filter={"#a":[t().value]}),xe.version=o()||a()[0];return}},{defer:!0}));let u=We(()=>xe.filter,{defer:!0}),d;Di(ho([u],async()=>{let B=u(),f=n(),p=t(),b=P(),v=xe.profiles();if(Object.entries(B).length===0)return;d?.close(),d=null,Ri(()=>{console.log("[zapthreads] unsubscribing and cleaning up",p.value),d?.close(),d=null});let k=[1,9802,7,9735];console.log("[zapthreads] subscribing to",p.value);let A=await F4(p,f),T=new Set,U={};d=Ui.subscribeMany(f,[{...B,kinds:k,since:A}],{onevent(C){if(C.kind===1||C.kind===9802)C.content.trim()&&xn("events",cu(C));else if(C.kind===7)T.add(C.id);else if(C.kind===9735){let $=C.tags.find(F=>F[0]==="bolt11");$&&$[1]&&(U[C.id]=$[1])}},oneose(){(async()=>{let C=await Mi("aggregates",IDBKeyRange.only([p.value,7]))??{eid:p.value,ids:[],k:7};C.ids=[...new Set([...C.ids,...T])],xn("aggregates",C);let $=await Mi("aggregates",IDBKeyRange.only([p.value,9735]))??{eid:p.value,ids:[],k:9735,sum:0};$.sum=Object.entries(U).reduce((F,q)=>{if($.ids.includes(q[0]))return F;let M=v5.decode(q[1]).sections.find(K=>K.name==="amount"),V=Number(M.value)/1e3;return F+V},$.sum??0),$.ids=[...new Set([...$.ids,...Object.keys(U)])],xn("aggregates",$)})(),setTimeout(async()=>{await hw([...b.map(C=>C.pk)],f,v),j4(p,b),i()&&(d?.close(),Ui.close(f))},96)}})},{defer:!0}));let h=()=>e.user;fo(ho(h,B=>{if(B){let f,p;B.startsWith("nsec")?(p=Wc(B).data,f=mw(p)):f=Wc(B).data,Gt.external={pk:f,signEvent:async b=>{if(p)return{sig:bw(b,p).sig};if(!window.nostr)throw alert("Please log in with a NIP-07 extension such as Alby or nos2x"),Gt.active=void 0,"No extension available";let v=await window.nostr.getPublicKey(),k=f;if(k!==v){let A=`ERROR: Event not signed. Supplied pubkey does not match extension pubkey. ${k} !== ${v}`;throw Gt.active=void 0,alert(A),A}else return window.nostr.signEvent(b)}},Gt.active=Gt.external}})),fo(ho(h,B=>{B||(Gt.active=void 0)},{defer:!0}));let m=Vc(()=>["events",30023,{index:"k"}]),w=We(()=>{if(xe.disableFeatures.includes("hideContent")&&t().type==="naddr"){let[B,f,p]=t().value.split(":"),b=m().find(v=>v.d===p&&v.pk===f);if(b){let v=`# ${b.tl}
 ${b.c}`;return pw({...b,c:v},xe,[])}}}),x=We(()=>{switch(t().type){case"http":case"note":return Vc(()=>["events",xe.rootEventIds,{index:"ro"}]);case"naddr":return Vc(()=>["events",t().value,{index:"a"}]);default:return()=>[]}}),P=()=>x()(),I=We(()=>xe.rootEventIds&&xe.rootEventIds.length?gw(P()).filter(f=>!(f.k===9802&&f.children.length===0)):[]),S=()=>I().reduce((B,f)=>B+sh(f),I().length),[N,z]=Et(!1);return(()=>{let B=_5(),f=B.firstChild,p=f.nextSibling;return Le(f,$x),Le(B,(()=>{let b=We(()=>!!w());return()=>b()&&(()=>{let v=E5();return En(()=>v.innerHTML=w()),v})()})(),p),Le(B,(()=>{let b=We(()=>t().type==="error");return()=>b()&&[x5(),(()=>{let v=k5(),k=v.firstChild;return Le(k,()=>t().value),v})()]})(),p),Le(B,(()=>{let b=We(()=>t().type!=="error");return()=>b()&&[We((()=>{let v=We(()=>!xe.disableFeatures.includes("reply"));return()=>v()&&Rn(R6,{})})()),(()=>{let v=S5();return Le(v,(()=>{let k=We(()=>S()>0);return()=>k()&&`${S()} comment${S()==1?"":"s"}`})()),v})(),Rn(xw,{nestedEvents:I,articles:m})]})(),p),p.$$click=()=>z(!N()),Le(p,kw),Le(B,(()=>{let b=We(()=>!!N());return()=>b()&&[A5(),We((()=>{let v=We(()=>!!xe.version);return()=>v()&&(()=>{let k=T5();return k.firstChild,Le(k,()=>xe.version,null),k})()})()),(()=>{let v=$5();return dx(v,"click",D4,!0),v})()]})(),null),B})()};Ax("zap-threads",{anchor:"",version:"",relays:"",user:"",author:"",disable:"",urls:"","reply-placeholder":"","legacy-url":""},e=>Rn(B5,{get anchor(){return e.anchor??""},get version(){return e.version??""},get relays(){return e.relays??""},get user(){return e.user??""},get author(){return e.author??""},get disable(){return e.disable??""},get urls(){return e.urls??""},get replyPlaceholder(){return e["reply-placeholder"]??""},get legacyUrl(){return e["legacy-url"]??""}}));Wf(["click"]);function L5(e){return{c:ze,m:ze,p:ze,d:ze}}function C5(e){let t,n,r=jt(e[2].created_at,!0)+"",o,i,a,u=e[2].title+"",d,h,m,w,x,P,I=e[2].image&&Tw(e),S=e[4]&&Bw(e);return{c(){t=ae("div"),n=ae("div"),o=Me(r),i=Ne(),a=ae("h1"),d=Me(u),h=Ne(),I&&I.c(),m=Ne(),w=ae("div"),x=Ne(),S&&S.c(),P=kt(),ie(n,"class","date"),ie(w,"class","content"),ie(t,"class","event-wrapper")},m(N,z){me(N,t,z),ne(t,n),ne(n,o),ne(t,i),ne(t,a),ne(a,d),ne(t,h),I&&I.m(t,null),ne(t,m),ne(t,w),w.innerHTML=e[5],me(N,x,z),S&&S.m(N,z),me(N,P,z)},p(N,z){z&4&&r!==(r=jt(N[2].created_at,!0)+"")&&Ze(o,r),z&4&&u!==(u=N[2].title+"")&&Ze(d,u),N[2].image?I?I.p(N,z):(I=Tw(N),I.c(),I.m(t,m)):I&&(I.d(1),I=null),z&32&&(w.innerHTML=N[5]),N[4]?S?S.p(N,z):(S=Bw(N),S.c(),S.m(P.parentNode,P)):S&&(S.d(1),S=null)},d(N){N&&(pe(t),pe(x),pe(P)),I&&I.d(),S&&S.d(N)}}}function Tw(e){let t,n,r;return{c(){t=ae("img"),ie(t,"class",n=e[2].image?"note-image":"note-banner"),Nt(t.src,r=e[2].image)||ie(t,"src",r)},m(o,i){me(o,t,i)},p(o,i){i&4&&n!==(n=o[2].image?"note-image":"note-banner")&&ie(t,"class",n),i&4&&!Nt(t.src,r=o[2].image)&&ie(t,"src",r)},d(o){o&&pe(t)}}}function Bw(e){let t,n;return{c(){t=ae("zap-threads"),is(t,"anchor",e[3]),is(t,"relays",n=e[1].join(","))},m(r,o){me(r,t,o)},p(r,o){o&8&&is(t,"anchor",r[3]),o&2&&n!==(n=r[1].join(","))&&is(t,"relays",n)},d(r){r&&pe(t)}}}function P5(e){let t,n,r,o,i=e[3].substring(0,12)+"..."+e[3].slice(-5),a,u,d,h,m,w,x,P,I,S=e[0]?.shortName+"",N,z,B,f,p;function b(A,T){return T&4&&(f=null),f==null&&(f=!!(A[2]&&Object.keys(A[2]).length>0)),f?C5:L5}let v=b(e,-1),k=v(e);return{c(){t=ae("div"),n=ae("div"),r=Me("Note: "),o=ae("a"),a=Me(i),d=Ne(),h=ae("a"),m=ae("div"),w=ae("img"),P=Ne(),I=ae("span"),N=Me(S),z=Me(""),B=Ne(),k.c(),p=kt(),ie(o,"href",u="https://njump.me/"+e[3]),ie(n,"class","external-link"),Nt(w.src,x=e[0]?.image)||ie(w,"src",x),ie(m,"class","picture-container"),ie(h,"href","#"),ie(t,"class","header note")},m(A,T){me(A,t,T),ne(t,n),ne(n,r),ne(n,o),ne(o,a),ne(t,d),ne(t,h),ne(h,m),ne(m,w),ne(h,P),ne(h,I),ne(I,N),ne(I,z),me(A,B,T),k.m(A,T),me(A,p,T)},p(A,[T]){T&8&&i!==(i=A[3].substring(0,12)+"..."+A[3].slice(-5))&&Ze(a,i),T&8&&u!==(u="https://njump.me/"+A[3])&&ie(o,"href",u),T&1&&!Nt(w.src,x=A[0]?.image)&&ie(w,"src",x),T&1&&S!==(S=A[0]?.shortName+"")&&Ze(N,S),v===(v=b(A,T))&&k?k.p(A,T):(k.d(1),k=v(A),k&&(k.c(),k.m(p.parentNode,p)))},i:ze,o:ze,d(A){A&&(pe(t),pe(B),pe(p)),k.d(A)}}}function I5(e,t,n){let r,o,i,a="",u="",d=!1,{id:h}=t,{profile:m}=t;return Ot(()=>{wi().then(async({npub:w,writeRelays:x,readRelays:P,comments:I})=>{if(n(1,o=P),n(0,m=await jo(w)),!m)throw new Error("npub is invalid");n(3,u=om({id:h})),n(4,d=I);let S=await Yr.get(x,{ids:[h]});S?(console.log("Received event:",S),n(2,i=Jr(S)),vi.set(i.title),n(7,a=await um(i))):console.log(`Didn't get any event for ${h} query.`)})}),e.$$set=w=>{"id"in w&&n(6,h=w.id),"profile"in w&&n(0,m=w.profile)},e.$$.update=()=>{e.$$.dirty&128&&n(5,r=a)},vi.subscribe(w=>{document.title=w}),[m,o,i,u,d,r,h,a]}var ah=class extends nt{constructor(t){super(),ct(this,t,I5,P5,tt,{id:6,profile:0})}},Lw=ah;function N5(e){let t,n,r,o,i,a,u;return{c(){t=ae("div"),n=ae("input"),r=Ne(),o=ae("label"),n.checked=e[0],ie(n,"type","checkbox"),ie(n,"id","theme-toggle"),ie(n,"class","svelte-19brd9o"),ie(o,"for","theme-toggle"),ie(o,"class","svelte-19brd9o"),ie(t,"class",i=wl(e[1]?"visible":"hidden")+" svelte-19brd9o")},m(d,h){me(d,t,h),ne(t,n),ne(t,r),ne(t,o),a||(u=os(n,"change",e[2]),a=!0)},p(d,[h]){h&1&&(n.checked=d[0]),h&2&&i!==(i=wl(d[1]?"visible":"hidden")+" svelte-19brd9o")&&ie(t,"class",i)},i:ze,o:ze,d(d){d&&pe(t),a=!1,u()}}}function Cw(e){e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}function O5(){if(localStorage.getItem("theme")==="dark")return!0;if(localStorage.getItem("theme")==="light")return!1;let e=window.matchMedia("(prefers-color-scheme: dark)").matches;return localStorage.setItem("systemTheme",e?"dark":"light"),e}function R5(e,t,n){let r=!1,o=!1;function i(){n(0,r=!r),localStorage.getItem("systemTheme")=="dark"&&r||localStorage.getItem("systemTheme")=="light"&&!r?localStorage.removeItem("theme"):localStorage.setItem("theme",r?"dark":"light"),Cw(r)}return Ot(()=>{n(0,r=O5()),n(1,o=!0);let a=window.matchMedia("(prefers-color-scheme: dark)"),u=d=>{localStorage.setItem("systemTheme",d.matches?"dark":"light"),localStorage.getItem("theme")||(n(0,r=d.matches),Cw(r))};return a.addEventListener?a.addEventListener("change",u):a.addListener(u),()=>{a.removeEventListener?a.removeEventListener("change",u):a.removeListener(u)}}),[r,o,i]}var ch=class extends nt{constructor(t){super(),ct(this,t,R5,N5,tt,{})}},Pw=ch;function Nw(e){let t;return{c(){t=ae("div"),t.innerHTML=`<h1>Oracolo</h1> <h2>Missing config!</h2>
    You need to set (at least) the<strong>author meta tag</strong> by updating this html file! Open it
    with an editor, look at the first lines and personalize them.`,ie(t,"class","unfinished-setup")},m(n,r){me(n,t,r)},d(n){n&&pe(t)}}}function Ow(e){let t=e[0],n,r,o=Rw(e);return{c(){o.c(),n=kt()},m(i,a){o.m(i,a),me(i,n,a),r=!0},p(i,a){a&1&&tt(t,t=i[0])?(ht(),$e(o,1,1,ze),pt(),o=Rw(i),o.c(),Ee(o,1),o.m(n.parentNode,n)):o.p(i,a)},i(i){r||(Ee(o),r=!0)},o(i){$e(o),r=!1},d(i){i&&pe(n),o.d(i)}}}function D5(e){let t,n;return t=new Lw({props:{id:e[0],profile:e[1]}}),{c(){gt(t.$$.fragment)},m(r,o){st(t,r,o),n=!0},p(r,o){let i={};o&1&&(i.id=r[0]),o&2&&(i.profile=r[1]),t.$set(i)},i(r){n||(Ee(t.$$.fragment,r),n=!0)},o(r){$e(t.$$.fragment,r),n=!1},d(r){at(t,r)}}}function F5(e){let t,n;return t=new af({props:{tag:e[0],profile:e[1]}}),{c(){gt(t.$$.fragment)},m(r,o){st(t,r,o),n=!0},p(r,o){let i={};o&1&&(i.tag=r[0]),o&2&&(i.profile=r[1]),t.$set(i)},i(r){n||(Ee(t.$$.fragment,r),n=!0)},o(r){$e(t.$$.fragment,r),n=!1},d(r){at(t,r)}}}function j5(e){let t,n;return t=new af({props:{tag:"",profile:e[1]}}),{c(){gt(t.$$.fragment)},m(r,o){st(t,r,o),n=!0},p(r,o){let i={};o&2&&(i.profile=r[1]),t.$set(i)},i(r){n||(Ee(t.$$.fragment,r),n=!0)},o(r){$e(t.$$.fragment,r),n=!1},d(r){at(t,r)}}}function Rw(e){let t,n,r,o,i,a=[j5,F5,D5],u=[];function d(h,m){return m&1&&(t=null),h[0]===""?0:(t==null&&(t=!!h[0].startsWith("tags/")),t?1:2)}return n=d(e,-1),r=u[n]=a[n](e),{c(){r.c(),o=kt()},m(h,m){u[n].m(h,m),me(h,o,m),i=!0},p(h,m){let w=n;n=d(h,m),n===w?u[n].p(h,m):(ht(),$e(u[w],1,1,()=>{u[w]=null}),pt(),r=u[n],r?r.p(h,m):(r=u[n]=a[n](h),r.c()),Ee(r,1),r.m(o.parentNode,o))},i(h){i||(Ee(r),i=!0)},o(h){$e(r),i=!1},d(h){h&&pe(o),u[n].d(h)}}}function Uw(e){let t,n=e[3].join(", ")+"",r;return{c(){t=Me("This page connects to some servers (Nostr relays) to retrieve data: "),r=Me(n)},m(o,i){me(o,t,i),me(o,r,i)},p(o,i){i&8&&n!==(n=o[3].join(", ")+"")&&Ze(r,n)},d(o){o&&(pe(t),pe(r))}}}function H5(e){let t,n=e[1]&&Object.keys(e[1]).length>0,r,o,i,a,u,d,h,m,w,x,P,I,S,N,z,B,f,p,b,v=e[2]&&Nw(e),k=n&&Ow(e),A=e[3]&&Uw(e);return B=new Pw({}),{c(){v&&v.c(),t=Ne(),k&&k.c(),r=Ne(),o=ae("div"),i=Me("This blog is powered by "),a=ae("a"),a.textContent="Oracolo",u=Me(` and Nostr,
  `),d=ae("a"),d.textContent="read more",h=ae("br"),m=ae("br"),w=Me(`

  Would you like to host this website yourself? It's just one HTML file,
  `),x=ae("button"),x.textContent="download it",P=Me("."),I=ae("br"),S=ae("br"),N=Ne(),A&&A.c(),z=Ne(),gt(B.$$.fragment),ie(a,"href","https://github.com/dtonon/oracolo"),ie(d,"href","https://njump.me"),ie(x,"class","link-button"),ie(o,"class","footer")},m(T,U){v&&v.m(T,U),me(T,t,U),k&&k.m(T,U),me(T,r,U),me(T,o,U),ne(o,i),ne(o,a),ne(o,u),ne(o,d),ne(o,h),ne(o,m),ne(o,w),ne(o,x),ne(o,P),ne(o,I),ne(o,S),ne(o,N),A&&A.m(o,null),me(T,z,U),st(B,T,U),f=!0,p||(b=os(x,"click",e[4]),p=!0)},p(T,[U]){T[2]?v||(v=Nw(T),v.c(),v.m(t.parentNode,t)):v&&(v.d(1),v=null),U&2&&(n=T[1]&&Object.keys(T[1]).length>0),n?k?(k.p(T,U),U&2&&Ee(k,1)):(k=Ow(T),k.c(),Ee(k,1),k.m(r.parentNode,r)):k&&(ht(),$e(k,1,1,()=>{k=null}),pt()),T[3]?A?A.p(T,U):(A=Uw(T),A.c(),A.m(o,null)):A&&(A.d(1),A=null)},i(T){f||(Ee(k),Ee(B.$$.fragment,T),f=!0)},o(T){$e(k),$e(B.$$.fragment,T),f=!1},d(T){T&&(pe(t),pe(r),pe(o),pe(z)),v&&v.d(T),k&&k.d(T),A&&A.d(),at(B,T),p=!1,b()}}}function V5(e,t,n){let r="",o,i=!1,a="",u="",d,h=!1;Ot(()=>{let P=new URLSearchParams(window.location.search).get("download")==="true";wi().then(async({npub:I,readRelays:S,writeRelays:N,comments:z})=>{if(n(3,d=Array.from(new Set(S.concat(N)))),h=z,h)try{await Promise.resolve().then(()=>(Iw(),M5)),console.log("window.nostr.js has been successfully loaded")}catch(B){console.error("Failed to load window.nostr.js:",B)}m(),window.addEventListener("hashchange",m),n(1,o=await jo(I)),o?(a=o.metadata.name||o.shortName,u=o.image||null,P&&setTimeout(()=>{bd()},500)):n(2,i=!0)})}),_l(()=>{window.removeEventListener("hashchange",m)});function m(){let x=window.location.hash.substring(1);x!==r&&n(0,r=x)}return[r,o,i,d,()=>bd()]}var uh=class extends nt{constructor(t){super(),ct(this,t,V5,H5,tt,{})}},zw=uh;console.log("running");var Mw=new zw({target:document.getElementById("app")}),eP=Mw;window.destroySvelteApp=()=>Mw.$destroy();})();
/*! Bundled license information:

showdown/dist/showdown.js:
  (*! showdown v 2.1.0 - 21-04-2022 *)

window.nostr.js/dist/window.nostr.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)
  (*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@scure/base/lib/esm/index.js:
  (*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@splidejs/splide/dist/js/splide.esm.js:
  (*!
   * Splide.js
   * Version  : 4.1.4
   * License  : MIT
   * Copyright: 2022 Naotoshi Fujita
   *)

zapthreads/dist/zapthreads.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
  (*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/

    </script>
<style>
html{font-size:20px}@media only screen and (max-width: 768px){html{font-size:18px}}body{margin:0;padding:0}html.dark body{background-color:#242424;color:#cbcbcb}#app{box-sizing:border-box;width:80%;max-width:900px;margin:2rem auto;font-family:PT Sans,sans-serif;color:#242424}@media only screen and (max-width: 768px){#app{width:100%;padding:0 1rem;max-width:unset}}html.dark #app{background-color:#242424;color:#ebebeb}a,a:visited{color:#242424}html.dark a,html.dark a:visited{color:#f5f5f5}

/*     */
@keyframes titleGradient {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

h1 {
  font-size: 2.5rem;
  line-height: 1.1;
  margin: 1.5rem 0;
  background: linear-gradient(135deg, #ff6b6b, #3a86ff, #8338ec);
  background-size: 300% 300%;
  color: transparent;
  -webkit-background-clip: text;
  background-clip: text;
  animation: titleGradient 8s ease infinite, float 4s ease-in-out infinite;
  display: inline-block;
  padding: 0.2rem 0;
  position: relative;
}

h1::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 3px;
  background: linear-gradient(90deg, transparent, #3a86ff, transparent);
  transform: scaleX(0);
  transform-origin: right;
  transition: transform 0.4s ease-in-out;
}

h1:hover::after {
  transform: scaleX(1);
  transform-origin: left;
}

h2 {
  font-size: 1.8rem;
  margin: 1.2rem 0;
  position: relative;
  display: inline-block;
  color: #242424;
  transition: all 0.3s ease;
}

html.dark h2 {
  color: #ebebeb;
}

h2::before {
  content: '';
  position: absolute;
  width: calc(100% + 20px);
  height: 100%;
  left: -10px;
  top: 0;
  background: rgba(58, 134, 255, 0.1);
  z-index: -1;
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.3s ease;
  border-radius: 4px;
}

h2:hover {
  transform: translateX(5px);
}

h2:hover::before {
  transform: scaleX(1);
}

h3 {
  font-size: 1.4rem;
  margin: 1rem 0;
  padding-left: 1rem;
  border-left: 4px solid #ff6b6b;
  transition: all 0.3s ease;
}

h3:hover {
  padding-left: 1.5rem;
  color: #ff6b6b;
}

@media only screen and (max-width: 768px){
  h1{font-size:2rem}
  h2{font-size:1.5rem}
  h3{font-size:1.2rem}
}

ol,ul{padding-left:1rem;margin:0}ol li,ul li{margin-bottom:1rem}blockquote{margin:0;padding-left:1rem;border-left:8px solid #ebebeb}code{font-size:.9rem;padding:0 .4rem;border-radius:.2rem;background-color:#f6f6f6}html.dark code{background-color:#3e3e3e}pre code{overflow:scroll;display:block;padding:1rem .5rem;border-radius:.2rem}.unfinished-setup{width:80%;margin:0 auto;text-align:center}.header.home h1{font-size:3rem}.header .external-link{text-align:right;margin-top:-1rem;font-size:.8em;color:#cbcbcb}@media only screen and (max-width: 768px){.header .external-link{margin-bottom:1rem;margin-right:2.5rem}}.header .external-link a{text-decoration:underline;color:#cbcbcb}.header .picture-container{position:relative;display:inline-block;width:2.5rem;height:2.5rem;overflow:hidden;border-radius:50%;margin-bottom:-.25rem}.header .picture-container img{position:absolute;top:50%;left:50%;width:100%;height:100%;object-fit:cover;transform:translate(-50%,-50%);clip-path:circle(50%)}.header.note{margin-bottom:2rem}.header.note .picture-container{width:1.5rem;height:1.5rem;margin-bottom:-.4rem}.header a{text-decoration:none}.header a span{text-decoration:underline}html.dark .header a:visited{color:#cbcbcb}html.dark .header .external-link,html.dark .header .external-link a{color:#747474}.topic-wrapper{margin-bottom:1.5rem;display:flex;flex-direction:row;flex-wrap:wrap;row-gap:1rem}.topic-wrapper div{display:inline-grid;margin-right:1rem}.topic-wrapper div a{padding:.4rem 1rem;background-color:#e0e0e0;text-decoration:none;border-radius:4px}.topic-wrapper div a:hover{background-color:#ebebeb}.topic-wrapper div a.selected{background-color:#242424;color:#f5f5f5}html.dark .topic-wrapper div a{background-color:#747474;color:#242424}html.dark .topic-wrapper div a:hover{background-color:#f5f5f5}html.dark .topic-wrapper div a.selected{background-color:#cbcbcb}.externalLink{display:block;text-align:right;margin-top:-1rem;font-size:.8em;color:#cbcbcb}.externalLink a{color:#cbcbcb}.link-button{background:none;border:none;text-decoration:underline;cursor:pointer;padding:0;font:inherit;color:inherit}.link-button:hover{text-decoration:none}.link-button:focus{outline:none}.about{margin-bottom:2rem;padding-bottom:1rem;border-bottom:8px solid #ebebeb}html.dark .about{border-bottom:8px solid #373737}.separator{margin-bottom:2rem;border-bottom:8px solid #ebebeb}html.dark .separator{border-bottom:8px solid #373737}.block{border-bottom:8px solid #f5f5f5;margin-bottom:1.5rem;padding-bottom:1.5rem;color:#747474}.block .grid{display:flex;padding-top:.5rem;flex-wrap:wrap;justify-content:space-between;gap:2rem;width:100%}@media only screen and (max-width: 768px){.block .grid{display:block}}@media only screen and (max-width: 768px){.block .grid{padding-bottom:0rem}}.block .grid .item{flex:1 1 calc(50% - 2rem);box-sizing:border-box}@media only screen and (max-width: 768px){.block .grid .item{margin-bottom:2rem}}.block .grid .item a{text-decoration:none}.block .grid .item a:hover img{transform:scale(1.02)}.block .grid .item img{width:100%;object-fit:cover;margin-bottom:.5rem;border-radius:4px;transition:transform .3s ease}.block .grid .item .title{display:block;margin-bottom:.4rem;font-size:1.1rem;font-weight:bolder}.block .grid .item .summary{margin-bottom:.4rem;font-size:.9rem;word-break:break-all;color:#747474}.block .grid .item .date{font-size:.8rem;color:#a9a9a9}.block .grid .item .pinned{filter:grayscale(100%);font-size:.8rem;color:#494949}.block .grid.odd .item:first-child{flex:0 0 100%}.block.articles .grid .item img{height:240px}.block.articles .grid.odd .item:first-child img,.block.images .grid .item img{height:360px}.block.images .grid.odd .item:first-child img{height:auto}.block .list{margin-top:1rem}.block .list.short-feed-full li{margin-bottom:2rem}.block .list.short-feed-full .summary{color:#242424;font-size:.9rem;word-break:break-all}.block .list ul{list-style-type:none;padding:0;margin:0}.block .list ul li{margin-bottom:1rem}.block .list ul li:last-child{margin-bottom:0}.block .list ul li a{display:block;text-decoration:none}.block .list ul li a:hover{padding-left:12px;margin-left:-20px;border-left:8px solid #747474}.block .list ul li a:hover .summary{color:#242424}.block .list ul li h2{font-size:1.1rem;margin-bottom:.3rem}.block .list ul li .summary{margin-bottom:.4rem;font-size:.9rem;overflow-wrap:break-word;color:#747474}.block .list ul li .date{font-size:.8rem;color:#a9a9a9}.block .slide .splide__slide{font-size:.9rem;overflow-wrap:break-word}.block .slide .splide__slide a{text-decoration:none}.block .slide .splide__slide .date{font-size:.8rem;color:#a9a9a9;margin-bottom:.3rem}.block .slide .splide__arrow--prev{left:-3em}.block .slide .splide__arrow--next{right:-3em}@media only screen and (max-width: 768px){.block .slide .splide__arrow--prev,.block .slide .splide__arrow--next{display:none}}.block .slide .splide__arrow{background:none}.block .slide .splide__arrow svg{fill:#a9a9a9}html.dark .block{border-bottom:8px solid #373737}html.dark .block .grid{color:#cbcbcb}html.dark .block .grid .summary{color:#a6a6a6}html.dark .block .grid .date,html.dark .block .grid .pinned{color:#777}html.dark .block .list{color:#cbcbcb}html.dark .block .list.short-feed-full .summary{color:#fff}html.dark .block .list .summary{color:#a6a6a6}html.dark .block .list .date,html.dark .block .list .pinned{color:#777}html.dark .block .list a:hover{border-color:#747474}html.dark .block .list a:hover .summary{color:#f5f5f5}html.dark .block .slide a{color:#cbcbcb}.event-wrapper{position:relative;overflow-wrap:break-word}.event-wrapper h1,.event-wrapper h2,.event-wrapper h3{display:block;margin-top:1.4rem;margin-bottom:.6rem}.event-wrapper h1:first-of-type{margin-top:0rem}.event-wrapper .content{margin-top:1.5rem}.event-wrapper p{line-height:1.3rem;margin-top:0rem}.event-wrapper .date{display:block;margin-bottom:.5rem;font-size:.8rem;color:#a9a9a9}.event-wrapper img{display:block;margin:2rem auto;max-width:100%;border-radius:4px}.event-wrapper img.note-banner{margin:2.5rem auto 3.5rem;transform:scale(1.04);width:100%;object-fit:cover;max-height:50vh}.event-wrapper img.note-image{margin:0;margin-top:1.5rem;width:100%}.event-wrapper video{width:100%;margin:2rem auto}.event-wrapper audio{width:100%;margin:2rem auto}.footer{margin-top:4rem;padding-top:2rem;margin-bottom:2rem;border-top:8px solid #ebebeb;font-size:.8rem;text-align:center;color:#cbcbcb}.footer a{color:#cbcbcb}html.dark .footer{border-top:8px solid #373737;color:#747474}html.dark .footer a,html.dark .footer a:visited{color:#747474}zap-threads{font-size:.9rem}.loader-container.svelte-mae19q{display:flex;align-items:center;justify-content:center;height:80vh;background-color:#fafafa}html.dark .loader-container.svelte-mae19q{background-color:#2e2e2e}.loader.svelte-mae19q{display:inline-block;width:92px;height:92px;opacity:0;animation:svelte-mae19q-fade-in .5s .4s forwards,svelte-mae19q-loader-animation 2s linear infinite .4s}.loader.svelte-mae19q:after{content:" ";display:block;width:64px;height:64px;margin:8px;border-radius:50%;border:6px solid #a9a9a9;border-color:#a9a9a9 transparent #a9a9a9 transparent;animation:svelte-mae19q-loader-animation 2s linear infinite}html.dark .loader.svelte-mae19q:after{border:6px solid #373737;border-color:#373737 transparent #373737 transparent}@keyframes svelte-mae19q-loader-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes svelte-mae19q-fade-in{to{opacity:1}}.splide__container{box-sizing:border-box;position:relative}.splide__list{backface-visibility:hidden;display:-ms-flexbox;display:flex;height:100%;margin:0!important;padding:0!important}.splide.is-initialized:not(.is-active) .splide__list{display:block}.splide__pagination{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:center;justify-content:center;margin:0;pointer-events:none}.splide__pagination li{display:inline-block;line-height:1;list-style-type:none;margin:0;pointer-events:auto}.splide:not(.is-overflow) .splide__pagination{display:none}.splide__progress__bar{width:0}.splide{position:relative;visibility:hidden}.splide.is-initialized,.splide.is-rendered{visibility:visible}.splide__slide{backface-visibility:hidden;box-sizing:border-box;-ms-flex-negative:0;flex-shrink:0;list-style-type:none!important;margin:0;position:relative}.splide__slide img{vertical-align:bottom}.splide__spinner{animation:splide-loading 1s linear infinite;border:2px solid #999;border-left-color:transparent;border-radius:50%;contain:strict;display:inline-block;height:20px;inset:0;margin:auto;position:absolute;width:20px}.splide__sr{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.splide__toggle.is-active .splide__toggle__play,.splide__toggle__pause{display:none}.splide__toggle.is-active .splide__toggle__pause{display:inline}.splide__track{overflow:hidden;position:relative;z-index:0}@keyframes splide-loading{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.splide__track--draggable{-webkit-touch-callout:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.splide__track--fade>.splide__list>.splide__slide{margin:0!important;opacity:0;z-index:0}.splide__track--fade>.splide__list>.splide__slide.is-active{opacity:1;z-index:1}.splide--rtl{direction:rtl}.splide__track--ttb>.splide__list{display:block}.splide__arrow{-ms-flex-align:center;align-items:center;background:#ccc;border:0;border-radius:50%;cursor:pointer;display:-ms-flexbox;display:flex;height:2em;-ms-flex-pack:center;justify-content:center;opacity:.7;padding:0;position:absolute;top:50%;transform:translateY(-50%);width:2em;z-index:1}.splide__arrow svg{fill:#000;height:1.2em;width:1.2em}.splide__arrow:hover:not(:disabled){opacity:.9}.splide__arrow:disabled{opacity:.3}.splide__arrow:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide__arrow--prev{left:1em}.splide__arrow--prev svg{transform:scaleX(-1)}.splide__arrow--next{right:1em}.splide.is-focus-in .splide__arrow:focus{outline:3px solid #0bf;outline-offset:3px}.splide__pagination{bottom:.5em;left:0;padding:0 1em;position:absolute;right:0;z-index:1}.splide__pagination__page{background:#ccc;border:0;border-radius:50%;display:inline-block;height:8px;margin:3px;opacity:.7;padding:0;position:relative;transition:transform .2s linear;width:8px}.splide__pagination__page.is-active{background:#fff;transform:scale(1.4);z-index:1}.splide__pagination__page:hover{cursor:pointer;opacity:.9}.splide__pagination__page:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide.is-focus-in .splide__pagination__page:focus{outline:3px solid #0bf;outline-offset:3px}.splide__progress__bar{background:#ccc;height:3px}.splide__slide{-webkit-tap-highlight-color:rgba(0,0,0,0)}.splide__slide:focus{outline:0}@supports (outline-offset:-3px){.splide__slide:focus-visible{outline:3px solid #0bf;outline-offset:-3px}}@media screen and (-ms-high-contrast:none){.splide__slide:focus-visible{border:3px solid #0bf}}@supports (outline-offset:-3px){.splide.is-focus-in .splide__slide:focus{outline:3px solid #0bf;outline-offset:-3px}}@media screen and (-ms-high-contrast:none){.splide.is-focus-in .splide__slide:focus{border:3px solid #0bf}.splide.is-focus-in .splide__track>.splide__list>.splide__slide:focus{border-color:#0bf}}.splide__toggle{cursor:pointer}.splide__toggle:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide.is-focus-in .splide__toggle:focus{outline:3px solid #0bf;outline-offset:3px}.splide__track--nav>.splide__list>.splide__slide{border:3px solid transparent;cursor:pointer}.splide__track--nav>.splide__list>.splide__slide.is-active{border:3px solid #000}.splide__arrows--rtl .splide__arrow--prev{left:auto;right:1em}.splide__arrows--rtl .splide__arrow--prev svg{transform:scaleX(1)}.splide__arrows--rtl .splide__arrow--next{left:1em;right:auto}.splide__arrows--rtl .splide__arrow--next svg{transform:scaleX(-1)}.splide__arrows--ttb .splide__arrow{left:50%;transform:translate(-50%)}.splide__arrows--ttb .splide__arrow--prev{top:1em}.splide__arrows--ttb .splide__arrow--prev svg{transform:rotate(-90deg)}.splide__arrows--ttb .splide__arrow--next{bottom:1em;top:auto}.splide__arrows--ttb .splide__arrow--next svg{transform:rotate(90deg)}.splide__pagination--ttb{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;inset:0 .5em 0 auto;padding:1em 0}.hidden.svelte-19brd9o.svelte-19brd9o{visibility:hidden}.visible.svelte-19brd9o.svelte-19brd9o{visibility:visible}#theme-toggle.svelte-19brd9o.svelte-19brd9o{display:none}#theme-toggle.svelte-19brd9o+label.svelte-19brd9o{display:inline-block;cursor:pointer;height:1rem;width:1rem;position:absolute;top:1rem;right:3rem;border-radius:9px;transition-duration:.3s;content:"";@media only screen and (max-width: 768px){right:1rem}}#theme-toggle.svelte-19brd9o:not(:checked)+label.svelte-19brd9o{background-color:#ccc}#theme-toggle.svelte-19brd9o:checked+label.svelte-19brd9o{background-color:transparent;box-shadow:inset -6px -6px 1px 1px #3f3f3f}
</style>
  </body>
</html>
